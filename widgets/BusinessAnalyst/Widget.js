// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/BusinessAnalyst/BAWizard":function(){define("dojo/_base/array dojo/_base/declare dojo/on dojo/when esri/dijit/geoenrichment/_Wizard esri/geometry/webMercatorUtils ./CreateBuffersPage ./ErrorPage ./RunReportsPage ./SelectPointPolygonPage ./utils/GEUtil ./utils/GeocodeUtil".split(" "),function(t,p,l,k,g,e,a,d,c,b,f,h){return p([g],{selectedPoint:{tradeAreas:[]},selectedPolygon:{},selectedCountryID:"",availableCountries:[],drawnPolygonGraphic:null,name:"BusinessAnalystWizard",
baseClass:"jimu-widget-business-analyst-wizard",postCreate:function(){this.inherited(arguments);var m=this;k(f.checkCapabilities(this.appConfig),function(n){n.hasPrivilege&&n.geServiceConfigured&&n.dirRoutingServiceConfigured?(m.pages.SELECT_POINT_POLYGON=new b({map:m.map,nls:m.nls,wizard:m,config:m.config,onNext:function(){m._loadCreateBuffersPage()}}),m.pages.CREATE_BUFFERS=new a({map:m.map,nls:m.nls,wizard:m,config:m.config,onBack:function(){m._loadSelectPointPolygonPage()},onNext:function(){m._loadRunReportsPage()}}),
m.pages.CREATE_BUFFERS.startup(),m.pages.RUN_REPORTS=new c({map:m.map,nls:m.nls,wizard:m,appConfig:m.appConfig,config:m.config,onBack:function(){m.selectedPoint.geometry?m._loadCreateBuffersPage():m._loadSelectPointPolygonPage()}}),m.loadPage("SELECT_POINT_POLYGON"),m.own(l(m.map.infoWindow,"Show",function(){m._featureSelected()})),m.own(l(m.map.infoWindow,"Hide",function(){m._featureUnselected()})),m.own(l(m.map.infoWindow,"set-features",function(){m._featureSelected()})),m.own(l(m.map.infoWindow,
"selection-change",function(){m._featureSelected()})),m.selectedCountryID=m.config.defaultCountryID,k(f.getAvailableCountries(),function(q){m.availableCountries=q.countries;m.setSelectedCountry(m.selectedCountryID)}),m.map.infoWindow&&m.map.infoWindow.features&&0<m.map.infoWindow.features.length&&m._featureSelected()):(m.pages.ERROR_PAGE=new d({nls:m.nls,displayErrors:{gePrivilege:!n.hasPrivilege,geServiceNotConfigured:!n.geServiceConfigured,dirRoutingServiceNotConfigured:!n.dirRoutingServiceConfigured}}),
m.pages.ERROR_PAGE.startup(),m.loadPage("ERROR_PAGE"))})},startup:function(){},resize:function(){this.pages.SELECT_POINT_POLYGON&&this.pages.SELECT_POINT_POLYGON.resize()},clearSelectedPointBuffers:function(){var m=this;t.forEach(this.selectedPoint.tradeAreas,function(n){n&&n.graphic&&m.map.graphics.remove(n.graphic)});this.selectedPoint.tradeAreas=[]},clearSelectedPoint:function(){this.clearSelectedPointBuffers();this.map.graphics.remove(this.selectedPoint.pointGraphic);this.selectedPoint={tradeAreas:[]}},
clearSelectedPolygon:function(){this.selectedPolygon={};this.drawnPolygonGraphic&&(this.map.infoWindow.clearFeatures(),this.map.graphics.remove(this.drawnPolygonGraphic),this.drawnPolygonGraphic=null)},setSelectedCountry:function(m){var n=this;3==m.length?t.forEach(this.availableCountries,function(q){q.abbr3==m&&(n.selectedCountryID=q.id)}):2==m.length&&(this.selectedCountryID=m);this.pages.RUN_REPORTS.loadReportsInfographicsForCountry(this.selectedCountryID)},_loadSelectPointPolygonPage:function(){this.clearSelectedPoint();
this.clearSelectedPolygon();this.loadPage("SELECT_POINT_POLYGON");this.resize()},_loadCreateBuffersPage:function(){this.loadPage("CREATE_BUFFERS");this.pages.CREATE_BUFFERS.refresh()},_loadRunReportsPage:function(){this.loadPage("RUN_REPORTS");this.pages.RUN_REPORTS.refresh()},refreshPage:function(){this.currentPage&&this.currentPage.refresh&&this.currentPage.refresh()},_featureSelected:function(){var m=this,n=-1<this.map.infoWindow.selectedIndex&&this.map.infoWindow.features&&this.map.infoWindow.features[this.map.infoWindow.selectedIndex];
if(!n)this.clearSelectedPoint(),this.clearSelectedPolygon();else if((this.selectedPoint.geometry?this.selectedPoint.geometry:this.selectedPolygon.geometry)!==n.geometry)if(this.clearSelectedPoint(),this.clearSelectedPolygon(),"point"===n.geometry.type){this.selectedPoint.geometry=n.geometry;this.selectedPoint.locationName=this._getFeatureName(n);this.selectedPoint.attributes=n.attributes?n.attributes:{};var q=e.xyToLngLat(n.geometry.x,n.geometry.y);this.selectedPoint.long=q[0].toFixed(5);this.selectedPoint.lat=
q[1].toFixed(5);k(h.reverseGeocode({x:q[0],y:q[1]}),function(r){m.setSelectedCountry(r.address.CountryCode);m._loadCreateBuffersPage()})}else"polygon"==n.geometry.type?(this.selectedPolygon.geometry=n.geometry,this.selectedPolygon.locationName=this._getFeatureName(n),this.selectedPolygon.feature=n,q=n.geometry.getCentroid(),q=e.xyToLngLat(q.x,q.y),k(f.getCountryForPolygon(n.geometry,this.config,this.selectedCountryID),function(r){m.setSelectedCountry(r);m._loadRunReportsPage()})):m._loadSelectPointPolygonPage()},
_featureUnselected:function(){this.clearSelectedPoint();this.clearSelectedPolygon();this.pages.SELECT_POINT_POLYGON.search&&this.pages.SELECT_POINT_POLYGON.search.clear();this._loadSelectPointPolygonPage()},_getFeatureName:function(m){return m.getTitle()?m.getTitle():m._layer.displayField&&m.attributes[m._layer.displayField]?m.attributes[m._layer.displayField]:""}})})},"esri/dijit/geoenrichment/_Wizard":function(){define(["esri/declare","dojo/_base/lang","dojo/dom-construct","dijit/_WidgetBase","./utils/animation/AnimationHelper"],
function(t,p,l,k,g){return t("esri.dijit.geoenrichment._Wizard",k,{currentPage:null,currentPageId:null,_anim:null,pages:null,stacking:"stretch",constructor:function(){this.pages={};this._anim=new g},buildRendering:function(){this.domNode=l.create("div",{"class":"_Wizard_Root"})},loadPage:function(e){var a=this.pages[e],d=this.currentPage;a!==d&&(this._anim.finish(),d&&this._animPage("Anim_FadeOut").then(p.hitch(this.domNode,"removeChild",d.domNode)),this.currentPage=a,this.currentPageId=e,l.place(this.currentPage.domNode,
this.domNode,"first"),d&&this._animPage("Anim_FadeIn"),a._started||(a.set("stacking",this.stacking),a.startup()),a.resize())},_animPage:function(e){return this._anim.start([{node:this.currentPage.domNode,classes:[e,"Wizard_FadeAnim"]}])},resize:function(){this.currentPage&&this.currentPage.resize()},destroy:function(){for(var e in this.pages)this.hasOwnProperty(e)&&this.pages[e].destroyRecursive();this.pages={};this.inherited(arguments)}})})},"esri/declare":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./extend"],function(t,p,l){return function(k,g,e){var a=p.isString(k);a?e.declaredClass=k:(e=g,g=k);g=t(g,e);a&&l(k,g);return g}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(t,p,l){return function(k,g){p("extend-esri")&&(k=k.substring(k.indexOf(".")+1),t.setObject(k,g,l))}})},"esri/dijit/geoenrichment/utils/animation/AnimationHelper":function(){define("esri/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/sniff dojo/on esri/dijit/geoenrichment/Deferred".split(" "),
function(t,p,l,k,g,e,a,d,c){var b=!(29>a("chrome")||23>a("ff")||6>a("safari")||10>a("ie"));var f=function(m,n){for(var q=function(w){var z=w.type;f=z;for(var E in r)E!==z&&(r[E].remove(),delete r[E]);n.apply(this,arguments)},r={},u=["animationend","webkitAnimationEnd"],v=0;v<u.length;v++)r[u[v]]=d(m,u[v],q);return{remove:function(){for(var w in r)r.hasOwnProperty(w)&&r[w].remove()}}};var h=t(null,{_oldNode:null,_targets:null,_deferred:null,start:function(m,n){this._oldNode=n;this._deferred=new c;
if(!b||!m.length||!m[0].node)return this.finish(),this._deferred.promise;this._targets=m;d.once(m[0].node,f,l.hitch(this,this.finish));for(n=0;n<m.length;n++){var q=m[n];k.add(q.node,q.classes);k.add(q.node,"Anim_Common")}return this._deferred.promise},finish:function(){if(this._targets){for(var m=0;m<this._targets.length;m++){var n=this._targets[m];n.node&&(k.remove(n.node,n.classes),k.remove(n.node,"Anim_Common"))}this._targets=null}this._oldNode&&(this.onNodePreDestroy(this._oldNode),g.destroy(this._oldNode),
this._oldNode=null);this._deferred.resolve()},onNodePreDestroy:function(m){}});return t(null,{progress:null,_items:null,_flySurfaceNode:null,_ltr:e.isBodyLtr(),constructor:function(m){this._flySurfaceNode=m;this._items=[]},start:function(m,n){var q=this,r=new h;r.onNodePreDestroy=function(u){q.onNodePreDestroy(u)};this._items.push(r);this.progress||(this.progress=new c);return r.start(m,n).then(l.hitch(this,this._onItemFinished,r))},_onItemFinished:function(m){m=p.indexOf(this._items,m);0<=m&&(this._items.splice(m,
1),0===this._items.length&&this.progress&&(this.progress.resolve(),this.progress=null))},finish:function(){for(var m=this._items;0<m.length;)m.pop().finish()},fly:function(m,n,q,r){r=r||m.cloneNode(!0);q||(q=["top",this._ltr?"left":"right"]);if(!b)return r;m=m.getBoundingClientRect();var u=this._flySurfaceNode.getBoundingClientRect();k.add(r,"Anim_FlyingObj");for(var v,w,z=0;z<q.length;z++){var E=q[z],F=m[E]-u[E];if("right"===E||"bottom"===E)F=-F;if("left"===E&&!this._ltr||"right"===E&&this._ltr)v=
E,w=F;r.style[E]=F+"px"}this._flySurfaceNode.appendChild(r);v&&(w+=m.width-r.getBoundingClientRect().width,r.style[v]=w+"px");this.start([{node:r,classes:[n]}],r);return r},onNodePreDestroy:function(m){}})})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(t){return t})},"widgets/BusinessAnalyst/CreateBuffersPage":function(){define("dojo/_base/declare dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin esri/dijit/geoenrichment/_WizardPage esri/geometry/Polygon esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/Color esri/graphic ./utils/GEUtil ./utils/TravelModeUtil ./utils/ValidationUtil ./utils/SiteUtil dojo/text!./CreateBuffersPage.html jimu/dijit/TabContainer3 dijit/form/TextBox".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r){return t([l,p,g,k],{templateString:q,postCreate:function(){this.inherited(arguments);this.tab=new r({tabs:[{title:this.nls.rings,content:this.ringsContentPane},{title:this.nls.driveTime,content:this.driveTimeContentPane},{title:this.nls.walkTime,content:this.walkTimeContentPane}],selected:this.nls.rings});this.tab.placeAt(this.ringDtWtTabContainer);this.tab.startup();this._setConfigDefaults()},startup:function(){this.inherited(arguments)},refresh:function(){this._showHideTabs()},
_setConfigDefaults:function(){this._setRadii(this.config.ringDefaults,this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3);this.ringsBufferUnits.set("value",this.config.ringUnitDefault);this._setRadii(this.config.driveTimeDefaults,this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3);this.driveTimeBufferUnits.set("value",this.config.driveTimeUnitDefault);this._setRadii(this.config.walkTimeDefaults,this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3);
this.walkTimeBufferUnits.set("value",this.config.walkTimeUnitDefault)},_showHideTabs:function(){this.config.ringDisabled&&this.tab.removeTab(this.nls.rings);this.config.driveTimeDisabled&&this.tab.removeTab(this.nls.driveTime);this.config.walkTimeDisabled&&this.tab.removeTab(this.nls.walkTime);this.tab.getSelectedTitle()===this.nls.rings&&this.config.ringDisabled&&this.tab.selectTab(this.nls.driveTime);this.tab.getSelectedTitle()===this.nls.driveTime&&this.config.driveTimeDisabled&&this.tab.selectTab(this.nls.walkTime);
this.tab.getSelectedTitle()===this.nls.walkTime&&this.config.walkTimeDisabled&&this.tab.selectTab(this.nls.driveTime)},applyBuffer:function(){if(this._validateInput()){this.shelter.show();var u=this,v=[[16,59,143,1],[0,204,51,1],[204,51,0,1]],w=0,z={},E="",F="",D="",B=10,y;this.tab.getSelectedTitle()===this.nls.rings?(z.areaType="RingBuffer",z.bufferUnits=this.ringsBufferUnits.get("value"),D=this.ringsBufferUnits._getDisplayedValueAttr(),z.bufferRadii=this._getRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,
this.ringsBufferRadii3),E=this.nls.ring):this.tab.getSelectedTitle()===this.nls.driveTime?(z.areaType="NetworkServiceArea",z.bufferUnits=this.driveTimeBufferUnits.get("value"),D=this.driveTimeBufferUnits._getDisplayedValueAttr(),z.bufferRadii=this._getRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3),E=this.nls.driveTime,F="Driving "+("Minutes"===z.bufferUnits?"Time":"Distance"),B=(y=z.bufferRadii?n.getMaxRadiusInKilometers(z,!1):0)&&Math.max(1,Math.log(y/8)*
Math.LOG2E),B=y*Math.min(B,5)):(z.areaType="NetworkServiceArea",z.bufferUnits=this.walkTimeBufferUnits.get("value"),D=this.walkTimeBufferUnits._getDisplayedValueAttr(),z.bufferRadii=this._getRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3),E=this.nls.walkTime,F="Walking "+("Minutes"===z.bufferUnits?"Time":"Distance"),B=(y=z.bufferRadii?n.getMaxRadiusInKilometers(z,!0):0)&&Math.max(1,Math.log(y/8)*Math.LOG2E),B=y*Math.min(B,3));var A=[];h.getTravelMode(F,B).then(function(H){H&&
(z.travelMode=H);f.createRingOrDriveTimes({geometry:u.wizard.selectedPoint.geometry,studyAreasOptions:z,sourceCountry:u.wizard.selectedCountryID}).then(function(G){u.wizard.clearSelectedPointBuffers();u.wizard.selectedPoint.areadesc2=E+u.nls.colon+" "+z.bufferRadii.join(", ")+" "+u.nls["headerDescription_"+D]+" "+u.nls.radii;G=G.results[0].value.FeatureSet[0].features.reverse();var I=z.bufferRadii.reverse(),L;for(L in G){var N=new e({rings:G[L].geometry.rings,spatialReference:{wkid:102100}});if(u.tab.getSelectedTitle()==
u.nls.rings)var O=new a(d.STYLE_SOLID,new d(d.STYLE_SOLID,new c(v[w]),2),new c([255,0,15,0]));else O=new c(v[w]),O.a=.5,O=new a(d.STYLE_SOLID,new d(d.STYLE_SOLID,new c(v[w]),2),O);N=new b(N,O);O={};O.graphic=N;O.name=u.wizard.selectedPoint.locationName+" - "+I[w]+" "+D;O.shortName=I[w]+" "+D;O.AREA_DESC=I[w]+" "+D;O.AREA_DESC2=E+u.nls.colon+" "+I[w]+" "+u.nls["headerDescription_"+D]+" "+u.nls.radius_lowercase;u.wizard.selectedPoint.tradeAreas.push(O);u.map.graphics.add(N);A.push(N);w++}u.wizard.selectedPoint.tradeAreas=
u.wizard.selectedPoint.tradeAreas.reverse();u.map.setExtent(u.wizard.selectedPoint.tradeAreas[u.wizard.selectedPoint.tradeAreas.length-1].graphic._extent);u.shelter.hide();u.onNext()},function(G){alert("Error: "+G);u.shelter.hide()})})}},backOnClick:function(){this.onBack()},_getRadii:function(u,v,w){u=u.get("value");v=v.get("value");w=w.get("value");var z=[];""!==u&&z.push(u);""!==v&&z.push(v);""!==w&&z.push(w);return z},_setRadii:function(u,v,w,z){0<u.length?v.set("value",u[0]):v.set("value","");
1<u.length?w.set("value",u[1]):w.set("value","");2<u.length?z.set("value",u[2]):z.set("value","")},_validateInput:function(){var u=!0;u=this.tab.getSelectedTitle()===this.nls.rings?m.validateInvalidValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,this.ringValidationErrorMessage,this.nls.thisEntryIsNotValid):this.tab.getSelectedTitle()===this.nls.driveTime?m.validateInvalidValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.driveTimeValidationErrorMessage,
this.nls.thisEntryIsNotValid):m.validateInvalidValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.walkTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);return u?(u=this.tab.getSelectedTitle()===this.nls.rings?m.validateMinMaxValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,m.MIN_RINGS_VALUE,m.MAX_RINGS_VALUE,this.ringValidationErrorMessage,this.nls.invalidValueRing):this.tab.getSelectedTitle()===this.nls.driveTime?m.validateMinMaxValues(this.driveTimeBufferRadii1,
this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,m.MIN_DTWT_VALUE,m.MAX_DTWT_VALUE,this.driveTimeValidationErrorMessage,this.nls.invalidValueDTWT):m.validateMinMaxValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,m.MIN_DTWT_VALUE,m.MAX_DTWT_VALUE,this.walkTimeValidationErrorMessage,this.nls.invalidValueDTWT))?!0:!1:!1}})})},"esri/dijit/geoenrichment/_WizardPage":function(){define("esri/declare dojo/_base/lang dojo/string dojox/mvc/Templated ./Grid ./ProgressHandler dojo/text!./templates/_WizardPage.html".split(" "),
function(t,p,l,k,g,e,a){return t("esri.dijit.geoenrichment._WizardPage",k,{buttonsNode:null,_progressHandler:null,buildRendering:function(){var d=this.templateString;d&&"\ufeff"==d[0]&&(d=d.substr(1));this.templateString=l.substitute(a,{content:d});this.inherited(arguments);this.layoutGrid.rows=[g.AUTO,g.AUTO,g.AUTO]},resize:function(){this.layoutGrid.resize()},_setStackingAttr:function(d){switch(d){case "stretch":this.layoutGrid.rows[1]=g.STRETCH;break;case "stack":this.layoutGrid.rows[1]=g.STACK}},
showProgress:function(d,c){this._progressHandler||(this._progressHandler=new e(this.progressDiv,{queryNode:this.domNode}),this.own(this._progressHandler));d=this._progressHandler.showProgress(d,"string"==typeof c?c:"");c=c?"function"==typeof c?c:this[c]:null;"function"==typeof c&&d.then(p.hitch(this,c));return d},cancelProgress:function(d){this._progressHandler&&this._progressHandler.cancelProgress("string"==typeof d?d:"")}})})},"dojox/mvc/Templated":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./at".split(" "),
function(t,p,l,k,g){return t("dojox.mvc.Templated",[l,k,g],{bindings:null,startup:function(){var e=p.isFunction(this.bindings)&&this.bindings.call(this)||this.bindings,a;for(a in e){var d=this[a],c=e[a];if(d)for(var b in c)d.set(b,c[b]);else console.warn("Widget with the following attach point was not found: "+a)}this.inherited(arguments)}})})},"dojox/mvc/at":function(){define(["dojo/_base/kernel","dojo/_base/lang","./sync","./_atBindingExtension"],function(t,p,l){t.experimental("dojox.mvc");t=function(k,
g){return{atsignature:"dojox.mvc.at",target:k,targetProp:g,bindDirection:l.both,direction:function(e){this.bindDirection=e;return this},transform:function(e){this.converter=e;return this},equals:function(e){this.equalsCallback=e;return this}}};t.from=l.from;t.to=l.to;t.both=l.both;return p.setObject("dojox.mvc.at",t)})},"dojox/mvc/sync":function(){define(["dojo/_base/lang","dojo/_base/config","dojo/_base/array","dojo/has"],function(t,p,l,k){function g(c,b,f,h,m,n,q,r,u,v){if(!(f(u,r)||"*"==m&&0>l.indexOf(h.get("properties")||
[q],q)||"*"==m&&q in(v||{}))){f="*"==m?q:m;if(k("mvc-bindings-log-api"))var w=a(h,f,n,q);try{u=c?c(u,b):u}catch(z){k("mvc-bindings-log-api")&&console.log("Copy from"+w.join(" to ")+" was not done as an error is thrown in the converter.");return}k("mvc-bindings-log-api")&&console.log(w.reverse().join(" is being copied from: ")+" (Value: "+u+" from "+r+")");t.isFunction(h.set)?h.set(f,u):h[f]=u}}var e=t.getObject("dojox.mvc",!0);k.add("mvc-bindings-log-api",(p.mvc||{}).debugBindings);var a=k("mvc-bindings-log-api")?
function(c,b,f,h){return[[f.canConvertToLoggable||!f.declaredClass?f:f.declaredClass,h].join(":"),[c.canConvertToLoggable||!c.declaredClass?c:c.declaredClass,b].join(":")]}:"";p={from:1,to:2,both:3};var d=function(c,b,f,h,m){var n=(m||{}).converter;if(n){var q={source:c,target:f};var r=n.format&&t.hitch(q,n.format);var u=n.parse&&t.hitch(q,n.parse)}var v=[],w=[],z=t.mixin({},c.constraints,f.constraints);n=(m||{}).bindDirection||e.both;var E=(m||{}).equals||d.equals;if(k("mvc-bindings-log-api"))var F=
a(c,b,f,h);if("*"==h){if("*"!=b)throw Error("Unmatched wildcard is specified between source and target.");m=f.get("properties");if(!m){m=[];for(var D in f)f.hasOwnProperty(D)&&"_watchCallbacks"!=D&&m.push(D)}w=f.get("excludes")}else m=[b];n&e.from&&(t.isFunction(c.set)&&t.isFunction(c.watch)?v.push(c.watch.apply(c,("*"!=b?[b]:[]).concat([function(B,y,A){g(r,z,E,f,h,c,B,y,A,w)}]))):k("mvc-bindings-log-api")&&console.log(F.reverse().join(" is not a stateful property. Its change is not reflected to ")+
"."),l.forEach(m,function(B){if("*"!=h||!(B in(w||{}))){var y=t.isFunction(c.get)?c.get(B):c[B];g(r,z,E,f,"*"==h?B:h,c,B,void 0,y)}}));n&e.to&&(n&e.from||l.forEach(m,function(B){if("*"!=h||!(B in(w||{}))){var y=t.isFunction(f.get)?f.get(h):f[h];g(u,z,E,c,B,f,"*"==h?B:h,void 0,y)}}),t.isFunction(f.set)&&t.isFunction(f.watch)?v.push(f.watch.apply(f,("*"!=h?[h]:[]).concat([function(B,y,A){g(u,z,E,c,b,f,B,y,A,w)}]))):k("mvc-bindings-log-api")&&console.log(F.join(" is not a stateful property. Its change is not reflected to ")+
"."));k("mvc-bindings-log-api")&&console.log(F.join(" is bound to: "));D={};D.unwatch=D.remove=function(){for(var B=null;B=v.pop();)B.unwatch();k("mvc-bindings-log-api")&&console.log(F.join(" is unbound from: "))};return D};t.mixin(e,p);return t.setObject("dojox.mvc.sync",t.mixin(d,{equals:function(c,b){return c===b||"number"==typeof c&&isNaN(c)&&"number"==typeof b&&isNaN(b)||t.isFunction((c||{}).getTime)&&t.isFunction((b||{}).getTime)&&c.getTime()==b.getTime()||(t.isFunction((c||{}).equals)?c.equals(b):
t.isFunction((b||{}).equals)?b.equals(c):!1)}},p))})},"dojox/mvc/_atBindingExtension":function(){define(["dojo/_base/config","dojo/has","dijit/_WidgetBase","./atBindingExtension"],function(t,p,l,k){p.add("mvc-extension-per-widget",(t.mvc||{}).extensionPerWidget);p("mvc-extension-per-widget")||k(l.prototype)})},"dojox/mvc/atBindingExtension":function(){define("dojo/aspect dojo/_base/array dojo/_base/lang dijit/_WidgetBase ./_atBindingMixin dijit/registry".split(" "),function(t,p,l,k,g){return function(e){p.forEach(arguments,
function(a){a.dataBindAttr?console.warn("Detected a widget or a widget class that has already been applied data binding extension. Skipping..."):(l._mixin(a,g.mixin),t.before(a,"postscript",function(d,c){this._dbpostscript(d,c)}),t.before(a,"startup",function(){this._started||this._startAtWatchHandles()}),t.before(a,"destroy",function(){this._stopAtWatchHandles()}),t.around(a,"set",function(d){return function(c,b){return c==g.prototype.dataBindAttr?this._setBind(b):"dojox.mvc.at"==(b||{}).atsignature?
this._setAtWatchHandle(c,b):d.apply(this,l._toArray(arguments))}}))});return arguments}})},"dojox/mvc/_atBindingMixin":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/has dojo/Stateful ./resolve ./sync".split(" "),function(t,p,l,k,g,e,a){function d(m){try{var n=require("dijit/registry")}catch(r){return}for(m=m.domNode&&m.domNode.parentNode;m;){if(m=n.getEnclosingWidget(m)){var q=m._relTargetProp||"target";if((p.isFunction(m.get)?m.get(q):m[q])||q in m.constructor.prototype)return m}m=
m&&m.domNode.parentNode}}function c(m,n,q,r,u){function v(){w.Two&&w.Two.unwatch();delete w.Two;var D=z&&(p.isFunction(z.get)?z.get(E):z[E]),B=e(m,D);D=e(q,D);k("mvc-bindings-log-api")&&(!B||/^rel:/.test(m)&&!z)&&f(m,n);k("mvc-bindings-log-api")&&(!D||/^rel:/.test(q)&&!z)&&f(q,r);B&&D&&(!/^rel:/.test(m)&&!/^rel:/.test(q)||z)&&(B.set&&B.watch||"*"!=n?null==n?(p.isFunction(D.set)?D.set(r,B):D[r]=B,k("mvc-bindings-log-api")&&console.log("dojox/mvc/_atBindingMixin set "+B+" to: "+b(D,r))):w.Two=a(B,n,
D,r,u):k("mvc-bindings-log-api")&&f(m,n))}var w={},z=d(q),E=z&&z._relTargetProp||"target";v();if(z&&/^rel:/.test(m)||/^rel:/.test(q)&&p.isFunction(z.set)&&p.isFunction(z.watch))w.rel=z.watch(E,function(D,B,y){B!==y&&(k("mvc-bindings-log-api")&&console.log("Change in relative data binding target: "+z),v())});var F={};F.unwatch=F.remove=function(){for(var D in w)w[D]&&w[D].unwatch(),delete w[D]};return F}var b=k("mvc-bindings-log-api")?function(m,n){return[m._setIdAttr||!m.declaredClass?m:m.declaredClass,
n].join(":")}:"",f=k("mvc-bindings-log-api")?function(m,n){console.warn(n+" could not be resolved"+("string"==typeof m?" with "+m:"")+".")}:"",h={dataBindAttr:"data-mvc-bindings",_dbpostscript:function(m,n){n=this._refs=(m||{}).refs||{};for(var q in m)if("dojox.mvc.at"==(m[q]||{}).atsignature){var r=m[q];delete m[q];n[q]=r}r=new g;var u=this;r.toString=function(){return"[Mixin value of widget "+u.declaredClass+", "+(u.id||"NO ID")+"]"};r.canConvertToLoggable=!0;this._startAtWatchHandles(r);for(q in n)void 0!==
r[q]&&((m=m||{})[q]=r[q]);this._stopAtWatchHandles()},_startAtWatchHandles:function(m){this.canConvertToLoggable=!0;var n=this._refs;if(n){var q=this._atWatchHandles=this._atWatchHandles||{};this._excludes=null;for(var r in n)n[r]&&"*"!=r&&(q[r]=c(n[r].target,n[r].targetProp,m||this,r,{bindDirection:n[r].bindDirection,converter:n[r].converter,equals:n[r].equalsCallback}));"dojox.mvc.at"==(n["*"]||{}).atsignature&&(q["*"]=c(n["*"].target,n["*"].targetProp,m||this,"*",{bindDirection:n["*"].bindDirection,
converter:n["*"].converter,equals:n["*"].equalsCallback}))}},_stopAtWatchHandles:function(){for(var m in this._atWatchHandles)this._atWatchHandles[m].unwatch(),delete this._atWatchHandles[m]},_setAtWatchHandle:function(m,n){if("ref"==m)throw Error(this+": 1.7 ref syntax used in conjunction with 1.8 dojox/mvc/at syntax, which is not supported.");var q=this._atWatchHandles=this._atWatchHandles||{};q[m]&&(q[m].unwatch(),delete q[m]);this._excludes=this[m]=null;this._started?q[m]=c(n.target,n.targetProp,
this,m,{bindDirection:n.bindDirection,converter:n.converter,equals:n.equalsCallback}):this._refs[m]=n},_setBind:function(m){m=eval("({"+m+"})");for(var n in m){var q=m[n];"dojox.mvc.at"!=(q||{}).atsignature?console.warn(n+" in "+dataBindAttr+" is not a data binding handle."):this._setAtWatchHandle(n,q)}},_getExcludesAttr:function(){if(this._excludes)return this._excludes;var m=[],n;for(n in this._atWatchHandles)"*"!=n&&m.push(n);return m},_getPropertiesAttr:function(){if(this.constructor._attribs)return this.constructor._attribs;
var m=["onClick"].concat(this.constructor._setterAttrs);t.forEach(["id","excludes","properties","ref","binding"],function(n){n=t.indexOf(m,n);0<=n&&m.splice(n,1)});return this.constructor._attribs=m}};h[h.dataBindAttr]="";l=l("dojox/mvc/_atBindingMixin",null,h);l.mixin=h;return l})},"dojox/mvc/resolve":function(){define(["dojo/_base/lang","dijit/registry","dojo/Stateful"],function(t,p){return t.setObject("dojox.mvc.resolve",function(l,k){if("string"==typeof l){var g=l.match(/^(expr|rel|widget):(.*)$/)||
[];try{l="rel"==g[1]?t.getObject(g[2]||"",!1,k):"widget"==g[1]?p.byId(g[2]):t.getObject(g[2]||l,!1,k)}catch(e){}}return l})})},"esri/dijit/geoenrichment/Grid":function(){define(["../../declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dijit/layout/_LayoutWidget"],function(t,p,l,k,g){var e=t("esri.dijit.geoenrichment.Grid",[g],{_placeholder:null,layout:function(){var a=this.getChildren(),d=[],c;for(c=0;c<this.rows.length;c++)d.push(0);p.add(this.domNode,"Grid_Measure");var b=[];for(c=
0;c<a.length;c++){var f=a[c];var h=f.row;f=f.domNode;f.style.position="absolute";p.add(f,"GridCell_Measure");var m=f.scrollHeight;p.remove(f,"GridCell_Measure");f=m;b.push(f);f>d[h]&&(d[h]=f)}h=k.getContentBox(this.domNode).h;p.remove(this.domNode,"Grid_Measure");c=this.rows;for(f=b=0;f<d.length;f++)switch(c[f]){case e.AUTO:h-=d[f];break;case e.STRETCH:case e.STACK:b++}if(1<b)throw Error("Multiple rows with flexible heights are not supported");b=[0];for(f=0;f<d.length;f++){switch(c[f]){case e.AUTO:var n=
d[f];break;case e.STRETCH:n=h;break;case e.STACK:n=Math.min(h,d[f])}b.push(b[f]+n)}for(c=0;c<a.length;c++)f=a[c],h=f.row,d=b[h+1]-b[h],n=f.domNode.style,n.top=b[h]+"px",n.height=d+"px";this._placeholder||(this._placeholder=l.create("div",null,this.domNode));this._placeholder.style.height=b[b.length-1]+"px"}});e.AUTO="auto";e.STRETCH="stretch";e.STACK="stack";return e})},"esri/dijit/geoenrichment/ProgressHandler":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/when","dojo/dom-class",
"dojo/query"],function(t,p,l,k){return t(null,{progressNode:null,progressPromises:null,busyClass:null,errorClass:null,_allStates:null,constructor:function(g,e){e=e||{};this.busyClass=e.busyClass||"Wizard_Loading";this.errorClass=e.errorClass||"Wizard_Error";this._allStates=[this.busyClass,this.errorClass];var a=e.progressClass||"Wizard_Progress";g?(this.progressNode=g,l.add(this.progressNode,a)):e.queryNode&&(this.progressNode=k("."+a,e.queryNode)[0]);this.progressPromises={}},showProgress:function(g,
e){function a(){if(d.progressPromises[e]===g)return delete d.progressPromises[e],!0}e=e||"";g=p(g);if(g.isFulfilled())return this.progressPromises[e]&&(delete this.progressPromises[e],this._setState("done")),g;this.progressPromises[e]=g;var d=this;this._setState("busy");g.then(function(){a()&&d._setState("done")},function(c){a()&&("CancelError"==c.name?d._setState("done"):d._setState("error",c.toString()))});return g},cancelProgress:function(g){g=g||"";this.progressPromises[g]&&this.progressPromises[g].cancel()},
_setState:function(g,e){!this.progressNode||"done"==g&&Object.keys(this.progressPromises).length||(this.progressNode.innerHTML=e||"",l.remove(this.progressNode,this._allStates),"done"!=g&&l.add(this.progressNode,this[g+"Class"]))},destroy:function(){for(var g=Object.keys(this.progressPromises),e=0;e<g.length;e++)this.cancelProgress(g[e])}})})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(t){return t})},"widgets/BusinessAnalyst/utils/GEUtil":function(){define("dojo/_base/array dojo/when esri/request ./GeocodeUtil esri/geometry/webMercatorUtils esri/dijit/geoenrichment/utils/FileUtil jimu/portalUtils".split(" "),
function(t,p,l,k,g,e,a){var d={},c={};return{getAvailableCountries:function(){return a.getPortal(portalUrl).loadSelfInfo().then(function(b){return l({url:(b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Countries",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},handleAs:"json"}).then(function(f){t.forEach(f.countries,function(h){t.forEach(h.hierarchies,
function(m){m.default&&(d[h.id]=m.ID)});c[h.id]=!!h.disableMultiHierarchySupport});return f})})},createRingOrDriveTimes:function(b){return a.getPortal(portalUrl).loadSelfInfo().then(function(f){return l({url:(f&&f.helperServices&&f.helperServices.geoenrichment&&f.helperServices.geoenrichment.url?f.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",useData:JSON.stringify({sourceCountry:b.sourceCountry}),
studyAreasOptions:JSON.stringify(b.studyAreasOptions),dataCollections:JSON.stringify(["GlobalIntersect"]),returnGeometry:!0,outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:b.geometry}]),token:esri.id.credentials[0].token},handleAs:"json"})})},createReport:function(b){var f={appID:"webappbuilder",langCode:"en-us",report:"string"===typeof b.report?b.report:JSON.stringify(b.report),format:"pdf",f:"bin",token:esri.id.credentials[0].token,useData:JSON.stringify({sourceCountry:b.sourceCountry}),
studyAreas:JSON.stringify(b.studyAreas),reportFields:JSON.stringify({locationname:b.locationName,latitude:b.lat,longitude:b.long,subtitle:"Prepared by Esri",areadesc2:b.areadesc2})};return a.getPortal(portalUrl).loadSelfInfo().then(function(h){return l({url:(h&&h.helperServices&&h.helperServices.geoenrichment&&h.helperServices.geoenrichment.url?h.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/createReport",content:f,
handleAs:"blob"}).then(function(m){return e.saveAs(m,b.reportDownloadName+".pdf")}).otherwise(function(m){alert("Error: "+m)})})},checkCapabilities:function(b){return a.getPortal(portalUrl).loadSelfInfo().then(function(f){var h=!1,m=!1,n=f&&f.user&&f.user.privileges,q=f&&f.helperServices;f=q.geoenrichment&&q.geoenrichment.url;q=q.routingUtilities&&q.routingUtilities.url;var r=f?f:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&
0<b.appProxies.length&&t.some(b.appProxies,function(u){return r.toLowerCase()===u.sourceUrl.toLowerCase()})?m=h=!0:t.forEach(n,function(u){"premium:user:geoenrichment"===u?h=!0:"premium:user:networkanalysis"===u&&(m=!0)});return{hasPrivilege:h&&m,geServiceConfigured:!!f,dirRoutingServiceConfigured:!!q}})},getCountryForPolygon:function(b,f,h){return a.getPortal(portalUrl).loadSelfInfo().then(function(m){return l({url:(m&&m.helperServices&&m.helperServices.geoenrichment&&m.helperServices.geoenrichment.url?
m.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",dataCollections:JSON.stringify(["GlobalIntersect"]),outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:b.toJson()}]),token:esri.id.credentials[0].token},handleAs:"json"}).then(function(n){if(n&&n.results&&1===n.results.length&&1===n.results[0].value.FeatureSet[0].features.length)return n.results[0].value.FeatureSet[0].features[0].attributes.sourceCountry;
if(n&&n.results&&1===n.results.length&&1<n.results[0].value.FeatureSet[0].features.length){var q=b.getCentroid();q=g.xyToLngLat(q.x,q.y);var r=function(u){var v="";t.forEach(u,function(w){w.attributes.sourceCountry==h&&(v=h)});if(v)return v;t.forEach(u,function(w){w.attributes.sourceCountry==f.defaultCountryID&&(v=defaultCountryID)});return v?v:u[0].attributes.sourceCountry};return p(k.reverseGeocode({x:q[0],y:q[1]})).then(function(u){return u&&u.address&&u.address.CountryCode?u.address.CountryCode:
r(n.results[0].value.FeatureSet[0].features)}).otherwise(function(){return r(n.results[0].value.FeatureSet[0].features)})}return f.defaultCountryID})})},getGEProxyUrl:function(b){var f=!1;return a.getPortal(portalUrl).loadSelfInfo().then(function(h){geUrl=h&&h.helperServices&&h.helperServices.geoenrichment&&h.helperServices.geoenrichment.url?h.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&0<
b.appProxies.length&&t.forEach(b.appProxies,function(m){geUrl.toLowerCase()===m.sourceUrl.toLowerCase()&&(f=m.proxyUrl)});return f})},getCountryHierarchies:function(){return d},getCountryDisableMultiHierarchySupport:function(){return c}}})},"widgets/BusinessAnalyst/utils/GeocodeUtil":function(){define(["esri/request","jimu/portalUtils"],function(t,p){return{reverseGeocode:function(l){return p.getPortal(portalUrl).loadSelfInfo().then(function(k){return t({url:(k&&k.isPortal&&k.helperServices&&k.helperServices.geocode&&
0<k.helperServices.geocode.length?k.helperServices.geocode[0].url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer")+"/reverseGeocode",content:{appID:"webappbuilder",f:"json",langCode:"en-us",location:JSON.stringify({x:l.x,y:l.y}),distance:250},handleAs:"json"})})}}})},"esri/dijit/geoenrichment/utils/FileUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./DataUtil","./ImageUtil"],function(t,p,l,k){function g(){return new t.reject(Error("Saving not supported."))}
var e=g,a=/[\\/:*?"<>|]/g,d={savingSupported:function(){return void 0!==window.Blob},saveTextFile:function(f,h,m,n){return d.savingSupported()?d.saveAs(new Blob([f],{type:m||"text/plain"}),h||"text.txt",n):g()},saveImageFile:function(f,h){if(d.savingSupported()){if("string"===typeof f){var m=k.base64DataFromDataURL(f);m=l.binaryStringToByteArray(atob(m)).buffer}else f instanceof ArrayBuffer&&(m=f);return d.saveAs(m?l.arrayBuffersToBlob([m],"image/png"):f,h)}g()},_queue:[],_isSavePendingFlag:!1,_saveTimeoutH:null,
saveAs:function(f,h,m){return m&&m.addDownloadIntervals?(m=new t,d._queue.push({blob:f,name:h||"download",dfd:m}),d._trySaveAsNext(),m.promise):e(f,d.validateName(h||"download"))},_trySaveAsNext:function(){if(d._queue.length&&!d._isSavePendingFlag){var f=d._queue.shift();d._isSavePendingFlag=!0;p(e(f.blob,d.validateName(f.name))).then(f.dfd.resolve,f.dfd.reject).always(function(){setTimeout(function(){d._isSavePendingFlag=!1;d._trySaveAsNext()},100)})}},validateName:function(f){return String(f).trim().replace(a,
"")}};if(!d.savingSupported())return d;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return e=function(f,h){var m=new t;window.navigator.msSaveOrOpenBlob(f,h)?m.resolve():m.reject(Error("Failed to save or open downloaded file."));return m.promise},d;var c=window.URL||window.webkitURL;if("download"in window.document.createElement("a")){var b=function(f){if(void 0!==window.MouseEvent)var h=new MouseEvent("click",{bubbles:!0,cancelable:!1});else h=document.createEvent("MouseEvent"),h.initMouseEvent("click",
!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);f.dispatchEvent(h)};e=function(f,h){var m=new t,n=c.createObjectURL(f),q=window.document.createElement("a");q.href=n;q.download=h;b(q);setTimeout(function(){c.revokeObjectURL(n);q=null;m.resolve();m=null},1E3);return m.promise};return d}e=function(f,h){var m=new t;f=new File([f],h,{type:f.type});var n=c.createObjectURL(f);window.open(n,"_blank");setTimeout(function(){c.revokeObjectURL(n);m.resolve()},1E3);return m.promise};return d})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred",
"esri/dijit/geoenrichment/when"],function(t,p){function l(a){return"string"==typeof a?{source:a,getLength:function(){return this.source.length},getByte:function(d){return this.source.charCodeAt(d)&255}}:window.ArrayBuffer&&a instanceof ArrayBuffer?{source:new Uint8Array(a),getLength:function(){return this.source.byteLength},getByte:function(d){return this.source[d]}}:a}function k(a){for(var d=a.length,c=new Uint8Array(a.length),b=0;b<d;b++)c[b]=a.charCodeAt(b);return c}function g(a,d){a=new Uint8Array(a);
d=Math.min(d,a.byteLength);for(var c="",b=0;b<d;b++)c+=String.fromCharCode(a[b]);return c}var e={arrayBufferFromBlob:function(a){var d=new t,c=new FileReader;c.onloadend=function(){c.error?d.reject(c.error):d.resolve(c.result)};c.readAsArrayBuffer(a);return d.promise},arrayBuffersToBlob:function(a,d){return new Blob(a,{type:d||"application/octet-stream"})},binaryStringFromByteSource:function(a){if("string"==typeof a)return a;a=l(a);var d=a.getLength(),c=d%4;d-=c;for(var b="",f=0,h,m,n,q;f<d;)h=a.getByte(f++),
m=a.getByte(f++),n=a.getByte(f++),q=a.getByte(f++),b+=String.fromCharCode(h,m,n,q);1==c?b+=String.fromCharCode(a.getByte(f)):2==c?b+=String.fromCharCode(a.getByte(f),a.getByte(f+1)):3==c&&(b+=String.fromCharCode(a.getByte(f),a.getByte(f+1),a.getByte(f+2)));return b},base64FromByteSource:function(a){a=l(a);var d=a.getLength(),c=d%3;d-=c;for(var b,f,h,m,n="",q=0;q<d;q+=3)m=a.getByte(q)<<16|a.getByte(q+1)<<8|a.getByte(q+2),b=m>>18&63,f=m>>12&63,h=m>>6&63,m&=63,n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m];1==c?(m=a.getByte(q),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m<<4&63]+"\x3d\x3d"):2==c&&(m=a.getByte(q)<<8|a.getByte(q+1),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>
10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m<<2&63]+"\x3d");return n},base64FromJson:function(a){return btoa(unescape(encodeURIComponent("string"===typeof a?a:JSON.stringify(a))))}};e.binaryStringToByteArray=k;e.base64ToByteArray=function(a){return k(atob(a))};e.getFirstBytes=function(a,d){if("string"==typeof a)var c=a.substr(0,d);else if(window.ArrayBuffer&&a instanceof ArrayBuffer)c=g(a,d);
else if(window.Blob&&a instanceof Blob){c=new t;var b=new FileReader;b.onloadend=function(){b.error?c.resolve(""):c.resolve(g(b.result,d))};b.readAsArrayBuffer(a.slice(0,d))}return p(c||"")};e.isBase64=function(a){return a&&0==a.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(a.replace(/={0,2}$/,""))};e.base64ToJson=function(a){return JSON.parse(decodeURIComponent(escape(atob(a))))};e.getContentType=function(a){a=e.getFileExtension(a);if(null===a)return null;
switch(a){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "svg":return"image/svg+xml";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};e.getFileExtension=function(a){var d=a.lastIndexOf(".")+1;return d?a.substr(d).toLowerCase():null};return e})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when",
"./UrlUtil"],function(t,p,l){var k={base64DataToDataURL:function(g,e){if(/^data:image/.test(g))return g;e||(e=atob(g.substr(0,16)),e=k.getImageContentType(e));return"data:"+(e||"image/png")+";base64,"+g},getImageContentType:function(g){if("\u00ff\u00d8\u00ff"===g.substr(0,3)&&"JFIF"===g.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===g.substr(0,8))return"image/png";if("GIF89a"===g.substr(0,6)||"GIF87a"===g.substr(0,6))return"image/gif"},base64DataFromDataURL:function(g){0==g.indexOf("data:")&&
(g=g.substr(g.indexOf(",")+1));return g},getBase64DataIndex:function(g){g=0==g.indexOf("data:")?g.indexOf(";base64,"):-1;return 0<g?g+8:0},getContentType:function(g){var e=k.getBase64DataIndex(g);return e?g.substring(5,e-8):null},checkBase64FileSize:function(g,e){return k.getBase64FileSize(g)<=e},getBase64FileSize:function(g){return.75*g.length},imageToDataURL:function(g,e){e=e||{};var a=document.createElement("canvas"),d=a.getContext("2d");a.width=e.width||g.width;a.height=e.height||g.height;var c=
e.opacity;null!=c&&!isNaN(c)&&0<=c&&1>c&&(d.globalAlpha=+c,e.format="image/png");(c=e.pos)?d.drawImage(g,c.x||0,c.y||0):d.drawImage(g,0,0,a.width,a.height);return a.toDataURL(e.format)},imageFromUrl:function(g,e){var a=new t,d=new Image;0!==g.indexOf("data:")&&e&&e.crossOrigin&&d.setAttribute("crossOrigin",e.crossOrigin);d.onload=function(){if(d.width&&d.height)a.resolve(d);else{var c=Error("Error of reading an image from URL.");e&&e.ignoreError?a.resolve(null):a.reject(c)}d.onload=d.onerror=null};
d.onerror=function(c){e&&e.ignoreError?a.resolve(null):a.reject(c);d.onload=d.onerror=null};g=require.toUrl(g);/^http:/i.test(g)&&/^https/i.test(window.location.protocol)&&(g=l.toHttpsUrl(g));d.src=g;return a.promise},scaleImage:function(g,e){if("string"===typeof g){var a=k.base64DataToDataURL(g),d=k.getContentType(a);a=k.imageFromUrl(a)}return p(a||g).then(function(c){var b=1,f=c.width,h=c.height;if(e.factor)b=e.factor;else if(e.maxDim)b=e.maxDim/Math.max(f,h);else if(e.imageDim){var m=e.imageDim.w,
n=e.imageDim.h;e.imageDim.preserveRatio?(b=Math.min(m/f,n/h),e.imageDim.reduceOnly&&1<b&&(b=1)):e.imageDim.reduceOnly?(f=Math.min(f,m),h=Math.min(h,n)):(f=m,h=n)}return k.imageToDataURL(c,{width:f*b,height:h*b,format:e.format||d,opacity:e.opacity})})},getImageViewType:function(g,e){return 1E3<=e?(g/=e,.025>=Math.abs(g-2)?"360":2<g?"pano":null):null}};return k})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url","esri/config","esri/kernel","esri/urlUtils","esri/arcgis/utils"],
function(t,p,l,k,g){var e={getDomain:function(d){if("string"!==typeof d)return null;d=d.replace(/^(http:\/\/|https:\/\/)/i,"");var c=d.indexOf("/");return 0>c?d:d.substr(0,c)},getPortalUrl:function(d){if("string"!==typeof d)return null;d=d.replace(/\?.*$/,"");var c=d.match(/^(.+)\/sharing(\/|$)/i);return c||(c=d.match(/^(.+)\/home$/i))?c[1]:(c=d.match(/^(.+)\/portal(\/|$)/i))?c[1]+"/portal":d},getProxyUrl:function(d){var c=p.defaults.io.proxyUrl;c&&!/^http/i.test(c)&&(c=k.getAbsoluteUrl(c));c&&d&&
(c=e.toHttpsUrl(c));return c},registerCORS:function(d){(d=e.getDomain(d))&&-1==p.defaults.io.corsEnabledServers.indexOf(d)&&p.defaults.io.corsEnabledServers.push(d);e._fixCORS()},_fixCORS:function(){p.defaults.io.corsEnabledServers=p.defaults.io.corsEnabledServers.filter(function(d){return d.indexOf&&0===d.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+d),!1):!0})},indexOfQuery:function(d){var c=d.indexOf("?");0<=c&&(d=d.substr(c+1),/^(http:\/\/|https:\/\/)/i.test(d)&&(d=
d.indexOf("?"),c=0<=d?c+1+d:-1));return c},removeQuery:function(d){var c=e.indexOfQuery(d);return 0>c?d:d.substr(0,c)},addQueryPart:function(d,c){var b=0>e.indexOfQuery(d)?"?":"\x26";return d+b+c},getVariableValue:function(d,c){if(d&&"string"===typeof c){var b=k.urlToObject(d);if(b.query){var f={};Object.keys(b.query).forEach(function(h){f[h.toLowerCase()]=b.query[h]});return f[c.toLowerCase()]}}},addUrlVariable:function(d,c,b){c=encodeURIComponent(c);b=encodeURIComponent(b);return e.addQueryPart(d,
c+"\x3d"+b)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(d){return!d||/^http/i.test(d)?d:"http://"+d},toHttpsUrl:function(d){d&&(d=e.toHttpUrl(d));if(!d||!/^http:\/\//i.test(d))return d;var c=new t(d);d=d.replace(/^http/i,"https");var b=e.securePortsMap[c.port];b&&(d=d.replace(":"+c.port,":"+b));return d},combine:function(d,c){"number"===typeof c&&(c+="");if(c){if(/^(http:\/\/|https:\/\/)/i.test(c)||!d)return c;"/"!=c.charAt(0)&&(c="/"+c);if(1==c.length)return d;var b=d.length-1;"/"==
d.charAt(b)&&(d=d.substr(0,b));var f=k.urlToObject(d);d=e.removeQuery(d);b=d.length-c.length;0<=b&&d.substr(b).toLowerCase()==c.toLowerCase()&&(d=d.substr(0,b));d+=c;for(var h in f.query)e.addQueryPart(d,f.query[h])}return d},combineMulti:function(d){for(var c=d[0],b=1;b<d.length;b++)c=e.combine(c,d[b]);return c},openUrl:function(d,c){if(c)return window.open(d,"_blank");c=window.open();c.opener=null;c.referrer=null;c.location=d;return c},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},
getToken:function(d){return(d=d&&l.id.findCredential(d)||l.id.credentials[0])&&d.token}},a;e.getArcgisUrl=function(){return a};e.setArcgisUrl=function(d){d&&(a=d,g.arcgisUrl=e.combine(d,"/sharing/rest/content/items"))};return e})},"widgets/BusinessAnalyst/utils/TravelModeUtil":function(){define(["esri/request","jimu/portalUtils","dojo/_base/array","dojo/Deferred","dojo/when"],function(t,p,l,k,g){var e=null;return{getTravelMode:function(a,d){return g(this._getTravelModes(),function(c){var b="";l.forEach(c.results,
function(f){"supportedTravelModes"===f.paramName&&l.forEach(f.value.features,function(h){h.attributes&&h.attributes.AltName===a&&(b=h.attributes.TravelMode)})});if(!b)return b;d=Number(d);if(!d||10>=d)return b;c=JSON.parse(b);c.simplificationTolerance=d;return JSON.stringify(c)})},_getTravelModes:function(){e||(e=new k,p.getPortal(portalUrl).loadSelfInfo().then(function(a){t({url:a.helperServices.routingUtilities.url+"/GetTravelModes/execute",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},
handleAs:"json"}).then(function(d){e.resolve(d)})}));return e}}})},"widgets/BusinessAnalyst/utils/ValidationUtil":function(){define(["dojo/dom-class"],function(t){return{MIN_RINGS_VALUE:0,MAX_RINGS_VALUE:1E3,MIN_DTWT_VALUE:0,MAX_DTWT_VALUE:300,validateInvalidValues:function(p,l,k,g,e){var a=p.get("value"),d=l.get("value"),c=k.get("value"),b=!0;0<a.length&&null===this._tryParseFloat(a)?(b=!1,t.remove(g,"hidden"),g.innerHTML=e,t.add(p.domNode,"invalidValue")):t.remove(p.domNode,"invalidValue");0<d.length&&
null===this._tryParseFloat(d)?(b=!1,t.remove(g,"hidden"),g.innerHTML=e,t.add(l.domNode,"invalidValue")):t.remove(l.domNode,"invalidValue");0<c.length&&null===this._tryParseFloat(c)?(b=!1,t.remove(g,"hidden"),g.innerHTML=e,t.add(k.domNode,"invalidValue")):t.remove(k.domNode,"invalidValue");b&&t.add(g,"hidden");return b},validateMinMaxValues:function(p,l,k,g,e,a,d){var c=p.get("value"),b=l.get("value"),f=k.get("value"),h=!0;0<c.length?(c=parseFloat(c),c<g||c>e?(h=!1,t.remove(a,"hidden"),a.innerHTML=
d,t.add(p.domNode,"invalidValue")):t.remove(p.domNode,"invalidValue")):t.remove(p.domNode,"invalidValue");0<b.length?(c=parseFloat(b),c<g||c>e?(h=!1,t.remove(a,"hidden"),a.innerHTML=d,t.add(l.domNode,"invalidValue")):t.remove(l.domNode,"invalidValue")):t.remove(l.domNode,"invalidValue");0<f.length?(c=parseFloat(f),c<g||c>e?(h=!1,t.remove(a,"hidden"),a.innerHTML=d,t.add(k.domNode,"invalidValue")):t.remove(k.domNode,"invalidValue")):t.remove(k.domNode,"invalidValue");h&&t.add(a,"hidden");return h},
_tryParseFloat:function(p){var l=null;null!==p&&0<p.length&&(isNaN(p)||(l=parseFloat(p)));return l}}})},"widgets/BusinessAnalyst/utils/SiteUtil":function(){define(["esri/units","dojo/_base/array"],function(t,p){var l={testTimeUnits:function(g){return"Hours"===g||"Seconds"===g||"Minutes"===g}},k={};k[t.FEET]=.3048;k[t.YARDS]=.9144;k[t.METERS]=1;k[t.KILOMETERS]=1E3;k[t.MILES]=1609.3472186944373;k[t.NAUTICAL_MILES]=1852;k.Hours=6E4;k.Seconds=16.66666666666667;k.Minutes=1E3;k[t.SQUARE_FEET]=k[t.FEET]*
k[t.FEET];k[t.SQUARE_YARDS]=k[t.YARDS]*k[t.YARDS];k[t.SQUARE_METERS]=1;k[t.SQUARE_KILOMETERS]=k[t.KILOMETERS]*k[t.KILOMETERS];k[t.SQUARE_MILES]=k[t.MILES]*k[t.MILES];k[t.ACRES]=4046.8564224;k[t.HECTARES]=1E4;l.convertUnits=function(g,e,a){return g*(k[e]||0)/(a&&k[a]||1)};l.getMaxRadiusInKilometers=function(g,e){var a=0;g&&g.bufferRadii&&(p.forEach(g.bufferRadii,function(d){d>a&&(a=d)}),a=l.convertUnits(a,g.bufferUnits||t.MILES,t.KILOMETERS),e&&l.testTimeUnits(g.bufferUnits)&&(a/=12));return a};return l})},
"widgets/BusinessAnalyst/ErrorPage":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetBase","esri/dijit/geoenrichment/_WizardPage","dojo/text!./ErrorPage.html"],function(t,p,l,k,g){return t([l,p,k],{templateString:g,postCreate:function(){this.inherited(arguments);var e=this.displayErrors;e.gePrivilege?this.noPermissionsErrorDiv.innerHTML=this.nls.noPermissions:this.noPermissionsErrorDiv.parentNode.removeChild(this.noPermissionsErrorDiv);e.geServiceNotConfigured||e.dirRoutingServiceNotConfigured?
this.servicesErrorDiv.innerHTML=e.geServiceNotConfigured?e.dirRoutingServiceNotConfigured?this.nls.geAndDirRoutingServicesNotConfigured:this.nls.geServiceNotConfigured:this.nls.dirRoutingServiceNotConfigured:this.servicesErrorDiv.parentNode.removeChild(this.servicesErrorDiv)},startup:function(){this.inherited(arguments)}})})},"widgets/BusinessAnalyst/RunReportsPage":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/when dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin esri/geometry/webMercatorUtils esri/dijit/geoenrichment/SelectableTree esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GEUtil esri/dijit/geoenrichment/ReportPlayer/ReportPlayer esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes esri/dijit/geoenrichment/ReportPlayer/PlayerThemes esri/dijit/geoenrichment/ReportPlayer/DataProviderGE esri/dijit/geoenrichment/ReportPlayer/PlayerCommands esri/dijit/geoenrichment/_WizardPage esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ReportTemplateTypes ./utils/GEUtil ./utils/ReportUtil ./esriAnalystX/widgets/Selects/FilteringSelectTree dojo/text!./RunReportsPage.html jimu/dijit/TabContainer3 jimu/utils".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u,v,w,z,E,F,D,B,y,A,H){return p([b,c,z,f],{templateString:y,infographicsTabHidden:!1,reportsTabHidden:!1,_infograpicReports:null,_configForLightTheme:[{name:"DashboardTheme",style:"light"}],postCreate:function(){this.inherited(arguments);this.tab=new A({tabs:[{title:this.nls.infographics,content:this.infographicsContentPane},{title:this.nls.reports,content:this.reportsContentPane}],selected:this.nls.infographics});this.tab.placeAt(this.runReportTabContainer);
this.tab.startup()},startup:function(){this.inherited(arguments)},loadReportsInfographicsForCountry:function(G){var I=this;d(D.getAvailableClassicReports(G,this.config),function(L){var N=I._getSingleReportID(L),O=I._getCountryConfig(I.config,G);O&&O.defaultReportID&&(N=O.defaultReportID);I.filteredReportDropDown?I.filteredReportDropDown.set("tree",new m(L)):(I.filteredReportDropDown=new B({name:"filteredReportSelect",tree:new m(L),defaultExpand:N?I._getDefaultExpandedTreeForSelectedReport(L,N):I._getDefaultExpandedTree(L),
placeHolder:I.nls.selectReport,onChange:function(S){I._enableDisableButton(I.runReportBtn,S)}},I.reportFilteringSelectDropDownContainer),I.filteredReportDropDown.startup());N&&I.filteredReportDropDown.set("value",N);I.reportsTabHidden=I.config.reportsDisabled||!I._areReportsAvailable(L)});d(D.getAvailableInfographicReports(G,this.config),function(L){var N=I._getSingleReportID(L),O=I._getCountryConfig(I.config,G);O&&O.defaultInfographicID&&(N=O.defaultInfographicID);I.infographicDropDown?I.infographicDropDown.set("tree",
new m(L)):(I.infographicDropDown=new B({name:"filteredInfographicReportSelect",tree:new m(L),defaultExpand:N?I._getDefaultExpandedTreeForSelectedReport(L,N):I._getDefaultExpandedTree(L),placeHolder:I.nls.selectTemplate,onChange:function(S){I._enableDisableButton(I.runInfographicBtn,S)}},I.infographicDropDownContainer),I.infographicDropDown.startup());N&&I.infographicDropDown.set("value",N);I.infographicsTabHidden=I.config.infographicsDisabled||!I._areReportsAvailable(L);I._infograpicReports=L})},
_getCountryConfig:function(G,I){var L=-1;t.forEach(G.countryConfig,function(N,O){N.countryID==I&&(L=O)});return-1!=L?G.countryConfig[L]:null},_areReportsAvailable:function(G){if(0==G.length)return!1;var I=!1;t.forEach(G,function(L){0<L.children.length&&(I=!0)});return I},_getDefaultExpandedTree:function(G){if(0==G.length)return{esriReports:!0};var I={};I[G[0].value]=!0;return I},_getDefaultExpandedTreeForSelectedReport:function(G,I){if(0==G.length)return{esriReports:!0};returnVal={};t.forEach(G,function(L){t.forEach(L.children,
function(N){N.value===I&&(returnVal[L.value]=!0)})});return returnVal},_getSingleReportID:function(G){if(1!=G.length)return!1;var I=!1;t.forEach(G,function(L){1===L.children.length&&(I=L.children[0].value)});return I},refresh:function(){this._hideOrShowTabs()},_hideOrShowTabs:function(){this._hideOrShowTab(this.nls.infographics,this.infographicsTabHidden);this._hideOrShowTab(this.nls.reports,this.reportsTabHidden);this.infographicsTabHidden?this.tab.selectTab(this.nls.reports):this.tab.selectTab(this.nls.infographics)},
_hideOrShowTab:function(G,I){var L=a("td",this.tab.tabTr),N;t.some(L,function(O){if(O.label===G)return N=O,!0})&&e.set(N,"display",I?"none":"")},runInfographic:function(){if(!k.contains(this.runInfographicBtn,"jimu-state-disabled")){var G=this,I=this.infographicDropDown.get("value");this.reportPlayer&&this.reportPlayer.destroy();this.playerDiv&&g.destroy(this.playerDiv);this.playerDiv=g.create("div",null,document.body);var L=new v;this.config.exportInfographicsPrintOption&&L.registerCommand(w.PRINT);
this.config.exportInfographicsPDFOption&&L.registerCommand(w.PDF);this.config.exportInfographicsImageOption&&L.registerCommand(w.IMAGE);this.config.exportInfographicsDynamicHTMLOption&&L.registerCommand(w.DYNAMIC_HTML);var N=H.isMobileUa();this.reportPlayer=(new q({isSlidesView:N?!0:!1,theme:this._useLightTheme()?u.LIGHT:u.DARK,dataProvider:L,resizeMode:r.FIT_WINDOW,showCloseButton:!0,config:{esriDijitCssUrl:"https://js.arcgis.com/3.37/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/3.37/esri/css/esri.css",
playerSourceRootUrl:"https://js.arcgis.com/3.37/"},onClose:function(){G.reportPlayer.destroy();g.destroy(G.playerDiv)}})).placeAt(this.playerDiv);var O=!0;L=new B({name:"filteredInfographicReportSelect",tree:new m(this._infograpicReports),defaultExpand:G._getDefaultExpandedTreeForSelectedReport(this._infograpicReports,I),placeHolder:G.nls.selectTemplate,value:I,onChange:function(R){O?O=!1:(G.infographicDropDown.set("value",R),S(R))}});this._useLightTheme()||k.add(this.reportPlayer.playerToolbar.domNode,
"jimu-main-background");L.startup();L.set("value",I);this.reportPlayer.playerToolbar.addInfographicsSelect(L);var S=function(R){var U=[];if(G.wizard.selectedPoint.long)t.forEach(G.wizard.selectedPoint.tradeAreas,function(ca,Y){var da={};da.name=ca.name;da.shortName=ca.shortName;da.feature=ca.graphic;"undefined"===typeof da.feature.attributes&&(da.feature.attributes="undefined"!==typeof G.wizard.selectedPoint.attributes?G.wizard.selectedPoint.attributes:{});da.feature.attributes.STORE_LONG=G.wizard.selectedPoint.long;
da.feature.attributes.STORE_LAT=G.wizard.selectedPoint.lat;da.feature.attributes.radiusIndex=Y;U.push(da)});else if(G.wizard.selectedPolygon.geometry){U=[];var Z={};G.isPolygonFIPS(G.wizard.selectedPolygon)?Z=G.GetFIPSAnalysisArea(G.wizard.selectedPolygon):(Z.name=G.wizard.selectedPolygon.locationName,Z.shortName=G.wizard.selectedPolygon.locationName,Z.feature=G.wizard.selectedPolygon.feature);U.push(Z)}G.reportPlayer.playReport({portalUrl:portalUrl,countryID:G.wizard.selectedCountryID,reportID:R,
reverseAnalysisAreasOnMap:!0,analysisAreas:U})};d(F.getGEProxyUrl(this.appConfig),function(R){R&&(n.setGeoenrichmentUrl(R),n.getClient());S(I)})}},isPolygonFIPS:function(G){return G&&G.feature&&G.feature.attributes&&G.feature.attributes.FIPS||G&&G.feature&&G.feature.attributes&&G.feature.attributes.STATE_FIPS?!0:!1},GetFIPSAnalysisArea:function(G){var I={geographies:[]},L={sourceCountry:"US"},N="";if(G.feature.attributes.FIPS)switch(G.feature.attributes.FIPS.length){case 2:N="US.States";break;case 5:N=
"US.Counties";break;case 11:N="US.Tracts"}else G.feature.attributes.STATE_FIPS&&(N="US.States");L.levelId=N;L.id=G.feature.attributes.FIPS?G.feature.attributes.FIPS.toString():G.feature.attributes.STATE_FIPS.toString();L.attributes=G.feature.attributes;G=G.geometry.getCentroid();G=h.xyToLngLat(G.x,G.y);L.attributes.STORE_ID="0";L.attributes.STORE_LONG=G[0].toString();L.attributes.STORE_LAT=G[1].toString();I.geographies.push(L);return I},GetFIPSStudyArea:function(G){var I={sourceCountry:"US"},L="";
if(G.feature.attributes.FIPS)switch(G.feature.attributes.FIPS.length){case 2:L="US.States";break;case 5:L="US.Counties";break;case 11:L="US.Tracts"}else G.feature.attributes.STATE_FIPS&&(L="US.States");I.layer=L;I.ids=[G.feature.attributes.FIPS?G.feature.attributes.FIPS.toString():G.feature.attributes.STATE_FIPS.toString()];I.attributes=G.feature.attributes;return I},_useLightTheme:function(){var G=!1,I=self.getAppConfig();t.forEach(this._configForLightTheme,function(L){I&&I.theme&&I.theme.name==
L.name&&I.theme.styles&&0<I.theme.styles.length&&t.forEach(I.theme.styles,function(N){N==L.style&&(G=!0)})});I&&I.theme&&I.theme.customStyles&&I.theme.customStyles.mainBackgroundColor&&"#FFFFFF"==I.theme.customStyles.mainBackgroundColor.toUpperCase()&&(G=!0);return G},runReport:function(){if(!k.contains(this.runReportBtn,"jimu-state-disabled")){k.add(this.runReportBtn,"jimu-state-disabled");this.shelter.show();var G=this;this.wizard.selectedPoint.long?this.runReportForPoint().then(function(){G.shelter.hide();
k.remove(G.runReportBtn,"jimu-state-disabled")}).otherwise(function(){G.shelter.hide();k.remove(G.runReportBtn,"jimu-state-disabled")}):this.wizard.selectedPolygon.geometry&&this.runReportForPolygon().then(function(){G.shelter.hide();k.remove(G.runReportBtn,"jimu-state-disabled")}).otherwise(function(){G.shelter.hide();k.remove(G.runReportBtn,"jimu-state-disabled")})}},_enableDisableButton:function(G,I){"string"===typeof I&&"None"!==I?k.remove(G,"jimu-state-disabled"):k.add(G,"jimu-state-disabled")},
runReportForPoint:function(){var G=this,I={studyAreas:[]},L={featureSet:{fields:[{name:"OBJECTID",alias:"Object ID",type:"esriFieldTypeOID"},{name:"STORE_ID",alias:"STORE_ID",type:"esriFieldTypeString",length:1,nullable:!0},{name:"STORE_LONG",alias:"STORE_LONG",type:"esriFieldTypeDouble"},{name:"STORE_LAT",alias:"STORE_LAT",type:"esriFieldTypeDouble"},{name:"AREA_DESC",alias:"AREA_DESC",type:"esriFieldTypeString",length:7,nullable:!0},{name:"AREA_DESC2",alias:"AREA_DESC2",type:"esriFieldTypeString",
length:19,nullable:!0}],spatialReference:this.map.spatialReference.toJson(),geometryType:"esriGeometryPolygon",features:[]}};t.forEach(this.wizard.selectedPoint.tradeAreas,function(N){var O={};O.geometry=N.graphic.geometry;N.graphic.attributes?O.attributes=N.graphic.attributes:G.wizard.selectedPoint.attributes&&(O.attributes=l.clone(G.wizard.selectedPoint.attributes));O.attributes||(O.attributes={});O.attributes.OBJECTID=1;O.attributes.STORE_ID="1";O.attributes.STORE_LONG=G.wizard.selectedPoint.long;
O.attributes.STORE_LAT=G.wizard.selectedPoint.lat;O.attributes.AREA_DESC=N.AREA_DESC;O.attributes.AREA_DESC2=N.AREA_DESC2;L.featureSet.features.push(O)});I.studyAreas.push(L);this.filteredReportDropDown.getSelectedItem().reportType!=E.STANDARD&&(I.areadesc2=this.wizard.selectedPoint.areadesc2);I.locationName=this.wizard.selectedPoint.locationName;I.lat=this.wizard.selectedPoint.lat;I.long=this.wizard.selectedPoint.long;I.sourceCountry=this.wizard.selectedCountryID;I.report=this.filteredReportDropDown.getSelectedItem().item?
this.filteredReportDropDown.getSelectedItem().item:this.filteredReportDropDown.getSelectedItem().value;I.reportDownloadName=this.filteredReportDropDown.getSelectedItem().label;return F.createReport(I)},runReportForPolygon:function(){var G={studyAreas:[]},I={};I=this.isPolygonFIPS(this.wizard.selectedPolygon)?this.GetFIPSStudyArea(this.wizard.selectedPolygon):{geometry:this.wizard.selectedPolygon.geometry.toJson()};this.wizard.selectedPolygon.feature&&this.wizard.selectedPolygon.feature.attributes&&
(I.attributes=this.wizard.selectedPolygon.feature.attributes);G.studyAreas.push(I);G.locationName=this.wizard.selectedPolygon.locationName;G.sourceCountry=this.wizard.selectedCountryID;G.report=this.filteredReportDropDown.getSelectedItem().item?this.filteredReportDropDown.getSelectedItem().item:this.filteredReportDropDown.getSelectedItem().value;G.reportDownloadName=this.filteredReportDropDown.getSelectedItem().label;return F.createReport(G)},backOnClick:function(){this.onBack()}})})},"esri/dijit/geoenrichment/SelectableTree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented ./when dojo/store/util/QueryResults dojo/store/util/SimpleQueryEngine dstore/QueryResults".split(" "),
function(t,p,l,k,g,e,a,d){var c=function(b,f){this.storage=b;this.data=f};c.prototype={storage:null,data:null,filter:function(b){return this.storage._filter(this.data,b)},sort:function(b,f){return this.storage._sort(this.data,b,f)},fetch:function(){return this.storage._fetchRange(this.data)},fetchRange:function(b){return this.storage._fetchRange(this.data,b)},mayHaveChildren:function(b){return this.storage.mayHaveChildren(b)},getChildren:function(b){return this.storage.getChildren(b,{returnCollection:!0})}};
return t(k,{idProperty:"id",bindingProperty:null,autoIdentify:!0,queryEngine:a,isDstoreTree:!1,root:null,data:null,_hash:null,_autoId:null,storage:null,constructor:function(b,f){p.mixin(this,f);this.storage=this;this.root={children:b||[]};p.mixin(this._provideBinding(this.root),{deepness:-1,selectCount:0,leafCount:0});this._hash={};this.idProperty&&this.autoIdentify&&(this._autoId=1);this._initializeNode(this.root,0);this.data=this.root.children},_provideBinding:function(b){var f=this._getBinding(b);
f||(b[this.bindingProperty]=f={});return f},_getBinding:function(b){return this.bindingProperty?b[this.bindingProperty]:b},_initializeNode:function(b,f){var h=this._provideBinding(b);h.selected=!!h.selected;b.children?(h.selectCount=0,h.leafCount=0,l.forEach(b.children,function(m){this._registerNode(m);var n=this._provideBinding(m);n.parent=b;n.deepness=f;this._initializeNode(m,f+1);h.selectCount+=n.selectCount;h.leafCount+=n.leafCount},this),h.selectCount)?h.selectCount===h.leafCount&&(h.selected=
!0):h.selected=!1:("number"!==typeof h.leafCount&&(h.leafCount=1),h.selectCount=h.selected?h.leafCount:0)},isOwned:function(b,f){return f||b!==this.root?this.get(this.getIdentity(b))===b:!0},_registerNode:function(b){this._autoId&&void 0===b[this.idProperty]&&(b[this.idProperty]=this._autoId++);this.idProperty&&(this._hash[b[this.idProperty]]=b)},_unregisterNode:function(b){this.isOwned(b,!0)&&delete this._hash[b[this.idProperty]]},clear:function(){this.root.children.length&&(l.forEach(this.root.children,
function(b){this._unbindNode(b)},this),this.data=this.root.children=[])},destroy:function(){this.clear()},_unbindNode:function(b){b.children&&l.forEach(b.children,function(h){delete this._getBinding(h).parent;this._unbindNode(h)},this);this._unregisterNode(b);var f=this._getBinding(b);f.parent&&(this._incrementCounts(f.parent,-f.selectCount,-f.leafCount),delete f.parent);f!==b&&delete b[this.bindingProperty]},removeNodes:function(b,f){l.forEach(b&&b.slice(),function(h){if(this.isOwned(h,!0)){var m=
this._getBinding(h).parent,n=l.indexOf(m.children,h);0<=n&&m.children.splice(n,1);this._unbindNode(h)}},this);!f&&this.emit("updated")},addNodes:function(b,f,h){if(!f)f=this.root;else if(!this.isOwned(f)||!f.children)return!1;var m=this._getBinding(f).deepness+1,n=0,q=0;l.forEach(b,function(r){if(!this.isOwned(r)){f.children.push(r);this._registerNode(r);var u=this._provideBinding(r);u.parent=f;u.deepness=m;this._initializeNode(r,m+1);n+=u.selectCount;q+=u.leafCount}},this);this._incrementCounts(f,
n,q);!h&&this.emit("updated");return!0},select:function(b,f){return this.changeSelect(b,!0,f)},deselect:function(b){this.changeSelect(b,!1)},changeSelect:function(b,f,h){h=h||this.root.leafCount;var m=b&&this._getBinding(b);if(m){f=!!f;var n=(f?m.leafCount:0)-m.selectCount,q=0>n||this.root.selectCount+n<=h;if(!b.children)return q&&(m.selected=f,n&&this._incrementCounts(b,n)),q;q&&(m.selected=f);l.forEach(b.children,function(r){this.changeSelect(r,f,h)},this);return q}},_incrementCounts:function(b,
f,h){b=this._getBinding(b);b.selectCount+=f;h&&(b.leafCount+=h);b.selectCount?b.selectCount==b.leafCount&&(b.selected=!0):b.selected=!1;b.parent&&this._incrementCounts(b.parent,f,h)},getSelectionState:function(b){if(!this.isOwned(b))return!1;b=this._getBinding(b);return b.selectCount&&b.selectCount!=b.leafCount?"mixed":b.selected=!!b.selectCount},getSelectedNodes:function(b){return this.getDescendingNodes(this.root,!0,b)},getDescendingNodes:function(b,f,h){if(!this.isOwned(b))return[];var m=[];this._collectNodes(b.children,
m,f,h);return m},_collectNodes:function(b,f,h,m){l.forEach(b,function(n){var q=this._getBinding(n),r=null===h||void 0===h?q.leafCount:h?q.selectCount:q.leafCount-q.selectCount;r&&(!n.children||!m&&r==q.leafCount?f.push(n):this._collectNodes(n.children,f,h,m))},this)},inspectChildren:function(b,f,h,m){m&&(f=p.hitch(m,f));b=b||this.root;(b=b.children)&&h&&(b=b.slice(),b.sort(h));return l.every(b,function(n){var q=f(n);return null===q?!1:!1!==q&&n.children?this.inspectChildren(n,f,h):!0},this)},updateExpandedNodes:function(b,
f){for(var h in this._hash)this.updateExpand(this._hash[h],!!b[h]);this._updateOddEven(null,f)},updateExpand:function(b,f,h,m){if(b){var n=!1;b.children&&(b=this._getBinding(b),b.expanded!==f&&(n=!0,b.expanded=f));f={};n&&h&&this._updateOddEven(f,m);return f}},_updateOddEven:function(b,f){var h=1;this.inspectChildren(null,function(m){!1!==m.visible&&(h=1-h);var n=this._getBinding(m);b&&n.isOdd!==h&&(b[this.getIdentity(m)]=h);n.isOdd=h;return!(!m.children||!n.expanded)},f,this)},isOdd:function(b){return(b=
this._getBinding(b))&&b.isOdd},get:function(b){return this._hash[b]},getIdentity:function(b){return this.idProperty?b[this.idProperty]:null},query:function(b,f){return e(this._query(this.data,b,f))},_query:function(b,f,h){return this.queryEngine(f,h)(b)},filter:function(b){return this._filter(this.data,b)},_filter:function(b,f){b=this._query(b,f);return new c(this.storage,b)},sort:function(b,f){return this._sort(this.data,b,f)},_sort:function(b,f,h){"function"===typeof f?(b=b.slice(),b.sort(f)):(f=
Array.isArray(f)?f.map(function(m){return{attribute:m.property,descending:m.descending}}):[{attribute:f,descending:h}],b=this._query(b,{},{sort:f}));return new c(this.storage,b)},mayHaveChildren:function(b){return!!b.children},getChildren:function(b,f){var h=this.isOwned(b,!0)?b.children:null;b=this.isDstoreTree||f&&f.returnCollection;f=this.queryEngine({},b?null:f)(h||[]);return b?new c(this.storage,f):e(f)},fetch:function(){return this._fetchRange(this.data)},fetchRange:function(b){return this._fetchRange(this.data,
b)},_fetchRange:function(b,f){return d(g(f?b.slice(f.start,f.end):b.slice()),{totalLength:g(b.length)})}})})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(t,p){function l(k,g){return p(this,function(e){for(var a=0,d=e.length;a<d;a++)k.call(g,e[a],a,e)})}return function(k,g){var e=g&&"totalLength"in g;if(k.then){k=t.delegate(k);var a=k.then(function(d){var c=e?g.totalLength:d.totalLength||d.length;d.totalLength=c;return!e&&c});k.totalLength=e?g.totalLength:a;k.response=
g&&g.response}else k.totalLength=e?g.totalLength:k.length;k.forEach=l;return k}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GEUtil":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojox/uuid/generateRandomUuid esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/UrlUtil ./stdGeographies/StdGeographiesModel".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n){function q(B){return E?E:(B=B&&a.id.findCredential(B)||a.id.credentials[0])&&B.token}function r(B,y){var A=c.urlToObject(B);y=p.mixin({f:"json",token:q(B),langCode:dojo.locale},A.query||{},y);for(var H in y)B=y[H],B instanceof f||B&&"object"===typeof B&&(y[H]=JSON.stringify("function"===typeof B.toJson?B.toJson():B));return{url:A.path,taskParams:y}}function u(B){D||(D=new v(z));return!B||D.initialized?D:D.initialize()}var v=t(null,{url:null,_geInfo:null,_capabilities:null,
_supportedOperations:null,constructor:function(B){this._capabilities={};this._supportedOperations={};this.url=B},_initDfd:null,initialized:!1,initialize:function(){var B=this;if(this._initDfd)return this._initDfd.promise;this._initDfd=new l;h.requestPublicFirst(r(this.url).url+"/Geoenrichment",{content:{f:"json"},handleAs:"json"},{retryOnAnyError:!0}).then(function(y){B.initWithJson(y)});return this._initDfd.promise},initWithJson:function(B){this._geInfo=B;this._capabilities={};this._supportedOperations=
{};B.capabilities&&B.capabilities.forEach(function(y){this._capabilities[y.toLowerCase()]=!0},this);B.supportedOperations&&B.supportedOperations.forEach(function(y){this._supportedOperations[y.toLowerCase()]=!0},this);this._initDfd=this._initDfd||new l;this._initDfd.resolve();this.initialized=!0},hasCapability:function(B){return!!this._capabilities[B.toLowerCase()]},addCapability:function(B){this._capabilities[B.toLowerCase()]=!0},supportsOperation:function(B){return!!this._supportedOperations[B.toLowerCase()]},
enrich:function(B){B=r(this.url,B);B.taskParams.AddDerivativeVariables="all";return d({url:B.url+"/Geoenrichment/Enrich",content:B.taskParams,handleAs:"json"}).then(function(y){return y.results[0].value.FeatureSet||[]})},stdGeographyQuery:function(B){B=r(this.url,B);return d({url:B.url+"/StandardGeographyQuery/execute",content:B.taskParams,handleAs:"json"}).then(function(y){return y.results[0].value.features||[]})},getDataCollections:function(B,y,A){A=r(this.url,A);return d({url:A.url+"/Geoenrichment/DataCollections/"+
B+(y?"/"+y:""),content:A.taskParams,handleAs:"json"}).then(function(H){return H.DataCollections})},getCountries:function(){var B=r(this.url);return d({url:B.url+"/Geoenrichment/Countries",content:B.taskParams,handleAs:"json"}).then(function(y){return y.countries})},getCountryInfo:function(B){var y=this,A=b.get("GEUtil.countries");if(!A[B]){var H=r(this.url);A[B]=d({url:H.url+"/Geoenrichment/Countries/"+B,content:H.taskParams,handleAs:"json"}).then(function(G){var I=G.countries[0],L={};return g(I.hierarchies.map(function(N){return k(y._getStdGeographyModel(B,
N.ID),function(O){L[N.ID]=O})})).then(function(){return{country:I,geographiesModels:L}})})}return A[B]},_getStdGeographyModel:function(B,y){var A=b.get("GEUtil.stdModels"),H=B+y;if(!A[H]){var G=r(this.url);A[H]=d({url:G.url+"/Geoenrichment/StandardGeographyLevels/"+B+"/"+y,content:G.taskParams,handleAs:"json"}).then(function(I){return new n({countryID:B,hierarchyID:y,levels:I.geographyLevels[0].hierarchies[0].levels})})}return A[H]},formatReport:function(B){B=r(this.url,B);return h.request({url:B.url,
urlSuffix:"Geoenrichment/FormatReport"},{handleAs:"bin",content:B.taskParams}).then(function(y){return y&&y.data&&"text/plain"===y.data.type?null:y})},getReports:function(B){var y=r(this.url);return d({url:y.url+"/Geoenrichment/reports/"+B,content:y.taskParams,handleAs:"json"}).then(function(A){return A.reports})},createReport:function(B){var y=r(this.url,B),A=e();!1===B.forStorage&&(b.get("GEUtil.tasks")[A]={taskName:"createReport",taskParams:p.clone(B)});return h.request({url:y.url,urlSuffix:"Geoenrichment/createReport"},
{handleAs:"xml"===B.format?"text":"bin",content:y.taskParams}).then(function(H){return{taskID:A,result:H}})},consumeCredits:function(B){var y=b.get("GEUtil.tasks")[B];if(y)return delete y.taskParams.forStorage,delete b.get("GEUtil.tasks")[B],this[y.taskName](y.taskParams)},getLayerInfos:function(B){var y=b.get("GEUtil.dataLayers");y[B]||(y[B]=this._getLayerInfos(B));return y[B]},_getLayerInfos:function(B){var y=r(this.url);return d({url:y.url+"/Geoenrichment/DataLayers/"+B,content:y.taskParams,handleAs:"json"}).then(function(A){return A&&
A.layers||[]}).otherwise(function(A){console.log(A);return[]})},getLayerInfo:function(B,y){var A=b.get("GEUtil.dataLayers"),H=B+"_"+y;A[H]||(A[H]=this._getLayerInfo(B,y));return A[H]},_getLayerInfo:function(B,y){var A=r(this.url);return d({url:A.url+"/Geoenrichment/DataLayers/"+B+"/"+y,content:A.taskParams,handleAs:"json"}).then(function(H){return H&&H.layer}).otherwise(function(H){console.log(H);return null})}}),w={},z,E,F=new l;w.setGeoenrichmentUrl=function(B,y){(z=B||z)&&m.registerCORS(z);E=y||
E;!F.promise.isFulfilled()&&F.resolve()};w.canMakeRequests=function(){return!!z};w.getInitPromise=function(){return F.promise};w.GEClient=v;var D;w.getClient=function(){return u()};w.initialize=function(){return k(u(!0))};w.initWithJson=function(B,y){w.setGeoenrichmentUrl(B);u().initWithJson(y)};w.enrich=function(B){return u().enrich(B)};w.stdGeographyQuery=function(B){return u().stdGeographyQuery(B)};w.getDataCollections=function(B,y,A){return u().getDataCollections(B,y,A)};w.formatReport=function(B){return u().formatReport(B)};
w.createReport=function(B){return u().createReport(B)};w.consumeCredits=function(B){return u().consumeCredits(B)};w.getLayerInfos=function(B){return u().getLayerInfos(B)};w.hasCapability=function(B){return k(u(!0),function(){return D&&D.hasCapability(B)})};w.addCapability=function(B){return u().addCapability(B)};w.supportsOperation=function(B){return k(u(!0),function(){return D&&D.supportsOperation(B)})};w.getCountryInfo=function(B){return u().getCountryInfo(B)};return w})},"esri/dijit/geoenrichment/promise/all":function(){define(["dojo/promise/all"],
function(t){return t})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function t(){for(var e=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>e.length;)e="0"+e;return e}var p=t(),l=t();l=l.substring(0,4)+"-4"+l.substring(5,8);var k=t();k="8"+k.substring(1,4)+"-"+k.substring(4,8);var g=t();return(p+"-"+l+"-"+k+g).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel",
"dojo/_base/lang"],function(t){t.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(p,l){if(!p)throw l||(l="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(l);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};
dojox.uuid.isValid=function(p){p=p.toString();var l=t.isString(p)&&36==p.length&&p==p.toLowerCase();if(l){p=p.split("-");l=5==p.length&&8==p[0].length&&4==p[1].length&&4==p[2].length&&4==p[3].length&&12==p[4].length;for(var k in p){var g=parseInt(p[k],16);l=l&&isFinite(g)}}return l};dojox.uuid.getVariant=function(p){if(!dojox.uuid._ourVariantLookupTable){var l=dojox.uuid.variant,k=[];k[0]=l.NCS;k[1]=l.NCS;k[2]=l.NCS;k[3]=l.NCS;k[4]=l.NCS;k[5]=l.NCS;k[6]=l.NCS;k[7]=l.NCS;k[8]=l.DCE;k[9]=l.DCE;k[10]=
l.DCE;k[11]=l.DCE;k[12]=l.MICROSOFT;k[13]=l.MICROSOFT;k[14]=l.UNKNOWN;k[15]=l.UNKNOWN;dojox.uuid._ourVariantLookupTable=k}p=p.toString();p=p.charAt(19);p=parseInt(p,16);dojox.uuid.assert(0<=p&&16>=p);return dojox.uuid._ourVariantLookupTable[p]};dojox.uuid.getVersion=function(p){dojox.uuid.assert(dojox.uuid.getVariant(p)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");p=p.toString();p=p.charAt(14);return parseInt(p,16)};dojox.uuid.getNode=function(p){dojox.uuid.assert(dojox.uuid.getVersion(p)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");p=p.toString();return p.split("-")[4]};dojox.uuid.getTimestamp=function(p,l){dojox.uuid.assert(dojox.uuid.getVersion(p)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");p=p.toString();l||(l=null);switch(l){case "string":case String:return dojox.uuid.getTimestamp(p,Date).toUTCString();case "hex":var k=p.split("-");p=k[0];l=k[1];k=k[2];k=k.slice(1);p=k+l+p;dojox.uuid.assert(15==
p.length);return p;case null:case "date":case Date:return k=p.split("-"),p=parseInt(k[0],16),l=parseInt(k[1],16),k=(parseInt(k[2],16)&4095)<<16,k=4294967296*(k+l),k+=p,new Date(k/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+l)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/CacheUtil":function(){define([],function(){var t={},p={};t.get=function(l,k){var g=p[l];g||k||(g=p[l]={});return g};t.set=function(l,k){return p[l]=k};t.clear=
function(l,k){p={}};return t})},"esri/dijit/geoenrichment/utils/requests/FileContent":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/utils/DataUtil"],function(t,p){function l(g){return g?/^image\//.test(g)?"base64":/^text\//.test(g)?"text":/application\/json/.test(g)?"json":"bin":"bin"}var k=t(null,{data:null,filename:null,contentType:"application/octet-stream",contentTransferEncoding:"binary",constructor:function(g,e,a){this.data=g;e&&(this.contentType=e);a&&(this.contentTransferEncoding=
a)},getBase64Data:function(){return this.data?"base64"==this.contentTransferEncoding?this.data:p.base64FromByteSource(this.data):null},toString:function(){return this.filename||"\x3cunknown\x3e"}});k.fromArrayBuffer=function(g,e){return new k(p.binaryStringFromByteSource(g),e)};k.fromBlob=function(g,e){return p.arrayBufferFromBlob(g).then(function(a){return new k(p.binaryStringFromByteSource(a),e||g.type)})};k.fromFileData=function(g,e,a){a=a||p.getContentType(g);if("object"==typeof e&&window.ArrayBuffer&&
(e instanceof ArrayBuffer||e.buffer instanceof ArrayBuffer))e=p.binaryStringFromByteSource(e.buffer||e);else{var d=l(a);"json"==d&&"object"==typeof e&&(e=JSON.stringify(e));if("string"!=typeof e)throw Error("Wrong file data.");switch(d){case "base64":e=atob(e);break;case "text":case "json":e=unescape(encodeURIComponent(e))}}e=new k(e,a);e.filename=g;return e};k.getContentConversionType=l;return k})},"esri/dijit/geoenrichment/utils/requests/UniversalClient":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/request/xhr dojo/io-query dojo/sniff esri/dijit/geoenrichment/when esri/kernel esri/config esri/lang esri/urlUtils ../UrlUtil ./BinaryData ./FileContent ./MultipartDataBuilder ./ErrorUtil".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q){function r(E,F){if(F)this.reject(F);else{F=E.xhr;var D=F.getResponseHeader&&F.getResponseHeader("Content-Type");E.status=F.status;E.data=new h(F.response||F.responseBody||F.responseText,D);this.resolve(E)}}var u=0,v=g("safari"),w=function(E){"string"===typeof E?this.url=E:"object"===typeof E&&t.mixin(this,E)};w.prototype={url:null,preventCache:null,usePost:!1,timeout:0,multipartThreshold:0,useCommonAuth:!1,useProxy:!1,allowSSL:null,send:function(E,F){return this.sendUrlRequest(this.prepareUrlRequest(E,
F),"UniversalClient.send")},prepareUrlRequest:function(E,F){"string"===typeof E?E={urlSuffix:E}:E||(E={});F||(F={});var D=E.url||this.url;E=E.urlSuffix;D||(D=E,E=null);if(!D)throw Error("URL is missing.");var B=b.urlToObject(D);D=f.combine(B.path,E);E=B.query||{};"object"===typeof F.content&&(E=t.mixin(E,F.content));B=F.requireSSL;!0!==B&&!1===this.allowSSL&&(B=!1);!1!==B&&!0===this.allowSSL&&/^https/i.test(window.location.protocol)&&(B=!0);var y=this.getCredential(D,!0);y&&(E.token||!1===E.token||
(E.token=y.token),y.ssl&&!1!==B&&(B=!0));!0===B&&(D=f.toHttpsUrl(D));!1===E.token&&delete E.token;var A=F.handleAs||"json";"json"===A&&(E.f="json");y=(F.sendAs||(F.usePost||this.usePost||E.token?"post":"get")).toLowerCase();B="multipart"==y?!0:F.sendAs||F.sizeLimit?!1:null;var H=0,G=F.multipartThreshold||this.multipartThreshold;for(S in E){var I=E[S];if(I instanceof m)B=!0;else{var L=0,N=S.length;"object"===typeof I?F.allowMultipleValues&&Array.isArray(I)?E[S]=I.map(function(R){R="object"===typeof R?
JSON.stringify(R):R;L+=N+R+2;return R}):(E[S]=JSON.stringify(I),L+=N+E[S].length+2):L=N+(I?I.length:0)+2;!B&&0<G&&(H+=L)}}!1!==B&&0<G&&H>G&&(B=!0);if(F.useProxy||!b.hasSameOrigin(D,window.location.href)&&this.useProxy&&!F.hasOwnProperty("useProxy")){var O=f.getProxyUrl();O&&(D=O+"?"+D)}else b.getProxyRule(D)&&(D=b.getProxyRule(D).proxyUrl+"?"+D);var S=(S=F.hasOwnProperty("preventCache")?F.preventCache:this.preventCache)||null===S&&O||v?"_ts\x3d"+(new Date).getTime()+u++:"";O={handleAs:A};if(A=Number(c.isDefined(F.timeout)?
F.timeout:this.timeout))O.timeout=A;A="get"!==y||B;y=B?null:k.objectToQuery(E);A||(A=y.length+D.length+S.length+1>=d.defaults.io.postLength);O.method=A?"POST":"GET";O.headers={"X-Requested-With":null};O.headers["Content-Type"]="undefined"!==typeof F.contentType?F.contentType:"application/x-www-form-urlencoded; charset\x3dutf-8";B?(B=new n,B.addVariables(E),B.build(O)):A?O.data=y:y&&(D+="?"+y,S&&(D+="\x26"+S),S=null);!y&&S&&(D+="?"+S);return{url:D,options:O,sizeLimit:F.sizeLimit}},getCredential:function(E,
F){if(a.id){var D=a.id.findCredential(E);!D&&this.useCommonAuth&&(D="string"==typeof this.useCommonAuth?a.id.findCredential(this.useCommonAuth):a.id.credentials[0]);if(D){var B={token:D.token};F?B.ssl=D.ssl:B.url=D.ssl?f.toHttpsUrl(E):E;return B}}},sendUrlRequest:function(E,F){var D="string"===typeof E.options.data?E.options.data.length:null;if(E.sizeLimit&&D&&("function"===typeof E.sizeLimit?E.sizeLimit(D):D>E.sizeLimit))return(new p).reject(Error("SIZE_LIMIT_EXCEEDED"));F=F||"UniversalClient.sendUrlRequest";
var B=E.deferred||new p;if(D="bin"===E.options.handleAs)E.options.handleAs="blob";var y=l(E.url,E.options,!0);D&&(y.handleResponse=r);var A=this;y.then(function(H){H="json"===E.options.handleAs&&H&&q.parseError(H)||H;if(H instanceof Error){var G;!0===A.useCommonAuth&&498===H.code&&(G=w.handleInvalidTokenError(H));e(G)["finally"](function(){B.reject(H)})}else B.resolve(A._makeResponse(F,H))},function(H){B.reject(q.makeError(H))});return B.promise},requestToUrl:function(E){if(E.options.headers&&E.options.headers["Content-Type"]&&
0==E.options.headers["Content-Type"].indexOf("multipart/form-data"))return null;var F=E.url;if(E=E.options.data){if(F.length+E.length>=d.defaults.io.postLength)return null;F+="?"+E}return F},_makeResponse:function(E,F){return F}};w.makeError=q.makeError;w.handleInvalidTokenError=function(E){};var z=new w({useCommonAuth:!0,allowSSL:!0});w.request=function(E,F){return z.send(E,F).otherwise(function(D){var B=F&&F.content&&F.content.token;if(498!==D.code||null!=B)return(new p).reject(D);F=t.mixin({},
F);F.content=t.mixin({},F.content);F.content.token=!1;return z.send(E,F)})};w.requestPublicFirst=function(E,F,D){var B=t.mixin({},F);B.content=t.mixin({},F.content);B.content.token=!1;return z.send(E,B).otherwise(function(y){return D&&D.retryOnAnyError||499===y.code||403===y.code?z.send(E,F):(new p).reject(y)})};return w})},"esri/dijit/geoenrichment/utils/requests/BinaryData":function(){define(["dojo/_base/declare"],function(t){return t(null,{data:null,type:null,constructor:function(p,l){this.type=
l||p&&p.type||null;this.data=p}})})},"esri/dijit/geoenrichment/utils/requests/MultipartDataBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/request/util","esri/lang","./FileContent"],function(t,p,l,k,g){function e(c,b){for(var f in b){var h=c[f],m=b[f];h!==m&&(h&&"object"===typeof h&&m&&"object"===typeof m?m instanceof Date?c[f]=new Date(m):e(h,m):c[f]=m)}return c}var a=t(null,{data:null,constructor:function(c){this.data=c}}),d=l.parseArgs;l.parseArgs=function(c,b,f){b.data&&
b.data instanceof a&&(b.data=b.data.data,f=!0);return d(c,b,f)};l.deepCreate=function(c,b){if(b instanceof a)return new a(b.data);b=b||{};var f=p.delegate(c),h,m;for(h in c)(m=c[h])&&"object"===typeof m&&(f[h]=l.deepCreate(m,b[h]));return e(f,b)};return t(null,{addVariables:function(c){for(var b in c)this.addVariable(b,c[b])},addVariable:function(c,b){k.isDefined(b)&&(b instanceof g?this._writeFileContent(c,b):this._writeVariable(c,b.toString()))},build:function(c){this._writeBoundary(!0);c.data=
new a(this._prepareBinaryData());var b=c.headers||{};b["Content-Type"]="multipart/form-data; boundary\x3d"+this._dataProvider.boundary;c.headers=b;this._dataProvider=null},_prepareBinaryData:function(){var c=this._dataProvider.buffer;if(!window.Uint8Array)return c;for(var b=c.length,f=new Uint8Array(new ArrayBuffer(b)),h=0;h<b;h++)f[h]=c.charCodeAt(h);return f},_dataProvider:null,_getDataProvider:function(){if(!this._dataProvider){for(var c="",b=0;32>b;b++)c+=String.fromCharCode(Math.floor(97+25*
Math.random()));this._dataProvider={buffer:"",boundary:c}}return this._dataProvider},_writeVariable:function(c,b){this._writeBoundary();this._writeContentDisposition(c);this._writeLineBreak();this._writeData(this._toUTF8(b));this._writeLineBreak()},_writeFileContent:function(c,b){this._writeBoundary();this._writeContentDisposition(c,b.filename);b.contentType&&(this._writeData("Content-Type: "+b.contentType),this._writeLineBreak());b.contentTransferEncoding&&(this._writeData("Content-Transfer-Encoding: "+
b.contentTransferEncoding),this._writeLineBreak());this._writeLineBreak();this._writeData(b.data);this._writeLineBreak()},_writeBoundary:function(c){this._writeDoubleDash();this._writeData(this._getDataProvider().boundary);c?this._writeDoubleDash():this._writeLineBreak()},_writeContentDisposition:function(c,b){b=b?'"; filename\x3d"'+this._toUTF8(b.replace(/"/g,"'")):"";this._writeData('Content-Disposition: form-data; name\x3d"'+this._toUTF8(c)+b+'"');this._writeLineBreak()},_writeDoubleDash:function(){this._writeData("--")},
_writeLineBreak:function(){this._writeData("\r\n")},_writeData:function(c){this._getDataProvider().buffer+=c},_toUTF8:function(c){return unescape(encodeURIComponent(c))}})})},"esri/dijit/geoenrichment/utils/requests/ErrorUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","require"],function(t,p,l){function k(e){var a=new t;l(["./DataResource"],function(d){p((new d(e)).getFileContent(),a.resolve,a.reject)});return a.promise}var g={getErrorFromBin:function(e){var a=
/^text\/|^application\/json/;return e&&e.type&&!a.test(e.type)?null:p(e&&k(e),function(d){if(d){if(d.hasOwnProperty("contentType")&&!a.test(d.contentType))return null;try{var c=JSON.parse(decodeURIComponent(escape(d.data))),b=g.parseError(c);if(b)return b;if(c.messages&&c.messages.length){var f=c.messages[0];if("esriJobMessageTypeError"==f.type)return Error(f.description)}}catch(h){}}return Error("Binary data error.")})},parseError:function(e){var a;e.error?a=g.makeError(e.error):"error"===e.status&&
(a=g.makeError(e));a&&a.code&&null==a.httpCode&&(a.httpCode=a.code);return a},makeError:function(e){null==e?e=Error():"string"===typeof e&&(e={message:e});if(!(e instanceof Error)&&"object"===typeof e){var a=e;e=Error();a.code&&(e.code=a.code);a.message&&(e.message=a.message);a.details&&(e.details=a.details)}e.log=dojoConfig.isDebug;return e}};return g})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesModel":function(){define(["dojo/_base/declare"],
function(t){return t(null,{_levelsCache:null,_levels:null,constructor:function(p){this._initWithLevels(p.levels)},_initWithLevels:function(p){this._levels=p;this._levelsCache={};this._levels.forEach(function(l){delete l.description;this._levelsCache[l.id]=l;l.adminLevel&&(this._levelsCache[l.adminLevel]=l)},this)},getLevels:function(p){return p?this._levels.filter(function(l){return!l.isWholeCountry}):this._levels.slice()},getLevel:function(p){return this._levelsCache[p]},getLevelPluralName:function(p){return(p=
this.getLevel(p))?p.name||p.pluralName:null},toJson:function(){return{levels:this._levels}}})})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayer":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/on dojo/keys dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin ./config ./playerSupports/_CommandSupport ./playerSupports/_LogoSupport ./playerSupports/_MapSupport ./playerSupports/_PageNavigationSupport ./playerSupports/_PrintSupport ./playerSupports/_ReportContainersSwitcher ./playerSupports/_SmartLayoutSupport ./playerSupports/_ZoomSupport ./playerSupports/_WaitingSupport ./supportClasses/PlayerConfigurator ./supportClasses/PlayerToFullScreenAnimator ./toolbar/PlayerToolbar ./ReportPlayerViewModel ./PlayerResizeModes ./PlayerThemes ./PlayerViewModes ./ReportPlayerState ./PlayerZoomBehaviors ./DataProviderGE ./dataProvider/commands/supportClasses/LayoutXMLBuilder esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/async/AsyncQueue dojo/text!./templates/ReportPlayer.html dojo/i18n!esri/nls/jsapi ./_devConfig".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u,v,w,z,E,F,D,B,y,A,H,G,I,L,N,O,S,R,U,Z,ca,Y,da){Y=Y.geoenrichment.dijit.ReportPlayer.ReportPlayer;return t([c,b,h,m,n,r,u,v,w,q,z],{templateString:ca,nls:Y,isPlayer:!0,dataProvider:null,exportCommands:null,config:null,theme:void 0,viewMode:void 0,enableDataDrilling:!0,showToolbarInPopup:!1,showAreaTitle:void 0,showReportTitle:!1,scaleSlidesToFitWindow:void 0,showCloseButton:!1,showToFullScreenAnimation:!1,canAddMoreAreas:!1,areasSelectButtons:null,comparisonSettings:null,
resizeMode:void 0,printConfig:{subtitle:Y.preparedByEsri,printDialogClass:"esri/dijit/geoenrichment/ReportPlayer/printing/PageOptionsDialog/PageOptionsDialog"},showProgressBar:!0,defaultZoomBehavior:void 0,nlsMap:null,isDataDrillingPlayer:!1,isPlayerOnServer:!1,_viewModel:null,_reportData:null,_analysisAreaIndex:0,_originalAreaViewMode:null,_showAllAreasSideBySide:!1,playerToolbar:null,postCreate:function(){this.config=p.mixin(f,this.config);if(f.isPlayerOnServer=this.isPlayerOnServer)f.maps.maxNumberOfMapsShownAtTheSameTime=
1E6,this.defaultZoomBehavior=I.RESET;this._viewModel=new (this._getViewModelClass());this._setUpDataProvider();E.configurePlayer(this);!this.isPlayerOnServer&&this._initToolbar();this._initContainerSwither();!this.isPlayerOnServer&&this._initSmartLayout();!this.isPlayerOnServer&&this._initCommands();!this.isPlayerOnServer&&this._initPageNavigationControls();!this.isPlayerOnServer&&this._initZoomControls();!this.isPlayerOnServer&&this._applyTheme();!this.isPlayerOnServer&&this._showError(!1);!this.isPlayerOnServer&&
this._initProgressController();S.isMobileDevice()&&(d.add(this.domNode,"esriGEReportPlayerMobile"),this._setUpMobileOrientationHandling());this._updateElementsVisibility()},_setUpDataProvider:function(){this.dataProvider=this.dataProvider||new L;this.exportCommands&&this.exportCommands.forEach(function(Q){this.dataProvider.registerCommand(Q)},this)},_orientationDfd:null,_setUpMobileOrientationHandling:function(){var Q=this;this.own(e(window,"orientationchange",function(){Q._orientationDfd&&Q._orientationDfd.resolve("cancel");
var X=Q._orientationDfd=new k;Q._showWaiting(X.promise,"orientationchange");X.promise.then(function(V){"cancel"!==V&&(Q._setViewMode(null),Q.refresh())});g(Q.getRenderPromise(),function(){O.delay(500).then(X.resolve,X.resolve)})}))},_getViewModelClass:function(){return B},_setViewMode:function(Q){E.configurePlayer(this,Q);this._refreshZoomControls()},_initToolbar:function(){var Q=this;this.playerToolbar=(new D({player:this,popupButtonDiv:this.playerAfterToolbarDiv,showToolbarInPopup:this.showToolbarInPopup,
showAreaTitle:this.showAreaTitle,stretchToolbarNode:!this.showToolbarInPopup&&(this.resizeMode===y.FIT_WINDOW?document.body:this.domNode),showCloseButton:this.showCloseButton,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowAnalysisAreaAt:function(X){Q.showAnalysisAreaAt(X)},onCompareAreasSideBySide:function(){Q.showAllAnalysisAreasSideBySide()},onShowPageAt:function(X){Q.showPageAt(X)},isScrollShown:function(){var X=Q.getCurrentReportContainer();return X&&X.isScrollShown&&
X.isScrollShown()},onClose:function(){Q._onClose()},onAddMoreAreas:function(){Q.onAddMoreAreas()},onRemoveAreas:function(X){Q.onAreasPreRemoved(X);X.forEach(function(ka){ka.hidden=!0});if(Q.viewMode===H.PANELS_IN_STACK_ALL)if(2>Q.getAnalysisAreas().filter(function(ka){return!ka.hidden}).length)Q._setAllAreasVisible(!1);else{var V={};X.forEach(function(ka){V[ka.index]=!1});Q.getCurrentReportContainer().setAreasVisibilityState(V,{append:!0});Q._updateAreaSelect()}else if(Q.getCurrentAnalysisArea().hidden){var fa=
Q.getAnalysisAreas().filter(function(ka){return!ka.hidden})[0];fa?Q.showAnalysisAreaAt(fa.index):Q.refresh()}else Q._updateAreaSelect();Q.onAreasRemoved(X)}})).placeAt(this.playerToolbarDiv);this.own(this.playerToolbar);this.showCloseButton&&this.own(e(window,"keyup",function(X){Q.getWaitingPromise()||G.isViewingDataDrillingZoom||G.isImageViewerShown||X.keyCode===a.ESCAPE&&Q._onClose()}))},_applyTheme:function(){d.remove(this.domNode,"playerThemeDark playerThemeLight");d.add(this.domNode,this.theme===
A.DARK?"playerThemeDark":"playerThemeLight");this.playerToolbar.setTheme(this.theme)},playReport:function(Q,X){return this._showWaiting(this._callAfterRendering("_doPlayReport",[Q,X]),"playReport")},_doPlayReport:function(Q,X){this.playerToolbar&&this.playerToolbar.closePopup();var V=this;this._showError(!1);this._progressController&&this._progressController.reset();this.showToFullScreenAnimation&&this.resizeMode===y.FIT_WINDOW&&F.animateTo(this);this.dataProvider._onCreateReportStarted=function(){V._viewModel.preInitialize()};
this._viewModel.reset();return g(this.dataProvider.getReportData(Q,{progressCallback:function(fa){V._progressController&&V._progressController.setLoadDataProgress(fa)}}),function(fa){if(V.viewMode===H.PANELS_IN_STACK_ALL){var ka=V.viewMode;1<fa.analysisAreas.length&&!fa.isMultiFeature?V._originalAreaViewMode||(V._showAllAreasSideBySide=!0,V._originalAreaViewMode=E.getDefaultViewMode(V)):(V._showAllAreasSideBySide=!1,ka=V._originalAreaViewMode||E.getDefaultViewMode(V));V._setViewMode(ka)}return V.setReportData(fa,
X)},function(fa){V._showError(fa)})},refresh:function(Q){return this._reportData&&g(this.setReportData(this._reportData,{waitUntilAllContentIsReady:!(!Q||!Q.waitUntilAllContentIsReady)}),function(){this.showPageAt(0);return this.resize()}.bind(this))},_isDataBeingSetFlag:!1,_notifyShownPendingFlag:!1,setReportData:function(Q,X){return this._showWaiting(this._callAfterRendering("_doSetReportData",[Q,X]),"setReportData")},setReportDataAndExport:function(Q,X){var V=this;if(Q.reportObject.isMultiFeature)return this.setReportData(Q,
{waitUntilAllContentIsReady:!0,disableAnimation:!0}).then(function(){return V.executeCommand(X.commandId,X.commandParams)});var fa=new k,ka=0,oa=[],C=function(){var J=V.dataProvider.reportDataToSingleAreaReportData(Q,{currentFeatureIndex:ka,reportTitle:Q.reportTitle,templateJson:Q.templateJson});V.setReportData(J,{waitUntilAllContentIsReady:!0,disableAnimation:!0}).then(function(){var M=p.mixin({},X.commandParams);M.pageNumerationInfo={startAreaIndex:ka,numAreas:Q.analysisAreas.length};return g(V.executeCommand(X.commandId,
M)).then(function(K){oa.push(K);++ka===Q.analysisAreas.length?fa.resolve(N.stitchDocuments(oa)):setTimeout(C)})})};C();return fa.promise},_doSetReportData:function(Q,X){var V=this;X=X||{};this._reportData=Q;da.emulateErrors.playerError&&(Q=null);if(!Q||da.emulateErrors.emptyDataProviderResponse)this._showError(!0);else{this._isDataBeingSetFlag=!0;G.isAnimationSuspended=!0;this.onSetReportDataStart();var fa=new k;this._viewModel.setAnimationAllowed(!X.disableAnimation);this._configureViewModel(Q);
(V.isPlayerOnServer?g():O.delay(0)).then(function(){if(1===Q.analysisAreas.length||Q.isMultiFeature)V._destroyAllContainers(),V._resetMapBuilder(),V._applyReportData({analysisAreaIndex:0,rerenderContent:!0}).then(fa.resolve,fa.reject);else{!1!==X._resetLoadedContents&&(V._destroyAllContainers(),V._resetMapBuilder());var ka=Q.analysisAreas.length-1,oa=function(){for(;0<=ka&&Q.analysisAreas[ka].hidden;)ka--;0>ka?fa.resolve():V._applyReportData({analysisAreaIndex:ka--,rerenderContent:!1,isFinalArea:0>
ka}).then(function(){(V.isPlayerOnServer?g():O.delay(0)).then(oa)},fa.reject)};oa()}});this._progressController&&this._progressController.setNumAreas(Q.analysisAreas.length);this._progressController&&this._progressController.setLoadDataProgress(1);return fa.promise.then(function(){return V._progressController&&V._progressController.finalize()}).otherwise(function(ka){V._showError(ka)}).always(function(){var ka=V.getCurrentReportContainer();if(ka&&ka.domNode)return(V.isPlayerOnServer?g():O.delay(300)).then(function(){V._isDataBeingSetFlag=
!1;V._notifyShownPendingFlag=!R.isNodeInLayout(V.domNode);G.isAnimationSuspended=V.isPlayerOnServer;V.onSetReportDataEnd();V._emitPendingResizedEvent();V._progressController&&V._progressController.reset();if(X.waitUntilAllContentIsReady)return V.getRenderPromise()})})}},showAnalysisAreaAt:function(Q){return this._callAfterRendering("_doShowAnalysisAreaAt",[Q])},_doShowAnalysisAreaAt:function(Q){var X=this;return g(this._setAllAreasVisible(!1),function(){if(X._analysisAreaIndex!==Q&&X.getAnalysisAreas()[Q]&&
!X.getAnalysisAreas()[Q].hidden)return X._applyReportData({analysisAreaIndex:Q,rerenderContent:!1})})},showAllAnalysisAreasSideBySide:function(){return this._callAfterRendering("_doShowAllAnalysisAreasSideBySide")},_doShowAllAnalysisAreasSideBySide:function(){return this._setAllAreasVisible(!0)},_setAllAreasVisible:function(Q){if(this._showAllAreasSideBySide!==Q)return Q?(this._showAllAreasSideBySide=!0,this._originalAreaViewMode=this.viewMode===H.PANELS_IN_STACK_ALL?E.getDefaultViewMode(this):this.viewMode,
this._setViewMode(H.PANELS_IN_STACK_ALL)):(this._showAllAreasSideBySide=!1,this._setViewMode(this._originalAreaViewMode),this._originalAreaViewMode=null),this.refresh()},_applyReportData:function(Q){var X=this;Q=Q||{};var V=this._reportData&&this._reportData.isMultiFeature?0:Q.analysisAreaIndex||0,fa=!1!==Q.rerenderContent;this._analysisAreaIndex=V;this._showError(!this._reportData);if(this._reportData)return g(this._viewModel.initialize(!this._reportData.reportObject.isGraphicReport,this.viewMode),
function(){return X._setReportContainer(fa)?X._doApplyTemplateJson({analysisAreaIndex:V,isFinalArea:Q.isFinalArea}):X._updateAreaSelect()})},_doApplyTemplateJson:function(Q){var X=this,V=this.getCurrentReportContainer(),fa=p.clone(this._reportData.templateJson);da.emulateErrors.emptyTemplateJson&&(fa.sectionsTables.length=0);var ka=V.fromJson(fa,{waitUntilAllContentIsReady:!0,progressCallback:function(oa){X._progressController&&X._progressController.setProgressForAreaAt(oa,Q.analysisAreaIndex)},analysisAreaIndex:Q.analysisAreaIndex,
isFinalArea:Q.isFinalArea,renderSync:this.isPlayerOnServer});fa=V.getPagePromise?V.getPagePromise():ka;V=V.getContentPromise?V.getContentPromise():ka;this._registerContainerLoadPromise(V||fa);this._updateAreaSelect();return g(fa,function(){X._setCurrentContainerLoaded();X.showPageAt(X._currentPageIndex);return X.resize()})},_updateAreaSelect:function(){this.playerToolbar&&this.playerToolbar.updateAreaSelect({analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,
currentAreaIndex:this._showAllAreasSideBySide?"all":this.getCurrentAnalysisAreaIndex(),isMultiFeature:this._reportData.isMultiFeature})},getReportData:function(){return this._reportData},getReportTitle:function(){return this._reportData&&this._reportData.reportTitle||""},getCurrentAnalysisAreaIndex:function(){return this._analysisAreaIndex},getCurrentAnalysisArea:function(){return this._reportData&&this._reportData.analysisAreas[this._analysisAreaIndex]},getAnalysisAreas:function(){return this._reportData&&
this._reportData.analysisAreas},reportDataToJson:function(Q){return this._showWaiting(this.dataProvider.reportDataToJson(this.getReportData(),Q),"reportDataToJson")},reportDataFromJson:function(Q,X){var V=this;this._showError(!1);return this._showWaiting(g(this.dataProvider.reportDataFromJson(Q),function(fa){return V.setReportData(fa,X)}),"reportDataFromJson")},_configureViewModel:function(Q){this._viewModel.setTheme(this._reportData.templateJson.theme);this._viewModel.enableDataDrilling=!this.isPlayerOnServer&&
this.enableDataDrilling;this._viewModel.setDynamicReportInfo({fieldData:this._reportData.fieldData,analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,attachmentsStore:this._reportData.attachmentsStore,createMapFunc:p.hitch(this,this._createMap),reportObject:this._reportData.reportObject,isMultiFeature:this._reportData.isMultiFeature,isFixedDataMode:!this._reportData.config.geoenrichmentUrl,geClient:this._reportData.geClient,templateVariableProvider:this._reportData.templateVariableProvider,
countryID:this._reportData.config.countryID,hierarchy:this._reportData.config.hierarchy,templateJson:this._reportData.templateJson});this._viewModel.getDynamicBehaviorImage=p.hitch(this,this._getReportLogo)},notifyShown:function(){!this._isDataBeingSetFlag&&this._notifyShownPendingFlag&&(this.getCurrentReportContainer()&&this.getCurrentReportContainer().notifyShown(),this._notifyShownPendingFlag=!1)},_isErrorShown:!1,_showError:function(Q){this.errorViewDiv&&R.destroy(this.errorViewDiv);this.errorViewDiv=
null;R[Q?"hide":"show"](this.printableDivContainer);d[Q?"add":"remove"](this.domNode,"esriGEReportPlayerError");this._isErrorShown=!!Q;this._updateElementsVisibility();Q?(this.errorViewDiv=R.create("div",{"class":"esriGEReportPlayerErrorMessage",innerHTML:Y.cantPlayReportError},this.domNode),this.playerToolbar&&this.playerToolbar.setErrorShown(!0),this._progressController&&this._progressController.reset(),console.log(Q),this.onError(Q)):this.playerToolbar&&this.playerToolbar.setErrorShown(!1)},isErrorShown:function(){return this._isErrorShown},
_updateElementsVisibility:function(){var Q=0<this._waitingCount?!1:this._reportData||this._isErrorShown,X=0<this._waitingCount||this._isErrorShown?!1:!0,V=0<this._waitingCount||this._isErrorShown?!1:!0;this.playerToolbarDiv&&(this.playerToolbarDiv.style.opacity=Q?"":"0.001");this.sidePageNavigator&&(this.sidePageNavigator.style.opacity=X?"":"0.001");this.reportContainerDiv.style.opacity=V?"":"0.001"},setPrintMode:function(Q){d[Q?"add":"remove"](this.domNode,"esriGEReportPlayerInPrinting")},resize:function(Q,
X){this._resize({width:Q,height:X});this._updatePageNavigator();this._updateZoomControls();this.playerToolbar&&this.playerToolbar.update()},_pendingResizeEvent:null,_emitResizedEvent:function(Q){this._pendingResizeEvent={isPaginating:!!Q};this._isDataBeingSetFlag||this._emitPendingResizedEvent()},_emitPendingResizedEvent:function(){this._pendingResizeEvent&&(this.onResized(this._pendingResizeEvent.isPaginating),this._pendingResizeEvent=null)},_onClose:function(){var Q;this.showToFullScreenAnimation&&
this.resizeMode===y.FIT_WINDOW&&(Q=F.animateFrom(this));g(Q,function(){this.onClose()}.bind(this))},getVisualState:function(){return{type:"reportPlayer",viewMode:this.viewMode,reportContainers:this.getAllReportContainers().map(function(Q){return Q.getVisualState&&Q.getVisualState()})}},setVisualState:function(Q){return this._callAfterRendering("_doSetVisualState",[Q])},_doSetVisualState:function(Q){var X=Q&&this.getAllReportContainers().map(function(V,fa){return V.setVisualState&&V.setVisualState(Q.reportContainers[fa])});
return l(X)},_renderQueue:null,getRenderPromise:function(){return this._renderQueue&&this._renderQueue.getPromise()},_registerContainerLoadPromise:function(Q){this._renderQueue=this._renderQueue||new Z;this._renderQueue.add(Q);this.playerToolbar&&this.playerToolbar.setContentLoadPromise(this.getRenderPromise())},_safeFuncCaller:null,_callAfterRendering:function(Q,X){if(this.isPlayerOnServer)return this[Q].apply(this,X);var V=this;this._safeFuncCaller=this._safeFuncCaller||{};this._safeFuncCaller[Q]=
function(){return V[Q].apply(V,X)};return g(this.getRenderPromise(),function(){return U.invoke(V._safeFuncCaller,Q)})},onSetReportDataStart:function(){},onSetReportDataEnd:function(){},onResized:function(Q){},onClose:function(){},onError:function(Q){},onAddMoreAreas:function(){},onAreasPreRemoved:function(Q){},onAreasRemoved:function(Q){},destroy:function(){this._destroyAllContainers();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/config":function(){define(["esri/kernel"],
function(t){function p(l){l=l.split(".");return Number((Number(l[0])+Number(l[1])/100).toFixed(2))}t=Math.max(p("3.37"),p(t.version)).toFixed(2);return{jsapiVersion:t,esriDijitCssUrl:"https://js.arcgis.com/"+t+"/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/"+t+"/esri/css/esri.css",playerSourceRootUrl:"https://js.arcgis.com/"+t+"/",configScriptText:null,env:"prod",isPlayerOnServer:!1,updateVariableInfoFromDataXml:!0,runReportTask:{cacheResult:!0,ignoreErrors:!0,secondAttempt:!0},
maps:{maxNumberOfMapsShownAtTheSameTime:6},charts:{showErrorIfHasUnavailableData:!1},tables:{leaveEmptyCellsUponError:!0,showUnavailableData:!0},createImageCommand:{skipSavingFile:!1},createPDFCommand:{skipSavingFile:!1,skipCreditConsumption:!1},createPlayerCommand:{loadMapPortalItems:!0,compressData:!1,prettifyDataJson:!1,skipCreditConsumption:!1},exportToExcel:{skipSavingFile:!1},modules:{exportCommands:!0,complexCellTooltips:!0,paths:{panoramicViewer:null}},generalization:{factor:-1,maxVerticesInAllFeatures:1E5,
numVerticesPerFeature:5E4}}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_CommandSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/PlayerCommands esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(t,p,l,k,g,e,a){return t(null,{_initCommands:function(){a.isMobileDevice()||!e.modules.exportCommands?this.playerToolbar.notifyCommandButtonsAdded():
k(this.dataProvider.getCommands&&this.dataProvider.getCommands(),function(d){this._createCommandButtons(d);this.playerToolbar&&this.playerToolbar.notifyCommandButtonsAdded()}.bind(this))},_lastNonPrintCommandId:null,_executeExportCallback:null,_executePrintCallback:null,_createCommandButtons:function(d){function c(m){var n=new l,q=new l;b.onCommandSettingsShown(n.promise);b._saveVisualState();k(b._getPrintableContainer({commandId:m,showDialog:!0}),function(r){if(r){var u=r.getSelectedCommandId();
u&&u!==g.PRINT&&(b._lastNonPrintCommandId=u);k(b._executeCommand(u,{printableContainer:r}),q.resolve,q.reject)}else k(b._applySavedVisualState(),function(){b.onCommandCanceled();q.resolve()})}).always(n.resolve);return q.promise}var b=this;if(d&&d.length){var f,h=d.filter(function(m){return m.id===g.PRINT?(f=m,!1):!0});h.length&&(this._executeExportCallback=function(){return c(b._lastNonPrintCommandId||h[0].id)},this._createCommandButton(h[0],this._executeExportCallback));f&&(this._executePrintCallback=
function(){return c(f.id)},this._createCommandButton(f,this._executePrintCallback))}},executeExport:function(){return this._executeExportCallback&&this._executeExportCallback()},executePrint:function(){return this._executePrintCallback&&this._executePrintCallback()},_createCommandButton:function(d,c){return this.playerToolbar&&this.playerToolbar.createCommandButton(d,c)},getCommandExportDialogSettings:function(){return this._getPrintDialogSettings()},executeCommand:function(d,c){c=c||{};this._saveVisualState();
var b=this._viewModel.dynamicReportInfo.fieldData;!this.isPlayerOnServer||d!==g.PDF&&d!==g.IMAGE||(c.exportSettings=p.mixin({},b.reportInfo&&b.reportInfo.exportSettings,c.exportSettings));var f=this;return k(this._getPrintableContainer({commandId:d,showDialog:!1,exportSettings:c.exportSettings}),function(h){return f._executeCommand(d,p.mixin({printableContainer:h},c))})},_executeCommand:function(d,c){function b(){k(f.dataProvider.executeCommand&&f.dataProvider.executeCommand(d,f,c,function(q){f.onCommandProgress(q)}),
m.resolve,m.reject)}var f=this,h=this._viewModel.dynamicReportInfo.fieldData;d!==g.PDF&&d!==g.DYNAMIC_HTML||!h.runReportTaskIDs||(c.creditsTaskIDs=h.runReportTaskIDs);var m=new l;this.isPlayerOnServer?b():setTimeout(b);var n=m.promise.then(function(q){return k(f._applySavedVisualState(),function(){return q})});this.onCommandStart(n,d);this._showWaiting(n,"executeCommand");n.always(function(){f.onCommandEnd(n)});return n},_visualStateMemo:null,_saveVisualState:function(){this._visualStateMemo=this.getVisualState()},
_applySavedVisualState:function(){var d=this;return this.setVisualState(this._visualStateMemo).then(function(){d._visualStateMemo=null})},onCommandSettingsShown:function(d){},onCommandCanceled:function(){},onCommandStart:function(d,c){},onCommandProgress:function(d){},onCommandEnd:function(d){}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerCommands":function(){define([],function(){var t={HTML:"createHTML",PDF:"createPDF",PRINT:"print",DYNAMIC_HTML:"createDynamicHTML",IMAGE:"createImage",EXCEL:"exportToExcel",
isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1}};return t})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff","dojo/domReady!"],function(t){var p={},l=function(){var g=window,e=g.navigator.platform,a=g.navigator.userAgent,d={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!g.cordova&&!g.phonegap),phonegap:!(!g.cordova&&!g.phonegap),electron:!1,nwjs:!1},c=g.screen.width,b=
g.screen.height,f=a.match(/(Android);?[\s\/]+([\d.]+)?/),h=a.match(/(iPad).*OS\s([\d_]+)/),m=a.match(/(iPod)(.*OS\s([\d_]+))?/),n=!h&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),q=0<=a.indexOf("MSIE ")||0<=a.indexOf("Trident/"),r=0<=a.indexOf("Edge/"),u=0<=a.indexOf("Gecko/")&&0<=a.indexOf("Firefox/"),v="Win32"===e,w=0<=a.toLowerCase().indexOf("electron"),z="undefined"!==typeof nw&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.nw;e="MacIntel"===
e;var E="1024x1366 1366x1024 834x1194 1194x834 834x1112 1112x834 768x1024 1024x768".split(" ");!h&&e&&t("touch")&&0<=E.indexOf(c+"x"+b)&&((h=a.match(/(Version)\/([\d.]+)/))||(h=[0,1,"13_0_0"]),e=!1);d.ie=q;d.edge=r;d.firefox=u;f&&!v&&(d.os="android",d.osVersion=f[2],d.android=!0,d.androidChrome=0<=a.toLowerCase().indexOf("chrome"));if(h||n||m)d.os="ios",d.ios=!0;n&&!m&&(d.osVersion=n[2].replace(/_/g,"."),d.iphone=!0);h&&(d.osVersion=h[2].replace(/_/g,"."),d.ipad=!0);m&&(d.osVersion=m[3]?m[3].replace(/_/g,
"."):null,d.ipod=!0);d.ios&&d.osVersion&&0<=a.indexOf("Version/")&&"10"===d.osVersion.split(".")[0]&&(d.osVersion=a.toLowerCase().split("version/")[1].split(" ")[0]);d.webView=!(!(n||h||m)||!a.match(/.*AppleWebKit(?!.*Safari)/i)&&!g.navigator.standalone)||g.matchMedia&&g.matchMedia("(display-mode: standalone)").matches;d.webview=d.webView;d.standalone=d.webView;d.desktop=!(d.ios||d.android)||w||z;d.desktop&&(d.electron=w,d.nwjs=z,d.macos=e,d.windows=v,d.macos&&(d.os="macos"),d.windows&&(d.os="windows"));
d.pixelRatio=g.devicePixelRatio||1;return d}();p.device=l;p.isMobileDevice=function(){return!l.desktop};p.isPCWithTouchScreen=function(){return l.desktop&&t("touch")};p.isLandscape=function(){return 90===Math.abs(window.orientation)};var k=null;p.isWebLayout=function(){if(!k){var g=document.createElement("div");g.style="visibility:hidden;height:1in;width:1in;position:absolute;left: -100%;top:-100%;";document.body.appendChild(g);k=g.offsetHeight;g.parentNode.removeChild(g)}g=k;g*=7;var e=document.body.offsetWidth;
if(e>=g)return!0;var a=document.body.offsetHeight;return e>=a&&Math.sqrt(e*e+a*a)>=g?!0:!1};p.press=l.desktop?"mousedown":"touchstart";p.release=l.desktop?"mouseup":"touchend";p.click=l.desktop?"click":"touchend";p.clickOrRelease=l.desktop?"click, mouseup":"touchend";p.move=l.desktop?"mousemove":"touchmove";return p})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_LogoSupport":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/when","../core/annotations/supportClasses/DynamicBehaviors",
"../core/supportClasses/images/DefaultLogoLoader"],function(t,p,l,k){return t(null,{_getReportLogo:function(g,e,a){function d(){return p(c._reportData.attachmentsStore&&c._reportData.attachmentsStore.getImages(),function(b){return p(b&&b[0]&&b[0].getThumbnail(),function(f){return f||c._getDefaultLogo(e,a)})})}var c=this;switch(g){case l.ATTACHMENTS:return d();default:return this._getDefaultLogo(e,a)}},_getDefaultLogo:function(g,e){return this._reportData.customLogo||e||k.getDefaultLogo(this._viewModel.getDocumentDefaultStyles())}})})},
"esri/dijit/geoenrichment/ReportPlayer/core/annotations/supportClasses/DynamicBehaviors":function(){define([],function(){var t={ATTACHMENTS:"attachments",LOGO:"logo",toSupportedValue:function(p,l){return p===t.ATTACHMENTS?p:p||l?t.LOGO:null}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/DefaultLogoLoader":function(){define(["require","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/utils/ColorUtil"],function(t,p,l){return{_identifyDefaultLogoBackground:function(k){return!k||
l.isTransparent(k.backgroundColor)?"transparent":l.isLightColor(k.backgroundColor)?"light":"dark"},_loadLogo:function(k){var g=new p;t(["./"+k],function(e){g.resolve(e)});return g.promise},getDefaultLogo:function(k){switch(this._identifyDefaultLogoBackground(k)){case "light":return this._loadLogo("DefaultLogoGraphicReportDark");case "dark":return this._loadLogo("DefaultLogoGraphicReportLight");default:return this._loadLogo("DefaultLogoGraphicReportGeneric")}}}})},"esri/dijit/geoenrichment/utils/ColorUtil":function(){define(["dojo/_base/Color",
"dojox/color/_base","dojox/color/Palette"],function(t,p,l){function k(e,a,d){return Math.round((e&255)*(1-d)+(a&255)*d)}var g={toCSSColor:function(e,a,d){"string"!==typeof e||/^0x/i.test(e)||(e=t.fromString(e));if(e instanceof t)return a||1===e.a?e.toHex():e.toCss(!0);if(null==e||isNaN(e))return d?g.toCSSColor(d,a):"#000000";e="00000"+Number(e).toString(16);return"#"+e.substr(e.length-6)},toColor:function(e,a){return"object"===typeof e?(new t).setColor(e):t.fromString(g.toCSSColor(e,!1,a))},getCSSColorWithAlpha:function(e,
a){return g.toCSSColor(g.getColorWithAlpha(e,a))},getColorWithAlpha:function(e,a){e=(new t).setColor(e);e.a=a;return e},transform:function(e,a){var d=new l;d.colors=[new t(e)];return d.transform({use:void 0!==a.dl?"hsl":"hsv",dh:a.dh||0,ds:a.ds||0,dv:a.dv||0,dl:a.dl||0}).colors[0]},generateAnalogousColorScheme:function(e,a,d){return l.generators.analogous({base:e,high:a,low:d}).colors},applyColorHue:function(e,a){e=new p.Color(e);a=new p.Color(a);e=e.toHsl();var d=a.toHsl();e=p.fromHsl({h:e.h,s:0===
e.s?0:0===d.s?e.s:d.s,l:d.l});e.a=a.a;return e},getColorParams:function(e){e=new p.Color(e);var a=e.toHsv();a.l=e.toHsl().l;return a},generateGradient:function(e,a){e=e.map(g.toRGBColor);var d=[];if(0===e.length-1||1===a){e=e[0];for(var c=0;c<a;c++)d.push(e);return d}var b=1/(a-1);for(c=0;c<a;c++)d.push(g.getGradientRGBColor(e,c*b));return d},getGradientRGBColor:function(e,a,d){var c=e.length-1,b=1>c||0>=a?0:1<=a?c:-1;if(0<=b)return e[b];a*=c;b=Math.floor(a);b===c&&b--;return g.mixRGBColors(e[b],
e[b+1],a-b,d)},mixRGBColors:function(e,a,d,c){1<d?d=1:0>d&&(d=0);var b=k(e,a,d),f=k(e>>8,a>>8,d),h=k(e>>16,a>>16,d);return((c?k(e>>24,a>>24,d):0)<<24)+(h<<16)+(f<<8)+b},toRGBColor:function(e,a){e=g.toCSSColor(e,!0,a);return parseInt("0x"+e.substr(1))},getContrastColor:function(e,a,d,c){return g.isLightColor(e,c)?g.toColor(a,"#000000"):g.toColor(d,"#FFFFFF")},getHighlightColor:function(e,a){a=a||{};e=new p.Color(e);x=e.toHsl();if("darker"===a.method)x.l=50>x.l?x.l+30:x.l-20,0<x.s&&(x.s+=30);else{var d=
a.saturation||100,c=a.luminosity1||75;a=a.luminosity2||50;0===x.s?x.l=50>x.l?x.l+30:x.l-20:(x.s=d,x.l=x.l<a?c:x.l>c?a:x.l-a>c-x.l?a:c)}a=p.fromHsl(x);a.a=e.a;return a},getLightness:function(e){e=g.toRGBColor(e);return(299*(e>>16&255)+587*(e>>8&255)+114*(e&255))/1E3},isLightColor:function(e,a){return g.getLightness(e)>=(void 0===a?128:a)},colorsEqual:function(e,a){e instanceof t||(e=g.toColor(e));a instanceof t||(a=g.toColor(a));return e.a==a.a&&e.r==a.r&&e.g==a.g&&e.b==a.b},isTransparent:function(e){e=
g.toCSSColor(e);return"rgba(0,0,0,0)"===e.toLowerCase().replace(/\s/g,"")},generateRandomColor:function(e){function a(){return d+Math.round((c-d)*Math.random())}e=e||{};var d=e.min||0,c=e.max||255,b=e.randomizeAlpha?a():1;return e.grayScheme?(e=a(),new t([e,e,e,b])):new t([a(),a(),a(),b])}};return g})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(t,p,l){function k(c,b,f){var h=new l.Palette;h.colors=[];p.forEach(c.colors,function(m){h.colors.push(new l.Color({r:Math.min(255,
Math.max(0,"dr"==b?m.r+f:m.r)),g:Math.min(255,Math.max(0,"dg"==b?m.g+f:m.g)),b:Math.min(255,Math.max(0,"db"==b?m.b+f:m.b)),a:Math.min(1,Math.max(0,"da"==b?m.a+f:m.a))}))});return h}function g(c,b,f){var h=new l.Palette;h.colors=[];p.forEach(c.colors,function(m){m=m.toCmy();h.colors.push(l.fromCmy(Math.min(100,Math.max(0,"dc"==b?m.c+f:m.c)),Math.min(100,Math.max(0,"dm"==b?m.m+f:m.m)),Math.min(100,Math.max(0,"dy"==b?m.y+f:m.y))))});return h}function e(c,b,f){var h=new l.Palette;h.colors=[];p.forEach(c.colors,
function(m){m=m.toCmyk();h.colors.push(l.fromCmyk(Math.min(100,Math.max(0,"dc"==b?m.c+f:m.c)),Math.min(100,Math.max(0,"dm"==b?m.m+f:m.m)),Math.min(100,Math.max(0,"dy"==b?m.y+f:m.y)),Math.min(100,Math.max(0,"dk"==b?m.b+f:m.b))))});return h}function a(c,b,f){var h=new l.Palette;h.colors=[];p.forEach(c.colors,function(m){m=m.toHsl();h.colors.push(l.fromHsl(("dh"==b?m.h+f:m.h)%360,Math.min(100,Math.max(0,"ds"==b?m.s+f:m.s)),Math.min(100,Math.max(0,"dl"==b?m.l+f:m.l))))});return h}function d(c,b,f){var h=
new l.Palette;h.colors=[];p.forEach(c.colors,function(m){m=m.toHsv();h.colors.push(l.fromHsv(("dh"==b?m.h+f:m.h)%360,Math.min(100,Math.max(0,"ds"==b?m.s+f:m.s)),Math.min(100,Math.max(0,"dv"==b?m.v+f:m.v))))});return h}l.Palette=function(c){this.colors=[];c instanceof l.Palette?this.colors=c.colors.slice(0):c instanceof l.Color?this.colors=[null,null,c,null,null]:t.isArray(c)?this.colors=p.map(c.slice(0),function(b){return t.isString(b)?new l.Color(b):b}):t.isString(c)&&(this.colors=[null,null,new l.Color(c),
null,null])};t.extend(l.Palette,{transform:function(c){var b=k;if(c.use){var f=c.use.toLowerCase();0==f.indexOf("hs")?b="l"==f.charAt(2)?a:d:0==f.indexOf("cmy")&&(b="k"==f.charAt(3)?e:g)}else if("dc"in c||"dm"in c||"dy"in c)b="dk"in c?e:g;else if("dh"in c||"ds"in c)b="dv"in c?d:a;f=this;for(var h in c)"use"!=h&&(f=b(f,h,c[h]));return f},clone:function(){return new l.Palette(this)}});t.mixin(l.Palette,{generators:{analogous:function(c){var b=c.high||60,f=c.low||18;c=(t.isString(c.base)?new l.Color(c.base):
c.base).toHsv();var h=Math.max(10,95>=c.s?c.s+5:100-(c.s-95)),m=92<=c.v?c.v-9:Math.max(c.v+9,20),n=90>=c.v?Math.max(c.v+5,20):95+Math.ceil((c.v-90)/2),q=[h,1<c.s?c.s-1:21-c.s,c.s,h,h],r=[m,n,c.v,m,n];return new l.Palette(p.map([(c.h+f+360)%360,(c.h+Math.round(f/2)+360)%360,c.h,(c.h-Math.round(b/2)+360)%360,(c.h-b+360)%360],function(u,v){return l.fromHsv(u,q[v],r[v])}))},monochromatic:function(c){c=t.isString(c.base)?new l.Color(c.base):c.base;var b=c.toHsv(),f=9<b.s-30?b.s-30:b.s+30,h=b.s,m=20<b.v-
20?b.v-20:b.v+60,n=20<b.v-50?b.v-50:b.v+30;return new l.Palette([l.fromHsv(b.h,f,100-.8*(100-b.v)),l.fromHsv(b.h,h,n),c,l.fromHsv(b.h,f,n),l.fromHsv(b.h,h,m)])},triadic:function(c){c=t.isString(c.base)?new l.Color(c.base):c.base;var b=c.toHsv(),f=(b.h-157+360)%360,h=90<b.s?b.s-10:b.s+10,m=95<b.s?b.s-5:b.s+5,n=20<b.v-20?b.v-20:b.v+20,q=20<b.v-30?b.v-30:b.v+30,r=70<b.v-30?b.v-30:b.v+30;return new l.Palette([l.fromHsv((b.h+57+360)%360,20<b.s?b.s-10:b.s+10,b.v),l.fromHsv(b.h,h,q),c,l.fromHsv(f,h,n),l.fromHsv(f,
m,r)])},complementary:function(c){c=t.isString(c.base)?new l.Color(c.base):c.base;var b=c.toHsv(),f=360>2*b.h+137?2*b.h+137:Math.floor(b.h/2)-137,h=100-.9*(100-b.s),m=Math.min(100,b.s+20),n=20<b.v?b.v-30:b.v+30;return new l.Palette([l.fromHsv(b.h,Math.max(b.s-10,0),Math.min(100,b.v+30)),l.fromHsv(b.h,h,n),c,l.fromHsv(f,m,n),l.fromHsv(f,b.s,b.v)])},splitComplementary:function(c){var b=t.isString(c.base)?new l.Color(c.base):c.base,f=c.da||30;c=b.toHsv();var h=360>2*c.h+137?2*c.h+137:Math.floor(c.h/
2)-137,m=(h-f+360)%360;f=(h+f)%360;h=100-.9*(100-c.s);var n=Math.min(100,c.s+20),q=20<c.v?c.v-30:c.v+30;return new l.Palette([l.fromHsv(m,Math.max(c.s-10,0),Math.min(100,c.v+30)),l.fromHsv(m,h,q),b,l.fromHsv(f,n,q),l.fromHsv(f,c.s,c.v)])},compound:function(c){c=t.isString(c.base)?new l.Color(c.base):c.base;var b=c.toHsv(),f=360>2*b.h+18?2*b.h+18:Math.floor(b.h/2)-18,h=360>2*b.h+120?2*b.h+120:Math.floor(b.h/2)-120,m=360>2*b.h+99?2*b.h+99:Math.floor(b.h/2)-99,n=80<b.s-10?b.s-10:b.s+10,q=10<b.s-25?b.s-
25:b.s+25,r=80<b.v-20?b.v-20:b.v+20,u=Math.max(b.v,20);return new l.Palette([l.fromHsv(f,10<b.s-40?b.s-40:b.s+40,10<b.v-40?b.v-40:b.v+40),l.fromHsv(f,n,r),c,l.fromHsv(h,q,u),l.fromHsv(m,n,r)])},shades:function(c){c=t.isString(c.base)?new l.Color(c.base):c.base;var b=c.toHsv(),f=100==b.s&&0==b.v?0:b.s,h=20<=b.v-25?b.v-25:b.v+55,m=20<=b.v-75?b.v-75:b.v+5,n=Math.max(b.v-10,20);return new l.Palette([new l.fromHsv(b.h,f,20<b.v-50?b.v-50:b.v+30),new l.fromHsv(b.h,f,h),c,new l.fromHsv(b.h,f,m),new l.fromHsv(b.h,
f,n)])}},generate:function(c,b){if(t.isFunction(b))return b({base:c});if(l.Palette.generators[b])return l.Palette.generators[b]({base:c});throw Error("dojox.color.Palette.generate: the specified generator ('"+b+"') does not exist.");}});return l.Palette})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_MapSupport":function(){define(["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,p,l,k){return p(null,{_initBuilderPromise:null,
_mapBuilder:null,_initMapBuilder:function(){var g=this;if(this._initBuilderPromise)return this._initBuilderPromise;var e=new l;t([g.isPlayerOnServer?"../core/supportClasses/map/ServerMapBuilder":"../core/supportClasses/map/MapBuilder"],function(a){g._mapBuilder=new a({getPlayerZoomScale:function(d){var c=g.getCurrentReportContainer();return c&&c.getPanelZoomScale?c.getPanelZoomScale(d):c&&c.getZoomInfo&&c.getZoomInfo().scale}});e.resolve()});return this._initBuilderPromise=e.promise},collectMaps:function(g){return this._mapBuilder?
g&&g.allAreas?this._mapBuilder.collectAllAreasMaps():this._mapBuilder.collectAreaMaps(this.getCurrentAnalysisAreaIndex()):[]},_resetMapBuilder:function(){this._mapBuilder&&this._mapBuilder.reset()},_createMap:function(g,e){e=e||{};return k(this._initMapBuilder(),function(){this._mapBuilder.setFallbackMapImageInfos(this._reportData.mapImageInfos);return this._mapBuilder.createMap(g,{reportData:this._reportData,areaIndex:e.areaIndex,defaultBasemapId:this._getDefaultBasemapId()||e.defaultBasemapId,defaultBasemapName:e.defaultBasemapName,
webMapId:e.webMapId,webMapName:e.webMapName,additionalLayerInfos:e.additionalLayerInfos,calculatorFieldName:e.calculatorFieldName,pinSymbolJson:e.pinSymbolJson,areaSymbolJsons:e.areaSymbolJsons,areaSymbolRamp:e.areaSymbolRamp,locatorPointsControllers:e.locatorPointsControllers,stdPolygonsControllers:e.stdPolygonsControllers,thisAreasHighlightController:e.thisAreasHighlightController,legendController:e.legendController,fieldData:this._viewModel.dynamicReportInfo.fieldData,geClient:this._viewModel.dynamicReportInfo.geClient,
countryID:this._viewModel.dynamicReportInfo.countryID,hierarchy:this._viewModel.dynamicReportInfo.hierarchy,waitForLoad:e.waitForLoad,extent:e.extent,attachmentsStore:this._viewModel.dynamicReportInfo.attachmentsStore,onPanContainer:function(a,d){}})}.bind(this))},_getDefaultBasemapId:function(){return null}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PageNavigationSupport":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-geometry dojo/dom-style ../PlayerResizeModes ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,g,e,a,d,c,b){b=b.geoenrichment.dijit.ReportPlayer.ReportPlayer;return t(null,{_currentPageIndex:null,_initPageNavigationControls:function(){var f=this;p(this.prevPageButton,"click",function(){f._showPrevPage()});p(this.nextPageButton,"click",function(){f._showNextPage()});d.hide(this.sidePageNavigator);c.setTooltipToNode(this.prevPageButton,b.previousPage);c.setTooltipToNode(this.nextPageButton,b.nextPage)},showPageAt:function(f){this.viewMode!==a.FULL_PAGES||this.isPlayerOnServer||
(f=Math.max(0,f),this._currentPageIndex=f=Math.min(this.getCurrentReportContainer().getNumberOfPages()-1,f),this.getCurrentReportContainer().showPageAt(f),this._updatePageNavigator())},_updatePageNavigator:function(){if(this.playerToolbar){var f=this.getCurrentReportContainer()&&this.getCurrentReportContainer().getNumberOfPages&&this.viewMode===a.FULL_PAGES;this.playerToolbar.setPageControlsVisible(f);if(f){f=this.getCurrentReportContainer().getNumberOfPages();var h=1<f;h&&this._provideSideNavigationNodes();
d.display(this.sidePageNavigator,h);h&&(l[0===this._currentPageIndex?"add":"remove"](this.prevPageButton,"disabled"),l[this._currentPageIndex===f-1?"add":"remove"](this.nextPageButton,"disabled"),this.resizeMode===e.FIT_WINDOW&&(h=k.position(this.getCurrentReportContainer().stackContainer),g.set(this.sidePageNavigator,"left",Math.min(h.x+h.w+20,document.body.clientWidth-70)+"px"),g.set(this.sidePageNavigator,"top",Math.max(60,h.y+10)+"px")));this.playerToolbar.updatePageSelect(f,this._currentPageIndex)}else d.hide(this.sidePageNavigator)}},
_provideSideNavigationNodes:function(){var f=this;this.sidePageNavigator||(this.sidePageNavigator=d.create("div",{"class":"reportPlayer_sidePageNavigator"},this.domNode),this.prevPageButton=d.create("div",{"class":"reportPlayer_paginationArrowUp"},this.sidePageNavigator),this.nextPageButton=d.create("div",{"class":"reportPlayer_paginationArrowDown"},this.sidePageNavigator),p(this.prevPageButton,"click",function(){f._showPrevPage()}),p(this.nextPageButton,"click",function(){f._showNextPage()}),c.setTooltipToNode(this.prevPageButton,
b.previousPage),c.setTooltipToNode(this.nextPageButton,b.nextPage))},_showPrevPage:function(){0!==this._currentPageIndex&&(this._currentPageIndex--,this.showPageAt(this._currentPageIndex))},_showNextPage:function(){this._currentPageIndex!==this.getCurrentReportContainer().getNumberOfPages()-1&&(this._currentPageIndex++,this.showPageAt(this._currentPageIndex))}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes":function(){define([],function(){var t={AUTO:"auto",FIT_WINDOW:"fitWindow",MANUAL:"manual",
isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.FIT_WINDOW}};return t})},"esri/dijit/geoenrichment/ReportPlayer/PlayerViewModes":function(){define([],function(){var t={FULL_PAGES:"fullPages",PANELS_IN_SLIDES:"panelsInSlides",PANELS_IN_STACK:"panelsInStack",PANELS_IN_STACK_ALL:"panelsInStackAll",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.FULL_PAGES},
isMobileSupported:function(p){return p===t.PANELS_IN_SLIDES||p===t.PANELS_IN_STACK||p===t.PANELS_IN_STACK_ALL},isStackLike:function(p){return p===t.PANELS_IN_STACK||p===t.PANELS_IN_STACK_ALL},isStack:function(p){return p===t.PANELS_IN_STACK||p===t.PANELS_IN_STACK_ALL}};return t})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),function(t,
p,l,k,g,e,a){function d(q,r){Array.isArray(q)?q.forEach(r):r(q);return q}function c(q,r,u){var v=!1,w=function(z){!z||u&&!u(z)||(z.parentNode===r?v=!0:w(z.parentNode))};w(q);return v}function b(q){return!h.isHidden(q)&&"none"!==g.get(q,"display")&&!p.contains(q,"dijitHidden")}function f(){m||(m=l.create("div",{"class":"esriGEOffscreen"},document.body));return m}var h={isHidden:function(q){return q&&p.contains(q,"esriGEHidden")},hasVisibleChildren:function(q){if(!q||!q.children.length)return!1;for(var r=
0;r<q.children.length;r++)if(!h.isHidden(q.children[r]))return!0;return!1},hide:function(q){return h.addTag(q,"esriGEHidden")},show:function(q){return h.removeTag(q,"esriGEHidden")},display:function(q,r){return h[r?"show":"hide"](q)},addTag:function(q,r){return d(q,function(u){u&&p.add(u,r)})},removeTag:function(q,r){return d(q,function(u){u&&p.remove(u,r)})},getChildIndex:function(q,r){if(!q||!q.children||!r)return-1;for(var u=0;u<q.children.length;u++)if(q.children[u]===r)return u;return-1},isChildOf:function(q,
r){return c(q,r)},isNodeInLayout:function(q){return c(q,document.body,function(r){return b(r)})},isNodeVisible:function(q){return c(q,document.body,function(r){return b(r)&&"hidden"!==g.get(r,"visibility")})},isNodeOnscreen:function(q){return c(q,document.body,function(r){return!p.contains(r,"esriGEOffscreen")})},enableContent:function(q,r,u){if(q){u=u||{};var v=q.children.length-1;if(!(0>v||(v=q.children[v],p.contains(v,"esriGEDisabledContent")||(v=null),v&&q.removeChild(v),r)))return v=l.create("div",
{"class":"esriGEDisabledContent"+(u.overlayClass?" "+u.overlayClass:"")},q),u.textContent&&(v.textContent=u.textContent),!1!==u.fitParent&&(q=k[u.marginBox?"getMarginBox":"getContentBox"](q).h)&&g.set(v,{height:q+"px",marginTop:-q+"px"}),v}},enableContentAbsolute:function(q,r,u){if(q){u=u||{};var v=g.get(q,"position");"relative"===v||"absolute"===v||r||g.set(q,"position","relative");return h.enableContent(q,r,{overlayClass:"esriGEAbsoluteStretched"+(u.overlayClass?" "+u.overlayClass:"")+(u.isTransparent?
" esriGEDisabledContentTransparent":""),fitParent:!1,textContent:u.textContent})}}},m;h.hideNodeInBackground=function(q,r){if(q){if(q._hideNodeInBackgroundUndoController)return q._hideNodeInBackgroundUndoController;var u=l.create("div",null,q,"after"),v=l.create("div",{style:"position: absolute; left: 0px; top: 0px;"},f());l.place(q,v);r="DomUtil.hideNodeInBackground"+(r?"."+r:"");t.set(u,"_bg_memo_node",r);t.set(v,"_bg_temp_node",r);r={remove:function(){u&&(u.parentNode&&l.place(q,u,"replace"),l.destroy(u),
l.destroy(v),m.children.length||(l.destroy(m),m=null),u=null,delete q._hideNodeInBackgroundUndoController)}};return q._hideNodeInBackgroundUndoController=r}};h.showNodeFromBackground=function(q){q&&q._hideNodeInBackgroundUndoController&&q._hideNodeInBackgroundUndoController.remove()};h.noTransformPosition=function(q){function r(z){for(var E={x:0,y:0};z.offsetParent;)E.x+=z.offsetLeft,E.y+=z.offsetTop,z=z.offsetParent,E.x+=g.get(z,"borderLeftWidth"),E.y+=g.get(z,"borderTopWidth");return E}function u(z){return g.get(z,
"width")+g.get(z,"paddingLeft")+g.get(z,"paddingRight")+g.get(z,"borderLeftWidth")+g.get(z,"borderRightWidth")}function v(z){return g.get(z,"height")+g.get(z,"paddingTop")+g.get(z,"paddingBottom")+g.get(z,"borderTopWidth")+g.get(z,"borderBottomWidth")}if(q){if(q instanceof SVGElement&&q.getBBox){var w=(w=q.ownerSVGElement&&q.ownerSVGElement.parentNode)&&r(w);q=q.getBBox();return{x:(q.x||0)+w.x,y:(q.y||0)+w.y,w:q.width||0,h:q.height||0}}w=r(q);return{x:w.x,y:w.y,w:u(q),h:v(q)}}};h.getNodesBox=function(q,
r){if(!q||!q.length)return null;r=r||{};for(var u=1E6,v=-1E6,w=1E6,z=-1E6,E=0;E<q.length;E++){var F=q[E];F=r.ignoreTransformation?h.noTransformPosition(F):k.position(F);u=Math.min(u,F.x);w=Math.min(w,F.y);v=Math.max(v,F.x+F.w);z=Math.max(z,F.y+F.h)}q={x:u,y:w,w:v-u,h:z-w};r.originNode&&(r=r.ignoreTransformation?h.noTransformPosition(r.originNode):k.position(r.originNode),q.x-=r.x,q.y-=r.y);return q};h.traverseChildren=function(q,r){function u(v){if(v&&v.children)for(var w=0;w<v.children.length;w++){var z=
v.children[w];if(r(z))break;u(z)}}u(q)};h.scrollToListNode=function(q,r,u){var v=r.offsetTop+r.clientHeight,w=v-(q.scrollTop+q.clientHeight);0<w&&(q.scrollTop+=w);u&&(v-=r.clientHeight-u.offsetTop,w=q.scrollTop-v,0<w&&(q.scrollTop-=w))};var n;h.getScrollbarSize=function(){if(!n){var q=l.create("div",null,document.body);q.style.width="100px";q.style.height="100px";q.style.overflow="scroll";q.style.position="absolute";q.style.top="9999px";n={w:q.offsetWidth-q.clientWidth,h:q.offsetHeight-q.clientHeight};
l.destroy(q)}return n};h.hasScrollbars=function(q){var r=g.getComputedStyle(q);return{w:"scroll"===r.overflowX||q.offsetWidth>q.clientWidth&&"auto"===r.overflowX,h:"scroll"===r.overflowY||q.offsetHeight>q.clientHeight&&"auto"===r.overflowY}};h.getMeasureContext=function(q){q=q||{};q.style=q.style?q.style+" ":"";q.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:l.create("div",q,document.body),measureText:function(r){this.div.innerHTML=r;r=k.getMarginBox(this.div);delete r.l;
delete r.t;return r},destroy:function(){l.destroy(this.div)}}};h.getTextBox=function(q,r){r=h.getMeasureContext(r);q=r.measureText(q);r.destroy();return q};h.getNodeFontFamily=function(q){return(q=g.get(q,"fontFamily")||g.getComputedStyle(q).fontFamily)&&q.replace(/'|"/g,"").split(",")[0]};h.getNodeFontSize=function(q){return g.toPixelValue(q,g.get(q,"fontSize"))};h.stealFocus=function(){var q=new a;try{var r=l.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});l.place(r,
document.body);r.select();l.destroy(r)}catch(u){}setTimeout(q.resolve,0);return q.promise};h.getWindowBox=function(){for(var q=[],r=0,u=document.body.children.length;r<u;r++){var v=document.body.children[r];h.isHidden(v)||(h.hide(v),q.push(v))}r={w:document.body.clientWidth,h:document.body.clientHeight};q.forEach(function(w){h.show(w)});return r};h.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};h.setAttribute=function(q,r,u){return 2===arguments.length?t.set(q,r):t.set(q,
r,u)};h.getAttribute=function(q,r,u){return 2===arguments.length?t.get(q,r):t.get(q,r,u)};h.addClass=function(q,r){p.add(q,r)};h.removeClass=function(q,r){p.remove(q,r||"")};h.toggleClass=function(q,r,u){p[u?"add":"remove"](q,r||"")};h.replaceClass=function(q,r,u){return p.replace(q,r,u)};h.containsClass=function(q,r){return p.contains(q,r)};h.getStyle=function(q,r){return g.get(q,r)};h.setStyle=function(q,r,u){return 2===arguments.length?g.set(q,r):g.set(q,r,u)};h.setFullTextStyle=function(q,r){r.fontSize&&
(r=Object.assign({},r),r.fontSize+="px");h.setStyle(q,r)};h.getStylePixelValue=function(q,r){q=h.getStyle(q,r);return"number"===typeof q?q:parseFloat(q)||0};h.getComputedStyle=function(q){return q&&1===q.nodeType&&window.getComputedStyle(q)};h.position=function(q,r){return k.position(q,r)};h.getMarginBox=function(q,r){return k.getMarginBox(q,r)};h.getMarginExtents=function(q,r){return k.getMarginExtents(q,r)};h.getContentBox=function(q,r){return k.getContentBox(q,r)};h.getPadBorderExtents=function(q,
r){return k.getPadBorderExtents(q,r)};h.getPadExtents=function(q,r){return k.getPadExtents(q,r)};h.getBorderExtents=function(q,r){return k.getBorderExtents(q,r)};h.docScroll=function(){return k.docScroll()};h.create=function(q,r,u,v){return l.create(q,r,u,v)};h.toDom=function(q){return l.toDom(q)};h.place=function(q,r,u){return l.place(q,r,u)};h.empty=function(q){return l.empty(q)};h.destroy=function(q){return l.destroy(q)};h.query=function(q,r){q=e(q,r);r=[];for(var u=0,v=q.length;u<v;u++)r.push(q[u]);
return r};return h})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place dojox/gfx ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/domReady!".split(" "),function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u){function v(){}var w={},z=t(b._MasterTooltip,{_customClasses:null,_customStyle:null,_orientKey:null,
addCustomClasses:function(A){A&&(l.add(this.domNode,A),this._customClasses=A)},setCustomStyle:function(A){this._customStyle=A},show:function(A,H,G,I,L,N,O){if(!this.aroundNode||this.aroundNode!==H||this.containerNode.innerHTML!=A)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof A?this.containerNode.innerHTML=A:(this.containerNode.innerHTML="",k.place(A.domNode||A,this.containerNode));L&&this.set("textDir",L);this.containerNode.align=I?"right":"left";var S=f.around(this.domNode,
H,G&&G.length?G:b.defaultPosition,!I,p.hitch(this,"orient")),R=S.aroundNodePos;"M"==S.corner.charAt(0)&&"M"==S.aroundCorner.charAt(0)?(this.connectorNode.style.top=R.y+(R.h-this.connectorNode.offsetHeight>>1)-S.y+"px",this.connectorNode.style.left=""):"M"==S.corner.charAt(1)&&"M"==S.aroundCorner.charAt(1)?this.connectorNode.style.left=R.x+(R.w-this.connectorNode.offsetWidth>>1)-S.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");this._drawBackground();this.domNode.style.opacity=
"0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=H;this.onMouseEnter=N||v;this.onMouseLeave=O||v}},orient:function(A,H,G,I,L){this.connectorNode.style.top="";var N=I.h;I=I.w;A.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight",
"BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[this._orientKey=H+"-"+G];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var O=g.position(this.domNode);O.w=Math.ceil(O.w);if(c("ie")||c("trident"))O.w+=2;g.setMarginBox(this.domNode,{w:Math.min(Math.max(I,1),O.w)});"B"==G.charAt(0)&&"B"==H.charAt(0)?(A=g.position(A),H=this.connectorNode.offsetHeight,A.h>N?(this.connectorNode.style.top=N-(L.h+H>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=
Math.min(Math.max(L.h/2-H/2,0),A.h-H)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");this._drawBackground();return Math.max(0,O.w-I)},_surface:null,_surfaceContainer:null,_drawBackground:function(){if(this._orientKey){var A=this.domNode.clientWidth,H=this.domNode.clientHeight,G=g.position(this.domNode),I=g.position(this.connectorNode),L=g.position(this.containerNode);I.x-=G.x;I.y-=G.y;L.x-=G.x;L.y-=G.y;L.x+=1;L.y+=1;L.w-=2;L.h-=2;this._surface&&
this._surface.destroy();this._surfaceContainer&&k.destroy(this._surfaceContainer);G=this._surfaceContainer=k.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode,"first");G.style.pointerEvents="none";A=this._surface=h.createSurface(G,A,H);H=[{x:L.x,y:L.y},{x:L.x+L.w,y:L.y},{x:L.x+L.w,y:L.y+L.h},{x:L.x,y:L.y+L.h},{x:L.x,y:L.y}];G=I.x+I.w/2;I=I.y+I.h/2;switch(this._orientKey){case "BL-TL":case "BM-TM":case "BR-TR":L=[{x:G-5,y:L.y},{x:G,y:I},{x:G+5,y:L.y}];H.splice.apply(H,[1,0].concat(L));
break;case "ML-MR":case "BL-BR":L=[{x:L.x+L.w,y:I-5},{x:G,y:I},{x:L.x+L.w,y:I+5}];H.splice.apply(H,[2,0].concat(L));break;case "TM-BM":case "TL-BL":case "TR-BR":L=[{x:G+5,y:L.y+L.h},{x:G,y:I},{x:G-5,y:L.y+L.h}];H.splice.apply(H,[3,0].concat(L));break;case "MR-ML":case "BR-BL":L=[{x:L.x,y:I+5},{x:G,y:I},{x:L.x,y:I-5}],H.splice.apply(H,[4,0].concat(L))}L=A.createPolyline(H);I="function"===typeof this._customStyle?this._customStyle():this._customStyle;L.setFill(I&&I.backgroundColor||"white").setStroke({color:"#d3d3d3",
width:1,join:"round"});I&&I.color&&(this.containerNode.style.color=I.color)}}}),E={show:function(A,H,G,I,L){"string"===typeof G&&(G=[G]);G=G&&G.map(function(O){return{after:"after-centered",before:"before-centered"}[O]||O});var N=new z;L&&N.setCustomStyle(L);N.addCustomClasses(I);N.show(A,H,G);return N}};w.setTooltipToNode=function(A,H,G){function I(){!L&&w.showTooltipForNode(A,H,G)}G=G||{};if(A&&!u.isPlayerOnServer&&(w.hideTooltipForNode(A),A.__setTooltipToNodeMouseEnterHandle&&A.__setTooltipToNodeMouseEnterHandle.remove(),
H)){var L=!1;m.isMobileDevice()?A.__setTooltipToNodeMouseEnterHandle=n.addNoDragClickHandler(A,I):A.__setTooltipToNodeMouseEnterHandle=a(A,d.enter,I);G.showTooltip&&I();return{remove:function(){H=null;w.hideTooltipForNode(A)},suspend:function(){w.hideTooltipForNode(A);L=!0},resume:function(){L=!1},refresh:function(){A._shownTooltip&&I()}}}};w.showTooltipForNode=function(A,H,G){function I(){w.hideTooltipForNode(A);var S=Array.isArray(G.classes)?G.classes.join(" "):G.classes;S=(S||"")+" esriGETooltip";
G.notRestricted&&(S+=" notRestricted");A._shownTooltip=N=E.show(L,A,G.position||["after","before"],S,G.style)}G=G||{};if(A&&!u.isPlayerOnServer){A.title="";w.hideTooltipForNode(A);var L="function"==typeof H?H():H;if(L){"string"===typeof L&&G.textAlign&&(L="\x3cdiv class\x3d'"+("start"===G.textAlign?"esriGEStart":"end"===G.textAlign?"esriGEEnd":"")+"'\x3e"+L+"\x3c/div\x3e");l.add(A,"esriGESimpleTextTooltip");var N;I();var O=w.hideTooltipForNode.bind(w,A);H=function(S,R){var U=setInterval(S,R);N.own({remove:function(){clearInterval(U)}})};
m.isMobileDevice()?N.own(a(document.body,"touchstart",function(S){!r.isMouseOver(A,{event:S})&&O()})):N.own(a.once(A,d.leave,function(){!G.stayOnHover&&O()}));G.ignoreNodeRemoval||H(function(){!q.isNodeInLayout(A)&&O()},300);m.isMobileDevice()||(H(function(){G.stayOnHover&&r.isMouseOver(N.domNode)||r.isMouseOver(A)||O()},300),N.own(a(A,"click",function(S){G.hideOnClick?O():!A._shownTooltip&&I()})),G.stayOnHover&&N.own(a(N.domNode,d.leave,O)));return A._shownTooltip}}};w.hideTooltipForNode=function(A){A&&
A._shownTooltip&&(l.remove(A,"esriGESimpleTextTooltip"),A._shownTooltip.destroy(),delete A._shownTooltip)};var F,D;w.autoTooltip=function(A){u.isPlayerOnServer||a(A,".TrimWithEllipses:mouseover",function(){if(this!==F&&this.offsetWidth<this.scrollWidth){var H=function(){F=null;D&&(D.tooltip.destroy(),D.mouseOutH.remove(),D.mouseMoveH.remove(),D=null)};H();F=this;D={tooltip:E.show(F.textContent,F,["above","below"]),mouseOutH:a.once(F,"mouseout, mousedown, touchstart",H),mouseMoveH:a(document.body,
"mousemove",function(){r.isMouseOver(F)||H()})}}})};w.showClosableTooltip=function(A){var H="rtl"===document.dir&&"after"!==A.position||"rtl"!==document.dir&&"after"===A.position,G=B(A.message,A.tooltipClass,A.position,H);return y(G,A.node,A.timeout,H,A.onClosed)};w.removeClosableTooltip=function(A){A&&A._removeFunc&&A._removeFunc()};var B=function(A,H,G,I){function L(){var U=k.create("div",{"class":"esriGEClosableTooltipTip"},O);l.add(U,I?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}
function N(){S=k.create("div",{"class":"esriGEClosableTooltipBody"},O);k.create("div",{innerHTML:A,"class":"esriGEClosableTooltipLabel"},S);R=k.create("div",{"class":"esriGEClosableTooltipCloseButton"},S)}var O=k.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable"+(H?" "+H:"")},document.body),S,R;"after"!==G?(N(),L()):(L(),N());O.style.position="fixed";return{tooltip:O,body:S,closeButton:R}},y=function(A,H,G,I,L){function N(){var da=g.position(H),Q=da.x+";"+da.y+";"+da.w+";"+da.h;Q!==
O&&(O=Q,Q=g.getMarginBox(A.tooltip),e.set(A.tooltip,{left:(I?da.x+da.w:da.x-Q.w)+"px",top:da.y+da.h/2-Q.h/2+"px"}))}var O;N();var S,R,U=function(){S&&clearTimeout(S);Z&&clearInterval(Z);ca&&clearInterval(ca);Y&&Y.remove();A.tooltip.parentNode&&A.tooltip.parentNode.removeChild(A.tooltip)};var Z=setInterval(function(){q.isNodeInLayout(H)&&H.parentNode||(R=!1,U());q.isNodeVisible(H)&&q.isNodeOnscreen(H)?(R=!0,q.show(A.tooltip)):(R=!1,q.hide(A.tooltip))},0);var ca=setInterval(function(){R&&N()},0);G&&
(S=setTimeout(U,G));var Y=a(A.closeButton,"click",function(){U();L&&L()});A.tooltip._removeFunc=U;return A.tooltip};w.showTooltipForNode(document.body,"Normal \x3cb\x3eBold\x3c/b\x3e \x3ci\x3eItalic\x3c/i\x3e",{});w.hideTooltipForNode(document.body);return w})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],function(t,p,l,k){var g={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(e,a,d){d=d||{};return l.isMobileDevice()?
g._addMobile(e,a,d):g._addPC(e,a,d)},_addPC:function(e,a,d){var c=d.tolerance||0,b,f,h=t(e,"mousedown",function(m){f&&f.remove();var n=m.clientX,q=m.clientY,r;b=t(document.body,"mousemove",function(u){if(!u.shiftKey&&!k.isCtrl(u)){var v=u.clientY;if(0<Math.abs(u.clientX-n)||0<Math.abs(v-q))r=!0}});f=t.once(document.body,"mouseup",function(u){b.remove();var v=u.clientX,w=u.clientY;!r&&Math.abs(v-n)<=c&&Math.abs(w-q)<=c&&a(u)})});return{remove:function(){b&&b.remove();f&&f.remove();h&&h.remove()}}},
_addMobile:function(e,a,d){function c(){f&&f.remove();h&&h.remove();m&&m.remove();clearTimeout(n)}var b=d.tolerance||g.MOBILE_TOLERANCE,f,h,m,n;var q=t(e,"touchstart",function(r){function u(z){return Math.abs(r.clientX-z.clientX)<b&&Math.abs(r.clientY-z.clientY)<b}c();var v;if(d.detectLongPress){var w;h=t(e,"touchmove",function(z){w=z});n=setTimeout(function(){u(w||r)&&(d.ignoreReleaseIfLongPressHappened&&(v=!0),d.longPressCallback(r))},d.longPressTimeout||g.LONG_PRESS_TIMEOUT)}f=t.once(e,"touchend",
function(z){!v&&u(z)&&a(z);c()});m=t.once(e,"touchcancel",c)});return{remove:function(){q&&q.remove();c()}}},addGlobalDragHanlder:function(e){function a(){d&&d.remove();c&&c.remove();b&&b.remove();f&&f.remove();h&&e.destroyDnDBox&&e.destroyDnDBox(h)}e.tolerance=0<e.tolerance?e.tolerance:5;var d,c,b,f,h;return t(e.node,e.downEventName||l.press,function(m){a();if(!e.onMouseDown||e.onMouseDown(m)){var n=m.clientX,q=m.clientY,r=n,u=q;d=t(document.body,l.move,function(v){function w(){a();e.dragEnded&&
e.dragEnded()}v.shiftKey||k.isCtrl(v)||!(Math.abs(n-v.clientX)>=e.tolerance||Math.abs(q-v.clientY)>=e.tolerance)||(d.remove(),e.dragStarted&&!e.dragStarted(v,v.clientX-r,v.clientY-u))||(r=v.clientX,u=v.clientY,h=e.createDnDBox&&e.createDnDBox(),c=t(document.body,l.move,function(z){e.dragMoved&&e.dragMoved(z,z.clientX-r,z.clientY-u,w);r=z.clientX;u=z.clientY}),b=t.once(document.body,p("ie")||p("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){w()}),f=t(document.body,"keyup",function(z){27==
z.keyCode&&(a(),e.dragCanceled&&e.dragCanceled())}))});t.once(document.body,p("ie")||p("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){d.remove()})}})}};return g})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(t,p,l){var k={listenToKeyboardCombinationOverNode:function(g){return t(document.body,"keydown",function(e){if(!g.isCtrl||k.isCtrl(e))if(!g.isShift||e.shiftKey)if(!g.isAlt||e.altKey)String.fromCharCode(e.keyCode).toLowerCase()!==
g["char"]||g.node&&!l.isNodeInLayout(g.node)||g.callback(e)})},isCtrl:function(g){return p("mac")?g.metaKey:g.ctrlKey}};return k})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(t,p,l,k,g,e){var a={_latestEvent:null,_setLatestEvent:function(f){a._latestEvent=f},_getLatestEvent:function(){return a._latestEvent}};l("touch")?(p(document.body,k.press,function(f){a._setLatestEvent(b(f))}),
p(document.body,k.move,function(f){a._setLatestEvent(b(f))})):p(document.body,"mousemove",function(f){a._setLatestEvent(b(f))});var d;p(document.body,"mousedown",function(){d||(d=!0,p.once(document.body,"mouseup, click",function(){d=!1}))});a.getCursorPosition=function(){return a._latestEvent};a.isMouseOver=function(f,h){var m=h&&h.event||a._latestEvent;if(!(f&&f.parentNode&&f.getBoundingClientRect&&m))return!1;if(h&&h.checkAllChildren){h=t.mixin({},h);delete h.checkAllChildren;var n=!1;e.traverseChildren(f,
function(q){if(a.isMouseOver(q,h))return n=!0});return n}return a.isMouseOverBox(g.position(f),h)};a.isMouseOverBox=function(f,h){if(!f)return!1;var m=h&&h.event||a._latestEvent;h&&h.ignoreBorderTolerance&&(h=h.ignoreBorderTolerance,f=t.mixin({},f),f.x+=h,f.y+=h,f.w-=2*h,f.h-=2*h);return f.x<=m.clientX&&f.x+f.w>=m.clientX&&f.y<=m.clientY&&f.y+f.h>=m.clientY};var c=function(f){if(f.touches){if(!f.touches.length)return f.changedTouches[0];for(var h=f.touches[0].identifier,m,n=0;n<f.changedTouches.length;n++)if(f.changedTouches[n].identifier===
h){m=f.changedTouches[n];break}return m||f.touches[0]}},b=function(f){var h=c(f);h&&(h.type=f.type);return h||f};a.fixTouchEvent=function(f){var h=c(f);h&&(f.screenX=h.screenX,f.screenY=h.screenY,f.clientX=h.clientX,f.clientY=h.clientY,f.pageX=h.pageX,f.pageY=h.pageY);return f};a.isBeingDragged=function(){return d};a.addOverOutHandler=function(f){function h(){clearTimeout(n);m&&m.remove()}var m,n,q=p(f.node,"mouseover",function(r){function u(){a.isMouseOver(f.node)&&(f.onMouseOver(r),m=p(document.body,
"mousemove",function(v){a.isMouseOver(f.node)||(h(),f.onMouseOut(v))}))}h();f.delayTimeout?n=setTimeout(u,f.delayTimeout):u()});return{remove:function(){q.remove();h()}}};a.addOutHandler=function(f,h){return p(document.body,"mousemove",function(m){a.isMouseOver(f,{checkAllChildren:!0})||h(m)})};return a})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PrintSupport":function(){define(["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","../ReportPlayerState"],
function(t,p,l,k,g){function e(){var a=new l;t(["../printing/PrintableContainer"],function(d){a.resolve(d)});return a.promise}return p(null,{_getPrintableContainer:function(a){var d=this;g.isAnimationSuspended=!0;return d._showWaiting(e(),"loadPrintModules").then(function(c){var b=new c(d,d._viewModel);a.onShowWaiting=function(f){d._showWaiting(f,"initPrintContainer")};return k(b.initialize(a),function(f){g.isAnimationSuspended=!1;return f?f:k(b.stop(),function(){return null})})})},_getPrintDialogSettings:function(){var a=
this;return e().then(function(d){return(new d(a,a._viewModel)).getPrintDialogSettings()})}})})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState":function(){define([],function(){return{isImageViewerShown:!1,isViewingDataDrillingZoom:!1,isViewingDynamicSettings:!1,isAnimationSuspended:!1}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ReportContainersSwitcher":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(t,p,l,k,g,e){var a={createContainer:function(b,f){var h=b.getCurrentAnalysisAreaIndex();b.viewMode===g.PANELS_IN_STACK_ALL&&(h=0);var m=f.getContainer(h);if(!m){switch(b.viewMode){case g.PANELS_IN_SLIDES:m=this._createPaginationReportContainer(b);break;case g.PANELS_IN_STACK:m=this._createStackReportContainer(b);break;case g.PANELS_IN_STACK_ALL:m=this._createStackReportContainerAll(b);break;default:m=this._createFullPageReportContainer(b)}m.isCurrentContainer=function(){return b.getCurrentReportContainer()===
m}}f.setContainer(m,h);return m},_createPaginationReportContainer:function(b){var f=b._viewModel;return f.layoutBuilder.createElement("reportContainerPagination",{viewModel:f,parentWidget:b,currentFeatureIndex:b.getCurrentAnalysisAreaIndex(),scaleSectionsToFit:b.scaleSlidesToFitWindow,onResized:function(h){b.playerToolbar.update();b._emitResizedEvent(h)},onPendingDataApplied:function(){b._emitResizedEvent()}},b.reportContainerDiv)},_createStackReportContainer:function(b){var f=b._viewModel,h={center:!0,
minRight:10,minBottom:10,minLeft:10,minTop:b.showToolbarInPopup?43:10};return f.layoutBuilder.createElement("reportContainerStack",{viewModel:f,parentWidget:b,currentFeatureIndex:b.getCurrentAnalysisAreaIndex(),isVertical:!0,renderOptions:h,onPendingDataApplied:function(){b._emitResizedEvent()}},b.reportContainerDiv)},_createStackReportContainerAll:function(b){var f=b._viewModel;return f.layoutBuilder.createElement("reportContainerStackAll",{viewModel:f,parentWidget:b,isVertical:!0,renderOptions:{center:!0,
minRight:10,minBottom:10,minLeft:10,minTop:b.showToolbarInPopup?43:0},comparisonSettings:b.comparisonSettings,onPendingDataApplied:function(){b._emitResizedEvent()},onSwitchToSingleAreaView:function(){b.showAnalysisAreaAt(0)}},b.reportContainerDiv)},_createFullPageReportContainer:function(b){var f=b._viewModel,h={viewModel:f,parentWidget:b,currentFeatureIndex:b.getCurrentAnalysisAreaIndex(),onPendingDataApplied:function(){b._emitResizedEvent()}};h.renderOptions={center:!0,minRight:10,minBottom:10,
minLeft:10,minTop:b.showToolbarInPopup?43:10};return f.layoutBuilder.createElement(b.getReportData().reportObject.isGraphicReport?"reportContainerGrid":"reportContainer",h,b.reportContainerDiv)}},d=t(null,{_containerInfos:null,constructor:function(){this._containerInfos=[]},getContainer:function(b){return this._getInfo(b,"container")},getContainers:function(){return this._containerInfos.map(function(b){return b.container})},getContainerIndex:function(b){return this.getContainers().indexOf(b)},setContainer:function(b,
f){p.set(b.domNode,"area-index",f);this._getInfo(f,null,b)},isLoaded:function(b){return this._getInfo(b,"loaded")},setLoaded:function(b){if(b=this._getInfo(b))b.loaded=!0},resetAllLoaded:function(){this._containerInfos.forEach(function(b){b.loaded=!1})},destroyAllContainers:function(){this._containerInfos.forEach(function(b){b.container.destroy()});this._containerInfos.length=0},_getInfo:function(b,f,h){var m=this._containerInfos[b];!m&&h&&(m=this._containerInfos[b]={container:h,loaded:!1});return f?
m&&m[f]:m}}),c=t(null,{_lastVisuals:null,reset:function(){this._lastVisuals=null},rememberCurrentContainerVisuals:function(b){this._lastVisuals=b?{scrollTop:b.getScrollableContainer&&b.getScrollableContainer().scrollTop||0,pageIndex:b.getCurrentPageIndex&&b.getCurrentPageIndex()||0,slideIndex:b.getCurrentSlideIndex&&b.getCurrentSlideIndex()||0,zoomInfo:b.getZoomInfo&&b.getZoomInfo()}:null},applyCurrentContainerVisuals:function(b){this._lastVisuals&&(b.getScrollableContainer&&(b.getScrollableContainer().scrollTop=
this._lastVisuals.scrollTop||0),b.showSlideAt&&b.showSlideAt(this._lastVisuals.slideIndex||0),b.showPageAt?b.showPageAt(this._lastVisuals.pageIndex||0):b.notifyShown(),b.setZoomInfo&&b.setZoomInfo(this._lastVisuals.zoomInfo))}});return t(null,{_containerDict:null,_visualsHelper:null,_initContainerSwither:function(){this._containerDict=new d;this._visualsHelper=new c},getCurrentReportContainer:function(){return this._currentReportContainer},getAllReportContainers:function(){return this._containerDict.getContainers()},
_destroyAllContainers:function(){this._containerDict.destroyAllContainers();this._currentReportContainer=null},_setReportContainer:function(b){b?this._resetLoadedFlags():this._visualsHelper.rememberCurrentContainerVisuals(this._currentReportContainer);this._switchToCurrentReportContainer();return!b&&this._containerDict.isLoaded(this.getCurrentAnalysisAreaIndex())?(this._resize({isPaginating:!0}),this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer),!1):!0},_switchToCurrentReportContainer:function(){this._currentReportContainer&&
this._hideContainer(this._currentReportContainer);this._currentReportContainer=a.createContainer(this,this._containerDict);l.remove(this.domNode,"esriGEReportPlayerFullView esriGEReportPlayerPaginationView esriGEReportPlayerStackView");switch(this.viewMode){case g.PANELS_IN_SLIDES:l.add(this.domNode,"esriGEReportPlayerPaginationView");break;case g.PANELS_IN_STACK:l.add(this.domNode,"esriGEReportPlayerStackView");break;case g.PANELS_IN_STACK_ALL:l.add(this.domNode,"esriGEReportPlayerStackAllView");
break;default:l.add(this.domNode,"esriGEReportPlayerFullView")}this._showContainer(this._currentReportContainer);this._connectZoomToCurrentContainer();this.notifyShown()},_hideContainer:function(b){this.isPlayerOnServer||(b.__undoHideContainerHandle=e.hideNodeInBackground(b.domNode,"reportContainer_"+this._containerDict.getContainerIndex(b)),b.own(b.__undoHideContainerHandle))},_showContainer:function(b){!this.isPlayerOnServer&&b.__undoHideContainerHandle&&(b.__undoHideContainerHandle.remove(),delete b.__undoHideContainerHandle)},
_showAllContainers:function(){var b=this;this.getAllReportContainers().forEach(function(f){b._showContainer(f);b.reportContainerDiv.removeChild(f.domNode);k.place(f.domNode,b.reportContainerDiv)});return{undo:function(){b.getAllReportContainers().forEach(function(f){b._hideContainer(f)});b._switchToCurrentReportContainer()}}},_resetLoadedFlags:function(){this._visualsHelper.reset();this._containerDict.resetAllLoaded()},_setCurrentContainerLoaded:function(){this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer);
this._containerDict.setLoaded(this.getCurrentAnalysisAreaIndex())}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_SmartLayoutSupport":function(){define("dojo/_base/declare dojo/dom-class dojo/on esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil ../PlayerResizeModes ../PlayerViewModes".split(" "),function(t,p,l,k,g,e,a){return t(null,{_width:0,_height:0,_measuredWinBox:null,_initSmartLayout:function(){var d=this;this.resizeMode===e.FIT_WINDOW&&this.own(l(window,
"resize, orientationchange",function(){setTimeout(function(){d._measuredWinBox=null;d.resize()})}));this._resize()},_resize:function(d){d=d||{};p.remove(this.domNode,"esriGEReportPlayerFullScreen esriGEReportPlayerAutoResize esriGEReportPlayerManualResize");switch(this.resizeMode){case e.FIT_WINDOW:return this._resize_fitWindow(d);case e.AUTO:return this._resize_auto(d);case e.MANUAL:return this._resize_manual(d)}},_resize_fitWindow:function(d){this._measuredWinBox=this._measuredWinBox||g.getWindowBox();
this._width=this._maxWidth=this._measuredWinBox.w;this._height=this._maxHeight=this._measuredWinBox.h;p.add(this.domNode,"esriGEReportPlayerFullScreen");this.domNode.style.width=this._width+"px";this.domNode.style.height=this._height+"px";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,
this._height-this._getToolbarHeight()),this._emitResizedEvent(d.isPaginating))},_resize_auto:function(d){this._height=this._width=0;p.add(this.domNode,"esriGEReportPlayerAutoResize");this.domNode.style.width="auto";this.domNode.style.height="auto";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),
this._currentReportContainer.resize(0,0),this._emitResizedEvent(d.isPaginating))},_resize_manual:function(d){this._width=void 0!==d.width?d.width:this._width;this._height=void 0!==d.height?d.height:this._height;this._width&&this._height&&(this._maxWidth&&(this._width=Math.min(this._maxWidth,this._width)),this._maxHeight&&(this._height=Math.min(this._maxHeight,this._height)),p.add(this.domNode,"esriGEReportPlayerManualResize"),this.domNode.style.width=this._width+"px",this.domNode.style.height=this._height+
"px",this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth||this._width),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight((this._maxHeight||this._height)-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,this._height-this._getToolbarHeight()),this._emitResizedEvent(d.isPaginating)))},_getToolbarHeight:function(){if(this.showToolbarInPopup)return 0;var d=this.playerToolbar&&
0===this.playerToolbar.toolbarHolder.infographicsSelectDiv.children.length,c=!this.showAreaTitle,b=this._reportData&&(this._reportData.isMultiFeature||1===this._reportData.analysisAreas.length),f=this.viewMode===a.PANELS_IN_SLIDES,h=k.isMobileDevice();return d&&c&&b&&f&&h?0:50},_maxWidth:0,_maxHeight:0,setMaxWidth:function(d){this._maxWidth=d},setMaxHeight:function(d){this._maxHeight=d}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ZoomSupport":function(){define(["dojo/_base/declare",
"dojo/aspect","../PlayerResizeModes","../PlayerViewModes","../PlayerZoomBehaviors"],function(t,p,l,k,g){return t(null,{_initZoomControls:function(){var e=this;this.playerToolbar.onZoomToFitPage=function(){e.getCurrentReportContainer().zoomToFitPage({showAnimation:!0})};this.playerToolbar.onZoomToFitPageWidth=function(){e.getCurrentReportContainer().zoomToFitPageWidth({showAnimation:!0})};this.playerToolbar.onZoomToFitPageHeight=function(){e.getCurrentReportContainer().zoomToFitPageHeight({showAnimation:!0})};
this.playerToolbar.onSetZoomPercent=function(a){e.getCurrentReportContainer().setZoomPercent(a,{showAnimation:!0})};this._refreshZoomControls()},_refreshZoomControls:function(){this.playerToolbar&&this.playerToolbar.setZoomSupportsInfo(this._getZoomSupportsInfo())},setBestZoom:function(){this._callZoomMethod("setBestZoom")},zoomToFitPage:function(){this._callZoomMethod("zoomToFitPage")},zoomToFitPageWidth:function(){this._callZoomMethod("zoomToFitPageWidth")},zoomToFitPageHeight:function(){this._callZoomMethod("zoomToFitPageHeight")},
resetZoom:function(){this._callZoomMethod("resetZoom")},_callZoomMethod:function(e){if(this._getZoomSupportsInfo().supported){var a=this.getCurrentReportContainer();a&&a[e]&&a[e]()}},_getZoomSupportsInfo:function(){var e={supported:!1,canFitPage:!1,canFitPageWidth:!1,canFitPageHeight:!1};this.viewMode!==k.PANELS_IN_SLIDES&&(e.supported=!0,this.resizeMode!==l.AUTO&&(e.canFitPage=!k.isStackLike(this.viewMode),e.canFitPageWidth=!0,e.canFitPageHeight=!1));return e},_updateZoomControls:function(){this._connectZoomToCurrentContainer();
this._applyDefaultZoomBehavior()},_reportContainerZoomChangedHandle:null,_connectZoomToCurrentContainer:function(){var e=this.getCurrentReportContainer();this._reportContainerZoomChangedHandle&&this._reportContainerZoomChangedHandle.remove();this._reportContainerZoomChangedHandle=e&&p.after(e,"onZoomChanged",function(){if(this.playerToolbar){var a=this.getCurrentReportContainer();a&&a.getZoomInfo&&this.playerToolbar.setZoomInfo(this.getCurrentReportContainer().getZoomInfo());this._updatePageNavigator();
this.playerToolbar.update()}}.bind(this));e&&e.own(this._reportContainerZoomChangedHandle)},_applyDefaultZoomBehavior:function(){var e=this._getZoomSupportsInfo();e.supported&&e.canFitPage&&this.defaultZoomBehavior===g.FIT_PAGE?this.zoomToFitPage():e.supported&&e.canFitPageWidth&&this.defaultZoomBehavior===g.FIT_PAGE_WIDTH?this.zoomToFitPageWidth():e.supported&&e.canFitPageHeight&&this.defaultZoomBehavior===g.FIT_PAGE_HEIGHT?this.zoomToFitPageHeight():this.resetZoom()}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerZoomBehaviors":function(){define([],
function(){var t={RESET:"reset",FIT_PAGE:"fitPage",FIT_PAGE_WIDTH:"fitPageWidth",FIT_PAGE_HEIGHT:"fitPageHeight",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.RESET}};return t})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_WaitingSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct ../PlayerResizeModes esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/WaitingUtil esri/dijit/geoenrichment/utils/progress/SmoothProgress".split(" "),
function(t,p,l,k,g,e,a,d,c,b){var f=t(null,{_dataProgress:0,_areaProgresses:null,_numAreas:0,constructor:function(h){p.mixin(this,h);this.reset()},reset:function(){this._dataProgress=0;this._areaProgresses={};this._fireProgress()},setLoadDataProgress:function(h){this._dataProgress=h;this._fireProgress()},setNumAreas:function(h){this._numAreas=h},setProgressForAreaAt:function(h,m){this._areaProgresses[m]=h;this._fireProgress()},finalize:function(){this.onChange(1);return a.delay(300)},_fireProgress:function(){var h=
.25*this._dataProgress,m=.75/this._numAreas,n;for(n in this._areaProgresses)h+=m*(this._areaProgresses[n]||0);h=Math.min(.999999,Math.max(0,h));this.onChange(h);this._printProgress()},_printProgress:function(){},onChange:function(h){}});return t(null,{_progressController:null,_initProgressController:function(){var h=this;this.showProgressBar&&(this._progressController=new f,(new b(this._progressController)).onChange=function(m){c.showProgressBar({value:m,node:h.domNode,position:"top"})})},_waitingCount:0,
_hideUndoHandle:null,_waitNode:null,getWaitingPromise:function(){return c.getProgressPromiseForNode(this._waitNode||this.domNode)},_showWaiting:function(h,m){var n=this;if(this.isPlayerOnServer)return h;this.onWaitingShown(h);return this.resizeMode!==e.FIT_WINDOW?(0===this._waitingCount++&&(this._updateElementsVisibility(),this._waitNode=g.create("div",{"class":"esriGEReportPlayerWaitingNode"},this.domNode.parentNode),this._waitNode.style.width=this.domNode.clientWidth?this.domNode.clientWidth+"px":
"",this._waitNode.style.height=this.domNode.clientHeight?this.domNode.clientHeight+"px":"",this._waitNode.style.position="relative",this._hideUndoHandle=d.hideNodeInBackground(this.domNode)),l(h)["finally"](function(){0===--n._waitingCount&&(n._hideUndoHandle.remove(),n._hideUndoHandle=null,g.destroy(n._waitNode),n._updateElementsVisibility())}),c.showProgressPromise(this._waitNode,h,{progressClass:"esriGEReportPlayerProgress"})):this._showWaitingFullScreen(h,m)},_showWaitingFullScreen:function(h,
m){return c.showProgressPromise(this.domNode,h,{progressClass:"esriGEReportPlayerProgress",onShowProgress:function(){this._waitingCount++;this._updateElementsVisibility()}.bind(this),onRemoveProgress:function(){if(this.domNode){this._waitingCount--;this._updateElementsVisibility();var n=this.getCurrentReportContainer();n&&!n.__isBeingAnimated&&(n.__isBeingAnimated=!0,n.domNode&&k.add(n.domNode,"esriGEReportPlayer_fadeIn1000"),n.notifyShown(),a.delay(1500).then(function(){n.__isBeingAnimated=!1;n.domNode&&
k.remove(n.domNode,"esriGEReportPlayer_fadeIn1000")}))}}.bind(this)})},onWaitingShown:function(h){}})})},"esri/dijit/geoenrichment/utils/DelayUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,p){return{delay:function(l,k,g){var e=new t;k="number"===typeof l?l:k;var a="function"===typeof l?l:null,d=g&&a&&a();setTimeout(function(){p(g?d:a&&a()).then(e.resolve,e.reject)},k||0);return e.promise}}})},"esri/dijit/geoenrichment/utils/WaitingUtil":function(){define("esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(t,p,l,k,g,e){var a={showProgress:function(d,c){e.isPlayerOnServer||d&&!d["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(d["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]=l.create("div",{"class":"esriGEProgress esriGEProgressAbsolute "+(c||"")},d))},removeProgress:function(d){d&&d["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(l.destroy(d["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]),delete d["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"])},
showProgressBar:function(d){var c=d.node;if(c){c._progressBar&&l.destroy(c._progressBar);delete c._progressBar;var b=Number(d.value);0>=b||isNaN(b)||(b=Math.min(b,1),c._progressBar=l.create("div",{"class":"esriGEWaitingMessageProgressBar esriGEWaitingMessageProgressBar_"+(d.position||"bottom")},c),g.set(c._progressBar,"width",k.position(c).w*b+"px"))}},showProgressPromise:function(d,c,b){if(!d)return c;b=b||{};void 0===d.__progressIndex&&(d.__progressIndex=0);0===d.__progressIndex&&(d.__progressDfd=
new t,a.showProgress(d,b.progressClass),b.onShowProgress&&b.onShowProgress());d.__progressIndex++;p(c)["finally"](function(){d.__progressIndex=Math.max(0,--d.__progressIndex);0===d.__progressIndex&&(d.__progressDfd&&d.__progressDfd.resolve(),delete d.__progressDfd,a.removeProgress(d),b.onRemoveProgress&&b.onRemoveProgress())});return c},getProgressPromiseForNode:function(d){return d&&d.__progressDfd&&d.__progressDfd.promise}};return a})},"esri/dijit/geoenrichment/utils/progress/SmoothProgress":function(){define(["dojo/_base/declare",
"dojo/aspect"],function(t,p){return t(null,{elasticTime:1E3,fireInterval:30,_intervalHandle:null,_progressHandle:null,_realProgress:0,_smoothProgress:0,_runAheadSpeed:2.5E-4,_currentSpeed:0,constructor:function(l){0<l.fireInterval&&(this.fireInterval=l.fireInterval);0<l.elasticTime&&(this.elasticTime=l.elasticTime);0<l.timeEstimate&&(this._runAheadSpeed=Math.min(this.fireInterval/l.timeEstimate,.5));var k=this;this._progressHandle=p.after(l,"onChange",function(g){1<=g?k._finalize():k._updateProgress(g)},
!0)},start:function(){this._updateProgress(0,!0)},_updateProgress:function(l,k){this._realProgress=Math.max(l,0);if(0===this._realProgress&&(this._smoothProgress=0,this._setIntervalHandle(!1),this.onChange(0),!k))return;this._setIntervalHandle(!0);this._currentSpeed=this._smoothProgress>=this._realProgress?this._runAheadSpeed:(this._realProgress-this._smoothProgress)*this.fireInterval/this.elasticTime},_setIntervalHandle:function(l){l!==!!this._intervalHandle&&(l?this._intervalHandle=setInterval(this._tryFireProgress.bind(this),
this.fireInterval):(clearInterval(this._intervalHandle),this._intervalHandle=null))},_tryFireProgress:function(){0!==this._currentSpeed&&(this._smoothProgress+=this._currentSpeed,this._smoothProgress=Math.min(1-this._runAheadSpeed,this._smoothProgress),this._smoothProgress>=this._realProgress&&(this._currentSpeed=this._runAheadSpeed),this.onChange(this._smoothProgress))},_finalize:function(){this._smoothProgress=this._realProgress=1;this.onChange(1)},onChange:function(l){},destroy:function(){this._progressHandle.remove();
this._setIntervalHandle(!1)}})})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerConfigurator":function(){define("../PlayerResizeModes ../PlayerZoomBehaviors ../PlayerThemes ../PlayerViewModes ../config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(t,p,l,k,g,e){var a={configurePlayer:function(d,c){d._originalConfigurationSettings||(d.theme=d.theme&&l.toSupportedValue(d.theme)||l.DARK,d.viewMode=d.viewMode&&k.toSupportedValue(d.viewMode),d.resizeMode=d.resizeMode&&t.toSupportedValue(d.resizeMode)||
t.FIT_WINDOW,d.defaultZoomBehavior=d.defaultZoomBehavior&&p.toSupportedValue(d.defaultZoomBehavior),d._originalConfigurationSettings={viewMode:d.viewMode,defaultZoomBehavior:d.defaultZoomBehavior,scaleSlidesToFitWindow:d.scaleSlidesToFitWindow,showAreaTitle:d.showAreaTitle});d.viewMode=c||d._originalConfigurationSettings.viewMode||a.getDefaultViewMode(d);switch(d.viewMode){case k.FULL_PAGES:a._configure_fullPages(d);break;case k.PANELS_IN_SLIDES:a._configure_panelsInSlides(d);break;case k.PANELS_IN_STACK:a._configure_panelsInStack(d);
break;case k.PANELS_IN_STACK_ALL:a._configure_panelsInStackAll(d)}d._viewModel.setAnimationSuspended(d.viewMode===k.PANELS_IN_STACK_ALL);e.isMobileDevice()&&(g.modules.exportCommands=!1);g.modules.complexCellTooltips=d.viewMode===k.FULL_PAGES||d.viewMode===k.PANELS_IN_STACK_ALL},getDefaultViewMode:function(d){return e.isMobileDevice()&&!e.isWebLayout()?e.isLandscape()?k.PANELS_IN_SLIDES:k.PANELS_IN_STACK:k.FULL_PAGES},_configure_fullPages:function(d){d.showAreaTitle=!1!==d._originalConfigurationSettings.showAreaTitle;
d.scaleSlidesToFitWindow=!1;switch(d.resizeMode){case t.FIT_WINDOW:d.defaultZoomBehavior=d._originalConfigurationSettings.defaultZoomBehavior||(e.isMobileDevice()?p.FIT_PAGE_WIDTH:null)||p.FIT_PAGE;break;case t.AUTO:d.defaultZoomBehavior=p.RESET;break;case t.MANUAL:d.defaultZoomBehavior=d._originalConfigurationSettings.defaultZoomBehavior||p.FIT_PAGE}},_configure_panelsInSlides:function(d){d.showAreaTitle=!!d._originalConfigurationSettings.showAreaTitle;d.defaultZoomBehavior=null;switch(d.resizeMode){case t.FIT_WINDOW:d.scaleSlidesToFitWindow=
!1!==d._originalConfigurationSettings.scaleSlidesToFitWindow;break;case t.AUTO:d.scaleSlidesToFitWindow=!1;break;case t.MANUAL:d.scaleSlidesToFitWindow=!1!==d._originalConfigurationSettings.scaleSlidesToFitWindow}},_configure_panelsInStack:function(d){d.showAreaTitle=!!d._originalConfigurationSettings.showAreaTitle;d.scaleSlidesToFitWindow=!1;switch(d.resizeMode){case t.FIT_WINDOW:d.defaultZoomBehavior=p.FIT_PAGE_WIDTH;break;case t.AUTO:d.defaultZoomBehavior=p.RESET;break;case t.MANUAL:d.defaultZoomBehavior=
p.FIT_PAGE_WIDTH}},_configure_panelsInStackAll:function(d){d.showAreaTitle=!1!==d._originalConfigurationSettings.showAreaTitle;d.scaleSlidesToFitWindow=!1;switch(d.resizeMode){case t.FIT_WINDOW:d.defaultZoomBehavior=p.FIT_PAGE_WIDTH;break;case t.AUTO:d.defaultZoomBehavior=p.RESET;break;case t.MANUAL:d.defaultZoomBehavior=p.FIT_PAGE_WIDTH}},configurePlayerForCustomBuild:function(d,c){c=c||g;c.esriDijitCssUrl=d+"/dijit/themes/claro/claro.css";c.esriCssUrl=d+"/esri/css/esri.css";c.playerSourceRootUrl=
d+"/dojo/dojo.js";c.configScriptText='var dojoConfig \x3d { baseUrl: "'+d+'/", waitSeconds: 60, async: true, locale: typeof dojoConfig !\x3d\x3d "undefined" \x26\x26 dojoConfig.locale || null, packages: [{ name: "dojo", location: "./dojo" }, { name: "dijit", location: "./dijit" }, { name: "dojox", location: "./dojox" }, { name: "dgrid1", location: "./dgrid1" }, { name: "dstore", location: "./dstore" }, { name: "xstyle", location: "./xstyle" }, { name: "esri", location: "./esri" }, { name: "moment", location: "./moment", main: "moment/moment" }] }'}};
return a})},"esri/dijit/geoenrichment/ReportPlayer/PlayerThemes":function(){define([],function(){var t={LIGHT:"light",DARK:"dark",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.DARK}};return t})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerToFullScreenAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/AnimationUtil","esri/dijit/geoenrichment/utils/DelayUtil"],function(t,p){return{animateTo:function(l){if(!l._isAnimatedTo){l._isAnimatedTo=
!0;var k=t.animateResize({duration:300,domNode:l.domNode,startScaleX:.3,startScaleY:.3,fromOffset:{x:"c",y:"c"},toBox:{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}});t.animateFadeIn({domNode:l.domNode,duration:300});return k.then(function(){return p.delay(100)})}},animateFrom:function(l){if(l._isAnimatedTo){l._isAnimatedTo=!1;var k=t.animateResize({duration:300,domNode:l.domNode,endScaleX:.3,endScaleY:.3,toOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-300)/2,y:(document.body.clientHeight-
200)/2,w:300,h:200}});t.animateFadeOut({domNode:l.domNode,duration:300});return k.then(function(){return p.delay(100)})}}}})},"esri/dijit/geoenrichment/utils/animation/AnimationUtil":function(){define(["dojo/dom-construct","dojo/dom-style","dojo/sniff","./Animator","esri/dijit/geoenrichment/utils/DomUtil"],function(t,p,l,k,g){var e={animateResize:function(a){function d(r){a.domNode=t.create("div",{"class":a.ghostClass},document.body);p.set(a.domNode,{width:r.w+"px",height:r.h+"px"})}function c(r,
u,v){var w=a.fromOffset.x,z=a.fromOffset.y;if("number"!==typeof w){var E=u.w*v.x;switch(w){case "l":w=0;break;case "r":w=(r.w||0)-E;break;default:w=((r.w||0)-E)/2}}if("number"!==typeof z)switch(E=u.h*v.y,z){case "t":z=0;break;case "b":z=(r.h||0)-E;break;default:z=((r.h||0)-E)/2}return{x:r.x+w,y:r.y+z}}function b(r,u,v){var w=a.toOffset.x,z=a.toOffset.y;if("number"!==typeof w){var E=r.w*v.x;switch(w){case "l":w=0;break;case "r":w=(u.w||0)-E;break;default:w=((u.w||0)-E)/2}}if("number"!==typeof z)switch(E=
r.h*v.y,z){case "t":z=0;break;case "b":z=(u.h||0)-E;break;default:z=((u.h||0)-E)/2}return{x:u.x+w,y:u.y+z}}var f=a.fromBox||(a.domFrom||a.domNode)&&g.noTransformPosition(a.domFrom||a.domNode);a.animateGhost&&d(f);var h=a.toBox||g.noTransformPosition(a.domTo);if(f&&h){var m=function(r,u){var v={x:a.startScaleX,y:a.startScaleY},w=0;"fit"===v.x&&(r.w?w=v.x=r.w/u.w:v.x=0);"fit"===v.y&&(r.h?w=Math.max(v.y=r.h/u.h,w):v.y=0);v.x=v.x||w||1;v.y=v.y||w||1;return v}(f,h),n=function(r,u){var v={x:a.endScaleX,
y:a.endScaleY},w=0;"fit"===v.x&&(u.w?w=v.x=u.w/r.w:v.x=0);"fit"===v.y&&(u.h?w=Math.max(v.y=u.h/r.h,w):v.y=0);v.x=v.x||w||1;v.y=v.y||w||1;return v}(f,h);a.fromOffset&&(f=c(f,h,m));a.toOffset&&(h=b(f,h,n));var q=l("webkit")?"webkitTransformOrigin":"transformOrigin";a.domNode.style[q]="0% 0%";return k.animateProperty({obj:a.domNode,duration:a.duration||250,properties:{__x:{start:f.x,end:h.x},__y:{start:f.y,end:h.y},__scaleX:{start:m.x||1,end:n.x},__scaleY:{start:m.y||1,end:n.y}},endFunction:function(){a.animateGhost&&
t.destroy(a.domNode);a.onEnd&&a.onEnd()},progressFunction:function(r,u){var v=l("webkit")?"webkitTransform":"transform";"__x"==r?a.domNode.style.left=u+"px":"__y"==r?a.domNode.style.top=u+"px":"__scaleX"==r?a.domNode.style[v]="scaleX("+u+") scaleY("+(a.domNode.__scaleY||1)+")":"__scaleY"==r&&(a.domNode.style[v]="scaleX("+(a.domNode.__scaleX||1)+") scaleY("+u+")")}}).promise}a.onEnd&&a.onEnd()},animateShrinkResize:function(a){a.endScaleX=a.endScaleX||.1;a.endScaleY=a.endScaleY||.05;return e.animateResize(a)},
animateFadeIn:function(a){return k.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:0,end:1}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateFadeOut:function(a){return k.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:1,end:0}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateSlide:function(a,d,c){var b=c.width;k.animateProperty({obj:a.style,duration:c.duration||250,properties:{left:{start:c.leftToRight?
0:-b,end:c.leftToRight?-b:0,units:"px"},right:{start:c.leftToRight?0:b,end:c.leftToRight?b:0,units:"px"}},endFunction:function(){c.onEnd&&c.onEnd()}});return k.animateProperty({obj:d.style,duration:c.duration||250,properties:{left:{start:c.leftToRight?b:0,end:c.leftToRight?0:b,units:"px"},right:{start:c.leftToRight?-b:0,end:c.leftToRight?0:-b,units:"px"}}}).promise},animateExpand:function(a,d,c){c=c||{};a.style.overflow="hidden";d&&g.show(a);var b=p.get(a,"height");return k.animateProperty({obj:a.style,
duration:c.duration,properties:{height:{start:d?0:b,end:d?b:0,units:"px"}},progressFunction:c.progressFunction,endFunction:function(){!d&&g.hide(a);p.set(a,"height","");p.set(a,"overflow","")}}).promise}};return e})},"esri/dijit/geoenrichment/utils/animation/Animator":function(){define(["esri/dijit/geoenrichment/Deferred","dojo/fx/easing","dojox/gfx/matrix"],function(t,p,l){function k(d){1>d.progress&&!d.isStopped?a.setTimeout(function(){if(d.isStopped)d.endFunction();else{var c=(new Date).getTime();
d.progress=1-(d.endTime-c)/d.duration;d.progress=Math.min(1,d.progress);g(d);k(d)}}):d.endFunction()}function g(d){for(var c in d.params.properties){var b=d.params.properties[c],f=b.easing?"function"===typeof b.easing?b.easing:p[b.easing]:null;f=f?f(d.progress):d.progress;var h=b.start+f*(b.end-b.start);d.obj[c]=b.units?h+b.units:h;d.progressFunction&&d.progressFunction(c,h,f)}}var e={},a={_funcs:null,setTimeout:function(d){var c=this;this._funcs?this._funcs.push(d):(this._funcs=[d],setTimeout(function(){var b=
c._funcs;c._funcs=null;b.forEach(function(f){f()})},33))}};e.animateProperty=function(d){var c={},b=new t;c.promise=b.promise;c.params=d;c.obj=d.obj||d.node||{};c.duration=void 0!==d.duration?d.duration:1E3;c.startTime=(new Date).getTime();c.endTime=c.startTime+c.duration;c.progress=0;c.endFunction=function(){d.endFunction&&d.endFunction();b.resolve()};c.progressFunction=d.progressFunction;c.stop=function(){c.isStopped=!0};g(c);k(c);return c};e.animateTransform=function(d){var c=d.shape;c.setTransform(null);
return e.animateProperty({duration:d.duration,properties:{p:{start:0,end:1,easing:d.easing}},progressFunction:function(b,f,h){var m,n,q,r;d.transform.forEach(function(u){var v=u.start[0]+(u.end[0]-u.start[0])*h,w=u.start[1]+(u.end[1]-u.start[1])*h;"translate"===u.name?(m=v,n=w):"scale"===u.name&&(q=v,r=w)});c.setTransform(new l.Matrix2D({dx:m,dy:n,xx:q,yy:r}))},endFunction:function(){c.setTransform(null);d.onEnd&&d.onEnd()}}).promise};return e})},"dojo/fx/easing":function(){define(["../_base/lang"],
function(t){var p={linear:function(l){return l},quadIn:function(l){return Math.pow(l,2)},quadOut:function(l){return l*(l-2)*-1},quadInOut:function(l){l*=2;return 1>l?Math.pow(l,2)/2:-1*(--l*(l-2)-1)/2},cubicIn:function(l){return Math.pow(l,3)},cubicOut:function(l){return Math.pow(l-1,3)+1},cubicInOut:function(l){l*=2;return 1>l?Math.pow(l,3)/2:(Math.pow(l-2,3)+2)/2},quartIn:function(l){return Math.pow(l,4)},quartOut:function(l){return-1*(Math.pow(l-1,4)-1)},quartInOut:function(l){l*=2;return 1>l?
Math.pow(l,4)/2:-.5*(Math.pow(l-2,4)-2)},quintIn:function(l){return Math.pow(l,5)},quintOut:function(l){return Math.pow(l-1,5)+1},quintInOut:function(l){l*=2;return 1>l?Math.pow(l,5)/2:(Math.pow(l-2,5)+2)/2},sineIn:function(l){return-1*Math.cos(Math.PI/2*l)+1},sineOut:function(l){return Math.sin(Math.PI/2*l)},sineInOut:function(l){return-1*(Math.cos(Math.PI*l)-1)/2},expoIn:function(l){return 0==l?0:Math.pow(2,10*(l-1))},expoOut:function(l){return 1==l?1:-1*Math.pow(2,-10*l)+1},expoInOut:function(l){if(0==
l)return 0;if(1==l)return 1;l*=2;if(1>l)return Math.pow(2,10*(l-1))/2;--l;return(-1*Math.pow(2,-10*l)+2)/2},circIn:function(l){return-1*(Math.sqrt(1-Math.pow(l,2))-1)},circOut:function(l){return Math.sqrt(1-Math.pow(l-1,2))},circInOut:function(l){l*=2;return 1>l?-.5*(Math.sqrt(1-Math.pow(l,2))-1):.5*(Math.sqrt(1-Math.pow(l-2,2))+1)},backIn:function(l){return Math.pow(l,2)*(2.70158*l-1.70158)},backOut:function(l){--l;return Math.pow(l,2)*(2.70158*l+1.70158)+1},backInOut:function(l){l*=2;if(1>l)return Math.pow(l,
2)*(3.5949095*l-2.5949095)/2;l-=2;return(Math.pow(l,2)*(3.5949095*l+2.5949095)+2)/2},elasticIn:function(l){if(0==l||1==l)return l;--l;return-1*Math.pow(2,10*l)*Math.sin(2*(l-.075)*Math.PI/.3)},elasticOut:function(l){return 0==l||1==l?l:Math.pow(2,-10*l)*Math.sin(2*(l-.075)*Math.PI/.3)+1},elasticInOut:function(l){if(0==l)return 0;l*=2;if(2==l)return 1;var k=.3*1.5,g=k/4;if(1>l)return--l,-.5*Math.pow(2,10*l)*Math.sin(2*(l-g)*Math.PI/k);--l;return.5*Math.pow(2,-10*l)*Math.sin(2*(l-g)*Math.PI/k)+1},bounceIn:function(l){return 1-
p.bounceOut(1-l)},bounceOut:function(l){return l<1/2.75?7.5625*Math.pow(l,2):l<2/2.75?7.5625*Math.pow(l-1.5/2.75,2)+.75:l<2.5/2.75?7.5625*Math.pow(l-2.25/2.75,2)+.9375:7.5625*Math.pow(l-2.625/2.75,2)+.984375},bounceInOut:function(l){return.5>l?p.bounceIn(2*l)/2:p.bounceOut(2*l-1)/2+.5}};t.setObject("dojo.fx.easing",p);return p})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/PlayerToolbar":function(){define("dojo/_base/declare dojo/on dojo/string esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ../PlayerCommands ../PlayerThemes ./Select ./AreasSelect ./ZoomSelect ./ToolbarArranger ./ZoomUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/PlayerToolbarHolder.html dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u,v,w,z,E,F,D){D=D.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var B=t([a,d],{templateString:F,nls:D,player:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,showAreaTitle:!1,stretchToolbarNode:null,canAddMoreAreas:!1,areasSelectButtons:null,areasSelect:null,pageSelect:null,zoomSelect:null,_toolbarArranger:null,_infographicSelect:null,postCreate:function(){u.hide(this.commandButtonsContainer);this._toolbarArranger=new n({showAreaTitle:this.showAreaTitle,
stretchToolbarNode:this.stretchToolbarNode,domNode:this.domNode,infographicsSelectDiv:this.infographicsSelectDiv,areaTitleDiv:this.areaTitleDiv,areaTitleInnerDiv:this.areaTitleInnerDiv,rightSideControlsBlock:this.rightSideControlsBlock,areasSelectDiv:this.areasSelectDiv,zoomSelectDiv:this.zoomSelectDiv,pageSelectDiv:this.pageSelectDiv,commandButtonsContainer:this.commandButtonsContainer});this._initAreaSelect();this._initPageSelect();this._initZoomSelect();E.autoTooltip(this.domNode)},_initAreaSelect:function(){var y=
this;this.areasSelect=(new h({player:this.player,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onChange:function(A){y.onShowAnalysisAreaAt(A.value);y.onClosePopup()},onAddMoreAreas:function(){y.onAddMoreAreas();y.onClosePopup()},onRemoveAreas:function(A,H){y.onRemoveAreas(A);H&&y.onClosePopup()},onCompareAreasSideBySide:function(){y.onCompareAreasSideBySide();y.onClosePopup()},onStopComparison:function(A){y.onShowAnalysisAreaAt(A);y.onClosePopup()}})).placeAt(this.areasSelectDiv);
this.own(this.areasSelect)},updateAreaSelect:function(y){var A=y.analysisAreas,H=y.combinedAreasInfo,G=y.currentAreaIndex,I=y.isMultiFeature;this.areasSelect.buildAreaOptions(y);this.areasSelect.set("value",G);y=1<this.areasSelect.get("options").length&&!I;u[y?"show":"hide"](this.areasSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.player.showReportTitle?500<document.body.clientWidth||!y?(this.infographicsSelectDiv.innerHTML="\x3cdiv class\x3d'TrimWithEllipses' style\x3d'max-width:"+
.4*document.body.clientWidth+"px;'\x3e"+this.player.getReportTitle()+"\x3c/div\x3e",this._toolbarArranger.showAreaTitle=!0):(this.infographicsSelectDiv.innerHTML="",this._toolbarArranger.showAreaTitle=!1):I?this.areaTitleMultiFormatter?this.areaTitleMultiFormatter(this.areaTitleInnerDiv,H):this._formatAreaTitleMulti(H):(A=A["all"===G?0:G],this.areaTitleFormatter?this.areaTitleFormatter(this.areaTitleInnerDiv,A):this._formatAreaTitle(A,G))},_formatAreaTitle:function(y,A){this.areaTitleInnerDiv.innerHTML=
"all"===A?D.allAreas:y.locationName||y.name},_formatAreaTitleMulti:function(y){this.areaTitleInnerDiv.innerHTML=y.locationName||y.name||y.shortName||""},_pageControlsVisible:!0,_initPageSelect:function(){var y=this;this.pageSelect=(new f({onChange:function(A){y.onShowPageAt(A.value);y.onClosePopup()}})).placeAt(this.pageSelectDiv);this.own(this.pageSelect)},setPageControlsVisible:function(y){this._pageControlsVisible=y;u[y?"show":"hide"](this.pageSelectDiv)},updatePageSelect:function(y,A){for(var H=
[],G=0;G<y;G++)H.push({label:l.substitute(D.pageIndex,{index:G+1}),value:G});this.pageSelect.set("options",H);this.pageSelect.set("value",A);u[this._pageControlsVisible&&1<y&&500<document.body.clientWidth?"show":"hide"](this.pageSelectDiv)},_initZoomSelect:function(){var y=this;this.zoomSelect=(new m({onChange:function(A){if(A.value===q.FIT_PAGE)y.onZoomToFitPage();else if(A.value===q.FIT_PAGE_WIDTH)y.onZoomToFitPageWidth();else if(A.value===q.FIT_PAGE_HEIGHT)y.onZoomToFitPageHeight();else y.onSetZoomPercent(A.value);
y.onClosePopup()}})).placeAt(this.zoomSelectDiv);this.own(this.zoomSelect)},setZoomSupportsInfo:function(y){u[y.supported?"show":"hide"](this.zoomSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.zoomSelect.options.forEach(function(A){A.hidden=!1;A.value!==q.FIT_PAGE||y.canFitPage?A.value!==q.FIT_PAGE_WIDTH||y.canFitPageWidth?A.value!==q.FIT_PAGE_HEIGHT||y.canFitPageHeight||(A.hidden=!0):A.hidden=!0:A.hidden=!0})},setZoomInfo:function(y){y=y.isFitPageScale?q.FIT_PAGE:y.isFitPageWidthScale?
q.FIT_PAGE_WIDTH:y.isFitPageHeightScale?q.FIT_PAGE_HEIGHT:q.getClosestZoomAndUpdateOptions(100*y.scale,this.zoomSelect.get("options"));y!==this.zoomSelect.get("value")&&this.zoomSelect.set("value",y)},createCommandButton:function(y,A){return this.createCustomCommandButton({callback:A,buttonClass:y.id===c.PRINT?"playerPrintButton":"playerExportButton",tooltip:y.id===c.PRINT?D.printInfographic:D.exportInfographic,visibleOnError:!1})},createCustomCommandButton:function(y){u.show(this.commandButtonsContainer);
var A=e.create("div",{"class":"playerToolbar_commandButtonContainer dijitInline"},this.commandButtonsContainer,y.addFirst?"first":"last");A.__visibleOnError=y.visibleOnError;A=e.create("div",{"class":"playerToolbar_commandButton"},A);y.buttonClass&&g.add(A,y.buttonClass);y.tooltip&&E.setTooltipToNode(A,y.tooltip);p(A,"click",y.callback);return A},setTheme:function(y){g.remove(this.domNode,"playerThemeDark playerThemeLight");g.add(this.domNode,y===b.DARK?"playerThemeDark":"playerThemeLight");this.areasSelect.setTheme(y);
this.pageSelect.setTheme(y);this.zoomSelect.setTheme(y)},setErrorShown:function(y){if(y)for(u.hide([this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv]),y=0;y<this.commandButtonsContainer.children.length;y++){var A=this.commandButtonsContainer.children[y];u[A.__visibleOnError?"show":"hide"](A)}},arrangeControls:function(){this._toolbarArranger.arrangeControls()},hasVisibleControls:function(){return this._toolbarArranger.hasVisibleControls()},addInfographicsSelect:function(y){this._infographicSelect=
y;y.placeAt(this.infographicsSelectDiv)},isMouseOver:function(){return w.isMouseOver(this.domNode)||this.areasSelect&&this.areasSelect.isMouseOver()||this.pageSelect&&this.pageSelect.isMouseOver()||this.zoomSelect&&this.zoomSelect.isMouseOver()||this._infographicSelect&&this._infographicSelect.isMouseOver&&this._infographicSelect.isMouseOver()},setContentLoadPromise:function(y){u.enableContentAbsolute(this.commandButtonsContainer,!1);u.enableContentAbsolute(this.infographicsSelectDiv,!1);k(y,function(){u.enableContentAbsolute(this.commandButtonsContainer,
!0);u.enableContentAbsolute(this.infographicsSelectDiv,!0)}.bind(this))},onShowPageAt:function(y){},onShowAnalysisAreaAt:function(y){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},onSetZoomPercent:function(y){},onClosePopup:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(y){}});return t([a,d],{templateString:"\x3cdiv class\x3d'esriGEPlayerToolbarOuter'\x3e\x3c/div\x3e",player:null,popupButtonDiv:null,
areaTitleFormatter:null,areaTitleMultiFormatter:null,showToolbarInPopup:!1,showAreaTitle:!1,stretchToolbarNode:null,showCloseButton:!1,canAddMoreAreas:!1,areasSelectButtons:null,toolbarHolder:null,postCreate:function(){var y=this;this.inherited(arguments);this.toolbarHolder=(new B({player:this.player,showAreaTitle:this.showAreaTitle,stretchToolbarNode:this.stretchToolbarNode,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowPageAt:function(A){y.onShowPageAt(A)},
onShowAnalysisAreaAt:function(A){y.onShowAnalysisAreaAt(A)},onCompareAreasSideBySide:function(){y.onCompareAreasSideBySide()},onZoomToFitPage:function(){y.onZoomToFitPage()},onZoomToFitPageWidth:function(){y.onZoomToFitPageWidth()},onZoomToFitPageHeight:function(){y.onZoomToFitPageHeight()},onSetZoomPercent:function(A){y.onSetZoomPercent(A)},onClosePopup:function(){y.closePopup()},onAddMoreAreas:function(){y.onAddMoreAreas()},onRemoveAreas:function(A){y.onRemoveAreas(A)}})).placeAt(this.domNode);
this.own(this.toolbarHolder)},updateAreaSelect:function(y){this.toolbarHolder.areaTitleFormatter=this.areaTitleFormatter;this.toolbarHolder.areaTitleMultiFormatter=this.areaTitleMultiFormatter;this.toolbarHolder.updateAreaSelect(y)},setPageControlsVisible:function(y){this.toolbarHolder.setPageControlsVisible(y)},updatePageSelect:function(y,A){this.toolbarHolder.updatePageSelect(y,A)},setZoomSupportsInfo:function(y){this.toolbarHolder.setZoomSupportsInfo(y)},setZoomInfo:function(y){this.toolbarHolder.setZoomInfo(y)},
createCommandButton:function(y,A){return this.toolbarHolder.createCommandButton(y,A)},setTheme:function(y){this.toolbarHolder.setTheme(y)},setErrorShown:function(y){this.toolbarHolder.setErrorShown(y);this._arrangeControls()},_arrangeControls:function(){u.show(this.domNode);this.toolbarHolder.arrangeControls();u[this.toolbarHolder.hasVisibleControls()?"show":"hide"]([this._popupButton,this.domNode])},_popupHandle:null,_popupButton:null,update:function(){v.invoke(this,"_doUpdateToolbar")},_doUpdateToolbar:function(){g[this.isScrollShown()?
"add":"remove"](this.popupButtonDiv,"playerToolbar_parentHasScroll");g[r.isMobileDevice()?"add":"remove"](this.popupButtonDiv,"isMobileDevice");g[r.isMobileDevice()?"add":"remove"](this.toolbarHolder.domNode,"isMobileDevice");this._resetToolbarNode();var y=z.isOpen(this.toolbarHolder);this._popupHandle&&this._popupHandle.remove();this._popupHandle=null;this.showToolbarInPopup?(this._popupButton=e.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_settingsButton"},this.popupButtonDiv,
"first"),this._popupHandle=z.makePopup(this.toolbarHolder,this,this._popupButton,{orient:["before","below"],openPopup:y})):e.place(this.toolbarHolder.domNode,this.domNode);this._arrangeControls()},_resetToolbarNode:function(){this.toolbarHolder.domNode.parentNode&&this.toolbarHolder.domNode.parentNode.removeChild(this.toolbarHolder.domNode);this.domNode.innerHTML="";this._popupButton&&e.destroy(this._popupButton);this._popupButton=null},closePopup:function(){this.showToolbarInPopup&&z.close(this.toolbarHolder)},
isScrollShown:function(){return!1},createCustomCommandButton:function(y){return this.toolbarHolder.createCustomCommandButton(y)},notifyCommandButtonsAdded:function(){if(this.showCloseButton)if(this.showToolbarInPopup){var y=e.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_closeButtonOuter"},this.popupButtonDiv);E.setTooltipToNode(y,D.close);p(y,"click",function(){this.onClose()}.bind(this))}else this.createCustomCommandButton({buttonClass:"playerToolbar_closeButton",tooltip:D.close,
callback:function(){this.closePopup();this.onClose()}.bind(this),visibleOnError:!0})},addInfographicsSelect:function(y){this.toolbarHolder.addInfographicsSelect(y)},isMouseOver:function(){return w.isMouseOver(this.domNode)||this.toolbarHolder.isMouseOver()},setContentLoadPromise:function(y){this.toolbarHolder.setContentLoadPromise(y)},onShowPageAt:function(y){},onShowAnalysisAreaAt:function(y){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},
onSetZoomPercent:function(y){},onClose:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(y){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/Select":function(){define(["dojo/_base/declare","dojo/dom-class","esri/dijit/geoenrichment/OnDemandSelect","../PlayerThemes"],function(t,p,l,k){return t(l,{"class":"esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList esriGEOnDemandSelectSpacedOut",allowRepetitiveSelection:!1,setTheme:function(g){p[g===k.DARK?"add":
"remove"](this.domNode,"esriGEOnDemandSelectWhite")}})})},"esri/dijit/geoenrichment/OnDemandSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/store/Memory dijit/_WidgetBase dijit/_TemplatedMixin ./lists/FlowList ./lists/FlowListDefaultItemRenderer ./lists/_FlowListHoverSupport ./utils/DeviceUtil ./utils/DomUtil ./utils/MouseUtil ./utils/PopupUtil ./utils/TooltipUtil ./utils/AccessibilitySupport dojo/text!./templates/OnDemandSelect.html".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u,v,w,z){var E=t([f,m]),F={_currentSelect:null,_keyHandler:null,_mouseMoveHandler:null,_currentItemIndex:-1,_currentSearchLetter:null,setFocusedSelect:function(D){this._currentSelect=D;this._updateHandlers()},_updateHandlers:function(){var D=this;this._keyHandler&&this._keyHandler.remove();this._keyHandler=null;this._mouseMoveHandler&&this._mouseMoveHandler.remove();this._mouseMoveHandler=null;this._currentItemIndex=-1;this._currentSearchLetter=null;this._setNodeFocused(null);
this._currentSelect&&(this._keyHandler=l(document.body,"keyup",function(B){B=String.fromCharCode(B.keyCode);1===B.length&&(B=B.toLowerCase(),D._tryHighlightNextItemForKey(B))}),this._mouseMoveHandler=l(this._currentSelect.popupList.domNode,"mousemove",function(){D._setNodeFocused(null)}))},_tryHighlightNextItemForKey:function(D){D===this._currentSearchLetter?this._currentItemIndex++:this._currentItemIndex=0;this._currentSearchLetter=D;var B=this,y=this._currentSelect.store.query(function(H){return(H=
H[B._currentSelect.labelProperty])&&H.toLowerCase().charAt(0)===D});if(y.length){this._currentItemIndex>y.length-1&&(this._currentItemIndex=0);var A=(y=y[this._currentItemIndex])&&this._currentSelect.popupList.getItemNode(y);y&&this._currentSelect.popupList.scrollToItem(y);this._setNodeFocused(A)}},_currentFocusedNode:null,_setNodeFocused:function(D){this._currentFocusedNode&&(g.remove(this._currentFocusedNode,"listItemFocused"),this._currentFocusedNode=null);D&&(g.add(D,"listItemFocused"),this._currentFocusedNode=
D)}};return t([c,b],{templateString:z,value:null,popupList:null,listClass:null,placeHolderClass:"placeHolder",idProperty:"value",labelProperty:"label",options:null,store:null,itemRenderer:null,itemClass:null,placeHolder:null,requireSelection:!0,renderSelectionAsItem:!1,makePopupListWidthMatchOpenButtonWidth:!0,orient:null,noPopupOverflow:!1,stopOpenEventPropagation:!1,stopPopupInteractionEventPropagation:!0,onClickComponent:null,clearPopupOnClose:!0,detectItemHover:!1,hasSelectableItems:!0,allowRepetitiveSelection:!0,
labelTextToKeep:null,nodeToKeepAsSelected:null,openMouseEvent:null,toggleOnClick:!0,supportsKeyNavigation:!0,_closePopupOnChangeFunc:null,enableTabbing:!1,_lastPopupListScrollTop:0,postCreate:function(){var D=this;this.inherited(arguments);this._normalizeValue();this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:this.requireSelection||this._tryAssignPlaceholder();this.nodeToKeepAsSelected?this._updateSelection():q.hide(this.selectedItemHolder);this._createPopupList();this.own(this.popupList);
this.listClass&&g.add(this.popupList.domNode,this.listClass);this._popupCreationHandler=l(this.openButton,this.openMouseEvent||n.click,function(B){D.stopOpenEventPropagation&&("function"===typeof D.stopOpenEventPropagation?D.stopOpenEventPropagation(B):B.stopPropagation());D.openPopup()});this.enableTabbing&&w.registerButton(this.openButton,D.openPopup.bind(D));this.popupList.startup();this._trySelectValue();l(this.popupList.domNode,n.clickOrRelease,function(B){D.stopPopupInteractionEventPropagation&&
B.stopPropagation()});l(this.popupList.domNode,"scroll",function(B){D._lastPopupListScrollTop=D.popupList.domNode.scrollTop});v.autoTooltip(this.domNode)},_createPopupList:function(){var D=this,B=this.itemRenderer||new h;this.popupList=new (this.detectItemHover?E:f)(p.mixin({"class":"esriGEOnDemandSelectFlowList",idProperty:this.idProperty,labelProperty:this.labelProperty,itemRenderer:B,itemClass:this.itemClass,stopMouseEventPropagation:this.stopPopupInteractionEventPropagation,hasSelectableItems:this.hasSelectableItems,
enableTabbing:this.enableTabbing,allowRepetitiveSelection:this.allowRepetitiveSelection,onChange:function(){D._processOnChangeEvent()},onItemHovered:function(y){D.onItemHovered(y)}},this._buildAdditionalPopupListProperties()))},_buildAdditionalPopupListProperties:function(){return null},setValueWithEvent:function(D){var B=this.get("value");this.set("value",D);this.onChange&&this.onChange({type:"change",value:this.get("value"),previousValue:B,selectedItem:this.popupList.selectedItem})},_processOnChangeEvent:function(){if(this.popupList.selectedItem){var D=
this.value,B=this.popupList.selectedItem;this.value=B[this.idProperty];this._updateSelection();this.onChange&&this.onChange({type:"change",value:this.value,previousValue:D,selectedItem:B})}this._closePopupOnChangeFunc&&!this._closePopupOnChangeFunc(this.value)||u.close(this.popupList)},_makePopup:function(){if(this._popupCreationHandler){this._popupCreationHandler.remove();delete this._popupCreationHandler;var D=this;u.makePopup(this.popupList,this,this.openButton,{openMouseEvent:this.openMouseEvent,
stopEventPropagation:this.stopOpenEventPropagation,toggleOnClick:this.toggleOnClick,wrapperClass:this.listClass?this.listClass.split(" ").map(function(B){return B+"Popup"}).join(" "):null,orient:this.orient,allowAutoOrientation:this.allowAutoOrientation,noOverflow:this.noPopupOverflow,onClickComponent:this.onClickComponent,onPreShow:function(){D.onPopupListPreBuild();D.makePopupListWidthMatchOpenButtonWidth&&e.set(D.popupList.domNode,"minWidth",a.getContentBox(D.domNode).w+"px");D._updatePopupListStore();
D.onPopupPreOpened()},onShow:function(){D.onPopupOpened();F.setFocusedSelect(D);D._onPopupOpened()},onClose:function(){D.onPopupClosed();F.setFocusedSelect(null);D.clearPopupOnClose&&D._clearPopup()},isMouseOver:function(){return D.isMouseOverList()}})}},_clearPopup:function(){this.popupList&&this.popupList.clear&&this.popupList.clear()},_tryAssignPlaceholder:function(){if(this.placeHolder&&null===this.value)return this.selectedLabel.innerHTML=this.placeHolder,g.add(this.selectedLabel,this.placeHolderClass),
!0;g.remove(this.selectedLabel,this.placeHolderClass);return!1},_normalizeValue:function(){null!==this.value&&(void 0===this.value?this.value=null:("string"===typeof this.value&&(this.value=this.value.trim()),String(this.value)||(this.value=null)))},trySelectValue:function(D){this.value=D;this._normalizeValue();return this._trySelectValue()},_trySelectValue:function(){if(null!==this.value&&this._setValueAttr(this.value,!0))return!0;if(this.requireSelection){var D=this.store&&this.store.query();if(D&&
D.length){var B=this;this.value&&D.some(function(y){return B.value===y[B.idProperty]})?this._setValueAttr(this.value,!0):this._setValueAttr(D[0][this.idProperty],!0)}}return!1},_setValueAttr:function(D,B){this.value=D;this._normalizeValue();if(!this.store||!this.popupList)return!1;var y=this;(D=this.store.query(function(A){return A[y.idProperty]===y.value})[0])&&this.popupList.setSelectedItem(D);this._updateSelection(D);return!!D},_setOptionsAttr:function(D){this.options=D;this.store=this._createStore(D);
this._updatePopupListStore();this._trySelectValue()},_setStoreAttr:function(D){this.options=(this.store=this._createStore(D))&&this.store.query();D.idProperty&&(this.idProperty=D.idProperty);this._updatePopupListStore();this._trySelectValue()},_createStore:function(D){return D instanceof Array?new d({data:D,idProperty:this.idProperty}):D},_updatePopupListStore:function(){this.popupList&&(this.popupList.store&&this.popupList.store===this.store&&!this.clearPopupOnClose||this.popupList.setStore(this.store,
!0),this.popupList.setSelectedItem(this.getSelectedItem()),this._lastPopupListScrollTop&&(this.popupList.domNode.scrollTop=this._lastPopupListScrollTop))},getSelectedItem:function(){if(!this.store)return null;var D=this.get("value"),B=this;return void 0!==D&&this.store.query(function(y){return y[B.idProperty]===D})[0]},setSelectedItem:function(D){this.store&&this.popupList&&D&&this._setValueAttr(D[this.idProperty],!0)},getSelectedIndex:function(){var D=this,B=-1;if(this.store){var y=this.get("value");
void 0!==y&&this.store.query().some(function(A,H){if(A[D.idProperty]==y)return B=H,!0})}return B},setSelectedIndex:function(D){this.setSelectedItem(this.store&&this.store.data[D])},_nodeToKeepAsSelectedPlacedFlag:!1,_updateSelection:function(D){D=D||this.getSelectedItem();this.nodeToKeepAsSelected?this._nodeToKeepAsSelectedPlacedFlag||(q.hide(this.selectedLabel),q.show(this.selectedItemHolder),this.selectedItemHolder.innerHTML="",k.place(this.nodeToKeepAsSelected,this.selectedItemHolder),this._nodeToKeepAsSelectedPlacedFlag=
!0):this.renderSelectionAsItem?(q.hide(this.selectedLabel),q.show(this.selectedItemHolder),this.selectedItemHolder.innerHTML="",D&&this.popupList.itemRenderer.createPresentation(D,!1,this.selectedItemHolder,this.popupList)):(q.hide(this.selectedItemHolder),this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:(this.selectedLabel.innerHTML=D?D[this.labelProperty]:"",this.selectedLabel.innerHTML&&g.remove(this.selectedLabel,this.placeHolderClass),q[this.selectedLabel.innerHTML||this._tryAssignPlaceholder()?
"show":"hide"](this.selectedLabel)))},refresh:function(){this.popupList.refresh();this._updateSelection()},isPopupOpen:function(){return u.isOpen(this.popupList)},openPopup:function(){this.isPopupOpen()||(this._makePopup(),u.open(this.popupList))},closePopup:function(){this._popupCreationHandler||u.close(this.popupList)},refreshPopup:function(){this.isPopupOpen()&&u.refresh(this.popupList)},isMouseOver:function(D){return r.isMouseOver(this.domNode,{event:D})||this.isMouseOverList(D)},isMouseOverList:function(D){return this.popupList&&
r.isMouseOver(this.popupList.domNode,{event:D})},onPopupListPreBuild:function(){},onPopupPreOpened:function(){},onPopupOpened:function(){},_onPopupOpened:function(){},onPopupClosed:function(){},onChange:function(D){},onItemHovered:function(D){},destroy:function(){this._popupCreationHandler&&this._popupCreationHandler.remove();this.closePopup(this.popupList);this.popupList.destroy();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/lists/FlowList":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on ../utils/DeviceUtil ../utils/DnDUtil ../utils/MouseUtil ../utils/TooltipUtil ./FlowListDefaultItemRenderer ../utils/PopupUtil ../utils/AccessibilitySupport dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n){var q=t([m,n],{templateString:"\x3cdiv class\x3d'esriGEFlowList esriGENonSelectable'\x3e\x3c/div\x3e",idProperty:"value",labelProperty:"label",selectedIndex:-1,selectedItem:null,items:null,store:null,defaultItemRendererClass:b,itemRenderer:null,itemClass:null,itemClassSelected:null,keepScrollPosition:!1,allowRepetitiveSelection:!0,selectOnMouseDown:!1,noDragTolerance:0,selectionValidator:null,allowManualSelection:!0,stopMouseEventPropagation:!0,hasSelectableItems:!0,
autoDetectUrlsInLabels:!1,storeItemsInInnerDiv:!1,enableTabbing:!1,_addedWrappers:null,_clickHandles:null,_valueOnCreation:null,_isCreated:!1,itemsDiv:null,postCreate:function(){this.inherited(arguments);this.itemsDiv=this.storeItemsInInnerDiv?l.create("div",{"class":"esriGEFlowList_innerDiv"},this.domNode):this.domNode;this._clearHandlers();this._setUpItemRenderer();c.autoTooltip(this.domNode);this._isCreated=!0;this._valueOnCreation?this._setValueAttr(this._valueOnCreation):this.refresh()},_setUpItemRenderer:function(){this.itemRenderer||
(this.itemRenderer=new this.defaultItemRendererClass);this.itemClass&&(this.itemRenderer.itemClass=this.itemClass);this.itemClassSelected&&(this.itemRenderer.itemClassSelected=this.itemClassSelected)},_getValueAttr:function(){return this.selectedItem&&this.selectedItem[this.idProperty]},_setValueAttr:function(r){var u=this;if(this._isCreated){var v=this.items||this.store&&this.store.data;v&&v.some(function(w){if(w[u.idProperty]==r)return u.setSelectedItem(w),!0})}else this._valueOnCreation=r},_scrollTopMemo:0,
memoScroll:function(){this._scrollTopMemo=this.domNode.scrollTop},applyScrollFromMemo:function(){this.domNode.scrollTop=this._scrollTopMemo||0},_setItemsAttr:function(r){this.setItems(r)},setItems:function(r,u){this.keepScrollPosition&&this.memoScroll();this.clear();this.items=r;u||(this.items&&this._isCreated?(this._addItems(r),this._checkIfStillSelected(),this.keepScrollPosition&&this.applyScrollFromMemo(),this.onItemsSet()):this._checkIfStillSelected())},_checkIfStillSelected:function(){if(-1!=
this.selectedIndex||this.selectedItem){var r=this;this._addedWrappers&&this._addedWrappers.some(function(u,v){return r._isItemSelected(u,v)})||(this.selectedIndex=-1,this.selectedItem=null)}},refresh:function(){this.store?this.setStore(this.store):this.setItems(this.items)},setSelectedItem:function(r,u){this.hasSelectableItems&&(this.selectedItem=r,this.selectedIndex=-1,this.refresh(),u&&this._dispatchChangeEvent())},setSelectedIndex:function(r,u){this.hasSelectableItems&&(this.selectedIndex=r,this.selectedItem=
null,this.refresh(),u&&this._dispatchChangeEvent())},getItemNode:function(r){var u;this._addedWrappers&&this._addedWrappers.some(function(v){if(v.itemRef===r)return u=v.__itemPresentation,!0});return u},getItemByNode:function(r){var u;this._addedWrappers&&this._addedWrappers.some(function(v){if(v.__itemPresentation===r)return u=v.itemRef,!0});return u},getItemByValue:function(r){var u,v=this;this._addedWrappers&&this._addedWrappers.some(function(w){if(w[v.idProperty]===r)return u=w.itemRef,!0});return u},
__selectedPresentation:null,_addItems:function(r){this._addedWrappers=this._addedWrappers||[];var u=this;r.forEach(function(v){var w=p.mixin({},v);w.itemRef=v;u.__addWrapper(w)})},__addWrapper:function(r){var u=this._addedWrappers.length,v=this.itemRenderer.createPresentation(r.itemRef,this._isItemSelected(r,u),this.itemsDiv,this,r);v&&(v.index=u,v.item=r.itemRef,r.__itemPresentation=v,this._isItemSelected(r,u)&&(this.selectedItem=r.itemRef,this.selectedIndex=u,this.__selectedPresentation=v),this._addClickHandler(v),
this._addedWrappers.push(r),r=this._addedWrappers.length-1,k.add(v,"listItem_"+r),k.add(v,"listItem_"+(0==r%2?"even":"odd")))},_isItemSelected:function(r,u){return this.hasSelectableItems&&this._isItemClickable(r)?u==this.selectedIndex||r.itemRef===this.selectedItem?!0:r.itemRef&&this.selectedItem?(r=r.itemRef[this.idProperty],u=this.selectedItem[this.idProperty],void 0!==r&&r===u):!1:!1},_isItemClickable:function(r){return this.selectionValidator?this.selectionValidator(r):this._selectionValidatorDefault(r)},
_selectionValidatorDefault:function(r){return!!r&&!r.isSeparator&&!1!==r.enabled},_addClickHandler:function(r){function u(){(v.allowRepetitiveSelection||v.__selectedPresentation!=r)&&v._isItemClickable(r.item)&&(v.__selectedPresentation&&v.itemRenderer.selectPresentation&&v.itemRenderer.selectPresentation(v.__selectedPresentation,!1,v.__selectedPresentation.item),v.itemRenderer.selectPresentation&&v.itemRenderer.selectPresentation(r,v.hasSelectableItems,r.item),v.__selectedPresentation=r,v.selectedIndex=
r.index,v.selectedItem=r.item,v._dispatchChangeEvent())}var v=this;if(this.allowManualSelection){var w=this.selectOnMouseDown||!this.noDragTolerance?g(r,this.selectOnMouseDown?e.press:e.click,function(z){v.stopMouseEventPropagation&&z.stopPropagation();u()}):a.addNoDragClickHandler(r,u,{tolerance:this.noDragTolerance});this._clickHandles.push(w);this.enableTabbing&&h.registerButton(r,u,r.item[this.labelProperty])}},_dispatchChangeEvent:function(){this.onChange({type:"change",selectedIndex:this.selectedIndex,
selectedItem:this.selectedItem,value:this.selectedItem&&this.selectedItem[this.idProperty]})},clear:function(){this.__selectedPresentation=null;this._addedWrappers=this._addedWrappers||[],this._addedWrappers.forEach(function(r){r.destroyPresentation&&r.destroyPresentation()});this._addedWrappers.length=0;this.itemsDiv&&(this.itemsDiv.innerHTML="");this._clearHandlers()},_clearHandlers:function(){this._clickHandles=this._clickHandles||[];this._clickHandles.forEach(function(r){r.remove()});this._clickHandles.length=
0},scrollToItem:function(r){if(r=this.getItemNode(r))this.domNode.scrollTop=r.offsetTop},store:null,onDemandModeLoadStep:1E3,onDemandPopulateLimit:1E3,onDemandPopulatePeriod:200,_storeScrollHandler:null,_setStoreAttr:function(r){this.setStore(r)},setStore:function(r){if(this.domNode)if(this.keepScrollPosition&&this._memoScroll(),this.clear(),this.idProperty=(this.store=r)&&r.idProperty,this.store&&this._isCreated){this._loadNextPart();this._checkIfStillSelected();this.keepScrollPosition&&this.applyScrollFromMemo();
var u=this;this._storeScrollHandler=this._storeScrollHandler||g(this.domNode,"scroll",function(){var v=u._addedWrappers[u._addedWrappers.length-30];(v=v?v.__itemPresentation:null)&&v.offsetTop<u.domNode.scrollTop&&u._loadNextPart()})}else this._checkIfStillSelected()},_loadNextPart:function(){if(this.store&&this.store.query().length!=this._addedWrappers.length){var r=this.store.query(null,{start:this._addedWrappers.length,count:this.onDemandModeLoadStep});delete r.total;this._addItems(r);r.length&&
this._addedWrappers.length<this.onDemandPopulateLimit&&(r=this._loadNextPart.bind(this),setTimeout(r,this.onDemandPopulatePeriod))}},isMouseOver:function(r){return d.isMouseOver(this.domNode,{event:r})},onChange:function(r){},onItemsSet:function(){},destroy:function(){this.clear();this.inherited(arguments)}});q.createPopup=function(r){function u(){v||(v=new q({"class":r.listClass,itemRenderer:r.itemRenderer,items:r.options,onChange:function(w){r.onChange(w);!r.keepSelection&&v.setSelectedItem(null);
f.close(v)}}),r.doNotOwn||r.wizard.own(v),r.isDeferred&&r.isDeferred(v));return v}var v;f.makePopup(r.isDeferred?u:u(),r.wizard,r.aroundNode,r.popupOptions||{});return v};return q})},"esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct ../utils/DomUtil ../utils/TooltipUtil ../utils/RegExpUtil ../utils/UrlUtil".split(" "),function(t,p,l,k,g,e,a,d){return t(null,{itemClass:"",itemClassSelected:"",labelClass:"",
createLabelNode:!1,createImageAfterLabel:!1,constructor:function(c){p.mixin(this,c)},createPresentation:function(c,b,f,h,m){if(c.isSeparator)return b=k.create("div",{"class":"flowList_listSeparator"},f),c.hidden&&g.hide(b),b;f=k.create("div",{"class":"listItem "+(this.itemClass||" ")+(c.itemClass||""),style:c.style},f);c.isLink&&l.add(f,"esriGELink");!1===c.enabled&&l.add(f,"disabled");this._createParts(c,f,h);this._setTooltip(c,f,h);this.selectPresentation(f,b,c);c.hidden&&g.hide(f);return f},_setTooltip:function(c,
b,f){c.tooltip&&f.own(e.setTooltipToNode(b,c.tooltip))},_createParts:function(c,b,f){if(this.createImageAfterLabel){this._createLabel(c,b,f);var h=!0}this._createImage(c,b,f);!h&&this._createLabel(c,b,f)},_createImage:function(c,b,f){if(b=this._createImageNode(c,b,f))c.imageClass&&l.add(b,c.imageClass),c.imageUrl&&(b.style="background-image: url("+c.imageUrl+");")},_createImageNode:function(c,b,f){return b},_createLabel:function(c,b,f){if(this.createLabelNode)return b=k.create("div",{innerHTML:c[f.labelProperty],
"class":"dijitInline TrimWithEllipses listItemLabel"},b),c.labelClass&&l.add(b,c.labelClass),this.labelClass&&l.add(b,this.labelClass),f.autoDetectUrlsInLabels&&this._tryConvertToUrls(b),b;c[f.labelProperty]&&(b.innerHTML=c[f.labelProperty],f.autoDetectUrlsInLabels&&this._tryConvertToUrls(b))},_tryConvertToUrls:function(c){var b=c.innerHTML.match(a.IS_URL_RE);if(b=b&&b[0])c.innerHTML=c.innerHTML.replace(b,"\x3ca href\x3d'"+d.toHttpsUrl(b)+"' target\x3d'_blank'\x3e"+b+"\x3c/a\x3e")},selectPresentation:function(c,
b,f){l[b?"add":"remove"](c,"listItemSelected "+this.itemClassSelected)}})})},"esri/dijit/geoenrichment/utils/RegExpUtil":function(){define([],function(){var t={createRegExp:function(d,c,b){d=t.trimText(d);return!d&&b?null:new RegExp(d,c)},trimText:function(d){return d?d.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,"").trim():""},replace:function(d,c,b){return null==d?"":(""+d).replace(c,function(f){return b[f]||""})}},p=/&|<|>/g,l=/&|<|>|"|'/g,k={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;",
"'":"\x26apos;"};t.encodeXML=function(d,c){return t.replace(d,c?l:p,k)};var g=/&amp;|&lt;|&gt;|&quot;|&apos;/g,e={"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"',"\x26apos;":"'"};t.decodeXML=function(d){return t.replace(d,g,e)};t.IS_RICH_TEXT_RE=/<\w/;t.IS_URL_RE=/((www\.|http:\/\/|https:\/\/)[A-Za-z0-9_.\-~]+\.[A-Za-z0-9_.\-~/]+)|([A-Za-z0-9_.\-~]+\.com[A-Za-z0-9_.\-~/]*)/;t.isRichText=function(d){return d&&t.IS_RICH_TEXT_RE.test(d)};t.isUrl=function(d){return d&&t.IS_URL_RE.test(d)};
var a=/^[0-9a-fA-F]{32}$/;t.isId=function(d){return d&&a.test(d)};return t})},"esri/dijit/geoenrichment/utils/PopupUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/onClickTouch dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/config dijit/popup dijit/place dijit/Viewport ./DeviceUtil ./DnDUtil ./MouseUtil dojo/domReady!".split(" "),function(t,p,l,k,g,e,a,d,c,b,f,h,m,n){function q(u){if(!u)return["below"];
var v=[];u.forEach(function(w){var z=g.isBodyLtr();switch(w){case "before-alt":z=!z;case "after-alt":v.push(z?{aroundCorner:"BR",corner:"BL"}:{aroundCorner:"BL",corner:"BR"});v.push(z?{aroundCorner:"TR",corner:"TL"}:{aroundCorner:"TL",corner:"TR"});return}v.push(w)});return v}var r={makePopup:function(u,v,w,z){function E(O){if(z.overlay&&O._popupWrapper){var S=k.create("div",{"class":z.overlay.overlayClass});if(z.overlay.overlayParent)k.place(S,z.overlay.overlayParent);else{k.place(S,H,"before");
var R=e.get(O._popupWrapper,"zIndex");e.set(S,"zIndex",R)}O.__popupOverlay=S}}function F(O){O.__popupOverlay&&(k.destroy(O.__popupOverlay),O.__popupOverlay=null)}function D(O){G=!1;O.__bodyClickHandler&&O.__bodyClickHandler.remove();O.__bodyClickHandler=null;O.__popupWidgetOpenFlag=!1;F(O);z.onClose&&z.onClose()}function B(O){O&&z.stopEventPropagation&&O.stopPropagation();G||(G=!0,a(A||("function"==typeof u?u():u),function(S){A=S;A.domNode?(A.__openPopupWidgetFunc=B,H=c.moveOffScreen(A),a(z.onPreShow&&
z.onPreShow(),function(){var R=q(z.orient);if(H&&!1!==z.allowAutoOrientation){var U=R.indexOf("below");-1!==U&&-1===R.indexOf("above")&&R.splice(U+1,0,"above")}U=-1;if(-1!==R.indexOf("after")||-1!==R.indexOf("before")){U=f.getEffectiveBox(this.ownerDocument);var Z=g.position(w,!1);U=Math.floor(Math.max(Z.y+Z.h,U.h-Z.y))-10}z.noOverflow&&(A.baseClass="esriGENoOverflow "+A.baseClass);v.isLeftToRight=v.isLeftToRight=function(){return"rtl"!==document.dir};c.open({parent:v,popup:A,around:w,maxHeight:U,
orient:R,onClose:function(){D(A)}});c._stack[c._stack.length-1].handlers.forEach(function(Y){Y.remove()});z.suppressReposition&&clearTimeout(c._aroundMoveListener);z.noOverflow&&(A.baseClass=A.baseClass.replace("esriGENoOverflow ",""));H&&z.wrapperClass&&l.add(H,z.wrapperClass);A.__popupInfo=t.mixin({},c.getTopPopup());A.__popupInfo.orient=R;A.__popupInfo.around=w;F(A);E(A);z.onShow&&z.onShow(A);A.__popupWidgetOpenFlag=!0;N&&A.own&&A.own(N);A.__bodyClickHandler&&A.__bodyClickHandler.remove();if(!1!==
z.closeOnClickOutside){var ca="function"===typeof z.closeOnClickOutside?z.closeOnClickOutside:null;setTimeout(function(){A.__bodyClickHandler&&A.__bodyClickHandler.remove();A.__bodyClickHandler=p(document.body,h.isMobileDevice()?h.press:y,function(Y){G&&(n.fixTouchEvent(Y),ca&&!ca(Y)||n.isMouseOver(H)||z.isMouseOver&&z.isMouseOver()||A.isMouseOver&&A.isMouseOver()||A.__lockPopupWidgetFlag||r.close(A))})})}})):G=!1}))}if(u){if(d.isPlayerOnServer)return{remove:function(){}};z=z||{};var y=z.openMouseEvent?
z.openMouseEvent:h.clickOrRelease,A="function"!==typeof u?u:null;if(A)var H=c.moveOffScreen(A);var G=!1;A&&(A.__openPopupWidgetFunc=B);if(!1!==z.openOnMouseEvent){var I=B;if(z.toggleOnClick){var L;I=function(O){L=L||O.type;A?L===O.type&&r.toggle(A):B()}}var N=!1===z.onClickComponent?null:void 0!==z.noDragClickTolerance?m.addNoDragClickHandler(z.onClickComponent||w,I,{tolerance:z.noDragClickTolerance}):p(z.onClickComponent||w,y,I)}z.openPopup&&B();return{remove:function(){A&&"function"!==typeof A&&
(r.close(A),D(A),A._popupWrapper&&(A.domNode&&A.domNode.parentNode===A._popupWrapper&&A._popupWrapper.removeChild(A.domNode),k.destroy(A._popupWrapper),delete A._popupWrapper),delete A.__openPopupWidgetFunc,delete A.__popupWidgetOpenFlag);N&&N.remove()}}}},setLocked:function(u,v){u.__lockPopupWidgetFlag=v},open:function(u){u&&!u.__lockPopupWidgetFlag&&!u.__popupWidgetOpenFlag&&u.__openPopupWidgetFunc&&u.__openPopupWidgetFunc()},close:function(u){u&&!u.__lockPopupWidgetFlag&&c.close(u)},isOpen:function(u){return!(!u||
!u.__popupWidgetOpenFlag)},toggle:function(u){r.isOpen(u)?r.close(u):r.open(u)},refresh:function(u){if(u){u=u.__popupInfo;var v=g.isBodyLtr();u&&b.around(u.wrapper,u.around,u.orient,v)}},getWrapper:function(u){return u&&u._popupWrapper}};return r})},"esri/dijit/geoenrichment/utils/onClickTouch":function(){define(["dojo/_base/lang","dojo/on","dojo/sniff"],function(t,p,l){var k=l("touch");return t.mixin(function(g,e,a,d){if(k){switch(e){case "click":e="touchstart,click";break;case "mousedown":e="touchstart,mousedown";
break;case "mouseup":e="touchend,mouseup";break;case "clickend":e="touchend,click";break;default:return p(g,e,a,d)}var c=!1;return p(g,e,function(b){"touchstart"===b.type||"touchend"===b.type?(a.call(this,b),c=!0,setTimeout(function(){c=!1},500)):c||a.call(this,b)},d)}"clickend"===e&&(e="click");return p(g,e,a,d)},p)})},"esri/dijit/geoenrichment/utils/AccessibilitySupport":function(){define([],function(){var t=null;return{initialize:function(p){t=p},registerButton:function(p,l,k){t&&t(p,l,k)}}})},
"esri/dijit/geoenrichment/lists/_FlowListHoverSupport":function(){define(["dojo/_base/declare","dojo/on","../utils/MouseUtil"],function(t,p,l){var k=t(null,{_list:null,_checkIntervalH:null,constructor:function(g){this._list=g},setHoveredItem:function(g){clearInterval(this._checkIntervalH);this._emitHoverEvent(g);this._checkIntervalH=setInterval(function(){l.isMouseOver(g)||this.setHoveredItem(null)}.bind(this),100)},_emitHoverEvent:function(g){this._list.onItemHovered({type:"itemHover",index:g?g.index:
-1,item:g?g.item:null,value:g?g.item[this._list.idProperty]:void 0})}});return t(null,{_mouseHelper:null,postCreate:function(){this._mouseHelper=new k(this);this.inherited(arguments)},_addClickHandler:function(g){this.inherited(arguments);this._clickHandles.push(p(g,"mouseover",function(){this._mouseHelper.setHoveredItem(g)}.bind(this)))},onItemHovered:function(g){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/AreasSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/ToggleButton esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../PlayerViewModes ./Select ./ComparisonSettings ../dataProvider/supportClasses/areas/AnalysisAreaUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q){q=q.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var r=t(a,{canRemoveAreas:!1,canMoveAreas:!1,wrapInCards:!1,nls:null,createPresentation:function(u,v,w,z){var E=this,F=this.inherited(arguments);if(u.isSeparator)return F;F.innerHTML="";if("all"===u.value){F.style.cursor="pointer";var D=k.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},F);(new e(D,{mode:"toggle"})).set("checked",this.isCompareAll());k.create("div",{"class":"dijitInline",
innerHTML:u.label},F);F.addEventListener("click",function(){if(E.isCompareAll())E.onStopComparison();else E.onCompareAreasSideBySide()});n.setTooltipToNode(F,this.isCompareAll()?this.nls.compareAreasSideBySideTooltipOff:this.nls.compareAreasSideBySideTooltipOn,{position:["before","after"]});return F}if("addAreas"===u.value)return F.style.cursor="pointer",k.create("div",{"class":"dijitInline esriGESpaceAfterBig esriGEReportPlayerToolbar_addMoreAreasIcon"},F),k.create("div",{"class":"dijitInline",innerHTML:u.label},
F),F.addEventListener("click",function(){E.onAddMoreAreas()}),F;if(u.isAdditional)return F.style.cursor="pointer",u.buttonInfo.imageClass&&k.create("div",{"class":"dijitInline esriGESpaceAfterBig "+u.buttonInfo.imageClass},F),k.create("div",{"class":"dijitInline",innerHTML:u.label},F),F.addEventListener("click",function(y){u.buttonInfo.callback(y);E.onClosePopup()}),u.buttonInfo.tooltip&&(D=k.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEInfoIcon"},F),n.setTooltipToNode(D,u.buttonInfo.tooltip,
u.buttonInfo.tooltipParams)),u.buttonInfo.onCreated&&u.buttonInfo.onCreated(F),F;if(u.canSelect){D=k.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},F);var B=new g(D);B.autoToggle=!1;B.set("checked",u.selected);F.addEventListener("click",function(){u.selected=!u.selected;B.set("checked",u.selected);u.isGroup?u.children.forEach(function(y){y.selected=u.selected}):u.parent&&(u.parent.selected=u.parent.children.some(function(y){return y.selected}));E.onVisibilityChanged()})}this.canRemoveAreas&&
u.isHost&&(D=k.create("div",{"class":"esriGEFloatEnd esriGESpaceBeforeBig esriGEReportPlayerToolbar_removeAreaButton"},F),D.addEventListener("click",function(y){y.stopPropagation();E.onRemoveAreas(u.isArea?[u.analysisArea]:u.analysisAreas)}),n.setTooltipToNode(D,u.isGroup?this.nls.removeAreasFromInfographic:this.nls.removeAreaFromInfographic));this.canMoveAreas&&u.isHost&&this.isCompareAll()&&(D=k.create("div",{"class":"esriGEFloatEnd upDownArrowsBlock"},F),0<u.hostIndex&&k.create("div",{"class":"dijitInline upArrow"},
D).addEventListener("click",function(y){y.stopPropagation();E.onMoveUp(u)}),u.hostIndex<this.getNumHostItems()-1&&k.create("div",{"class":"dijitInline downArrow"},D).addEventListener("click",function(y){y.stopPropagation();E.onMoveDown(u)}));D=k.create("div",{"class":"dijitInline",innerHTML:u.label},F);u.parent&&(D.style.paddingLeft="20px");this.wrapInCards&&(u.isArea&&!u.parent?l.add(F,"areaCard_only"):u.isGroup?l.add(F,"areaCard_groupTop"):u.isArea&&l.add(F,u.parent.children.indexOf(u)===u.parent.children.length-
1?"areaCard_groupBottom":"areaCard_groupMiddle"));this.selectPresentation(F,v,u);return F},isCompareAll:function(){return!1},getNumHostItems:function(){return 0},onAddMoreAreas:function(){},onRemoveAreas:function(u){},onVisibilityChanged:function(){},onMoveUp:function(u){},onMoveDown:function(u){},onCompareAreasSideBySide:function(){},onStopComparison:function(){},onClosePopup:function(){}});return t(c,{"class":"dijitInline esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList800 esriGEOnDemandSelectSpacedOut esriGEReportPlayerToolbar_areasSelectList",
player:null,canAddMoreAreas:!1,areasSelectButtons:null,comparisonSettingsBlock:null,comparisonSettings:null,_nls:null,buildRendering:function(){var u=this;this.inherited(arguments);this._nls=p.mixin({},q,this.player.nlsMap);this.itemRenderer=new r({nls:this._nls,onAddMoreAreas:function(){u.onAddMoreAreas();u.closePopup()},onRemoveAreas:function(v){var w=2>=u._getNumHostItems();u.onRemoveAreas(v,w);w&&u.closePopup()},isCompareAll:function(){return u.player.viewMode===d.PANELS_IN_STACK_ALL},getNumHostItems:function(){return u._getNumHostItems()},
onVisibilityChanged:function(){var v={};u.get("options").forEach(function(w){w.isArea&&(v[w.analysisArea.index]=w.selected)});u.refresh();u.player.getCurrentReportContainer().setAreasVisibilityState(v,{append:!0})},onMoveUp:function(v){},onMoveDown:function(v){},onCompareAreasSideBySide:function(){u.onCompareAreasSideBySide();u.closePopup()},onStopComparison:function(){var v=-1;u.get("options").some(function(w){if(w.analysisArea&&!w.analysisArea.hidden)return v=w.analysisArea.index,!0});u.onStopComparison(v);
u.closePopup()},onClosePopup:function(){u.closePopup()}})},_buildAdditionalPopupListProperties:function(){var u=this;return{selectionValidator:function(v){return u.player.viewMode!==d.PANELS_IN_STACK_ALL&&!!v&&!v.isSeparator&&!1!==v.enabled}}},buildAreaOptions:function(u){var v=f.groupAreas(u),w=1<v.groupInfos.length&&!v.isOnlyAreasInOnlyGroup;this.itemRenderer.wrapInCards=w;this.itemRenderer.canRemoveAreas=w&&!h.isMobileDevice();this.itemRenderer.canMoveAreas=!1;var z=[],E=0;v.groupInfos.forEach(function(F,
D){if(F.isRealGroup){var B={isGroup:!0,isHost:!0,hostIndex:E++,label:F.label,value:"group_"+D,enabled:!1,analysisAreas:F.areas,children:[]};z.push(B)}F.areas.forEach(function(y){y={isArea:!0,label:y.shortName||y.name||"",value:y.index,analysisArea:y,parent:B,isHost:!B};y.isHost&&(y.hostIndex=E++);z.push(y);B&&B.children.push(y)})});v={isSeparator:!0};z.push(v);this.player.viewMode!==d.PANELS_IN_SLIDES&&(!h.isMobileDevice()&&1<u.analysisAreas.filter(function(F){return!F.hidden}).length&&z.push({label:this._nls.compareAreasSideBySide,
value:"all"}),this.canAddMoreAreas&&z.push({label:this._nls.addMoreAreas,value:"addAreas"}));this.areasSelectButtons&&this.areasSelectButtons.forEach(function(F){F.isVisible&&!F.isVisible()||z.push({label:F.label,value:F.id,isAdditional:!0,buttonInfo:F})});z[z.length-1]===v&&z.pop();this._updateTreeSelection(z);this.set("options",z);this._updateComparisonSettings()},_getNumHostItems:function(){var u=0;this.get("options").some(function(v){v.isHost&&u++});return u},onPopupListPreBuild:function(){this._updateTreeSelection()},
_updateTreeSelection:function(u){if(this.player.viewMode===d.PANELS_IN_STACK_ALL){var v=this.player.getCurrentReportContainer().getAreasVisibilityState();u=u||this.get("options");u.forEach(function(w){if(w.isGroup||w.isArea)w.canSelect=!0,w.isGroup?(w.children.forEach(function(z){z.selected=v[z.analysisArea.index]}),w.selected=w.children.some(function(z){return z.selected})):w.selected=v[w.analysisArea.index]})}},_updateComparisonSettings:function(){var u=this;this.comparisonSettings&&this.comparisonSettings.destroy();
this.comparisonSettings=null;this.comparisonSettingsBlock&&k.destroy(this.comparisonSettingsBlock);this.comparisonSettingsBlock=null;this.player.viewMode===d.PANELS_IN_STACK_ALL&&(this.comparisonSettingsBlock=k.create("div",{"class":"dijitInline esriGEClickable"},this.domNode.parentNode),k.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEIcon16 esriGEReportPlayerToolbar_comparisonSettingsIcon"},this.comparisonSettingsBlock),m.makePopup(function(){u.comparisonSettings||(u.comparisonSettings=
new b({player:u.player,onChange:function(){u.player.getCurrentReportContainer().setComparisonSettings(u.comparisonSettings.getSettings())}}));u.comparisonSettings.setSettings(u.player.getCurrentReportContainer().getComparisonSettings());return u.comparisonSettings},this,this.comparisonSettingsBlock))},onAddMoreAreas:function(){},onRemoveAreas:function(u,v){},onCompareAreasSideBySide:function(){},onStopComparison:function(u){},destroy:function(){this.comparisonSettings&&this.comparisonSettings.destroy();
this.inherited(arguments)}})})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil ./utils/AccessibilitySupport".split(" "),function(t,p,l,k,g,e,a,d,c){return t(k,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(b,f,h,m){var n=d.isMobileDevice()?"touchstart":"click";f=f||{};var q=f["class"];
f["class"]=(q?q+" ":"")+"esriTriStateCheckBoxIcon";if(q=f.label){if(b instanceof HTMLLabelElement)b.innerHTML="\x26nbsp;"+q;else{var r=f.labelAttrs||{};r.innerHTML="\x26nbsp;"+q;r=e.create("label",r);b&&e.place(r,b);b=r}f=l.mixin({},f);delete f.label;delete f.labelAttrs}this.checkboxNode=e.create("div",f,b,b instanceof HTMLLabelElement?"first":h);this._currentClass=this._composeClass();a.add(this.checkboxNode,this._currentClass);b instanceof HTMLLabelElement?(g(b,n,l.hitch(this,this._onClick)),a.add(b,
"esriTriStateCheckBoxLabel"),m&&c.registerButton(b,this._onClick.bind(this),q)):(g(this.checkboxNode,n,l.hitch(this,this._onClick)),m&&c.registerButton(this.checkboxNode,this._onClick.bind(this),q));this.domNode=q?b:this.checkboxNode},postscript:function(){},_onClick:function(b){this.disabled||(this.autoToggle&&this.toggle(),b&&(b.checked=this.checked),this.onClick(p.fix(b)))},onClick:function(b){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(b){b!==
this.checked&&(this.checked="mixed"===b?b:this._lastChecked=!!b,this._updateClass())},_disabledSetter:function(b){this.disabled=!!b;this._updateClass()},_updateClass:function(){var b=this._composeClass();b!==this._currentClass&&(a.replace(this.checkboxNode,b,this._currentClass),this._currentClass=b)},_composeClass:function(){var b="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?b+"Disabled":b}})})},"esri/dijit/geoenrichment/ToggleButton":function(){define(["dojo/_base/declare",
"dojo/Stateful","dojo/on","dojo/dom-construct","dojo/dom-class"],function(t,p,l,k,g){return t(p,{domNode:null,checked:!1,disabled:!1,mode:"toggle",constructor:function(e,a,d){a=a||{};var c=a["class"];this.checked=!!a.checked;this.mode=a.mode||"toggle";this.domNode=k.create("div",{"class":(c?c+" ":"")+"esriGEToggleButton"},e,d);this._updateClass();l(this.domNode,"click",function(b){this.disabled||(b.checked=this.toggle(),this.onClick(b))}.bind(this))},postscript:function(){},_checkedSetter:function(e){this.checked=
!!e;this._updateClass()},_modeSetter:function(e){this.mode=e;this._updateClass()},_disabledSetter:function(e){this.disabled=e;this._updateClass()},_updateClass:function(){g.remove(this.domNode,"checked unchecked switch toggle");g.add(this.domNode,"toggle"===this.mode?"toggle":"switch");g.add(this.domNode,this.checked?"checked":"unchecked");g[this.disabled?"add":"remove"](this.domNode,"disabled")},onClick:function(e){},toggle:function(){this.set("checked",!this.checked);return this.checked}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ComparisonSettings":function(){define("dojo/_base/declare esri/dijit/geoenrichment/TriStateItem dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/ComparisonSettings.html dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,g,e,a,d,c){c=c.geoenrichment.dijit.ReportPlayer.PlayerToolbar;return t([l,k],{templateString:d,nls:c,player:null,showBackgroundImageCheckbox:null,splitPanelsCheckbox:null,postCreate:function(){var b=this;this.inherited(arguments);this.showBackgroundImageCheckbox=new p(this.showBackgroundImageLabel);this.showBackgroundImageCheckbox.onClick=function(){b._onChange()};this.splitPanelsCheckbox=new p(this.splitPanelsLabel);this.splitPanelsCheckbox.onClick=function(){b._update();b._onChange()};
a.setTooltipToNode(this.splitPanelsInfoIcon,c.splitPanelsTooltip);var f=this.player.nlsMap&&this.player.nlsMap.zoomPanelsTooltip||c.zoomPanelsTooltip;g[f?"show":"hide"](this.zoomPanelsInfoIcon);a.setTooltipToNode(this.zoomPanelsInfoIcon,f);this._initZoomControls();this._initZoomSplitControls()},_zoomEditor:null,_zoom:0,_initZoomControls:function(){var b=this;this._zoomEditor=new e({numericOnly:!0,onApply:function(f){b._setZoom(f)},onCancel:function(){b._updateZoomLabel()}});this.zoomLabel.addEventListener("click",
function(){b._zoomEditor.range={min:10,max:500};b._zoomEditor.editNodeLabel({node:b.zoomLabel,initialText:b._zoom})});this.zoomOutButton.addEventListener("click",function(){b._setZoom(Math.max(10,b._zoom-10))});this.zoomInButton.addEventListener("click",function(){b._setZoom(Math.min(500,b._zoom+10))});this.resetButton.addEventListener("click",function(){b._setZoom(100)})},_setZoom:function(b,f){b=Math.round(b);this._zoom!==b&&(this._zoom=b,this._updateZoomLabel(),this._update(),!f&&this._onChange())},
_updateZoomLabel:function(){this.zoomLabel.innerHTML=this._zoom+"%"},_zoomSplitEditor:null,_zoomSplit:0,_initZoomSplitControls:function(){var b=this;this._zoomSplitEditor=new e({numericOnly:!0,onApply:function(f){b._setZoomSplit(f)},onCancel:function(){b._updateZoomSplitLabel()}});this.zoomSplitLabel.addEventListener("click",function(){b._zoomSplitEditor.range={min:10,max:500};b._zoomSplitEditor.editNodeLabel({node:b.zoomSplitLabel,initialText:b._zoomSplit})});this.zoomOutSplitButton.addEventListener("click",
function(){b._setZoomSplit(Math.max(10,b._zoomSplit-10))});this.zoomInSplitButton.addEventListener("click",function(){b._setZoomSplit(Math.min(500,b._zoomSplit+10))});this.resetSplitButton.addEventListener("click",function(){b._setZoomSplit(100)})},_setZoomSplit:function(b,f){b=Math.round(b);this._zoomSplit!==b&&(this._zoomSplit=b,this._updateZoomSplitLabel(),this._update(),!f&&this._onChange())},_updateZoomSplitLabel:function(){this.zoomSplitLabel.innerHTML=this._zoomSplit+"%"},_update:function(){this.resetButton.style.visibility=
100===this._zoom?"hidden":"visible";this.resetSplitButton.style.visibility=100===this._zoomSplit?"hidden":"visible";g.hide([this.zoomBlock,this.zoomSplitBlock]);g.show(this.splitPanelsCheckbox.get("checked")?this.zoomSplitBlock:this.zoomBlock)},setSettings:function(b){this.showBackgroundImageCheckbox.set("checked",!b.hideBackgroundImage);this.splitPanelsCheckbox.set("checked",b.splitPanels);this._setZoom(100*(b.scale||1),!0);this._setZoomSplit(100*(b.scaleSplit||1),!0);this._update()},getSettings:function(){return{hideBackgroundImage:!this.showBackgroundImageCheckbox.get("checked"),
splitPanels:this.splitPanelsCheckbox.get("checked"),scale:this._zoom/100,scaleSplit:this._zoomSplit/100}},_onChange:function(){this._update();this.onChange()},onChange:function(){}})})},"esri/dijit/geoenrichment/utils/NodeLabelEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/ObjectUtil".split(" "),function(t,
p,l,k,g,e,a,d,c,b){return t(null,{_textMemo:null,_handlers:null,_textBox:null,_node:null,numericOnly:!1,range:null,keepLabelDimensions:!0,constructor:function(f){p.mixin(this,f)},editNodeLabel:function(f){var h=f.node,m=f.overNode||h,n=f.initialText,q=this;this._stopEdit();this._node=h;this._textMemo="string"===typeof n||"number"===typeof n?n:h.innerHTML;n=e.position(h).w;h.innerHTML="";this._textBox=f.multiline?g.create("textarea",{"class":"esriGETextBoxArea"},h):g.create("input",{type:"text"},h);
this._textBox.name="node-label";this._textBox.value=this._textMemo;this._textBox.focus();this._textBox.select();f.box?(h=f.box,this._textBox.style.position="absolute",this._textBox.style.left=h.x+"px",this._textBox.style.top=h.y+"px",this._textBox.style.width=h.w+"px",this._textBox.style.height=h.h+"px",this._textBox.style.width=h.w+"px",this._textBox.style.height=h.h-2+"px"):this.keepLabelDimensions&&a.set(this._textBox,"width",n+"px");f.textStyle&&d.setFullTextStyle(this._textBox,f.textStyle);this._handlers=
[l(document.body,"keyup",function(r){r.keyCode===k.ESCAPE?q._cancelEdit():r.keyCode!==k.ENTER||r.shiftKey||q._applyEdit()}),l(document.body,"click",function(){c.isMouseOver(m)||(f.applyWhenClickedOutside?q._applyEdit():q._cancelEdit())})]},_checkCanApply:function(f){if(!this.numericOnly)return!0;f=b.parseNumber(f);return isNaN(f)||this.range&&void 0!==this.range.min&&this.range.min>f||this.range&&void 0!==this.range.max&&this.range.max<f?!1:!0},_applyEdit:function(){var f=this._textBox.value;this._checkCanApply(f)?
(this._node.innerHTML=f,this._stopEdit(),this.onApply(f)):this._cancelEdit()},_cancelEdit:function(){this._node.innerHTML=this._textMemo;this._stopEdit();this.onCancel()},_stopEdit:function(){this._handlers&&this._handlers.forEach(function(f){f.remove()});this._textMemo=this._handlers=null;g.destroy(this._textBox);this._node=this._textBox=null},onApply:function(f){},onCancel:function(){}})})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number","./DateUtil"],function(t,p){var l=
{};Math.log10=Math.log10||function(g){return Math.log(g)*Math.LOG10E};l.populateObject=function(g,e,a){function d(c,b){function f(m){var n=c[m],q=b[m],r=n&&"object"===typeof n;void 0!==n&&(void 0===q?b[m]=n:q&&"object"===typeof q&&r?d(n,q):a&&(r?(q=b[m]={},d(n,q)):b[m]=c[m]))}if(c&&b&&!(Array.isArray(c)&&!Array.isArray(b)||Array.isArray(b)&&!Array.isArray(c)))if(Array.isArray(c))c.forEach(function(m,n){f(n)});else for(var h in c)f(h)}d(e,g);return g};l.filterByPattern=function(g,e){function a(c,b,
f){for(var h in c){var m=c[h],n=b[h];if(Array.isArray(m)){var q=m[0];if(n&&Array.isArray(n)){var r=f[h]=[];n.forEach(function(v){if(v&&"object"===typeof v){var w=Array.isArray(v)?[]:{};a(q,v,w);r.push(w)}})}}else if("object"===typeof m){if(n&&"object"===typeof n){var u=f[h]={};a(m,n,u)}}else void 0!==n&&(f[h]=n)}}var d={};a(e,g,d);return d};l.traverseObject=function(g,e){for(var a in g){var d=g[a];e(d,a,g);d&&"object"===typeof d&&l.traverseObject(d,e)}};l.copyOwnJsonProperties=function(g,e,a){e=e||
{};for(var d in g){var c=g[d];g.hasOwnProperty(d)&&"function"!=typeof c&&(c&&"object"==typeof c&&a&&(c=a(d,c)),void 0!==c&&(e[d]=c))}return e};l.removeUndefinedProperties=function(g){g&&Object.keys(g).forEach(function(e){void 0===g[e]&&delete g[e]});return g};l.getValue=function(g,e){if("string"!==typeof e)return g;e=e.split(".");for(var a=0;a<e.length;a++)g=g&&g[e[a]];return g};l.setValue=function(g,e,a){if("string"===typeof e&&(e=e.split("."),e.length)){for(var d=0;d<e.length-1;d++)g=g&&g[e[d]];
g&&(g[e[e.length-1]]=a)}};l.isNumber=function(g){return!isNaN(parseFloat(g))&&isFinite(g)};l.roundNumber=function(g,e){return"number"!==typeof g?g:parseFloat(g.toFixed(void 0!==e?e:0))};l.getBestPrecision=function(g){return 0===g?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(g))))};l.getPlaces=function(g,e){function a(h,m){var n=g.indexOf(h,d);if(0>n)return c;h=g.charAt(n+h.length);return!h||0>m.indexOf(h)?c:n-d}g=+g;if(isNaN(g))return-1;g+="";var d=g.indexOf(".")+1,c=d?g.length-d:0;if(2>=c||!e)return c;
e=0;if(!+g.substr(0,d-1))for(;"0"===g.charAt(d);)d++,e++,c--;for(var b=c-1;2<=b;b--){var f=Math.min(a("000000000000000".substr(0,b),"01234"),a("999999999999999".substr(0,b),"56789"));if(f!==c){c=f;break}}return c+e};l.formatNumber=function(g,e){e="number"===typeof e?{places:e}:e||{};var a=e.places,d={};0<=a?d.places=a:a=-1;d.locale=e.locale||p.getDateNumberLocale();g=t.format(g,d);if(e.noSeparator){d=l.getSeparator();var c;if(d)for(;0<=(c=g.indexOf(d));)g=g.substr(0,c)+g.substr(c+1)}if(e.preserveTrailingZeroes||
0>=a||!g)return g;for(e=g.length;0<a&&"0"==g.charAt(e-1);)e--,--a||e--;return g.substr(0,e)};l.formatNumberAsCurrency=function(g,e,a){return e?e.split(";")[0>g?1:0].replace("0",l.formatNumber(Math.abs(g),a)):l.formatNumber(g,a)};var k;l.getSeparator=function(){void 0===k&&(k=t.format(9999,{places:0}).replace(/9/g,""));return k};l.parseNumber=function(g,e,a,d){if(""===g)return"undefined"!==typeof a?a:NaN;if(null==g||"string"!==typeof g&&isNaN(g))return NaN;g=String(g);if(!g.trim())return void 0!==
a?a:NaN;a=t.parse(g,{strict:d,locale:p.getDateNumberLocale()});isNaN(a)&&g.trim().length&&(a=d?t.parse(g,{strict:d,locale:"en-US"}):Number(g));return isNaN(a)||void 0===e||0>e?a:t.round(a,e)};l.parsePercentOrCurrency=function(g,e,a,d,c){"string"===typeof g&&(g=g.replace("%",""),e&&(e=e.split(";")[0].replace("0",""),g=g.replace(e,"")));return l.parseNumber(g,a,d,c)};l.compareEqual=function(g,e,a){return void 0===a?g===e:Number(Number(g).toFixed(a))===Number(Number(e).toFixed(a))};return l})},"esri/dijit/geoenrichment/utils/DateUtil":function(){define(["dojo/date/locale",
"esri/moment"],function(t,p){var l={formatDate:function(k,g){k=l.objectToDate(k);g.locale=g.locale||l.getDateNumberLocale();return k?t.format(k,g):""},formatMoment:function(k,g){return(k=l.objectToTime(k))?p(k).format(g):""},formatDateShort:function(k){return l.formatMoment(k,"L")},formatDateTimeShort:function(k){return l.formatMoment(k,"L LT")},formatLiveTime:function(k){var g=l.formatMoment(k,"l, LT").replace(/\d\d\d\d/,function(e){return e.substr(2)});return g?g+" "+l.formatDate(k,{datePattern:"ZZZZ",
selector:"date"}):""},formatTypicalTime:function(k){return l.formatMoment(k,"ddd LT")},parseDateShort:function(k){return(k=+p(k,"L"))?new Date(k):null},getReportFooterDate:function(k){return t.format(k||new Date,{datePattern:"MMMM d, yyyy",selector:"date"})},getFullYear:function(){return(new Date).getFullYear()},objectToTime:function(k){if(!k)return null;k="string"===typeof k?new Date(k):k;return k.getTime?k.getTime():Number(k)||null},objectToDate:function(k){return k?k.getTime?k:new Date(k):null},
getDateNumberLocale:function(){return window.dojoConfig&&window.dojoConfig.extraLocale&&window.dojoConfig.extraLocale[0]||window.dojo.locale}};return l})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(t,p,l){return l})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(t,p,l,k){Object.defineProperty(p,"__esModule",{value:!0});var g={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bg:1,bs:1,
ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-in":1,"en-nz":1,"en-sg":1,es:1,"es-do":1,"es-mx":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-mo":1,"zh-tw":1};p.load=function(e,a,d){e=l.locale;var c=e in g;if(!c){var b=e.split("-");1<b.length&&b[0]in g&&(e=b[0],c=!0)}c?
a(["moment/locale/"+e],function(){d(k)}):d(k)}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaUtil":function(){define(["dojo/_base/lang","esri/geometry/webMercatorUtils","esri/dijit/geoenrichment/utils/CoordinateUtil"],function(t,p,l){var k={geometryToLatLong:function(g){var e=g.spatialReference.wkid;return e===l.WGS_84_WKID?{STORE_LONG:g.x,STORE_LAT:g.y}:l.isWebMercator(e)?(g=p.xyToLngLat(g.x,g.y),{STORE_LONG:g[0],STORE_LAT:g[1]}):null},populateCombinedAreasInfo:function(g,
e){var a={},d={};e.forEach(function(c){c.latitude&&(a[c.latitude]=1);c.longitude&&(d[c.longitude]=1)});g.name=g.name||e.map(function(c){return c.name}).join(", ");g.shortName=g.shortName||e.map(function(c){return c.shortName||c.name}).join(", ");g.description=g.description||e.map(function(c){return c.description||c.name}).join(", ");g.address=g.address||e.map(function(c){return c.address||c.name}).join(", ");g.latitude=g.latitude||Object.keys(a).join(", ");g.longitude=g.longitude||Object.keys(d).join(", ");
return g},groupAreas:function(g){function e(h){var m=h.locationName||h.name;return{isSingleAreaGroup:!0,label:m,hideGroupLabel:m===(h.shortName||h.name),areas:[h]}}var a=g.combinedAreasInfo&&g.combinedAreasInfo.groups||[],d=[],c=[],b={};g.analysisAreas.forEach(function(h){if((!g.filter||g.filter(h))&&!h.hidden)if(h.isGrouped){if(!b[h.groupIndex]){var m=a[h.groupIndex];m=b[h.groupIndex]={isRealGroup:!0,label:m.locationName||m.name,areas:[]};c.push(m);d.push(m)}b[h.groupIndex].areas.push(h)}else d.push(e(h))});
if(1===d.length&&d[0].isRealGroup){d=d[0].areas.map(e);c.length=0;var f=!0}return{groupInfos:d,isOnlyAreasInOnlyGroup:f}},parseSites:function(g){if(g.sites){g.analysisAreas=[];g.sites.forEach(function(a){a.areas.forEach(function(d){g.analysisAreas.push(d)})});g.combinedAreasInfo={groups:g.sites.map(function(a){var d=t.mixin({},a);delete d.areas;delete d.attributes;delete d.notes;delete d.images;d.indexes=a.areas.map(function(c){return g.analysisAreas.indexOf(c)});return d})};k.populateCombinedAreasInfo(g.combinedAreasInfo,
g.sites);if(!g.attachmentsProvider||!g.attachmentsProvider.getAttributesForAreaAt){g.attachmentsProvider={};g.attachmentsProvider.supportsMultipleAreas=1<g.sites.length;var e=g.attachmentsProvider.areaAttachments=[];g.sites.forEach(function(a){a.areas.forEach(function(d){e.push({attributes:a.attributes,notes:a.notes,images:a.images})})})}delete g.sites}}};return k})},"esri/dijit/geoenrichment/utils/CoordinateUtil":function(){define(["esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(t,
p){var l={},k=[4326,102100,102113,3857];l.WGS_84_WKID=4326;l.WEB_MERCATOR_WKID=102100;l.getSupportedWKIDs=function(){return k.slice()};l.testSpatialReferenceWKID=function(g){g=k.indexOf(Number(g&&"object"===typeof g?g.wkid:g));return 0<=g?k[0===g?0:1]:0};l.isWebMercator=function(g){return 102100===l.testSpatialReferenceWKID(g)};l.isWGS84=function(g){return 4326===l.testSpatialReferenceWKID(g)};l.getGeometryConverter=function(g,e){g=l.testSpatialReferenceWKID(g);e=l.testSpatialReferenceWKID(e);return g&&
e&&g!==e?4326===g?t.geographicToWebMercator:t.webMercatorToGeographic:null};l.toWGS84=function(g){return l.toSpatialReference(g,4326)};l.toWebMercator=function(g){return l.toSpatialReference(g,102100)};l.toSpatialReference=function(g,e){g&&!g.toJson&&(g=p.fromJson(g));e=l.getGeometryConverter(g&&g.spatialReference,e);return null!=e?e(g):g};return l})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomSelect":function(){define("dojo/_base/declare dojo/dom-construct esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ./Select ./ZoomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,g,e,a){a=a.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var d=t(l,{createPresentation:function(c,b,f,h){var m=this,n=this.inherited(arguments);if(c.isCustomZoom){n.innerHTML="";var q=p.create("div",{"class":"esriGELink",innerHTML:a.customZoom},n),r=new e({numericOnly:!0,onApply:function(u){m.onCustomZoomApplied(u);q.innerHTML=a.customZoom},onCancel:function(){q.innerHTML=a.customZoom}});q.addEventListener("click",function(){r.range={min:10,max:1E3};r.editNodeLabel({node:q,initialText:""})})}else this.selectPresentation(n,
b);return n},onCustomZoomApplied:function(c){}});return t(k,{listClass:"esriGEOnDemandSelectUnlimitedTallList esriGEOnDemandSelectSpacedOut",buildRendering:function(){var c=this;this.inherited(arguments);this.itemRenderer=new d({onCustomZoomApplied:function(b){c.set("value",b);c.onChange({value:b});c.closePopup()}})},postCreate:function(){this.inherited(arguments);var c=g.getOptions().slice();c.push({isCustomZoom:!0,enabled:!1});this.set("options",c);this.set("value",100)}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomUtil":function(){define(["dojo/i18n!esri/nls/jsapi"],
function(t){var p={};t=t.geoenrichment.dijit.ReportPlayer.PlayerToolbar;p.FIT_PAGE="fitPage";p.FIT_PAGE_WIDTH="fitPageWidth";p.FIT_PAGE_HEIGHT="fitPageHeight";p.getOptions=function(){var l=[{value:p.FIT_PAGE,label:t.fitPage},{value:p.FIT_PAGE_WIDTH,label:t.fitPageWidth},{value:p.FIT_PAGE_HEIGHT,label:t.fitPageHeight}];[{value:400,label:"400%"},{value:200,label:"200%"},{value:150,label:"150%"},{value:125,label:"125%"},{value:100,label:"100%"},{value:90,label:"90%"},{value:80,label:"80%"},{value:70,
label:"70%"},{value:60,label:"60%"},{value:50,label:"50%"}].forEach(function(k){l.push({isCustom:!0,value:-1,label:""});l.push(k)});l.push({isCustom:!0,value:-1,label:""});return l};p.getClosestZoomAndUpdateOptions=function(l,k){k.forEach(function(d){d.isCustom&&(d.value=-1,d.hidden=!0)});var g=[];k.forEach(function(d){d.isCustom||"number"!==typeof d.value||g.push({option:d,value:d.value,score:l<d.value?l/d.value:d.value/l})});g.sort(function(d,c){return c.score-d.score});var e=g[0];if(1===e.score)return e.value;
var a=k.indexOf(e.option);k=k[a+(l>e.value?-1:1)];k.value=l;k.label=Math.round(l)+"%";k.hidden=!1;return k.value};return p})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ToolbarArranger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","esri/dijit/geoenrichment/utils/DomUtil"],function(t,p,l,k){return t(null,{showAreaTitle:!1,stretchToolbarNode:null,domNode:null,infographicsSelectDiv:null,areaTitleDiv:null,areaTitleInnerDiv:null,rightSideControlsBlock:null,areasSelectDiv:null,
zoomSelectDiv:null,pageSelectDiv:null,commandButtonsContainer:null,constructor:function(g){p.mixin(this,g)},arrangeControls:function(){k[0<this.infographicsSelectDiv.children.length?"show":"hide"](this.infographicsSelectDiv);k[this.showAreaTitle?"show":"hide"](this.areaTitleDiv);this.domNode.style.width="";this.areaTitleDiv.style.marginLeft="";this.areaTitleInnerDiv.style.maxWidth="";this.rightSideControlsBlock.style.position=this.stretchToolbarNode?"absolute":"static";this.stretchToolbarNode&&(this.domNode.style.width=
this.stretchToolbarNode.clientWidth+"px",this._processStretchSpecialCases(this.stretchToolbarNode));this.syncRightSideVisibility()},_processStretchSpecialCases:function(g){function e(d){return k.isHidden(d)?0:d.clientWidth+a(d)}function a(d){return k.isHidden(d)?0:l.get(d,"marginLeft")+l.get(d,"marginRight")}this.showAreaTitle&&(g=g.clientWidth,g-=e(this.infographicsSelectDiv),g-=e(this.rightSideControlsBlock),g-=e(this.areasSelectDiv),g-=a(this.areaTitleDiv),this.areaTitleInnerDiv.style.maxWidth=
g+"px",k.isHidden(this.infographicsSelectDiv)||k.isHidden(this.infographicsSelectDiv)||(this.areaTitleDiv.style.marginLeft=Math.min(g-this.areaTitleDiv.clientWidth,(this.domNode.clientWidth-this.areaTitleDiv.clientWidth)/2-e(this.infographicsSelectDiv))+"px"))},hasVisibleControls:function(){return[this.infographicsSelectDiv,this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(k.isNodeInLayout)},syncRightSideVisibility:function(){k.show(this.rightSideControlsBlock);
var g=[this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(k.isNodeInLayout);k[g?"show":"hide"](this.rightSideControlsBlock)}})})},"esri/dijit/geoenrichment/utils/InvokeUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,p){return{invoke:function(l,k,g,e,a){l.__invokeTimeoutIDs||(l.__invokeTimeoutIDs={});var d=l.__invokeTimeoutIDs[k];if(d){if(null==g||!1===e)return d.dfd.promise;clearTimeout(d.handle)}d||(d=l.__invokeTimeoutIDs[k]=
{dfd:new t});d.handle=setTimeout(function(){delete l.__invokeTimeoutIDs[k];p(a?l[k].apply(l,a):l[k](),function(c){d.dfd.resolve(c)},function(c){d.dfd.reject(c)})},g||0);return d.dfd.promise},hasPendingInvoke:function(l,k){return!(!l.__invokeTimeoutIDs||!l.__invokeTimeoutIDs[k])},cancelInvoke:function(l,k){l.__invokeTimeoutIDs&&l.__invokeTimeoutIDs[k]&&(clearTimeout(l.__invokeTimeoutIDs[k].handle),delete l.__invokeTimeoutIDs[k])}}})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerViewModel":function(){define("dojo/_base/declare dojo/aspect esri/dijit/geoenrichment/promise/all ./core/layout/LayoutBuilder ./core/themes/ThemeLibrary ./core/themes/ReportThemes ./core/supportClasses/map/layers/locator/LocatorPointsController ./core/supportClasses/map/layers/std/StdPolygonsController ./core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController ./core/supportClasses/EditorUnits ../utils/ColorUtil".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f){return t(null,{isReportPlayerViewModel:!0,layoutBuilder:null,dynamicReportInfo:null,enableDataDrilling:!1,preInitialize:function(){this.layoutBuilder=this.layoutBuilder||new k;return this.layoutBuilder.initCoreComponents()},initialize:function(h,m){this.preInitialize();return this.layoutBuilder[h?"initClassicComponents":"initGraphicComponents"](m)},_animationAllowed:!1,_animationSuspended:!1,isAnimationAllowed:function(){return this._animationAllowed&&!this._animationSuspended},
setAnimationAllowed:function(h){this._animationAllowed=h},setAnimationSuspended:function(h){this._animationSuspended=h},_theme:null,getTheme:function(h){return h||this._theme},setTheme:function(h){this._theme=h||g.getReportThemeById(e.GRAPHIC)},getTableDefaultStyles:function(h,m){h=this.getTheme(h).table.overrideStyles;return m?h[m]:h},getChartDefaultStyles:function(h){return this.getTheme(h).chart},getDocumentDefaultStyles:function(h){return this.getTheme(h).document},getInfographicDefaultStyles:function(h){return this.getTheme(h).infographic},
getStaticInfographicDefaultStyles:function(h){return(h=this.getInfographicDefaultStyles(h))&&h.staticInfographic},isLightDocumentTheme:function(h){return f.isLightColor(this.getTheme(h).document.backgroundColor)},_isGraphicStyle:!1,isGraphicStyle:function(){return this._isGraphicStyle},setDynamicReportInfo:function(h){this.dynamicReportInfo=h;this._isGraphicStyle=h.reportObject.isGraphicReport},getDynamicBehaviorImage:function(h,m,n){},_locatorPointsControllers:null,getLocatorPointsController:function(h,
m){var n=h.calculatorName+"_"+m;this._locatorPointsControllers=this._locatorPointsControllers||{};var q=this._locatorPointsControllers[n];q||(q=this._locatorPointsControllers[n]=new a(h,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,m),p.after(q,"destroy",function(){delete this._locatorPointsControllers[n]}.bind(this)));return q},_stdPolygonsControllers:null,getStdPolygonsController:function(h,m){this._stdPolygonsControllers=this._stdPolygonsControllers||{};var n=h+"_"+(m||
0),q=this._stdPolygonsControllers[n];q||(q=this._stdPolygonsControllers[n]=new d(h,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,m),p.after(q,"destroy",function(){delete this._stdPolygonsControllers[n]}.bind(this)));return q},loadAllStdFeatures:function(){var h=[],m;for(m in this._stdPolygonsControllers)h.push(this._stdPolygonsControllers[m].loadAllFeatures());return l(h)},_thisAreasHighlightController:null,getThisAreasHighlightController:function(){this._thisAreasHighlightController||
(this._thisAreasHighlightController=new c,p.after(this._thisAreasHighlightController,"destroy",function(){this._thisAreasHighlightController=null}.bind(this)));return this._thisAreasHighlightController},_legendControllers:null,registerLegendController:function(h,m,n){this._legendControllers=this._legendControllers||{};var q=this._legendControllers[m]=this._legendControllers[m]||{};q[n]=h;var r=h.addCallback(function(u,v){if(v)for(var w in q)v=q[w],v!==h&&v.setLegendVisible(u)},"viewModel");return{remove:function(){delete q[n];
r.remove()}}},_benchmarkController:null,_benchmarkDisabled:!1,getBenchmarkController:function(){return!this._benchmarkDisabled&&this._benchmarkController},registerBenchmarkController:function(h){this._benchmarkController&&this._benchmarkController.destroy();this._benchmarkController=h;p.after(this._benchmarkController,"destroy",function(){this._benchmarkController=null}.bind(this))},isBenchmarkedArea:function(h){return this._benchmarkDisabled?!1:"number"===typeof h&&this._benchmarkController&&0<=
this._benchmarkController.getAreaIndex()&&this._benchmarkController.getAreaIndex()!==h},setBenchmarkDisabled:function(h){this._benchmarkDisabled=h},reset:function(){[this._locatorPointsControllers,this._stdPolygonsControllers].forEach(function(h){h&&Object.keys(h).forEach(function(m){(m=h[m])&&m.destroy()})});this._stdPolygonsControllers=this._locatorPointsControllers=null;this._thisAreasHighlightController&&this._thisAreasHighlightController.destroy();this._thisAreasHighlightController=null},canExportToExcel:function(){return!1},
exportToExcel:function(h){},prepareExportToExcelParameters:function(h){},getUnits:function(){return"px"},provideUnits:function(h){return b.provideUnits(h,this.getUnits())},roundForUnits:function(h){return b.round(h,this.getUnits())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/layout/LayoutBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/Deferred","dojo/dom-construct"],function(t,p,l,k){return t(null,{_moduleMap:null,_getModulePaths:function(){return{core:{section:"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionRenderer",
grid:"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid",image:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/image/ImageRenderer",chart:"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartRenderer",map:"esri/dijit/geoenrichment/ReportPlayer/core/map/MapRenderer"},classic:{reportContainer:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainer/ReportContainer"},graphicCore:{shape:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/shape/ShapeRenderer",infographic:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicRenderer"},
graphic_fullPages:{reportContainerGrid:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/ReportContainerGrid"},graphic_panelsInSlides:{reportContainerPagination:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerPagination/ReportContainerPagination",infographicPage:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPage"},graphic_panelsInStack:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},
graphic_panelsInStackAll:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",reportContainerStackAll:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStackAll",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},graphic_panelsInRow:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"}}},
initCoreComponents:function(){var g=this._getModulePaths();return this._initPaths(p.mixin({},g.core,g.graphicCore))},initClassicComponents:function(){var g=this._getModulePaths();return this._initPaths(p.mixin({},g.core,g.classic))},initGraphicComponents:function(g){var e=this._getModulePaths();return this._initPaths(p.mixin({},e.core,e.graphicCore,e["graphic_"+g]||e.graphic_fullPages))},_initPaths:function(g){var e=this;this._moduleMap=this._moduleMap||{};var a=[],d;for(d in g)a.push({id:d,path:g[d]});
var c=new l;require(a.map(function(b){return b.path}),function(){for(var b=0;b<arguments.length;b++)e._moduleMap[a[b].id]=arguments[b];c.resolve()});return c.promise},createElement:function(g,e,a,d){switch(g){case "grid":case "reportContainer":case "reportContainerGrid":case "reportContainerPagination":case "reportContainerStack":case "reportContainerStackAll":case "infographicPage":case "infographicPageStack":return new this._moduleMap[g](e,a?k.create("div",null,a,d):void 0);case "section":return this._moduleMap.section.createSection(e,
a,d);case "emptySection":return this._moduleMap.section.createEmptySection(e,a,d);case "image":return this._moduleMap.image.createImageContainer(e);case "shape":return this._moduleMap.shape.createShapeContainer(e);case "chart":return this._moduleMap.chart.createChartPage(e);case "infographic":return this._moduleMap.infographic.createInfographicPage(e);case "map":return this._moduleMap.map.createMapContainer(e)}return!1},getClass:function(g){return this._moduleMap[g]}})})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeLibrary":function(){define("dojo/_base/lang ./PageBorderStyles ../charts/utils/ChartLineStyles ./ReportThemes ./ThemeUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,g,e,a){function d(m){m=m||{};m=m.defaultFontFamilty||"Avenir Next";return{backgroundColor:"#FFFFFF",padding:5,icon:{backgroundColor:"#56a5d8"},highlightedIcon:{backgroundColor:"#D6851A"},iconBarBackground:{backgroundColor:"#AAAAAA",borderColor:"#AAAAAA"},titleLine:{color:"#A8A7A8"},titleStyle:{fontFamily:m,color:"#828282",fontSize:16,backgroundColor:"transparent"},variableLabelStyle:{fontFamily:m,color:"#56a5d8",fontSize:24,backgroundColor:"transparent"},variableLabelStyleHighlighted:{fontFamily:m,
fontSize:24},variableLabelStyleContrast:{fontFamily:m,fontSize:24},variableDescriptionStyle:{fontFamily:m,color:"#828282",fontSize:13,backgroundColor:"transparent"}}}function c(){return{style:p.ALL,lineStyle:"dashed",thickness:1,color:"#b2b2b2"}}function b(m){m=m||{};var n=m.defaultFontFamilty||"Avenir Next",q=m.defaultFontSize||13;return{document:{fontSize:q,fontFamily:n,backgroundImage:{data:null,position:"center",repeat:!1,scale:!0,opacity:1,size:null},border:c()},icon:{backgroundColor:"#56a5d8"},
highlightedIcon:{backgroundColor:"#D6851A"},table:{dataTablePadding:5,tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},chart:{renderSingleDataSeriesWithSameColor:!0,outlineStyle:l.SOLID,titleStyle:{fontFamily:n,fontSize:16},xAxis:{gridLinesStyle:l.SOLID,axisStyle:{fontFamily:n,fontSize:9},titleStyle:{fontFamily:n,fontSize:q}},yAxis:{gridLinesStyle:l.SOLID,baseLineStyle:l.SOLID,axisStyle:{fontFamily:n,fontSize:9},titleStyle:{fontFamily:n,fontSize:q}},dataLabelsStyle:{fontFamily:n,
fontSize:10},legendStyle:{fontFamily:n,fontSize:10},minMaxLegend:{titleStyle:{fontFamily:n,fontSize:10},minVariableLabelStyle:{fontFamily:n,fontSize:16},maxVariableLabelStyle:{fontFamily:n,fontSize:16}},icon:{backgroundColor:"#56a5d8"},line:{},column:{},bar:{},pie:{},donut:{},ring:{},pictureColumn:{},pictureBar:{},gauge:{dataLabelStyle:{fontFamily:n}},waffle:{dataValueStyle:{fontFamily:n,fontSize:30},dataLabelStyle:{fontFamily:n,fontSize:16}},tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},
infographic:{staticInfographic:d(m)}}}var f={DEFAULT_FONT_FAMILY_CLASSIC:"Verdana",DEFAULT_FONT_FAMILY_GRAPHIC:"Avenir Next",DEFAULT_FONT_SIZE_CLASSIC:10,DEFAULT_FONT_SIZE_GRAPHIC:13,CHART_DATA_FONT_SIZE:10,defaultStaticInfographic:d(),standardRamps:[{id:k.CLASSIC,colors:["#FFFFFF","#13729F","#DEA429"],additional:{table:{overrideStyles:{Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"},ReportTitle:{color:"#FFFFFF",backgroundColor:"#00436D"},TableHeader:{color:"#4C4C4C",backgroundColor:"#CCCCCC"},
GreyText:{color:"#AAAAAA",backgroundColor:"#FFFFFF"},BlueText:{color:"#00436D",backgroundColor:"#FFFFFF"},AlternatingRow:{color:"#4C4C4C",backgroundColor:"#EEEEEE"}}},chart:{renderSingleDataSeriesWithSameColor:!1,colors:"#13729F #DEA429 #6A9741 #A75523 #456E35 #D7DF22 #868686 #3C546D #829AB3 #DEDEDE #03406E #B1B1B1".split(" ")}}},{id:k.GRAPHIC,colors:["#FFFFFF","#56A5D8","#D6851A"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}},
{id:"red",colors:["#d3d3d3","#8b4513","#ff4500"],additional:{chart:{colors3series:["#8b4513","#F1948A","#E74C3C"],colors:"#8b4513 #F1948A #EC7063 #E74C3C #CB4335 #B03A2E #943126 #78281F".split(" ")}}},{id:"dark",colors:["#6A6A6A","#FFFFFF","#EEEEEE"],additional:{chart:{colors3series:["#FFFFFF","#CACFD2","#A6ACAF"],colors:"#FFFFFF #D7DBDD #CACFD2 #BDC3C7 #A6ACAF #909497 #797D7F #626567 #4d4d4d #3e3e3e #262626".split(" ")}}},{id:"green",colors:["#556b2f","#90ee90","#ffffe0"],additional:{chart:{colors3series:["#E9F7EF",
"#A9DFBF","#27AE60"],colors:"#E9F7EF #A9DFBF #7DCEA0 #52BE80 #27AE60 #229954 #1E8449 #196F3D #145A32".split(" ")}}},{id:"green2",colors:["#FFFFFF","#0B7AC0","#35AC46"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#56A5D8 #AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}}]},h={};f.standardRamps.forEach(function(m){var n=t.mixin({},m.additional);n.id=m.id;var q=b({defaultFontFamilty:m.id===k.CLASSIC?"Verdana":"Avenir Next",defaultFontSize:m.id===
k.CLASSIC?10:13});g.applyThemeColorsToTheme({theme:q,colors:m.colors});e.populateObject(q,n,!0);f[m.id]=q;h[m.id]=q});f.TABLE_STYLES="Default ReportTitle TableHeader GreyText BlueText AlternatingRow".split(" ");f.getReportThemeById=function(m){return h[m]};f.isStandardTheme=function(m){return!!h[m]};f.getStandardThemes=function(){return Object.keys(h).map(function(m){return h[m]})};f.getDefaultStaticInfographicSettings=function(){return t.clone(f.defaultStaticInfographic)};f.getDefaultBorderSettings=
function(){return c()};f.getDefaultTheme=function(m){return b(m)};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/PageBorderStyles":function(){define([],function(){var t={NONE:"none",ALL:"all",INNER_ONLY:"innerOnly",OUTER_ONLY:"outerOnly",HORIZONTAL_INNER_ONLY:"horizontalInnerOnly",VERTICAL_INNER_ONLY:"verticalInnerOnly",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toSupportedValue:function(p){return t.isSupported(p)?p:t.ALL}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineStyles":function(){define([],
function(){var t={SOLID:"Solid",DASHED:"Dashed",DOTTED:"Dotted",isSupported:function(p){for(var l in t)if(t[l]===p)return!0;return!1},toGFXValue:function(p,l){switch(p){case "Dashed":return 1>l?"LongDash":"Dash";case "Dotted":return 1>l?"Dash":"Dot";default:return"Solid"}}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ReportThemes":function(){define([],function(){return{GRAPHIC:"graphic",CLASSIC:"classic",COMPARISON:"comparison"}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(t,p,l){function k(d){var c=p.isLightColor(d);return p.transform(d,{dv:c?-7:7}).toHex()}var g={getPanelTitleColor:function(d){var c=p.isLightColor(d);return p.transform(d,{dv:c?-50:50}).toHex()},getChartElementBackgroundColor:function(d){var c=p.isLightColor(d);return p.transform(d,{dv:c?-13:13}).toHex()}},e={getThemeColors:function(d){return[d.document.backgroundColor,d.icon.backgroundColor,d.highlightedIcon.backgroundColor]},
generateChartColors:function(d,c,b){b=b||{};var f=b.gradientFactor||1,h=[c,p.transform(c,{dv:-20*f}).toHex(),p.transform(c,{dv:-40*f}).toHex(),p.transform(c,{dv:-50*f}).toHex(),p.transform(c,{dv:-55*f}).toHex(),p.transform(c,{dv:-60*f}).toHex(),p.transform(c,{dv:-65*f}).toHex(),p.transform(c,{dv:-70*f}).toHex()];if(b.numLighterColors)for(var m=0;m<b.numLighterColors;m++)h.unshift(p.transform(c,{dv:20*f*(m+1),ds:-20*(m+1)}).toHex());d&&d!==c&&h.unshift(d);var n={};return h.filter(function(q){return n[q]?
!1:n[q]=!0})},applyThemeColorsToTheme:function(d){var c=d.theme,b=d.colors,f=d.preserveForegroundColor,h=d.chartColors,m=d.colors3series;d=d.preprocessGeneratedThemeFunc;var n=b[0],q=b[1];b=b[2];var r=f&&c.chart&&c.chart.dataLabelsStyle&&c.chart.dataLabelsStyle.color||p.getContrastColor(n).toHex();f=f&&c.document.color||("#FFFFFF"===n.toUpperCase()?"#4C4C4C":r);var u=p.isLightColor(n),v=g.getChartElementBackgroundColor(n),w=g.getPanelTitleColor(n),z=p.transform(n,{dv:u?-33:33}).toHex(),E={overrideStyles:{Default:{color:f,
backgroundColor:"transparent"},TableHeader:{color:p.getContrastColor(q,void 0,void 0,200).toHex(),backgroundColor:q},AlternatingRow:{color:f,backgroundColor:p.transform(n,{dv:u?-7:7}).toHex()},ReportTitle:{color:b,backgroundColor:"transparent"},GreyText:{color:z,backgroundColor:"transparent"},BlueText:{color:"#56A5D8",backgroundColor:"transparent"}}},F={lineColor:r,gridLinesColor:r,gridStripesColor:k(n),gridStripesColorAlt:"transparent",axisStyle:{color:r},titleStyle:{color:r}},D={lineColor:r,gridLinesColor:r,
gridStripesColor:k(n),gridStripesColorAlt:"transparent",baseLineColor:r,axisStyle:{color:r},titleStyle:{color:r}};var B=p.isLightColor(n)?"#666666":"#BBBBBB";n={document:{color:f,backgroundColor:n,border:{color:z}},icon:{backgroundColor:q},highlightedIcon:{backgroundColor:b},table:E,chart:{backgroundColor:"transparent",outlineColor:void 0,titleStyle:{color:w},dataLabelsAltColor:r,dataLabelsStyle:{color:r},xAxis:F,yAxis:D,legendStyle:{color:r,backgroundColor:"transparent"},minMaxLegend:{titleStyle:{color:r}},
comparisonInfo:{lineColor:B},icon:{backgroundColor:q},ring:{ringBackground:{backgroundColor:v}},gauge:{dataLabelStyle:{color:q},othersColor:v,arrowIndicator:{lineColor:w,backgroundColor:w}},waffle:{dataValueStyle:{color:q},dataLabelStyle:{color:q},othersColor:v},columnBarBackground:{backgroundColor:v}},infographic:{backgroundColor:"transparent",agePyramid:{theme:u?"light":"common",male:{backgroundColor:q},female:{backgroundColor:b}},staticInfographic:{backgroundColor:"transparent",icon:{backgroundColor:q},
highlightedIcon:{backgroundColor:b},iconBarBackground:{},titleLine:{color:p.transform(n,{dv:u?-40:40}).toHex()},titleStyle:{color:w},variableLabelStyle:{color:q},variableLabelStyleHighlighted:{color:b},variableLabelStyleContrast:{color:n},variableDescriptionStyle:{color:p.transform(n,{dv:u?-50:50}).toHex()}}}};d&&d(n);l.populateObject(c,n,!0);c.chart.colors=h&&h.length?h:e.generateChartColors(q,b);c.chart.colors3series=m},applyTextStyleToTheme:function(d,c){function b(h,m){var n=t.mixin({},c);h&&
delete n.color;m||delete n.fontSize;return n}c=e.filterTextStyles(c);var f={document:b(!1,!0),table:{overrideStyles:{Default:b(!1,!0),TableHeader:b(!1,!0),AlternatingRow:b(!1,!0),ReportTitle:b(!1,!0),GreyText:b(!1,!0),BlueText:b(!1,!0)}},chart:{titleStyle:b(),dataLabelsStyle:b(),xAxis:{axisStyle:b(),titleStyle:b()},yAxis:{axisStyle:b(),titleStyle:b()},legendStyle:b(),minMaxLegend:{titleStyle:b(),minVariableLabelStyle:b(!0),maxVariableLabelStyle:b(!0)},gauge:{dataLabelStyle:b()},waffle:{dataValueStyle:b(),
dataLabelStyle:b()}},infographic:{staticInfographic:{titleStyle:b(),variableLabelStyle:b(),variableLabelStyleHighlighted:b(),variableLabelStyleContrast:b(),variableDescriptionStyle:b()}}};l.populateObject(d,f,!0)}},a={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,textDecoration:1,color:1};e.filterTextStyles=function(d){var c={},b;for(b in a){var f=d[b];void 0!==f&&(c[b]=f)}return c};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/locator/LocatorPointsController":function(){define("dojo/_base/declare dojo/on dijit/Destroyable ../../../../../dataProvider/supportClasses/data/AreaDataUtil ../../MapEventUtil esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(t,p,l,k,g,e){return t(l,{_info:null,_fieldData:null,_isMultiFeature:null,_calcDataArray:null,_currentFeatureIndex:null,_layerNames:null,constructor:function(a,d,c,b){this._info=a;this._fieldData=d;this._isMultiFeature=c;this._currentFeatureIndex=b;this._layerIndexes={};this._layerNames={};this._rendererJsons={};this._mapInfos={};this._graphicLayerInfos={}},_getCalculatorName:function(){return this._info.calculatorName},getVariableObjects:function(){return this._info.variableObjects},getLayerID:function(){return this._info.layerID},
getLayerUrl:function(){return this._info.layerUrl},getLayerName:function(a){return this._layerNames[a]||this._info.layerName},setLayerName:function(a,d){this._layerNames[a]=d},getCalculatorDataArray:function(){if(!this._calcDataArray)if(this._isMultiFeature){var a=k.combineAreaDataObjectCalculators(this._fieldData.areaData,this._getCalculatorName());this._calcDataArray=k.removeDuplicacatedCalcData(a.thisAreas.concat(a.comparisonLevels))}else this._calcDataArray=(a=k.getAreaDataObjectCalculator(this._fieldData.areaData[this._currentFeatureIndex],
this._getCalculatorName()))&&[a.data].concat(a.comparisonLevels);return this._calcDataArray},_rendererJsons:null,getRendererJson:function(a){return this._rendererJsons[a]},setRendererJson:function(a,d){this._rendererJsons[a]=d},_layerIndexes:null,getLayerIndex:function(a){return this._layerIndexes[a]},setLayerIndex:function(a,d){this._layerIndexes[a]=d},_mapInfos:null,getMapInfo:function(a){return this._mapInfos[a]},getMapInfos:function(){var a=[],d;for(d in this._mapInfos)a.push(this._mapInfos[d]);
return a},setMapInfo:function(a,d){this._mapInfos[a]=d},_getPointIndexForCellFunc:null,_getCellForPointAtFunc:null,_highlightedCell:null,setLocatorTableCallbacks:function(a){this._getPointIndexForCellFunc=a.getPointIndexForCellFunc;this._getCellForPointAtFunc=a.getCellForPointAtFunc},registerLocatorTable:function(a){var d=this,c;a.set("highlightRowsOnHover",!0);p(a.domNode,"mouseover,mousemove",function(){var b=a.getOverFieldCell();b&&b!==c&&(c=b,d._highlightGraphicForFieldCell(c))});p(a.domNode,
"mouseout",function(){d._highlightGraphicForFieldCell(null);c=null})},_highlightRowForGraphic:function(a,d){this._highlightedCell&&(this._highlightedCell.parentGrid&&this._highlightedCell.parentGrid.setCellRowHighlighted(this._highlightedCell,!1),this._highlightedCell=null);d&&this._getCellForPointAtFunc&&(a=a.getPointIndexForGraphicFunc(d),(a=this._getCellForPointAtFunc(a))&&a.parentGrid&&(a.parentGrid.setCellRowHighlighted(a,!0),this._highlightedCell=a))},_graphicLayerInfos:null,setLocatorPointsLayer:function(a,
d,c,b){this._unSetInfo(a);d={map:c,graphicsLayer:d,getPointIndexForGraphicFunc:b.getPointIndexForGraphicFunc,getGraphicForPointAtFunc:b.getGraphicForPointAtFunc,setGraphicHighlightedFunc:b.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,overGraphic:null};this._graphicLayerInfos[a]=d;this._addLayerListeners(d)},_addLayerListeners:function(a){var d=this,c=a.map,b=a.graphicsLayer;a.layerMouseOverHandle=g.onLayerMouseOver(b,c,function(f){f.graphic&&
f.graphic._graphicsLayer===b&&a.overGraphic!==f.graphic&&((a.layerMouseOutHandle&&a.layerMouseOutHandle.remove(),a.layerMouseOutHandle=null,d._removeHighlight(a),a.overGraphic=f.graphic,d._highlightRowForGraphic(a,a.overGraphic),a.setGraphicHighlightedFunc(a.overGraphic,!0),e.isMobileDevice())?c.infoWindow&&(c.infoWindow.setFeatures([a.overGraphic]),c.infoWindow.show(f.mapPoint,{closestFirst:!0})):a.layerMouseOutHandle=p.once(b,"mouse-out",function(h){d._removeHighlight(a,!0)}))})},_highlightGraphicForFieldCell:function(a){for(var d in this._graphicLayerInfos){var c=
this._graphicLayerInfos[d];this._removeHighlight(c);if(a){var b=this._getPointIndexForCellFunc(a);if(b=c.getGraphicForPointAtFunc(b))c.setGraphicHighlightedFunc(b,!0),c.highlightedGraphic=b}}},_removeHighlight:function(a,d){this._highlightRowForGraphic(a,null);a.highlightedGraphic&&(a.setGraphicHighlightedFunc(a.highlightedGraphic,!1),a.highlightedGraphic=null);a.overGraphic&&a.setGraphicHighlightedFunc(a.overGraphic,!1);a.overGraphic=null;!d&&a.map.infoWindow&&a.map.infoWindow.hide()},setPointVisibleAt:function(a,
d){for(var c in this._graphicLayerInfos){var b=this._graphicLayerInfos[c].getGraphicForPointAtFunc(a);if(b)b[d?"show":"hide"]()}},_unSetInfo:function(a){var d=this._graphicLayerInfos[a];delete this._graphicLayerInfos[a];d&&(d.layerMouseOverHandle&&d.layerMouseOverHandle.remove(),d.layerMouseOutHandle&&d.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaDataUtil":function(){define(["dojo/_base/lang","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../../../_devConfig"],function(t,p,l){var k={getAreaDataValue:function(g){function e(z){!1!==u&&(v=z[u]);void 0===v&&(v=z[d])}function a(){if(m)e(m);else{var z=b[f];z&&e(z.data)}}var d=g.fieldName,c=g.fieldData,b=g.areaDataObject,f=g.calculatorName,h=g.featureIndex,m=g.featureAttributes,n=g.ignoreMetadata,
q=g.isMultiFeature;if(!l.showAreaDataUtilUndefinedData&&d){var r=d.indexOf("."),u=!1;-1!==r&&(u=d.substr(r+1));f||-1===r||(f=d.substr(0,r));h=void 0===h?0:Number(h)||0;if((b=g.areaDataObject||c.areaData[h])||m){var v;q&&f===p.AREA_ATTRIBUTES_CALCULATOR_NAME&&!n&&c&&e(c.metadata);void 0===v&&a();if(f)return v;void 0===v&&!n&&c&&e(c.metadata);if(void 0===v&&!m)for(var w in b)if(e(b[w].data),void 0!==v)break;return v}}},getAreaDataObjectCalculator:function(g,e,a){if(!g)return null;var d=g[e];!d&&a&&
(d=g[e]=k.createCalculator());return d},createCalculator:function(g,e){return{data:g||{},comparisonLevels:e||[]}},combineAreaDataObjectCalculators:function(g,e,a){var d=[],c=[];g.forEach(function(b){if(b=k.getAreaDataObjectCalculator(b,e))d.push(b.data),c=c.concat(b.comparisonLevels)});a&&a.removeDuplicates&&(c=k.removeDuplicacatedCalcData(c));return{thisAreas:d,comparisonLevels:c}},removeDuplicacatedCalcData:function(g){if(!g.length)return g;var e=[],a={},d=Object.keys(g[0]);g.forEach(function(c){var b=
function(f){var h="";d.forEach(function(m){h+=f[m]+";"});return h}(c);a[b]||(a[b]=!0,e.push(c))});return e},setAreaDataValue:function(g,e,a,d,c){c=void 0===c?0:Number(c)||0;k.setAreaDataObjectValue(g,e,a[c],d)},setAreaDataObjectValue:function(g,e,a,d){a&&d&&null!==e&&void 0!==e&&(k.getAreaDataObjectCalculator(a,d,!0).data[g]=e)},mergeAreaData:function(g,e){e.forEach(function(a,d){(d=g[d])&&k.mergeAreaDataObjects(d,a)})},mergeAreaDataObjects:function(g,e){for(var a in g){var d=g[a],c=e[a];c?d.comparisonLevels.length!==
c.comparisonLevels.length?console.log("Error: can't merge calculators with different comparison levels!"):(t.mixin(c.data,d.data),d.comparisonLevels.forEach(function(b,f){t.mixin(c.comparisonLevels[f],b)})):e[a]=d}console.log("AreaDataUtil.js merging area data \x3d\x3e areaData");console.log(e)}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil":function(){define(["esri/dijit/geoenrichment/utils/MaskUtil","./FieldLibrary"],function(t,
p){var l={SCRIPT_PREFIX:"",DEFAULT_SCRIPT_NAME:"Custom",TOTAL_SCRIPT_NAME:"Total",AVG_SCRIPT_NAME:"Average",SCRIPT_PREFIX_RE:/^SCRIPT_/i,FIRST_SYMBOL_IS_NUMBER_RE:/^[0-9]/,DATA_COLLECTIONS_CALCULATOR_NAME:"dataCollectionsCalculator",MAPS_CALCULATOR_NAME:"mapsCalculator",UNITED_MAPS_CALCULATOR_NAME:"unitedMapsCalculator",AREA_ATTRIBUTES_CALCULATOR_NAME:"headers",ENRICHED_DATA_NO_LEVELS:"enrichFieldData_noLevels",SCRIPTS_CALCULATOR_NAME:"scripts",createFieldNameFromSource:function(k,g){if(!k)return"";
var e="";k.isSiteAttribute?e=k.attribute.name:k.isChartAttribute?e=k.id:k.isWebMap?e=k.webMapFieldName||k.fieldName:(k=(k.fullName||k).replace(/_|\.|\s/g,""),g=g||"n",k+="n"===g?"":"_"+g,l.FIRST_SYMBOL_IS_NUMBER_RE.test(k)&&(k="_"+k),e=k.toUpperCase());return l._validateName(e)},createFieldNameFromScript:function(k){k=k.name;l.SCRIPT_PREFIX_RE.test(k)&&(k=k.replace(l.SCRIPT_PREFIX_RE,""));return l._validateName(l.SCRIPT_PREFIX+k.replace(/\.|-/g,""))},_validateName:function(k){return l._checkXMLValidName(l._maskUnicodeInName(k))},
_XML_MASK_NAME_RE:/(_X)(\d\d\d\d)/i,_checkXMLValidName:function(k){return l._XML_MASK_NAME_RE.test(k)?k.replace(l._XML_MASK_NAME_RE,"$1_$2"):k},_XML_UNICODE_RE:/&#x|;/ig,_maskUnicodeInName:function(k){return t.maskWithUnicodeXML(k).replace(l._XML_UNICODE_RE,"")},renderScriptName:function(k){return k.replace(l.SCRIPT_PREFIX_RE,"")},provideQualifiedFieldInfoTemplateName:function(k,g){k&&(k.templateName=g?g+"."+k.name:k.isWebMap?l.AREA_ATTRIBUTES_CALCULATOR_NAME+"."+k.name:k.isSiteAttribute?l.AREA_ATTRIBUTES_CALCULATOR_NAME+
"."+k.name:l.DATA_COLLECTIONS_CALCULATOR_NAME+"."+k.name)},getCalculatorName:function(k){return k&&k.templateName&&k.templateName.substr(0,k.templateName.indexOf("."))},isAreaAttributesFieldInfo:function(k){return l.getCalculatorName(k)===l.AREA_ATTRIBUTES_CALCULATOR_NAME},updateCalculatorName:function(k,g){k&&(k.hasVariable||k.script)&&(k.templateName=g+k.templateName.substr(k.templateName.indexOf(".")))},refreshNameAndTemplateName:function(k){k.statefulName&&k.fullName&&(k.name=l.createFieldNameFromSource(k,
k.statefulName.charAt(0)),k.templateName=k.templateName.substr(0,k.templateName.lastIndexOf(".")+1)+k.name)},getFieldInfoAlias:function(k){return k?k.script?k.script.alias:k.hasVariable||k.isMissing?k.alias:p.getFieldLabel(k.name):null},getTemplateNameParts:function(k){if(!k)return null;var g=k.indexOf(".");return-1===g?{calcName:null,fieldName:k}:{calcName:k.substr(0,g),fieldName:k.substr(g+1)}}};return l})},"esri/dijit/geoenrichment/utils/MaskUtil":function(){define([],function(){function t(p,l){return"string"!==
typeof p?p:String(p).replace(/[^\x20-\x7f]/g,function(k){k=k.charCodeAt(0).toString(16).toUpperCase();return l(k)})}return{maskWithUnicode:function(p){return t(p,function(l){return"\\u000".substr(0,6-l.length)+l})},maskWithUnicodeXML:function(p){return t(p,function(l){return"\x26#x000".substr(0,7-l.length)+l+";"})},removeUnicode:function(p,l){return t(p,function(k){return l||""})},removeXMLMasks:function(p,l){return p.replace(/&#x.*?;/g,l||"")}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary":function(){define(["dojo/string",
"dojo/i18n!esri/nls/jsapi"],function(t,p){var l=p.geoenrichment.dijit.ReportPlayer.FieldInfoLabels;p=p.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;l={_SPECIAL_HEADER_FIELDS_NAME_MAP:{SITE_NAME:"SiteName",STORE_ADDR:"SiteAddr",AREA_DESC2:"SiteDesc",STORE_LAT:"Latitude",STORE_LONG:"Longitude",AREA_ID:"AreaID",AREA_DESC:"AreaDesc",STORE_ID:"StoreID",RING:"Ring",STORE_NAME:"StoreName",GROUPCOUNT:"PointCount"},_ADDITIONAL_HEADER_FIELDS_MAP:{SITENOTE:"SiteNote",SITENOTE2:"SiteNote2",SITENOTE3:"SiteNote3",
SITENOTE4:"SiteNote4",SITENOTE5:"SiteNote5",SITENOTE6:"SiteNote6",SITENOTE7:"SiteNote7",SITENOTE8:"SiteNote8",SITENOTE9:"SiteNote9",SITENOTE10:"SiteNote10",SITENOTES:"SiteNotes",CHART_AREA_NAME:"ChartAreaName",CHART_SERIES_NAME:"ChartSeriesName",CHART_POINT_NAME:"ChartVariableName",CHART_POINT_VALUE:"ChartVariableValue"},_REPORT_VAR_FIELDS_MAP:{REPORTNAME:"Name",REPORTTITLE:"Title",REPORTTITLE2:"Subtitle",CURRPAGE:"Page",COPYRIGHT:"Copyright",TRIALURLTEXT:"TrialUrlText",PHONENUMBER:"PhoneNumber",
PRODUCTURL:"ProductUrl",PRODUCTLABEL:"ProductLabel",SOURCE:"Source",DATASOURCES:"DataSources",DATAVINTAGE:"DataVintage",CURRDATE:"Date",LOCATORSUMMARY:"LocatorSummary",CENSUSYEAR:"CensusYear",CURRENTYEAR:"CurrentYear",FUTUREYEAR:"FutureYear",LATITUDELABEL:"LatitudeLabel",LONGITUDELABEL:"LongitudeLabel",PAGEFORMAT:"PageFormat",BANDFROM0TO1UNIT2:"BandFrom0To1Unit2",RADIUS0UNIT1:"Radius0Unit1",AREADELIMITER:"AreaDelimiter",BANDREGIONFROM0TO1:"BandRegionFrom0To1",ET_AL:"ET_AL",LINEBUFFERSEGMENTFROM0TO1UNIT2RADIUS:"LineBufferSegmentFrom0To1Unit2Radius",
LINEBUFFERRADIUS0UNIT1RADIUS:"LineBufferRadius0Unit1Radius",RINGVALUE0UNIT1RADIUS:"RingValue0Unit1Radius",RINGSVALUES0UNIT1RADII:"RingsValues0Unit1Radii",RINGBUFFERBANDFROM0TO1UNIT2RADIUS:"RingBufferBandFrom0To1Unit2Radius",DRIVETIMEBANDFROM0TO1UNIT2RADIUS:"DriveTimeBandFrom0To1Unit2Radius",RINGBUFFERBANDSBANDS0UNIT1RADII:"RingBufferBandsBands0Unit1Radii",RINGBUFFERBANDRING0UNIT1RADIUS:"RingBufferBandRing0Unit1Radius",DRIVETIMEBANDBAND0UNIT1RADIUS:"DriveTimeBandBand0Unit1Radius",DRIVETIMESRINGS0UNIT1RADII:"DriveTimesRings0Unit1Radii",
DRIVETIMERING0UNIT1RADIUS:"DriveTimeRing0Unit1Radius",DRIVEDISTANCEVALUE0UNIT1RADIUS:"DriveDistanceValue0Unit1Radius",DRIVEDISTANCESRINGS0UNIT1RADII:"DriveDistancesRings0Unit1Radii",DRIVEDISTANCERING0UNIT1RADIUS:"DriveDistanceRing0Unit1Radius"},_SPECIAL_HEADER_FIELDS_NAME_MAP_BACK:{},_ADDITIONAL_HEADER_FIELDS_MAP_BACK:{},_REPORT_VAR_FIELDS_MAP_BACK:{},_PREVIEW:{Title:p.fieldPreviewTitle,Title_graphic:p.fieldPreviewTitleGraphic,Name:p.fieldPreviewTitle,Name_graphic:p.fieldPreviewTitleGraphic,Subtitle:p.fieldPreviewSubtitle,
Date:p.fieldPreviewDate,Page:p.fieldPreviewPage,Count:p.fieldPreviewLocationsCount,Copyright:"\u00a9 "+(new Date).getFullYear()+" Esri",TrialUrlText:p.fieldPreviewTrialUrlText,PhoneNumber:p.fieldPreviewPhoneNumber,ProductUrl:p.fieldPreviewProductUrl,ProductLabel:p.fieldPreviewProductLabel,Source:p.fieldPreviewSource,DataSources:p.fieldPreviewDataSources,DataVintage:p.fieldPreviewDataVintage,SITE_NAME:p.fieldPreviewSiteName,SITE_NAME_multi:p.fieldPreviewSiteNameMulti,STORE_LAT:p.fieldPreviewLat,STORE_LONG:p.fieldPreviewLong,
AREA_DESC2:p.fieldPreviewAreaDesc2,STORE_ADDR:p.fieldPreviewStoreAddr,AREA_DESC:p.fieldPreviewAreaDesc,CHART_AREA_NAME:p.fieldPreview_chartArea,CHART_SERIES_NAME:p.fieldPreview_seriesName,CHART_POINT_NAME:p.fieldPreview_pointName},_LABELS:{CHART_AREA_NAME:l.chartAreaName,CHART_SERIES_NAME:l.chartSeriesName,CHART_POINT_NAME:l.chartPointName,CHART_POINT_VALUE:l.chartPointValue},DATE_FIELD_NAME:"Date",DATE_FIELD_ALIAS:"Date",DATE_FIELD_DEFAULT_FORMAT:"d-MMMM dd, yyyy",GROUPCOUNT_FIELD_NAME:"PointCount",
GROUPCOUNT_FIELD_ALIAS:"PointCount",LOCATORSUMMARY_FIELD_NAME:"LocatorSummary",LOCATORSUMMARY_FIELD_ALIAS:"LocatorSummary",SITENOTES_FIELD_NAME:"SiteNotes",SITENOTES_FIELD_ALIAS:"SiteNotes",init:function(){for(var k in this._SPECIAL_HEADER_FIELDS_NAME_MAP)this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[this._SPECIAL_HEADER_FIELDS_NAME_MAP[k].toUpperCase()]=k;for(k in this._ADDITIONAL_HEADER_FIELDS_MAP)this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[this._ADDITIONAL_HEADER_FIELDS_MAP[k].toUpperCase()]=k;for(k in this._REPORT_VAR_FIELDS_MAP)this._REPORT_VAR_FIELDS_MAP_BACK[this._REPORT_VAR_FIELDS_MAP[k].toUpperCase()]=
k},templateToUIHeader:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP[k]||this._ADDITIONAL_HEADER_FIELDS_MAP[k]},qualifyTemplateHeaderName:function(k){return k&&0!==k.indexOf("headers.")?"headers."+k:k},trimTemplateHeaderName:function(k){if(!k)return k;0===k.indexOf("headers.")&&(k=k.substr(k.indexOf(".")+1));return k},templateToUIReportVar:function(k){k=k&&k.toUpperCase();return this._REPORT_VAR_FIELDS_MAP[k]},uiToTemplate:function(k){k=k&&
k.toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[k]||this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[k]||this._REPORT_VAR_FIELDS_MAP_BACK[k]},getPreview:function(k,g,e){k=this.trimTemplateHeaderName(k);if(!k)return null;!g||"Title"!==k&&"Name"!==k||(k+="_graphic");e&&"SITE_NAME"===k&&(k+="_multi");return"SiteNotes"===k?p.fieldPreviewSiteNotes:0===k.indexOf("SiteNote")?t.substitute(p.fieldPreviewSiteNote,{index:k.replace("SiteNote","")||1}):this._PREVIEW[k]},hasField:function(k){return!!(this.uiToTemplate(k)||
this.templateToUIHeader(k)||this.templateToUIReportVar(k))},isAdditionalHeadersField:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();return this._ADDITIONAL_HEADER_FIELDS_MAP[k]},isChartAttribute:function(k){return this.isAdditionalHeadersField(k)&&-1!==k.toUpperCase().indexOf("CHART_")},getSiteNoteFieldNameAt:function(k){return"SiteNote"+(!k||1>=Number(k)?"":k)},getFieldLabel:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();return this._LABELS[k]},getReportVarSelfTagsMap:function(){return{Page:"currPage",
Title:"reportName",Name:"reportName",Subtitle:"reportTitle2"}},getReportVarTextTagsMap:function(){var k=this.getReportVarSelfTagsMap(),g={},e;for(e in this._REPORT_VAR_FIELDS_MAP){var a=this._REPORT_VAR_FIELDS_MAP[e];k[a]||(g[a]=a)}return g}};l.init();return l})},"esri/dijit/geoenrichment/ReportPlayer/_devConfig":function(){define([],function(){return{logData:!0,showAreaDataUtilUndefinedData:!1,createPlayerCommand:{saveDataJsonAsTextFile:!1,useTestBuild:!1,configUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/config.js",
baseUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release",mainUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/dojo/dojo.js",esriDijitCssUrl:"https://js.arcgis.com/3.31/dijit/themes/claro/claro.css",esriCssUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/reportPlayer.css"},createPDFCommand:{removeUnicodeChars:!1},preview:{bigValues:!1},charts:{enableEffects:!1},
table:{printGridRefresh:!1},emulateErrors:{playerError:!1,contentErrors:!1,themeParseError:!1,metadataParseError:!1,layoutParseError:0,reportContainerRenderError:!1,createReportError:!1,createReportNaN:!1,createReportNull:!1,getMapItemError:!1,emptyDataProviderResponse:!1,emptyTemplateJson:!1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/MapEventUtil":function(){define(["dojo/on","dojo/sniff","esri/dijit/geoenrichment/utils/DeviceUtil"],function(t,p,l){return{onLayerMouseOver:function(k,
g,e){var a=l.isMobileDevice();k=a?k:p("touch")?g:k;a=a?"mouse-over":p("touch")?"mouse-down, mouse-move":"mouse-move";return t(k,a,e)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/std/StdPolygonsController":function(){define("dojo/_base/declare esri/dijit/geoenrichment/Deferred dojo/on esri/dijit/geoenrichment/promise/all dijit/Destroyable ../../MapEventUtil ../../../../comparison/ComparisonUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig".split(" "),function(t,
p,l,k,g,e,a,d){return t(g,{currentFeatureIndex:null,_calculatorName:null,_fieldData:null,_isMultiFeature:null,_hasRegisteredLayers:!1,_hasRegisteredInfographics:!1,constructor:function(c,b,f,h){this._calculatorName=c;this._fieldData=b;this._isMultiFeature=f;this.currentFeatureIndex=h;this._layerIndexes={};this._rendererJsons={};this._labelRendererJsons={};this._mapInfos={};this._graphicLayerInfos={};this._pendingLayerInfos={}},getCalculatorName:function(){return this._calculatorName},_rendererJsons:null,
_labelRendererJsons:null,getRendererJson:function(c){return this._rendererJsons[c]},getLabelRendererJson:function(c){return this._labelRendererJsons[c]},setRendererJson:function(c,b){this._rendererJsons[c]=b},setLabelRendererJson:function(c,b){this._labelRendererJsons[c]=b},_layerIndexes:null,getLayerIndex:function(c,b){var f=d.getGeographiesModel().getLevels(),h=-1;f.some(function(m,n){if(m.id===b)return h=n,!0});return this._layerIndexes[c]+h/f.length},setLayerIndex:function(c,b){this._layerIndexes[c]=
b},_mapInfos:null,getMapInfo:function(c){return this._mapInfos[c]},getMapInfos:function(){var c=[],b;for(b in this._mapInfos)c.push(this._mapInfos[b]);return c},setMapInfo:function(c,b){this._mapInfos[c]=b},_attributeFields:null,getAttributeFields:function(){return this._attributeFields},setAttributeFields:function(c){this._attributeFields=c},_shownFeatureAttributes:null,_featuresChangedHandlers:null,getShownFeatureAttributes:function(){return this._shownFeatureAttributes},setShownFeaturesChangedListener:function(c){var b=
this;this._featuresChangedHandlers=this._featuresChangedHandlers||[];this._featuresChangedHandlers.push(c);return{remove:function(){var f=b._featuresChangedHandlers;if(f){var h=f.indexOf(c);-1!==h&&f.splice(h,1)}}}},setShownFeatureAttributes:function(c){this._shownFeatureAttributes=c||[];this._featuresChangedHandlers&&this._featuresChangedHandlers.forEach(function(b){b()})},_allFeatureAttributes:null,_loadAllFeaturesHandlers:null,getAllFeatureAttributes:function(){return this._allFeatureAttributes||
[]},setAllFeatureAttributes:function(c){this._allFeatureAttributes=c},setLoadAllFeaturesListener:function(c){var b=this;this._loadAllFeaturesHandlers=this._loadAllFeaturesHandlers||[];this._loadAllFeaturesHandlers.push(c);return{remove:function(){var f=b._loadAllFeaturesHandlers;if(f){var h=f.indexOf(c);-1!==h&&f.splice(h,1)}}}},loadAllFeatures:function(){return this._loadAllFeaturesHandlers&&k(this._loadAllFeaturesHandlers.map(function(c){return c()}))},buildGeometryFieldName:function(c){return"__stdGeometry_"+
c},saveGeometryInCalculatorData:function(c,b){a.copyValueToCalculatorData(c,{fieldName:b,fieldData:this._fieldData,isMultiFeature:this._isMultiFeature,currentFeatureIndex:this.currentFeatureIndex,calculatorName:this._calculatorName})},provideGeometryFromCalculatorData:function(c,b){a.copyValueFromCalculatorData(c,{fieldName:b,fieldData:this._fieldData,isMultiFeature:this._isMultiFeature,currentFeatureIndex:this.currentFeatureIndex,calculatorName:this._calculatorName})},_highlightInfographicForAttributesFunc:null,
_registerInfographicDfd:null,registerInfographic:function(c){this._highlightInfographicForAttributesFunc=c.highlightInfographicForAttributes;this._registerInfographicDfd=new p;this._hasRegisteredLayers&&this._registerInfographicDfd.resolve();this._hasRegisteredInfographics||(this._hasRegisteredInfographics=!0,this._doRegisterLayers());return this._registerInfographicDfd.promise},_graphicLayerInfos:null,_pendingLayerInfos:null,setStdPolygonsLayer:function(c,b,f,h){this._unSetInfo(c);this._pendingLayerInfos[c]=
{map:f,graphicsLayer:b,getGraphicForAttributesFunc:h.getGraphicForAttributesFunc,setGraphicHighlightedFunc:h.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null};this._hasRegisteredInfographics&&this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._registerInfographicDfd&&this._registerInfographicDfd.resolve())},_doRegisterLayers:function(){for(var c in this._pendingLayerInfos){var b=this._pendingLayerInfos[c];this._graphicLayerInfos[c]=
b;this._addLayerListeners(b)}this._pendingLayerInfos={}},_addLayerListeners:function(c){var b=this,f=c.graphicsLayer,h;c.layerMouseOverHandle=e.onLayerMouseOver(f,c.map,function(m){m.graphic&&m.graphic._graphicsLayer===f&&h!==m.graphic&&(c.layerMouseOutHandle&&c.layerMouseOutHandle.remove(),c.layerMouseOutHandle=null,h&&c.setGraphicHighlightedFunc(h,!1),h=m.graphic,b._highlightInfographicForAttributesFunc(h.attributes),c.setGraphicHighlightedFunc(h,!0),c.layerMouseOutHandle=l.once(f,"mouse-out",function(n){b._highlightInfographicForAttributesFunc(null);
h&&c.setGraphicHighlightedFunc(h,!1);h=null}))})},highlightGraphicForAttributes:function(c){for(var b in this._graphicLayerInfos){var f=this._graphicLayerInfos[b];f.highlightedGraphic&&(f.setGraphicHighlightedFunc(f.highlightedGraphic,!1),f.highlightedGraphic=null);if(c){var h=f.getGraphicForAttributesFunc(c);h&&(f.setGraphicHighlightedFunc(h,!0),f.highlightedGraphic=h)}}},_unSetInfo:function(c){var b=this._graphicLayerInfos[c];delete this._graphicLayerInfos[c];b&&(b.layerMouseOverHandle&&b.layerMouseOverHandle.remove(),
b.layerMouseOutHandle&&b.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonUtil":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil","../../dataProvider/supportClasses/data/AreaDataUtil","dojo/i18n!esri/nls/jsapi"],function(t,p,l){l=l.geoenrichment.dijit.ReportPlayer.ReportPlayer;
var k={valueFormatFunction:function(g,e){return e&&e.isMissing?l.missingVariable:void 0===g||"string"===typeof g?g:t.formatNumber(g,{places:e.decimals,preserveTrailingZeroes:!0})},copyValueToCalculatorData:function(g,e){var a=k._findAttrsInCalcData(e,g);a&&(a[e.fieldName]=g[e.fieldName])},copyValueFromCalculatorData:function(g,e){var a=k._findAttrsInCalcData(e,g);a&&(g[e.fieldName]=a[e.fieldName])},_findAttrsInCalcData:function(g,e){g=g.isMultiFeature?(g=p.combineAreaDataObjectCalculators(g.fieldData.areaData,
g.calculatorName))&&g.comparisonLevels||[]:(g=p.getAreaDataObjectCalculator(g.fieldData.areaData[g.currentFeatureIndex],g.calculatorName))&&g.comparisonLevels||[];var a;g.some(function(d){if(d.StdGeographyLevel&&d.StdGeographyLevel===e.StdGeographyLevel&&d.StdGeographyID===e.StdGeographyID)return a=d,!0});return a}};return k})},"esri/dijit/geoenrichment/ReportPlayer/countryConfig":function(){define(["./dataProvider/supportClasses/stdGeographies/StdGeographiesModel"],function(t){function p(){if(!k||
!k.hierarchies)return"census";var c=k.hierarchies[0].ID;if(1==k.hierarchies.length)return c;if(k.defaultDatasetID)for(var b in k.hierarchies){var f=k.hierarchies[b];if(f.datasets&&f.datasets.some(function(h){return h==k.defaultDatasetID})){c=f.ID;break}}return c}var l={},k;l.getCurrentCountry=function(){return k};l.getCountryID=function(){return k&&k.id};l.getCurrencySymbol=function(){return k&&k.currencySymbol||"$"};l.getCurrencyFormat=function(){if(k&&k.currencyFormat)return k.currencyFormat;var c=
l.getCurrencySymbol();return c+"0;-"+c+"0"};l.setCountry=function(c){k=c};var g,e;l.getSingleUnits=function(){return g};l.getPluralUnits=function(){return e};l.setSingleAndPluralUnits=function(c,b){g=c;e=b};var a;l.getHierarchyID=function(){return a};l.setHierarchyID=function(c){a=c||p()};var d;l.getGeographiesModel=function(){return d};l.setGeographiesModel=function(c){d=c};l.reset=function(){d=e=g=a=k=null};l.toJson=function(){return{country:{id:l.getCountryID(),currencySymbol:l.getCurrencySymbol(),
currencyFormat:l.getCurrencyFormat()},hierarchy:a,geographiesModel:d&&d.toJson()}};l.fromJson=function(c){c&&(k=c.country,a=c.hierarchy,d=c.geographiesModel&&new t(c.geographiesModel))};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","dojo/on","dijit/Destroyable","../../MapEventUtil"],function(t,p,l,k,g){return t(k,{_hasRegisteredLayers:!1,_hasRegisteredTables:!1,
constructor:function(e){this._graphicLayerInfos={};this._registerTableDfds=[];this._highlightTableForAreaIndexFuncs=[];this._pendingLayerInfos={}},_highlightTableForAreaIndexFuncs:null,_registerTableDfds:null,registerTable:function(e){this._highlightTableForAreaIndexFuncs.push(e.highlightTableForAreaIndex);e=new p;this._registerTableDfds.push(e);this._hasRegisteredLayers&&this._doRegisterTables();this._hasRegisteredTables||(this._hasRegisteredTables=!0,this._doRegisterLayers());return e.promise},
_doRegisterTables:function(){this._registerTableDfds.forEach(function(e){e.resolve()});this._registerTableDfds.length=0},_graphicLayerInfos:null,_pendingLayerInfos:null,setThisAreaLayer:function(e,a,d,c){this._unSetInfo(e);this._pendingLayerInfos[e]={graphicsLayer:a,areaIndex:c.thisAreaIndex,getGraphicForAreaIndexFunc:c.getGraphicForAreaIndexFunc,setGraphicHighlightedFunc:c.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,map:d};this._hasRegisteredTables&&
this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._doRegisterTables())},_doRegisterLayers:function(){for(var e in this._pendingLayerInfos){var a=this._pendingLayerInfos[e];this._graphicLayerInfos[e]=a;this._addLayerListeners(a)}this._pendingLayerInfos={}},_addLayerListeners:function(e){var a=this,d=e.graphicsLayer,c;e.layerMouseOverHandle=g.onLayerMouseOver(d,e.map,function(b){b.graphic&&b.graphic._graphicsLayer===d&&c!==b.graphic&&(e.layerMouseOutHandle&&e.layerMouseOutHandle.remove(),
e.layerMouseOutHandle=null,c&&e.setGraphicHighlightedFunc(c,!1),c=b.graphic,a._highlightTableForAreaIndexFuncs.forEach(function(f){f(e.areaIndex)}),e.setGraphicHighlightedFunc(c,!0),e.layerMouseOutHandle=l.once(d,"mouse-out",function(f){a._highlightTableForAreaIndexFuncs.forEach(function(h){h(null)});c&&e.setGraphicHighlightedFunc(c,!1);c=null}))})},highlightGraphicForAreaIndex:function(e){for(var a in this._graphicLayerInfos){var d=this._graphicLayerInfos[a];d.highlightedGraphic&&(d.setGraphicHighlightedFunc(d.highlightedGraphic,
!1),d.highlightedGraphic=null);var c=d.getGraphicForAreaIndexFunc(e);c&&(d.setGraphicHighlightedFunc(c,!0),d.highlightedGraphic=c)}},_unSetInfo:function(e){var a=this._graphicLayerInfos[e];delete this._graphicLayerInfos[e];a&&(a.layerMouseOverHandle&&a.layerMouseOverHandle.remove(),a.layerMouseOutHandle&&a.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},
"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/EditorUnits":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil","dojo/i18n!esri/nls/jsapi"],function(t,p){p=p.geoenrichment.dijit.ReportPlayer.units;var l={},k=["px","pt","mm","cm","in"],g={px:0,pt:1,mm:1,cm:2,"in":2};l.getSupportedUnits=function(){return k};l.getShortName=function(e){return p.shortNames[e]};l.getLongName=function(e){return p.longNames[e]};l.getLongNameWithUnits=function(e){return p.longNamesWithUnits[e]};l.getPlaces=
function(e){return g[e]||0};l.round=function(e,a){return t.roundNumber(e,l.getPlaces(a))};l.provideUnits=function(e,a){return e.replace("${units}",l.getShortName(a))};return l})},"esri/dijit/geoenrichment/ReportPlayer/DataProviderGE":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when esri/kernel ./dataProvider/_CommandSupport ./dataProvider/_SerializationSupport ./dataProvider/_ServerSerializationSupport ./dataProvider/supportClasses/areas/AnalysisAreaUtil ./dataProvider/supportClasses/areas/AnalysisAreaJsonUtil ./dataProvider/supportClasses/areas/AreasPreprocessor ./dataProvider/supportClasses/CustomReportsManager ./dataProvider/supportClasses/TemplateJsonLoader ./dataProvider/supportClasses/ReportDataProcessor ./dataProvider/supportClasses/GEUtil ./dataProvider/supportClasses/attachments/DefaultAttachmentsStore ./dataProvider/supportClasses/attachments/CustomAttachmentsStore ./dataProvider/supportClasses/data/VariablesUtil ./dataProvider/commands/mapToImage/MapToURLUtil ./core/themes/ThemeLibrary ./core/themes/ReportThemes esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/ProjectionUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u,v,w,z,E,F,D,B,y,A){return t([e,a,d],{analysisAreasLimit:-1,cacheTemplates:!0,printMapTaskUrl:null,resetReportItemsCache:!0,constructor:function(H){p.mixin(this,H)},_getAttachmentsStore:function(H){return(new r(H)).initialize()},_currentContext:null,getReportData:function(H,G){var I=this,L=G&&G.progressCallback||function(){},N=p.mixin({},H);N.portalUrl=A.getPortalUrl(N.portalUrl);F.isPlayerOnServer||A.setArcgisUrl(N.portalUrl);c.parseSites(N);D.reset();N.hierarchy||
N.analysisAreas.some(function(O){if(O.geographies&&O.geographies[0].hierarchy)return N.hierarchy=O.geographies[0].hierarchy,!0});I.resetReportItemsCache&&h.resetCache();I._currentContext=N;N.analysisAreas=b.areasFromJson(N.analysisAreas);N.combinedAreasInfo=N.combinedAreasInfo&&b.combinedAreasInfoFromJson(N.combinedAreasInfo)||{};c.populateCombinedAreasInfo(N.combinedAreasInfo,N.analysisAreas);N.fieldData={specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],
reportInfo:null};return l([k(h.tryFindReportIdByAlias(N),function(O){N.reportID=O||N.reportID}),this._discoverPortal(N),function(){return N.variables&&k(v.preprocessVariables(N.variables,N.portalUrl),function(O){N.variables=O})}()]).then(function(){return k(f.preprocessAreas(N,{analysisAreasLimit:I.analysisAreasLimit}),function(){L(.25);setTimeout(function(){I._onCreateReportStarted()});var O=N.attachmentsProvider?u(N.attachmentsProvider):I._getAttachmentsStore(N.analysisAreas),S={initGE:q.initialize(),
countryInfo:q.getCountryInfo(N.countryID),attachmentsStore:O};N.reportID?(S.reportObject=h.getCustomReportByID(N),S.templateJsonInfo=m.getTemplateJsonByID(N,I.cacheTemplates),S.runReportResult=n.runReportAndGetData(N,O)):N.variables&&(S.reportObject=h.getFakeCustomReportByContext(N),S.templateJsonInfo=m.createTemplateJsonFromVariables(N),S.runReportResult=n.runReportFromVariables(N));return l(S).then(function(R){var U=R.reportObject,Z=R.attachmentsStore,ca=R.templateJsonInfo.templateJson,Y=R.templateJsonInfo.templateVariableProvider,
da=R.runReportResult;L(.75);if(!ca||!U||!N.fieldData)return null;D.setCountry(R.countryInfo.country);D.setHierarchyID(N.hierarchy);D.setGeographiesModel(R.countryInfo.geographiesModels[D.getHierarchyID()]);ca.theme||(ca.theme=z.getReportThemeById(U.isGraphicReport?E.GRAPHIC:E.CLASSIC));var Q={isMultiFeature:U.isMultiFeature&&1<N.analysisAreas.length,reportTitle:N.reportTitle||U.title,templateJson:ca,reportObject:U,fieldData:N.fieldData,analysisAreas:N.analysisAreas,combinedAreasInfo:N.combinedAreasInfo,
reverseAnalysisAreasOnMap:N.reverseAnalysisAreasOnMap,attachmentsStore:Z,geClient:q.getClient(),templateVariableProvider:Y,customLogo:N.customLogo,config:{portalUrl:N.portalUrl,geoenrichmentUrl:N.geoenrichmentUrl,geometryServiceUrl:N.geometryServiceUrl,printMapTaskUrl:N.printMapTaskUrl,countryID:N.countryID,hierarchy:N.hierarchy,reportID:N.reportID,variables:N.variables}};return k(n.applyRunReportAndGetDataResults(da,Q),function(){L(1);return Q})})})})},_discoverPortal:function(H){return y.getPortalSelf(H.portalUrl).then(function(G){H.geoenrichmentUrl=
H.geoenrichmentUrl||G.helperServices.geoenrichment.url;var I=g.id.findCredential(H.portalUrl);q.setGeoenrichmentUrl(H.geoenrichmentUrl,I&&I.token);H.geometryServiceUrl=H.geometryServiceUrl||G.helperServices.geometry.url;B.setGeometryServiceUrl(H.geometryServiceUrl);H.printMapTaskUrl=H.printMapTaskUrl||G.helperServices.printTask.url;w.setPrintMapTaskUrl(H.printMapTaskUrl)})},reportDataToSingleAreaReportData:function(H,G){var I=G.currentFeatureIndex||0,L=p.mixin({},H.fieldData);L.areaData=[L.areaData[I]];
var N=[p.mixin({},H.analysisAreas[I])];f.removeGroupInfo(N);var O=H.attachmentsStore;return{isMultiFeature:!1,reportTitle:G.reportTitle,templateJson:G.templateJson,reportObject:H.reportObject,fieldData:L,analysisAreas:N,combinedAreasInfo:null,reverseAnalysisAreasOnMap:!1,attachmentsStore:O&&{getImages:function(){O.supportsMultipleAreas&&O.setCurrentAnalysisAreaIndex(I);return O.getImages()},getAttributes:function(){O.supportsMultipleAreas&&O.setCurrentAnalysisAreaIndex(I);return O.getAttributes()},
getNotes:function(){O.supportsMultipleAreas&&O.setCurrentAnalysisAreaIndex(I);return O.getNotes()}},geClient:H.geClient,templateVariableProvider:H.templateVariableProvider,config:H.config}},_getCurrentContext:function(){return this._currentContext},_onCreateReportStarted:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_CommandSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ../PlayerCommands ./supportClasses/GEUtil esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(t,p,l,k,g,e,a,d){var c={};return p(null,{_commands:null,_commandIndex:0,_initCommandsPromise:null,constructor:function(){this._commands={}},_initCommands:function(){var b=this;if(this._initCommandsPromise)return g(this._initCommandsPromise);var f=new k;if(d.modules.exportCommands)t(["./commands/CreateHTMLCommand","./commands/CreatePDFCommand","./commands/CreateImageCommand","./commands/PrintReportCommand","./commands/CreatePlayerCommand"],function(h,m,n,q,r){c[e.HTML]=h;c[e.PDF]=m;c[e.IMAGE]=
n;c[e.PRINT]=q;c[e.DYNAMIC_HTML]=r;a.getInitPromise().then(f.resolve)});else return f.resolve();f.promise.then(function(){b._initCommandsPromise=!0});return this._initCommandsPromise=f.promise},registerCommand:function(b,f,h){function m(q){if(!q.isBrowserSupported||q.isBrowserSupported())n._commands[b]||(n._commands[b]={index:n._commandIndex++,id:b,label:f||q.label,command:q})}var n=this;if(h)m(h);else return this._initCommands().then(function(){var q=c[b];q&&m(new q)})},getCommands:function(){return this._initCommands().then(function(){var b=
[],f=this._commands[e.PDF],h;for(h in this._commands)b.push(this._commands[h]);b.sort(function(m,n){return m.index-n.index});return(h=this._getCurrentContext())&&h.geoenrichmentUrl&&f?g(a.hasCapability("FormatInfographics"),function(m){m||(b=b.filter(function(n){return n!==f}));return b}):g(b)}.bind(this))},getCommandById:function(b){return this._commands[b]&&this._commands[b].command},executeCommand:function(b,f,h,m){return this._initCommands().then(function(){h=l.mixin({printMapTaskUrl:this.printMapTaskUrl},
h);return this._commands[b]&&this._commands[b].command&&this._commands[b].command.execute(f,h||{},m)}.bind(this))},executeCommandOnData:function(b,f,h,m){return this._initCommands().then(function(){h=l.mixin({printMapTaskUrl:this.printMapTaskUrl},h);return this._commands[b]&&this._commands[b].command&&this._commands[b].command.executeOnData(this,f,h||{},m)}.bind(this))}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_SerializationSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AnalysisAreaUtil ../core/infographics/InfographicTypes ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n){function q(){var F=new k;t("./supportClasses/attachments/AttachmentsStoreSerializer ./supportClasses/GEUtil ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../core/infographics/utils/InfographicJsonUtil ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/infographics/InfographicTypes ./commands/mapToImage/MapToURLUtil esri/dijit/geoenrichment/utils/ProjectionUtil".split(" "),
function(D,B,y,A,H,G,I,L,N){r=D;u=B;v=y;w=G;d=I;z=L;E=N;F.resolve()});return F.promise}var r,u,v,w,z,E;return p(null,{reportDataToJson:function(F,D){var B=this;D=D||{};var y=!1;c.processTemplateFieldInfos(F.templateJson,function(A){A.isInfographic&&A.infographicJson.type===d.ATTACHMENTS&&(y=!0)});return q().then(function(){return g(F.attachmentsStore&&r.getAttachmentsStoreJson(F.attachmentsStore,{numAreas:F.analysisAreas.length,saveImages:y}),function(A){var H=l.mixin({},F.config);!1!==D.forceFixedDataMode&&
delete H.geoenrichmentUrl;A={jsapiVersion:m.jsapiVersion,isMultiFeature:F.isMultiFeature,reportTitle:F.reportTitle,templateJson:v.serialize(F.templateJson),reportObject:B._prepareReportObjectJson(F.reportObject),fieldData:F.fieldData,analysisAreas:e.areasToJson(F.analysisAreas),combinedAreasInfo:F.combinedAreasInfo&&e.combinedAreasInfoToJson(F.combinedAreasInfo),reverseAnalysisAreasOnMap:F.reverseAnalysisAreasOnMap,attachmentsStore:A,templateVariableProvider:F.templateVariableProvider&&F.templateVariableProvider.toJson(),
config:H,countryConfig:b.toJson(),mapImageInfos:D.mapImageInfos,loadedMapPortalItems:D.loadedMapPortalItems,customLogo:F.customLogo};n.logData&&(console.log("_SerializationSupport.js \x3d\x3e reportDataJson"),console.log(A));return A})})},_prepareReportObjectJson:function(F){var D={},B;for(B in F)F[B]&&"object"!==typeof F[B]&&(D[B]=F[B]);return D},reportDataFromJson:function(F){return q().then(function(){var D=F.fieldData;D.featureData&&(D.areaData=D.featureData.map(function(y){return{mainCalculator:{data:y}}}),
delete D.featureData);var B={isMultiFeature:F.isMultiFeature,reportTitle:F.reportTitle,templateJson:v.deserialize(F.templateJson),reportObject:F.reportObject,fieldData:D,analysisAreas:e.areasFromJson(F.analysisAreas),combinedAreasInfo:F.combinedAreasInfo&&e.combinedAreasInfoFromJson(F.combinedAreasInfo)||{},reverseAnalysisAreasOnMap:F.reverseAnalysisAreasOnMap,attachmentsStore:F.attachmentsStore&&r.getAttachmentsStoreFromJson(F.attachmentsStore),templateVariableProvider:F.templateVariableProvider&&
new w(F.templateVariableProvider),config:F.config||{},mapImageInfos:F.mapImageInfos,loadedMapPortalItems:F.loadedMapPortalItems,customLogo:F.customLogo};a.populateCombinedAreasInfo(B.combinedAreasInfo,B.analysisAreas);u.setGeoenrichmentUrl(null);D=!1;B.config.portalUrl&&h.setArcgisUrl(h.getPortalUrl(B.config.portalUrl));B.config.geometryServiceUrl?E.setGeometryServiceUrl(B.config.geometryServiceUrl):D=!0;B.config.printMapTaskUrl?z.setPrintMapTaskUrl(B.config.printMapTaskUrl):D=!0;b.fromJson(F.countryConfig);
return g(D&&f.tryConfigureServicesFromAGOLPublic()).then(function(){return B})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaJsonUtil":function(){define(["esri/graphic","esri/dijit/PopupTemplate"],function(t,p){function l(e,a){if(!e)return null;e.getLayer()&&(e=new t(e.geometry,e.symbol,e.attributes,e.infoTemplate));e=e.toJson();a&&delete e.infoTemplate;return e}function k(e){if(!e)return null;if(e instanceof t)return e;var a=e.infoTemplate&&new p(e.infoTemplate);
delete e.infoTemplate;e=new t(e);a&&e.setInfoTemplate(a);return e}function g(e){var a={},d;for(d in e){var c=e[d];if("string"===typeof c||"number"===typeof c&&!isNaN(c))a[d]=c}return a}return{areasToJson:function(e,a){var d=a&&a.excludeInfoTemplate;return e.map(function(c){var b=g(c);b.feature=l(c.feature,d);b.location=c.location&&l(c.location,d);b.additionalFeatures=c.additionalFeatures&&c.additionalFeatures.map(function(f){return l(f,d)});b.geographies=c.geographies;b.buffer=c.buffer;b.featureServiceQueryInfos=
c.featureServiceQueryInfos;b.dynamicAttributes=c.dynamicAttributes;return b})},combinedAreasInfoToJson:function(e){var a=g(e);a.groups=e.groups&&e.groups.map(function(d){var c=g(d);c.indexes=d.indexes.slice();c.location=d.location&&l(d.location);c.additionalFeatures=d.additionalFeatures&&d.additionalFeatures.map(l);return c});return a},areasFromJson:function(e){return e.map(function(a){var d=g(a);d.feature=k(a.feature);d.location=a.location&&k(a.location);d.additionalFeatures=a.additionalFeatures&&
a.additionalFeatures.map(k);d.geographies=a.geographies;d.buffer=a.buffer;d.featureServiceQueryInfos=a.featureServiceQueryInfos;d.dynamicAttributes=a.dynamicAttributes;return d})},combinedAreasInfoFromJson:function(e){var a=g(e);a.groups=e.groups&&e.groups.map(function(d){var c=g(d);c.indexes=d.indexes.slice();c.location=d.location&&k(d.location);c.additionalFeatures=d.additionalFeatures&&d.additionalFeatures.map(k);return c});return a}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicTypes":function(){define(["dojo/_base/lang"],
function(t){var p={STATIC:"static",ATTACHMENTS:"attachments",AREA_DETAILS:"areaDetails",INTERESTING_FACTS:"interestingFacts",LOCATOR_TABLE:"locatorTable",COMPARISON_TABLE:"comparisonTable"},l={AGE_PYRAMID:"AgePyramid",ONE_VAR:"OneVar",RELATED_VARS:"RelatedVariables",TAPESTRY:"Tapestry",PRIZM5:"Prizm5"},k={},g;for(g in l)k[l[g]]=!0;t.mixin(p,l);var e={};for(g in p)e[p[g]]=!0;p.isDynamic=function(a){return k[a]};p.isSupported=function(a){return e[a]};p.isTableLike=function(a){return a===p.AREA_DETAILS||
a===p.LOCATOR_TABLE||a===p.COMPARISON_TABLE};p.fixTapestryNameToWidget=function(a){return"TapestryNEW"===a?"Tapestry":a};p.fixTapestryNameToData=function(a){return"Tapestry"===a?"TapestryNEW":a};p.supportsMultiFeature=function(a){return a===p.COMPARISON_TABLE||a===p.LOCATOR_TABLE||a===p.ATTACHMENTS||a===p.AREA_DETAILS};p.supportsComparison=function(a){return a===p.ONE_VAR||a===p.AGE_PYRAMID||a===p.RELATED_VARS||a===p.COMPARISON_TABLE};p.isDynamicWithFiltering=function(a){return a===p.ONE_VAR||a===
p.AGE_PYRAMID||a===p.RELATED_VARS};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil":function(){define(["./_SectionJsonCollector","../../../infographics/InfographicTypes"],function(t,p){var l={},k={process:function(g,e,a,d,c){var b=d;d=function(f,h,m){f&&b.apply(this,arguments)};c={processLevel:e,objJson:a,processFunc:d,ignoreComparisonCalculators:c&&c.ignoreComparisonCalculators};g!==e||"field"===g&&"field"===e?"document"===g?k._processTemplateJson(a,
c):"section"===g?k._processSectionJson(a,c):"table"===g?k._processTableJson(a,c,null):"tableRow"===g?k._processTableDataObj(a,c,null):"field"===g&&k._processFieldInfo(a,c,null):d(a)},_processTemplateJson:function(g,e){g.sectionsTables?g.sectionsTables.forEach(function(a){k._processTableJson(a,e)}):t.collectSectionJsons(g,{saveParentInfo:!1,processFieldInfoFunc:function(a){"field"===e.processLevel&&e.processFunc(a)}}).forEach(function(a){k._processSectionJson(a,e)})},_processSectionJson:function(g,
e){"section"===e.processLevel&&e.processFunc(g);g.stack&&g.stack.forEach(function(a){"sectionElement"===e.processLevel&&e.processFunc(a);"table"===a.id&&k._processTableJson(a,e)})},_processTableJson:function(g,e,a){"table"===e.processLevel&&e.processFunc(g);g.rows.forEach(function(d){"tableRow"===e.processLevel&&e.processFunc(d,a);k._processTableDataObj(d,e,a)});g.backgroundSectionJson&&k._processSectionJson(g.backgroundSectionJson,e);g.foregroundSectionJson&&k._processSectionJson(g.foregroundSectionJson,
e);g.backgroundFloatingTablesSectionJson&&k._processSectionJson(g.backgroundFloatingTablesSectionJson,e);g.foregroundFloatingTablesSectionJson&&k._processSectionJson(g.foregroundFloatingTablesSectionJson,e)},_processTableDataObj:function(g,e,a){if(g.fieldInfos)for(var d in g.fieldInfos)k._processFieldInfo(g.fieldInfos[d],e,a,"tableCell")},_processFieldInfo:function(g,e,a,d){if(g){"field"!==e.processLevel||e.skipVariables&&(g.hasVariable||g.script)||e.processFunc(g,a,d);g.triggerJson&&g.triggerJson.fieldInfo&&
g.templateName!==g.triggerJson.fieldInfo.templateName&&k._processFieldInfo(g.triggerJson.fieldInfo,e,g,"trigger");g.dataDrillingPanelInfo&&k._processSectionJson(g.dataDrillingPanelInfo.sectionJson,e);g.tooltipInfo&&g.tooltipInfo.fieldInfo&&k._processFieldInfo(g.tooltipInfo.fieldInfo,e,g,"fieldTooltip");g.linkFieldInfo&&k._processFieldInfo(g.linkFieldInfo,e,g,"linkFieldInfo");if(g.isRichText){for(var c in g.richTextJson.fieldInfos)a=g.richTextJson.fieldInfos[c],k._processFieldInfo(a,e,g,"richTextPart");
for(c in g.richTextJson.linkFieldInfos)a=g.richTextJson.linkFieldInfos[c],k._processFieldInfo(a,e,g,"richTextPart")}g.isInfographic&&k._processInfographicFieldInfo(g,e);g.isChart&&k._processChartFieldInfo(g,e);g.isReportSection&&g.sectionJson&&k._processSectionJson(g.sectionJson,e)}},_processInfographicFieldInfo:function(g,e){var a=g.infographicJson;switch(a.type){case p.STATIC:a.header&&k._processTableJson(a.header,e,g);a.variableTables&&a.variableTables.forEach(function(b){b.variable&&k._processFieldInfo(b.variable.fieldInfo,
e,g,"staticInfographicVariable");b.description&&b.description.fieldInfo&&k._processFieldInfo(b.description.fieldInfo,e,g,"staticInfographicDescription")});if(a.dataDrilling)for(var d in a.dataDrilling){var c=a.dataDrilling[d];c&&c.sectionJson&&k._processSectionJson(c.sectionJson,e)}break;case p.AGE_PYRAMID:case p.TAPESTRY:case p.PRIZM5:case p.RELATED_VARS:case p.ONE_VAR:!e.ignoreComparisonCalculators&&a.fieldInfos&&a.fieldInfos.forEach(function(b){k._processFieldInfo(b,e,g,"dynamicInfographicVariable")});
break;case p.AREA_DETAILS:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,e,g);a.attributesSectionJson&&k._processSectionJson(a.attributesSectionJson,e,g);a.notesSectionJson&&k._processSectionJson(a.notesSectionJson,e,g);break;case p.LOCATOR_TABLE:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,e);k._processSectionJson(a.headerSectionJson,e);k._processSectionJson(a.dataSectionJson,e);a.summarySectionJson&&k._processSectionJson(a.summarySectionJson,e);a.summaryFooterSectionJson&&
k._processSectionJson(a.summaryFooterSectionJson,e);a.summarizeFractionField&&"object"===typeof a.summarizeFractionField&&k._processFieldInfo(a.summarizeFractionField,e,g,"locatorFractionFieldInfo");break;case p.COMPARISON_TABLE:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,e),e.ignoreComparisonCalculators||k._processSectionJson(a.dataSectionJson,e)}},_processChartFieldInfo:function(g,e){var a=g.chartJson.visualProperties;a.chartIcons&&a.chartIcons.forEach(function(d){k._processFieldInfo(d,
e,g,"chartIcon")});a.floatingIcons&&a.floatingIcons.forEach(function(d){k._processTableJson(d,e,g,"floatingIcon")});a.floatingTexts&&a.floatingTexts.forEach(function(d){k._processTableJson(d,e,g,"floatingText")});e.ignoreComparisonCalculators&&g.chartJson.comparisonInfo&&(e=Object.assign({},e),e.skipVariables=!0);a.tooltip&&a.tooltip.fieldInfo&&k._processFieldInfo(a.tooltip.fieldInfo,e,g,"chartTooltip");g.chartJson.dataDrillingPanelInfo&&k._processSectionJson(g.chartJson.dataDrillingPanelInfo.sectionJson,
e);g.chartJson.seriesItems.forEach(function(d){d.points.forEach(function(c){k._processFieldInfo(c.fieldInfo,e,g,"chartPointField");c.iconFieldInfo&&k._processFieldInfo(c.iconFieldInfo,e,g,"chartPointIcon");c.captionFieldInfo&&k._processFieldInfo(c.captionFieldInfo,e,g,"chartPointCaption")})})}};l.DOCUMENT="document";l.SECTION="section";l.TABLE="table";l.SECTION_ELEMENT="sectionElement";l.TABLE_ROW="tableRow";l.FIELD="field";l.process=k.process;l.processTemplateFieldInfos=function(g,e,a){k.process("document",
"field",g,e,a)};l.processSectionFieldInfos=function(g,e,a){k.process("section","field",g,e,a)};l.processSectionElements=function(g,e){k.process("document","sectionElement",g,e)};l.processTableFieldInfos=function(g,e,a){k.process("table","field",g,e,a)};l.processChartFieldInfos=function(g,e){g.seriesItems.forEach(function(c){c.points.forEach(function(b){b.fieldInfo&&e(b.fieldInfo,"series")})});var a=g.visualProperties.tooltip;if(a&&a.fieldInfo&&a.fieldInfo.isRichText){for(var d in a.fieldInfo.richTextJson.fieldInfos)e(a.fieldInfo.richTextJson.fieldInfos[d],
"tooltip");for(d in a.fieldInfo.richTextJson.linkFieldInfos)e(a.fieldInfo.richTextJson.linkFieldInfos[d],"tooltip")}g.dataDrillingPanelInfo&&l.processSectionFieldInfos(g.dataDrillingPanelInfo.sectionJson,function(c){e(c,"dataDrilling")})};l.processDataDrillingPanelInfos=function(g,e){l.processTemplateFieldInfos(g,function(a){if(a.isInfographic&&a.infographicJson.dataDrilling)for(var d in a.infographicJson.dataDrilling){var c=a.infographicJson.dataDrilling[d];c&&e(c)}else a.isChart&&a.chartJson.dataDrillingPanelInfo?
e(a.chartJson.dataDrillingPanelInfo):a.dataDrillingPanelInfo&&e(a.dataDrillingPanelInfo)})};l.hasMultiFeatureChart=function(g){var e=!1;l.processTemplateFieldInfos(g,function(a){a.isChart&&(e=e||a.chartJson&&!!a.chartJson.isMultiFeatureChart)});return e};l.hasComparisonInfographicTable=function(g){var e=!1;l.processTemplateFieldInfos(g,function(a){a.isInfographic&&(e=e||a.infographicJson&&a.infographicJson.type===p.COMPARISON_TABLE)});return e};l.isGraphicReport=function(g){return!!g.sectionsTables};
l.hasDynamicColumns=function(g){return l._checkTableAttributes(g,function(e){return 0<e.dynamicColumns})};l.hasDynamicRows=function(g){return l._checkTableAttributes(g,function(e){return 0<e.dynamicRows})};l._checkTableAttributes=function(g,e){var a;l.isGraphicReport(g)?l.processTemplateFieldInfos(g,function(d){d.isReportSection&&d.sectionJson&&d.sectionJson.stack&&d.sectionJson.stack.some(function(c){if("table"===c.id&&c.attributes&&e(c.attributes))return a=!0})}):a=l.collectSectionJsons(g).some(function(d){return d.stack&&
d.stack.some(function(c){return"table"===c.id&&c.attributes&&e(c.attributes)})});return a};l.hasMultiFeatureSections=function(g){return l.isGraphicReport(g)?l.hasMultiFeatureChart(g)||l.hasDynamicColumns(g)||l.hasComparisonInfographicTable(g):!1};l.calcNumberOfMaps=function(g,e){var a=0;l.collectSectionJsons(g).forEach(function(d){a+=l.calcNumberOfMapsInSectionJson(d,e)});return a};l.calcNumberOfMapsInSectionJson=function(g,e){var a=0;g.stack&&g.stack.forEach(function(d){"map"===d.id&&(e&&e(d),a++)});
l.processSectionFieldInfos(g,function(d){d.isMap&&(e&&e(d.mapJson),a++)});return a};l.calcNumberOfMapsInTableJson=function(g,e){var a=0;l.processTableFieldInfos(g,function(d){d.isReportSection&&(a+=l.calcNumberOfMapsInSectionJson(d.sectionJson,e))});return a};l.collectSectionJsons=t.collectSectionJsons;l.getParentBox=t.getParentBox;l.setParentBox=t.setParentBox;l.getParentStyle=t.getParentStyle;return l})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/_SectionJsonCollector":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/MathUtil","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil","../../tableJson/TableJsonUtil"],function(t,p,l,k){var g={},e={provideParentInfo:function(c,b,f,h,m,n){a.collectStatistics(b);a:{switch(m){case "floating":var q=b.style.left+n.left;break a;case "page":q=a.calcX(b,f,h)+n.left;break a}q=void 0}a:{switch(m){case "floating":m=b.style.top+n.top;break a;case "page":m=a.calcY(b,f,h)+n.top;break a}m=void 0}c._parentBox={x:q,y:m,w:a.calcFullWidth(b,
f,h),h:a.calcFullHeight(b,f,h)};b=h.field;f.style.fields=f.style.fields||{};f=(f.style.fields[b]=f.style.fields[b]||{}).backgroundColor;c._parentStyle={backgroundColor:f}},sanitize:function(c){a.sanitize(c)}},a={collectStatistics:function(c){if(!c._measureInfo){var b={},f={},h;c.columns.forEach(function(w){h&&(f[h.field]=w);h=w;b[w.field]=w});var m={},n={},q={},r={},u={},v={};c.rows.forEach(function(w,z){c.columns.forEach(function(E,F){var D=u[F]||0,B=v[z]||0,y=a._getDataHeight(w,E.field);E=a._getFieldWidth(w,
E);D+=y;B+=E;u[F]=D;v[z]=B;y=F+"_"+z;n[y]=D;m[y]=B;q[y]=m[F-1+"_"+z]||0;r[y]=n[F+"_"+(z-1)]||0})});c._measureInfo={xPositions:q,yPositions:r,columnsHash:b,nextColumnHash:f}}},calcX:function(c,b,f){f=c.columns.indexOf(f);b=c.rows.indexOf(b);return c._measureInfo.xPositions[f+"_"+b]||0},calcY:function(c,b,f){f=c.columns.indexOf(f);b=c.rows.indexOf(b);return c._measureInfo.yPositions[f+"_"+b]||0},calcFullWidth:function(c,b,f){f=f.field;var h=a._getFieldWidth(b,c._measureInfo.columnsHash[f]),m=b.columnSpans&&
b.columnSpans[f]||1;if(1<m)for(var n,q=0;q<m-1;q++)n=c._measureInfo.nextColumnHash[n?n.field:f],h+=a._getFieldWidth(b,n);return h},_getFieldWidth:function(c,b){c.style.fields=c.style.fields||{};return(c.style.fields[b.field]=c.style.fields[b.field]||{}).width||b.style.width},calcFullHeight:function(c,b,f){f=f.field;var h=c.rows.indexOf(b),m=a._getDataHeight(b,f);b=b.rowSpans&&b.rowSpans[f]||1;if(1<b)for(var n=h+1,q=0;q<b-1;q++)h=c.rows[n++],m+=a._getDataHeight(h,f);return m},_getDataHeight:function(c,
b){c.style.fields=c.style.fields||{};return(c.style.fields[b]=c.style.fields[b]||{}).height||c.style.height},sanitize:function(c){delete c._measureInfo}},d={getIntersectingTableJsonsBehind:function(c,b,f,h,m){function n(v){var w=v.rows[0].fieldInfos[v.columns[0].field];return l.isTextLikeCell(w)||l.isShapeCell(w)||l.isImageCell(w)?p.checkRectsIntersect([f,{x:v.style.left+b.left,y:v.style.top+b.top,w:k.getTableWidth(v),h:k.getTableHeight(v)}]):!1}function q(v){return p.checkRectsIntersect([f,{x:v.style.left+
b.left,y:v.style.top+b.top,w:v.style.width,h:v.style.height}])}var r=[],u=[];c.backgroundFloatingTablesSectionJson&&c.backgroundFloatingTablesSectionJson.stack.forEach(function(v,w){if(-1===h||m||h!==w)if("table"===v.id&&n(v)||"img"===v.id&&q(v))-1===h||m||h>w?r.push(v):u.push(v)});c.foregroundFloatingTablesSectionJson&&c.foregroundFloatingTablesSectionJson.stack.forEach(function(v,w){if(m&&h===w)return!0;if("table"===v.id&&n(v)||"img"===v.id&&q(v))m&&h>w?r.push(v):u.push(v)});return{elementJsonsBehind:r,
elementJsonsAbove:u}}};g.collectSectionJsons=function(c,b){b=b||{};var f=[];if(!c)return[];if(c.sections)return c.sections;if(!c.sectionsTables)return[];b.processSectionJson=b.processSectionJson||function(){};c.sectionsTables.forEach(function(h,m){var n={addBackground:function(){!1!==b.backgroundForeground&&h.backgroundSectionJson&&h.backgroundSectionJson.stack&&f.push(h.backgroundSectionJson)},addBackgroundTables:function(q){var r=[];!1!==b.floatingTables&&h.backgroundFloatingTablesSectionJson&&
h.backgroundFloatingTablesSectionJson.stack.forEach(function(u,v){"table"===u.id&&g._processTableJson(u,r,"floating",c.documentOptions,b,h,v,!1)});q&&r.reverse();r.forEach(function(u){b.processSectionJson(u,{pageIndex:m,source:"foreground",floatingIndex:u.__floatingIndex});delete u.__floatingIndex});f=f.concat(r)},addInGridSections:function(){var q=[];g._processTableJson(h,q,"page",c.documentOptions,b,h);q.forEach(function(r){b.processSectionJson(r,{pageIndex:m,source:"grid",index:r.__inGridIndex});
delete r.__inGridIndex});f=f.concat(q)},addForegroundTables:function(q){var r=[];!1!==b.floatingTables&&h.foregroundFloatingTablesSectionJson&&h.foregroundFloatingTablesSectionJson.stack.forEach(function(u,v){"table"===u.id&&g._processTableJson(u,r,"floating",c.documentOptions,b,h,v,!0)});q&&r.reverse();r.forEach(function(u){b.processSectionJson(u,{pageIndex:m,source:"foreground",floatingIndex:u.__floatingIndex});delete u.__floatingIndex});f=f.concat(r)},addForeground:function(){!1!==b.backgroundForeground&&
h.foregroundSectionJson&&h.foregroundSectionJson.stack&&f.push(h.foregroundSectionJson)}};b.topFirst?(n.addForeground(),n.addForegroundTables(!0),n.addInGridSections(),n.addBackgroundTables(!0),n.addBackground()):(n.addBackground(),n.addBackgroundTables(),n.addInGridSections(),n.addForegroundTables(),n.addForeground())});return f};g._processTableJson=function(c,b,f,h,m,n,q,r){c.rows.forEach(function(u,v){u.fieldInfos&&c.columns.forEach(function(w,z){var E=u.fieldInfos[w.field];if(E&&E.sectionJson&&
E.sectionJson.stack){m.processFieldInfoFunc&&m.processFieldInfoFunc(E);(!1!==m.saveParentInfo||m.populateWithFloatingElementsBehind)&&e.provideParentInfo(E.sectionJson,c,u,w,f,h);if(m.populateWithFloatingElementsBehind){var F=t.clone(E.sectionJson),D;"page"===f?D=d.getIntersectingTableJsonsBehind(n,h,F._parentBox,-1,void 0):"floating"===f&&(D=d.getIntersectingTableJsonsBehind(n,h,F._parentBox,q,r));E=function(B){B=t.clone(B);B.isContextFloatingElement=!0;B.style.left=B.style.left+h.left-F._parentBox.x;
if("table"===B.id)B.style.top=B.style.top+h.top-F._parentBox.y;else if("img"===B.id||"map"===B.id)B.style.top=B.style.top+h.top-F._parentBox.y;return B};w=D.elementJsonsBehind.map(E);D=D.elementJsonsAbove.map(E);F.stack=w.concat(F.stack);F.stack=F.stack.concat(D);b.push(F)}else b.push(E.sectionJson);D=b[b.length-1];"page"===f?D.__inGridIndex=v*c.columns.length+z:D.__floatingIndex=q}})});e.sanitize(c)};g.getParentBox=function(c){return c&&c._parentBox};g.setParentBox=function(c,b){c._parentBox=b};
g.getParentStyle=function(c){return c&&c._parentStyle};return g})},"esri/dijit/geoenrichment/utils/MathUtil":function(){define([],function(){function t(e){return Array.isArray(e)?e:[e.x,e.y]}function p(e){return Array.isArray(e)?e:[e.x,e.y,e.x+e.w,e.y+e.h]}function l(e){return Array.isArray(e)?{x:e[0],y:e[1],w:e[2]-e[0],h:e[3]-e[1]}:e}function k(e){return[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2]]}var g={rotatePointAroundPoint:function(e,a,d){d=g.degToRad(d);
var c=t(e),b=t(a);a=Math.cos(d)*(b[0]-c[0])-Math.sin(d)*(b[1]-c[1])+c[0];d=Math.sin(d)*(b[0]-c[0])+Math.cos(d)*(b[1]-c[1])+c[1];return Array.isArray(e)?[a,d]:{x:a,y:d}},degToRad:function(e){return e*Math.PI/180},radToDeg:function(e){return 180*e/Math.PI},cosDeg:function(e){return Math.cos(g.degToRad(e))},sinDeg:function(e){return Math.sin(g.degToRad(e))},angleTo180_180Range:function(e){e=(e+180)%360;0>e&&(e=360+e);return e-180},angleTo0_360Range:function(e){e%=360;0>e&&(e=360+e);return e},calcVectorLength:function(e){var a=
e[0]-e[2];e=e[1]-e[3];return Math.sqrt(a*a+e*e)},addPointToVector:function(e,a){a=t(a);e=e.slice();e[0]+=a[0];e[1]+=a[1];e[2]+=a[0];e[3]+=a[1];return e},subtractPointFromVector:function(e,a){a=t(a);e=e.slice();e[0]-=a[0];e[1]-=a[1];e[2]-=a[0];e[3]-=a[1];return e},putVectorToOrigin:function(e){return g.subtractPointFromVector(e,[e[0],e[1]])},normalizeVector:function(e){e=g.putVectorToOrigin(e);var a=g.calcVectorLength(e);e[2]/=a;e[3]/=a;return e},calcDotProduct:function(e,a){e=g.putVectorToOrigin(e);
a=g.putVectorToOrigin(a);return e[2]*a[2]+e[3]*a[3]},calcAngleBetweenVectors:function(e,a){e=g.normalizeVector(e);a=g.normalizeVector(a);return Math.acos(g.calcDotProduct(e,a))},addLengthToVector:function(e,a){var d=g.calcVectorLength(e),c=[e[0],e[1]];e=g.normalizeVector(e);e[2]*=d+a;e[3]*=d+a;return g.addPointToVector(e,c)},rotateVectorAroundPoint:function(e,a,d){a=t(a);var c=g.rotatePointAroundPoint(a,[e[0],e[1]],d);e=g.rotatePointAroundPoint(a,[e[2],e[3]],d);return[c[0],c[1],e[0],e[1]]},toLineABC:function(e){var a=
e[3]-e[1],d=e[0]-e[2];return[a,d,-a*e[0]-d*e[1]]},intersect2Lines:function(e,a){var d=g.toLineABC(e),c=g.toLineABC(a);a=d[0];e=d[1];d=d[2];var b=c[0],f=c[1];c=c[2];var h=a*f-b*e;return 0===h?null:[(c*e-d*f)/h,(b*d-a*c)/h]},intersectLineWithRect:function(e,a){function d(n,q){(n=g.intersect2Lines(e,[n[0],n[1],q[0],q[1]]))&&g.isPointInRect(a,n)&&m.push(n)}var c=k(a),b=c[0],f=c[1],h=c[2];c=c[3];var m=[];d(b,f);d(f,h);d(h,c);d(c,b);if(2!==m.length)return null;b=[m[0][0],m[0][1],m[1][0],m[1][1]];return g.calcVectorLength(b)?
b:null},isPointInRect:function(e,a){e=p(e);a=t(a);var d=e[2]-e[0],c=e[3]-e[1];return!(a[0]<e[0]||a[0]>e[0]+d||a[1]<e[1]||a[1]>e[1]+c)},isRectInRect:function(e,a){return g.checkRectsIntersect([e,a])&&k(p(e)).every(function(d){return g.isPointInRect(a,d)})},checkRectsIntersect:function(e){e=e.map(p);return e.every(function(a){var d=k(a);return e.every(function(c){return a===c?!0:d.some(function(b){return g.isPointInRect(c,b)})||k(c).some(function(b){return g.isPointInRect(a,b)})})})},getRotatedRectBox:function(e,
a){var d=!Array.isArray(e);e=p(e);var c=k(e);e=c[0];var b=c[1],f=c[2],h=c[3];c=c[4];e=g.rotatePointAroundPoint(c,e,a);b=g.rotatePointAroundPoint(c,b,a);f=g.rotatePointAroundPoint(c,f,a);h=g.rotatePointAroundPoint(c,h,a);e=g.getPointsExtent([e,b,f,h]);return d?l(e):e},uniteRects:function(e){var a=!Array.isArray(e[0]);e=e.map(p);var d=[];e.forEach(function(c){d=d.concat(k(c))});e=g.getPointsExtent(d);return a?l(e):e},getPointsExtent:function(e){var a=!Array.isArray(e[0]),d=Infinity,c=-Infinity,b=Infinity,
f=-Infinity;e.forEach(function(h){h=t(h);d=Math.min(d,h[0]);c=Math.max(c,h[0]);b=Math.min(b,h[1]);f=Math.max(f,h[1])});e=[d,b,c,f];return a?l(e):e}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil":function(){define(["dojo/_base/lang","../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(t,p,l,k,g){var e=
{getFieldCellValue:function(a){return a.row&&a.row[a.column.field]},setFieldCellContent:function(a,d){a.set("value",d);a.row[a.column.field]=d},clearFieldInfo:function(a,d){a.fieldInfos&&delete a.fieldInfos[d];a[d]="";e.setNumericDataValue(void 0,a,d)},getNumericCellValue:function(a){return e.getNumericDataValue(a.row,a.column.field)},setNumericCellValue:function(a,d){return e.setNumericDataValue(d,a.row,a.column.field)},getNumericDataValue:function(a,d){return a&&d&&a[d+"_numeric"]},setNumericDataValue:function(a,
d,c){d[c+"_numeric"]=a},getCellGroupStyleStats:function(a){return a.row&&a.column.field&&a.row[a.column.field+"_groupStyle"]},setCellGroupStyleStats:function(a,d){a.row[a.column.field+"_groupStyle"]=d},getRenderedValue:function(a,d,c){var b={parentGrid:a,row:d,column:c};a=a._getCellRenderer().getRenderedContent(b);if(a.isUnavailableData)return{};d=e.getNumericDataValue(d,c.field);"number"!==typeof d&&("number"!==typeof a.value||isNaN(a.value)?"string"===typeof a.formattedValue&&(c=k.parsePercentOrCurrency(a.formattedValue,
g.getCurrencyFormat()),isNaN(c)||(d=c)):d=a.value);return{numericValue:d,formattedValue:a.formattedValue}},isEmptyCell:function(a){return!a.get("value")&&!a.row[a.column.field]&&!e.getFieldInfo(a)},hasSpans:function(a){return e.getColumnSpan(a)||e.getRowSpan(a)},getColumnSpan:function(a){return a&&a.row&&a.row.columnSpans&&a.row.columnSpans[a.column.field]},getRowSpan:function(a){return a&&a.row&&a.row.rowSpans&&a.row.rowSpans[a.column.field]},getDataColumnSpan:function(a,d){return a&&a.columnSpans&&
a.columnSpans[d]},getDataRowSpan:function(a,d){return a&&a.rowSpans&&a.rowSpans[d]},getFieldInfo:function(a){return a&&a.row&&a.column&&a.row.fieldInfos&&a.row.fieldInfos[a.column.field]},getGridFirstFieldInfo:function(a){return e.getFieldInfo(a.getFirstCell())},setFieldInfo:function(a,d){a.row&&(a.row.fieldInfos[a.column.field]=d)},provideFieldInfo:function(a){e.setFieldInfo(a,e.getFieldInfo(a)||{});return e.getFieldInfo(a)},getPreservableSettings:function(a){return{triggerJson:e.getConditionalFormatting(a),
dataDrilling:e.getDataDrilling(a),tooltipInfo:e.getTooltipInfo(a)}},setPreservableSettings:function(a,d){e.setConditionalFormatting(a,d&&d.triggerJson);e.setDataDrilling(a,d&&d.dataDrilling);e.setTooltipInfo(a,d&&d.tooltipInfo)},getCellStyle:function(a,d){if(!a||!a.row||!a.column)return null;var c=a.row.style&&a.row.style.fields&&a.row.style.fields[a.column.field];!c&&d&&(c={},e.setCellStyle(a,c));return c},getCellThemeStyle:function(a){return a&&a.row&&a.column?a.row.themeStyle&&a.row.themeStyle.fields[a.column.field]:
null},setCellStyle:function(a,d){var c=a.row.style=a.row.style||{};c.fields=c.fields||{};c.fields[a.column.field]=d},updateCellStyle:function(a,d){a=e.getCellStyle(a,!0);t.mixin(a,d)},copyFieldStyle:function(a,d,c){a=e.getCellStyle(a);d=e.getCellStyle(d,!0);for(var b in c)void 0!==a[b]&&(d[b]=a[b])},getFieldCellUrl:function(a){if(a.row&&a.row.urls&&a.column)return a.row.urls[a.column.field]},setFieldCellUrl:function(a,d){a.row&&a.column&&(a.row.urls=a.row.urls||{},void 0===d?delete a.row.urls[a.column.field]:
a.row.urls[a.column.field]=d)},getConditionalFormatting:function(a){return(a=e._toFieldInfo(a))&&a.triggerJson},setConditionalFormatting:function(a,d){var c=e.getFieldInfo(a);if(c){c.triggerJson=null;if(d){if(a=e.isVariableLikeFieldCell(a))d.fieldInfo=c;d.fieldInfo===c&&(d.fieldInfo=t.clone(d.fieldInfo),delete d.fieldInfo.triggerJson,a&&(delete d.fieldInfo.tooltipInfo,delete d.fieldInfo.dataDrillingPanelInfo))}c.triggerJson=d}},getDataDrilling:function(a){return(a=e.getSourceFieldInfo(a))&&a.dataDrillingPanelInfo},
setDataDrilling:function(a,d){if(a=e.getSourceFieldInfo(a))a.dataDrillingPanelInfo=d},getTooltipInfo:function(a){return(a=e.getSourceFieldInfo(a))&&a.tooltipInfo},setTooltipInfo:function(a,d){if(a=e.getSourceFieldInfo(a))a.tooltipInfo=d},getSourceFieldInfo:function(a){var d=e._toFieldInfo(a);a=e.getConditionalFormatting(a);return d&&d.isImage?a&&a.fieldInfo:d},_toFieldInfo:function(a){return a?a.row?e.getFieldInfo(a):"object"===typeof a&&a:null},isReportSectionCell:function(a){a=e._toFieldInfo(a);
return!(!a||!a.isReportSection)},isInfographicCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isInfographic)},isChartCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isChart)},isMapCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isMap)},isImageCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isImage)},isImageTriggerCell:function(a){a=e._toFieldInfo(a);return!!(a&&a.isImage&&a.triggerJson)},getImageTriggerFieldInfo:function(a){return(a=e._toFieldInfo(a))&&a.isImage&&a.triggerJson?a.triggerJson.fieldInfo:
null},isShapeCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isShape)},isEmptyShapeCell:function(a){a=(a=e._toFieldInfo(a))&&a.shapeJson;return!(!a||a.g&&a.g.length)},isPlaceholderShapeCell:function(a){a=(a=e._toFieldInfo(a))&&a.shapeJson;return!(!a||!a.isPlaceholder)},isTextLikeCell:function(a){return!e._toFieldInfo(a)||e.isRichTextCell(a)||e.isVariableLikeFieldCell(a)||e.isSpecialFieldCell(a)},isRichTextCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isRichText)},isVariableLikeFieldCell:function(a){a=
e._toFieldInfo(a);return!(!a||!a.hasVariable&&!a.script&&"headers.CHART_POINT_VALUE"!==a.name&&"LocatorSummary"!==a.name)},isVariableFieldCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.hasVariable)},isScriptFieldCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.script)},isUneditableScript:function(a){a=e._toFieldInfo(a);return!!(a&&a.script&&a.script.isUneditableScript)},isNumericVariableFieldCell:function(a){return(a=e._toFieldInfo(a))?a.hasVariable&&l.isNumericField(a)||a.script&&("Double"===
a.script.type||!a.script.isUneditableScript&&"String"!==a.script.type)||"headers.CHART_POINT_VALUE"===a.name||"LocatorSummary"===a.name?!0:!1:!1},isCalculatableNumericVariableFieldCell:function(a){return e.isNumericVariableFieldCell(a)},isStringVariableFieldCell:function(a){a=e._toFieldInfo(a);return!(!a||!(a.hasVariable&&"esriFieldTypeString"===a.type||a.script&&"String"===a.script.type))},isSpecialFieldCell:function(a){var d=e._toFieldInfo(a);return d&&("headers.CHART_POINT_VALUE"===d.name||"LocatorSummary"===
d.name||!e.isVariableLikeFieldCell(a)&&p.hasField(d.name))}};return e})},"esri/dijit/geoenrichment/utils/FieldUtil":function(){define([],function(){function t(g){return("string"===typeof g?g:g&&g.type)||""}var p={isNumericField:function(g){switch(t(g)){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return"i";case "esriFieldTypeSingle":case "esriFieldTypeDouble":return"f"}return!1},isStringField:function(g){return"esriFieldTypeString"==t(g)||!1},isDateField:function(g){return"esriFieldTypeDate"==
t(g)||!1}},l=/DISTANCE$/;p.isDistanceField=function(g){return l.test(t(g))};var k=/^(SHAPE__Area|SHAPE__Length)$/i;p.canShowField=function(g,e){if(!g||!g.name||"esriFieldTypeOID"===g.type)return!1;if("esriFieldTypeDate"===g.type)return"d";var a=p.isNumericField(g)||p.isStringField(g);if("f"===a&&!1===g.editable&&k.test(g.name))return null;void 0===e&&(e=/^(OBJECTID|OID|FID)$/i);return e&&e.test(g.name)?!1:!0===a?"s":a};p.createFieldInfo=function(g){var e=p.canShowField(g);g={fieldName:g.name,label:g.alias||
g.name,isEditable:!!g.editable,visible:!!e};switch(e){case "i":g.format={places:0,digitSeparator:!0};break;case "f":g.format={digitSeparator:!0};break;case "s":g.stringFieldOption="textbox"}return g};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil":function(){define(["dojo/_base/lang","../templateJsonUtils/fieldInfo/FieldInfoBuilder","../templateJsonUtils/fieldInfo/FieldLibrary","../../grid/coreUtils/GridDataUtil","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes"],
function(t,p,l,k,g){var e={createTable:function(a){var d=a.numColumns,c=a.numRows,b=a.width,f=a.widths,h=a.style,m=a.attributes&&a.attributes.fixedColumns,n=a.attributes&&a.attributes.dynamicColumns;if(b)if(f)f=f.map(function(F){return b*Number(F.replace("%",""))/100});else{var q=b/d;f=[];for(var r=0;r<d;r++)f.push(q)}if(f)b||isNaN(Number(f[0]))||(b=0,f.forEach(function(F){b+=F}));else for(q=Number(100/d).toFixed(3)+"%",f=[],r=0;r<d;r++)f.push(q);q=[];for(r=0;r<d;r++)q.push({field:"field"+r,style:{width:f[r]}});
f=[];for(var u=!0,v=a.height?a.height/c:a.rowHeight||15.07,w=0;w<c;w++){var z={style:{height:v,fields:{}},fieldInfos:{}};for(r=0;r<d;r++){var E="field"+r;!1!==a.useDefaultTheme&&(z.style.fields[E]=t.mixin({horizontalAlign:0===r?"left":"right",overrideStyle:0===w?1<c?!1!==a.useDefaultHeaderTheme?"TableHeader":"Default":void 0:u?"AlternatingRow":"Default"},a.cellParams));n&&r>=m&&0===w&&(z.fieldInfos[E]=p.createFieldInfoFromSpecialFieldName("AREA_DESC"));a.processTableCell&&a.processTableCell(z,E,w,
r,a)}f.push(z);u=!u}return{id:"table",attributes:t.mixin({},a.attributes),style:t.mixin({width:b||772.33},h),columns:q,rows:f}},createSingleCellTable:function(a){a=a||{};var d=e.createTable({numColumns:1,numRows:1,attributes:a.attributes,useDefaultTheme:!1});e.modifyTableJson(d,0,0,a);return d},modifyTableJson:function(a,d,c,b){d=a.rows[d];c=a.columns[c];var f=c.field;b.text&&(d[f]=b.text);b.fieldInfo&&(d.fieldInfos[f]=b.fieldInfo);b.cellStyle&&(d.style.fields[f]=b.cellStyle);b.columnSpan&&(d.columnSpans=
d.columnSpans||{},d.columnSpans[f]=b.columnSpan);b.rowSpan&&(d.rowSpans=d.rowSpans||{},d.rowSpans[f]=b.rowSpan);d.themeStyle=b.themeStyle;b.width&&(a.style.width=b.width,c.style.width=b.width);b.height&&(d.style.height=b.height);void 0!==b.left&&(a.style.left=b.left);void 0!==b.top&&(a.style.top=b.top)},getTableWidth:function(a){return a.style.width},getTableHeight:function(a){var d=0;a.rows.forEach(function(c){d+=c.style?c.style.height:0});return d},calcTableBox:function(a){return{x:a.style.left||
0,y:a.style.top||0,w:e.getTableWidth(a),h:e.getTableHeight(a)}},createDetailsSection:function(a){return{type:g.DETAILS,stack:[e.createTable(a)]}},createDetailsSectionForFieldInfos:function(a,d){return{type:g.DETAILS,stack:[function(){var c=e.createTable(t.mixin({numColumns:2,numRows:a.length+1},d));c.rows.forEach(function(b,f){0===f?b.field0=a[0].hasVariable?a[0].fieldCategory:"":(f=a[f-1],b.field0=f.script?f.script.alias:f.hasVariable?f.alias:l.getFieldLabel(f.name)||"",b.fieldInfos.field1=f)});
e.provideSpaceAfter(c);return c}()]}},createDetailsSectionForFieldInfoGroups:function(a,d){return{type:g.DETAILS,stack:[function(){var c=e.createTable(t.mixin({numColumns:a.length+1,numRows:a[0].length+1},d));c.rows.forEach(function(b,f){c.columns.forEach(function(h,m){0!==m&&(0===f?b[h.field]=a[m-1][0].fieldCategory||"":(m=a[m-1][f-1],b.field0=b.field0||(m.script?m.script.alias:m.alias),b.fieldInfos[h.field]=m))})});e.provideSpaceAfter(c);return c}()]}},provideSpaceAfter:function(a,d){a.style.spaceAfter=
Math.max(d||0,90-15.07*a.rows.length)},applyDefaultStyling:function(a){var d=!0;a.rows.forEach(function(c,b){a.columns.forEach(function(f){c.style.fields[f.field].overrideStyle=0===b?"TableHeader":d?"AlternatingRow":void 0});d=!d})},setTableHeaderStyle:function(a){if(a.style)for(var d in a.style.fields)(a.style.fields[d]=a.style.fields[d]||{}).overrideStyle="TableHeader"},DEFAULT_ROW_HEIGHT:15.07,isEmptyTable:function(a){return!a.columns||!a.columns.length||!a.rows||!a.rows.length},isSingleCelledTable:function(a){return 1===
a.columns.length&&1===a.rows.length},isMultiDataTable:function(a){return 1<a.columns.length||2<a.rows.length},getTableSubtype:function(a){if(!e.isSingleCelledTable(a))return null;a=e.getFirstFieldInfo(a);return k.isTextLikeCell(a)?"isTextLike":a.isImage?a.triggerJson?"isImage.hasConditionalStyling":"isImage":a.isShape?"isShape":null},getFirstFieldInfo:function(a){return a.rows[0].fieldInfos&&a.rows[0].fieldInfos[a.columns[0].field]},tableJsonHasInfographic:function(a){return!!e.getTableJsonInfographic(a)},
getTableJsonInfographic:function(a){var d;a.rows.some(function(c){if(c.fieldInfos)for(var b in c.fieldInfos){var f=c.fieldInfos[b];if(f&&f.isInfographic)return d=f.infographicJson,!0}});return d},getTableJsonFirstFieldInfo:function(a){return a.rows[0].fieldInfos[a.columns[0].field]},tableJsonHasChart:function(a){return a.rows.some(function(d){if(d.fieldInfos)for(var c in d.fieldInfos){var b=d.fieldInfos[c];if(b&&b.isChart)return!0}})}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder":function(){define(["./utils",
"dojo/i18n!esri/nls/jsapi"],function(t,p){function l(d){Object.keys(d).forEach(function(c){var b=d[c];void 0!==b&&null!==b||delete d[c]})}p=p.geoenrichment.dijit.ReportPlayer.ReportPlayer;var k={NUMBER:"n/",createFieldInfoFromCalculator:function(d,c,b){if(!d)return null;d=(c="function"===typeof d.getDescriptionWithType?d:null)?c.variable:d;var f=b&&b.format,h=b&&b.autoformatCurrency,m=b&&b.calculatorName,n=b&&b.defaultDistanceUnits;b=b&&b.summaryType;var q=c&&c.getToggleGroup&&c.getToggleGroup();
b={alias:c?c.getDescriptionWithType()||c.getAliasWithType():d.description||d.alias,hasVariable:!0,variableID:d.id,fullName:d.fullName,fieldCategory:d.fieldCategory,vintage:d.vintage,type:d.type,statefulName:q?q.value:"n/"+d.fullName,summaryType:b};c=c?c.getCalcType().charAt(0):"n";b.name=t.name.createFieldNameFromSource(d,c);f?t.format.setFieldInfoFormat(b,f):(b.decimals=d.precision,b.showCurrency=!(!h||"n"!==c||!d.units||"CURRENCY"!==d.units.toUpperCase()),b.showPercent=!b.showCurrency&&("p"===c||
"n"===c&&d.units&&"PCT"===d.units.toUpperCase()),b.useThousandsSeparator=!0);d.isWebMap&&(b.isWebMap=!0,b.webMapFieldName=d.fieldName,b.webMapField=d.fieldInfo,b.webMapId=d.webMapId,b.layerUrl=d.layerUrl,!f&&d.fieldInfo&&d.fieldInfo.format&&(b.decimals=d.fieldInfo.format.places,b.useThousandsSeparator=!1!==d.fieldInfo.format.digitSeparator));d.customDataCollection&&(b.isCustomDataCollection=!0,b.customDataCollectionId=d.customDataCollection.id,b.customDataCollectionUrl=d.customDataCollection.url,
b.customDataCollectionPortalUrl=d.customDataCollection.portalUrl);d.isSiteAttribute&&(b.isSiteAttribute=!0,b.attribute=d.attribute,b.type=d.attribute.type,!f&&0<d.attribute.places&&(b.decimals=d.attribute.places));d.isDataLayerAttribute&&(b.isDataLayerAttribute=!0,b.layerID=d.layerID,b.layerUrl=d.layerUrl,b.layerName=d.layerName,b.attribute=d.attribute,b.type=d.attribute.type,!f&&0<d.attribute.decimals&&(b.decimals=d.attribute.decimals),"DISTANCE"===d.attribute.name&&(b.units=d.attribute.units||n||
"esriMiles"));b.usedFields=d.usedFields;b.expressionText=d.expressionText;t.name.provideQualifiedFieldInfoTemplateName(b,m);l(b);return b},fieldInfoToVariable:function(d){if(!d.hasVariable)return null;var c={id:d.variableID,fullName:d.fullName,fieldCategory:d.fieldCategory,vintage:d.vintage,type:d.type,precision:d.decimals,usedFields:d.usedFields,expressionText:d.expressionText};d.isWebMap&&(c.isWebMap=!0,c.fieldName=d.webMapFieldName,c.fieldInfo=d.webMapField,c.webMapId=d.webMapId,c.layerUrl=d.layerUrl);
d.isSiteAttribute&&(c.isSiteAttribute=!0,c.attribute=d.attribute);return c},createFieldInfoFromScript:function(d,c){var b=c&&c.format;c=c&&c.calculatorName;d=d||{};d.name=d.name||t.name.DEFAULT_SCRIPT_NAME;d.alias=d.alias||p.scriptNameDefault;d.decimals=Number(d.decimals)||0;var f={};f.name=t.name.createFieldNameFromScript(d);t.name.provideQualifiedFieldInfoTemplateName(f,c);f.script=d;b?t.format.setFieldInfoFormat(f,b):(f.decimals=Number(d.decimals),f.showCurrency=!1,f.showPercent=!1,f.useThousandsSeparator=
!0);l(f);return f},createFieldInfoFromImage:function(d,c){return{isImage:!0,imageJson:d,triggerJson:c}},createFieldInfoFromMap:function(d){return{isMap:!0,mapJson:d}},createFieldInfoFromShape:function(d){return{isShape:!0,shapeJson:d}},createFieldInfoFromChart:function(d){return{isChart:!0,chartJson:d}},createFieldInfoFromInfographic:function(d){return{isInfographic:!0,infographicJson:d}},createFieldInfoFromSection:function(d){return{isReportSection:!0,sectionJson:d}},createFieldInfoFromMissingVariable:function(d,
c){return{name:d&&d.substr(d.indexOf(".")+1),templateName:d,isMissing:!0,alias:c}},createFieldInfoForUnsupportedContent:function(){return{isUnsupportedContent:!0}}},g=/^\[\w+\]$/,e=/\[\w+\]/;k.createFieldInfoFromLabel=function(d,c){if("string"!==typeof d)return null;d=d.trim();var b=g.test(d);if(!c||b){if(!b)return null;d=d.replace(/\[|\]/g,"").toUpperCase();return k.createFieldInfoFromSpecialFieldName(t.fields.uiToTemplate(d))}return e.test(d)?t.richText.createFieldInfoFromRenderedXMLString(d):null};
k.createFieldInfoFromSpecialFieldName=function(d,c){if("string"!==typeof d)return null;d=t.fields.trimTemplateHeaderName(d);d=d.toUpperCase();if("GROUPCOUNT"===d)var b={name:t.fields.GROUPCOUNT_FIELD_NAME,alias:t.fields.GROUPCOUNT_FIELD_ALIAS,type:"esriFieldTypeInteger"};else"LOCATORSUMMARY"===d?(b={name:t.fields.LOCATORSUMMARY_FIELD_NAME,alias:t.fields.LOCATORSUMMARY_FIELD_ALIAS,type:"esriFieldTypeDouble",templateName:t.fields.LOCATORSUMMARY_FIELD_NAME},c&&Object.assign(b,t.format.processFieldInfoTagAttributes({m:"string"===
typeof c?c:t.format.buildFormatStringFromObject(c)}))):"CURRDATE"===d?b={name:t.fields.DATE_FIELD_NAME,alias:t.fields.DATE_FIELD_ALIAS,format:c||t.fields.DATE_FIELD_DEFAULT_FORMAT}:"SITENOTES"===d?b={name:t.fields.qualifyTemplateHeaderName(t.fields.SITENOTES_FIELD_NAME),alias:t.fields.SITENOTES_FIELD_ALIAS,type:"esriFieldTypeString"}:0===d.indexOf("SITENOTE")&&(b=t.fields.getSiteNoteFieldNameAt(d.replace("SITENOTE","")),b={name:t.fields.qualifyTemplateHeaderName(b),alias:b,type:"esriFieldTypeString"});
if(b)return b;var f=t.fields.templateToUIHeader(d);f?(b={name:t.fields.qualifyTemplateHeaderName(d),alias:f,type:"esriFieldTypeString"},t.fields.isChartAttribute(d)&&(b.isChartAttribute=!0),"CHART_POINT_VALUE"===d&&(b.type="esriFieldTypeDouble",b.decimals=0,b.useThousandsSeparator=!0,c&&t.format.setFieldInfoFormat(b,c))):(c=t.fields.templateToUIReportVar(d))&&(b={name:c,alias:c,type:"esriFieldTypeString"});b&&(b.templateName=b.name);return b};var a=/(\(%\)|: Percent)$/;k.isFieldInfoInPercentState=
function(d){return d?d.statefulName&&0===d.statefulName.indexOf("p/")||d.alias&&a.test(d.alias):!1};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/utils":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(t,p){var l={},k;l.init=function(){if(k)return k.promise;k=new t;p("./FieldInfoBuilder ./FieldInfoFormatUtil ./FieldInfoNameUtil ./FieldInfoRenderer ./RichTextJsonUtil ./FieldLibrary".split(" "),function(g,e,a,d,c,b){l.builder=
g;l.format=e;l.name=a;l.renderer=d;l.richText=c;l.fields=b;k.resolve()});return k.promise};l.init();return l})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes":function(){define([],function(){return{PAGE_HEADER:"PageHeader",DETAILS_HEADER:"DetailsHeader",DETAILS:"Details",GROUP:"Group",PAGE_FOOTER:"PageFooter",REPORT_FOOTER:"ReportFooter",DATA_SOURCE:"DataSource",EMPTY:"empty",INFOGRAPHIC_HEADER:"InfographicHeader",INFOGRAPHIC_VARIABLE:"InfographicVariable",INFOGRAPHIC_BACKGROUND:"InfographicBackground",
INFOGRAPHIC_FOREGROUND:"InfographicForeground",INFOGRAPHIC_ATTRIBUTES:"InfographicAttributes",INFOGRAPHIC_NOTES:"InfographicNotes",INFOGRAPHIC_SUMMARY:"InfographicSummary",INFOGRAPHIC_SUMMARY2:"InfographicSummary2",INFOGRAPHIC_SUMMARY_FOOTER:"InfographicSummaryFooter",TABLE_BACKGROUND:"TableBackground",TABLE_FOREGROUND:"TableForeground",TABLE_BACKGROUND_FLOATING_PANELS:"BackgroundFloatingPanels",TABLE_FOREGROUND_FLOATING_PANELS:"ForegroundFloatingPanels",TABLE_FLOATING_PANELS:"FloatingPanels"}})},
"esri/dijit/geoenrichment/utils/PortalUtil":function(){define("dojo/_base/lang esri/kernel esri/request ./requests/EveryRequest ./requests/UniversalClient ../ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil ./CacheUtil ./ProjectionUtil ./UrlUtil".split(" "),function(t,p,l,k,g,e,a,d,c){var b={query:function(f,h,m,n){h=h||{};m=m||"results";n=n||100;var q="number"===typeof h.num?h.num:-1,r=h.num=0>q||h.num>n?n:h.num;h.start=h.start||1;return f(h).then(function(u){var v=u[m],w=u.total-h.start+
1;0<=q&&w>q&&(w=q);w-=r;if(0>=w)return u;h.num=r;for(var z=[];0<w;)h.start+=r,z.push(f.bind(null,t.mixin({},h))),w-=r;return k(z,{stopOnError:!0}).then(function(E){E.forEach(function(F){Array.prototype.push.apply(v,F[m])});return u})})},queryCommon:function(f,h){return b.query(function(m){var n=p.id.findCredential(f)||p.id.credentials[0];return l({url:f,content:t.mixin({f:"json",token:n?n.token:void 0},h,m),handleAs:"json"},{usePost:!0})}).then(function(m){return m.results})},getPortalSelf:function(f){return g.requestPublicFirst(c.combine(f,
"sharing/rest/portals/self"),{})},getDefaultBasemaps:function(f){var h=a.get("PortalUtil.basemaps");h[f]||(h[f]=b.getPortalSelf(f).then(function(m){return g.request(c.combine(f,"sharing/rest/community/groups"),{content:{q:m.useVectorBasemaps?m.vectorBasemapGalleryGroupQuery:m.basemapGalleryGroupQuery,f:"json"},handleAs:"json"}).then(function(n){return(n=n.results[0])?g.request(c.combine(f,"sharing/rest/search"),{content:{q:"group:"+n.id+' AND type:"web map"',num:100,f:"json"},handleAs:"json"}).then(function(q){return q.results}):
null})}));return h[f]},tryConfigureServicesFromAGOLPublic:function(){return b.getPortalSelf("https://www.arcgis.com").then(function(f){if(f=f&&f.helperServices)f.geometry&&d.setGeometryServiceUrl(f.geometry.url),f.printTask&&e.setPrintMapTaskUrl(f.printTask.url)}).otherwise(function(f){console.log(f)})}};return b})},"esri/dijit/geoenrichment/utils/requests/EveryRequest":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,p,l){var k=
t(null,{requests:null,results:null,requestCount:0,chunkSize:0,stopOnError:!1,onProgress:null,index:0,completeCount:0,executeCount:0,isExecuting:!1,dfd:null,constructor:function(g,e,a,d,c){this.requests=g;this.results=e;this.requestCount=this.requests.length;this.chunkSize=Math.max(a,0);this.stopOnError=d;this.onProgress=c},execute:function(){this.isExecuting=!0;for(this.dfd=new p;this.tryStartNextRequest(););return this.dfd.promise},tryStartNextRequest:function(){if(!this.isExecuting)return!1;if(this.index==
this.requestCount&&!this.executeCount)return this.isExecuting=!1,this.dfd.resolve(this.results),!1;if(this.index==this.requestCount||this.executeCount==this.chunkSize)return!1;var g=this.requests[this.index++];this.executeCount++;var e=g.request;"function"===typeof e&&(e=e());var a=this,d=!0;l(e,function(c){a.processResult(c,g.key,c instanceof Error,d)},function(c){a.processResult(c,g.key,!0,d)});d=!1;return!0},processResult:function(g,e,a,d){if(this.isExecuting)if(a&&this.stopOnError)this.isExecuting=
!1,this.onProgress&&this.onProgress(1),this.dfd.reject(g);else if(this.results[e]=g,this.completeCount++,this.executeCount--,this.onProgress&&this.onProgress(this.completeCount/this.requestCount),!d)for(;this.tryStartNextRequest(););}});return function(g,e){var a=!1,d=10,c=null;"boolean"===typeof e?a=e:e&&("number"===typeof e.chunkSize&&(d=e.chunkSize),"boolean"===typeof e.stopOnError&&(a=e.stopOnError),"function"===typeof e.onProgress&&(c=e.onProgress));var b=[];if(Array.isArray(g)){var f=[];g.forEach(function(m,
n){b.push({key:n,request:m})})}else for(var h in g)f={},b.push({key:h,request:g[h]});return(new k(b,f,d,a,c)).execute()}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil":function(){define("require dojo/_base/declare esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/dom-style esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/ImageInfoUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(t,p,l,k,g,e,a,d,c,b){function f(){var F=new l;t("esri/tasks/PrintTask esri/tasks/PrintParameters esri/tasks/PrintTemplate esri/layers/GraphicsLayer ./DotDensityToImageUtil ./LegendToLayerUtil".split(" "),function(D,B,y,A,H,G){m=B;n=y;q=A;r=H;u=G;h=p(D,{returnJson:!1,mapName:null,_execute:function(){this.returnJson&&(this.printGp.submitJob=this.printGp.execute=function(I,L){I="data:application/json;base64,"+a.base64FromJson(I.Web_Map_as_JSON);L([{value:{url:I}}]);return(new l).resolve()});
return this.inherited(arguments)},_getPrintDefinition:function(I,L){var N=this.inherited(arguments);this.returnJson&&this.mapName&&(N.title=this.mapName);console.log(N);return N},_createOperationalLayers:function(I,L){var N=this.inherited(arguments);if(L.__legendLayerId){var O=N.filter(function(S){return S.id===L.__legendLayerId})[0];N.splice(N.indexOf(O),1);N.push(O)}return N},_createFeatureCollection:function(I,L,N,O){var S=this.inherited(arguments);this.returnJson&&S&&("esri.layers.FeatureLayer"===
I.declaredClass||"esri.layers.StreamLayer"===I.declaredClass||"esri.layers.GraphicsLayer"===I.declaredClass)&&S.featureCollection.layers.forEach(function(R){R.layerDefinition.name=I.arcgisProps&&I.arcgisProps.title||I._titleForLegend||I.name||I.id;R.layerDefinition.name=c.decodeXML(R.layerDefinition.name);R.layerDefinition.objectIdField="OBJECTID";R.layerDefinition.fields=[{name:"OBJECTID",type:"esriFieldTypeOID"}];var U={OBJECTID:1},Z=/[^\w]/g,ca;R.featureSet.features.forEach(function(Y,da){Y.attributes=
Y.attributes||{};Y.attributes.OBJECTID=da+1+"";Y.attributes.__nameField||(Y.attributes.Name=c.decodeXML(Y.attributes.Name||R.layerDefinition.name),ca="Name");da=Y.attributes.__fieldAliases;for(var Q in Y.attributes)if(0!==Q.indexOf("__")){var X=Q,V=Y.attributes[Q];"string"===typeof V&&(V=c.decodeXML(V));var fa=da&&da[Q];(fa=fa&&fa.replace(Z,"_"))&&void 0===Y.attributes[fa]&&(Y.attributes[fa]=V,X=fa);Y.attributes.__nameField===Q&&(ca=X);U[Q]||(U[Q]=1,R.layerDefinition.fields.push({name:X,type:"string"===
typeof V?"esriFieldTypeString":"esriFieldTypeDouble"}))}});R.layerDefinition.displayField=ca});return S},_convertSvgSymbol:function(I){return I}});F.resolve()});return F.promise}var h,m,n,q,r,u,v,w={setPrintMapTaskUrl:function(F){v=F;b.registerCORS(F)},mapToURL:function(F,D,B,y){var A=w._getUrlForMap(F);if(A)return A;A=f().then(function(){return w._replaceDotDensityLayersWithPictureMarkers(F).then(function(H){return k(D&&u.legendToGraphicsLayer(D,F,B),function(G){G&&F.addLayer(G);return k(w._runPrintTask(F,
B,G,y),function(I){G&&F.removeLayer(G);w._rollbackReplacing(F,H);var L=new l;setTimeout(function(){L.resolve(I.url)},100);return L.promise})})})});w._putUrlToCache(F,A);return A},_replaceDotDensityLayersWithPictureMarkers:function(F){var D=[];for(i=0;i<F.graphicsLayerIds.length;i++)layer=F.getLayer(F.graphicsLayerIds[i]),layer.loaded&&layer.visible&&r.isDotDensity(layer)&&D.push(w._createGraphicsLayerFromDotDensityLayer(i,layer,F));return g(D)},_createGraphicsLayerFromDotDensityLayer:function(F,D,
B){return r.createPictureMarkersFromDotDensityLayer(D,B.extent,B).then(function(y){if(!y)return null;var A=new q;y.map(function(H){A.add(H)});B.addLayer(A,F);D.visible=!1;return{addedLayer:A,hiddenLayer:D}}).otherwise(function(y){console.log(y);return null})},_runPrintTask:function(F,D,B,y){function A(){var H=new h(v);H.returnJson=y&&y.replaceWithJson;H.mapName=y&&y.mapName;var G=new m;G.map=F;var I=new n;I.exportOptions={width:3.125*e.get(D,"width"),height:3.125*e.get(D,"height"),dpi:300};I.format=
"png32";I.showAttribution=!1;I.forceFeatureAttributes=!0;I.__legendLayerId=B&&B.id;G.template=I;return H.execute(G)}return k(A(),function(H){return H},function(H){console.log(H);return k(A(),function(G){return G},function(G){console.log(G);return A()})})},_rollbackReplacing:function(F,D){D.forEach(function(B){B&&B.addedLayer&&F.removeLayer(B.addedLayer);B&&B.hiddenLayer&&(B.hiddenLayer.visible=!0)})},urlToSrc:function(F,D){return D&&D.saveImagesAsDataUrl?d.getRemoteImageDataUrl(F,{sizeLimit:1500}):
F}},z,E=0;w.enableCaching=function(){z={}};w.clearCaching=function(){z=null};w._putUrlToCache=function(F,D){z&&D&&(F.__mapToImageUtilKey=E++,z[F.__mapToImageUtilKey]=D)};w._getUrlForMap=function(F){return z&&z[F.__mapToImageUtilKey]};return w})},"esri/dijit/geoenrichment/utils/ImageInfoUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/when","./CacheUtil","./ImageUtil","./UrlUtil"],function(t,p,l,k,g){var e=/^data:/i,a={getImageInfo:function(d,c,b){var f=b&&b.sizeLimit||1E5,h=l.get("ImageInfoUtil"),
m=d+(b&&b.crossOrigin||"");h[m]||(h[m]=k.imageFromUrl(d,b).then(function(n){var q=k.imageToDataURL(n),r={dataUrl:q,contentType:k.getContentType(q),width:n.width,height:n.height};setTimeout(function(){h[m]=r});return r}));return p(h[m],function(n){n=t.mixin({},n);c&&(n.filename=c&&c.replace(/\.\w+$/,".png").toLowerCase());return function(q){return p(a._processDataUrl(q,f),function(r){if(r&&r.dataUrl){var u=t.mixin({},q);u.dataUrl=r.dataUrl;u.width*=r.factor;u.height*=r.factor;return p(u)}return p(q)})}(n)})},
ensureDataUrlForRemoveImage:function(d,c){return!d||e.test(d)?d:a.getRemoteImageDataUrl(d,c)},getRemoteImageDataUrl:function(d,c){function b(n,q){return a.getImageInfo(n?m+"?"+d:d,null,{crossOrigin:q}).then(function(r){return p(a._processDataUrl(r,h),function(u){return u&&u.dataUrl||u})})}function f(){console.log("Failed to get data for URL: "+d);return d}if(!d)return d;var h=c&&c.sizeLimit||1E5,m=g.getProxyUrl();return b(!1,"anonymous").otherwise(function(){return b(!1,null)}).otherwise(function(){return m?
b(!0,"anonymous"):f()}).otherwise(function(){return b(!0,null)}).otherwise(f)},_processDataUrl:function(d,c){var b=Math.max(d.width,d.height);if(b<=c)return d.dataUrl;var f=c/b;return p(k.scaleImage(d.dataUrl,{factor:f}),function(h){return{dataUrl:h,factor:f}})}};return a})},"esri/dijit/geoenrichment/utils/ProjectionUtil":function(){define("esri/dijit/geoenrichment/Deferred esri/SpatialReference esri/geometry/jsonUtils esri/dijit/geoenrichment/utils/CoordinateUtil esri/dijit/geoenrichment/utils/PolygonUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/requests/EveryRequest".split(" "),
function(t,p,l,k,g,e,a,d){function c(u){return u&&u.spatialReference||u instanceof p&&u||u&&new p(u)||new p(k.WEB_MERCATOR_WKID)}function b(u,v){var w=[];try{for(var z=0;z<u.length;z++)w.push(k.toSpatialReference(u[z],v))}catch(E){console.log(E)}return(new t).resolve(w)}function f(u,v){function w(A){D.push(function(){return h(F,A,E,v)})}var z=u[0],E=l.getJsonType(z),F={outSR:v.wkid||v.toJson(),inSR:z.spatialReference.wkid||z.spatialReference.toJson()},D=[],B=0,y=[];1==u.length?y.push(z):u.forEach(function(A){var H=
g.getNumberOfPoints(A);B+=H;if(1E4<B){var G=[];y.length?(G.push(A),B=H):(y.push(A),B=0);w(y);y=G}else y.push(A)});y.length&&w(y);return d(D,{stopOnError:!0}).then(function(A){for(var H=A[0],G=1;G<A.length;G++)H=H.concat(A[G]);return H},function(A){console.log(A);return[]})}function h(u,v,w,z){u.geometries=m(v);return r("project",u).then(function(E){return n(E.geometries,w,z)})}function m(u){var v=u.map(function(w){w=w.toJson();delete w.spatialReference;return w});return{geometryType:l.getJsonType(u[0]),
geometries:v}}function n(u,v,w){var z=l.getGeometryType(v),E=w.toJson();return u.map(function(F){F.spatialReference=E;return new z(F)})}var q={},r;q.setGeometryServiceUrl=function(u){e.registerCORS(u);r=function(v,w){return a.requestPublicFirst({url:u,urlSuffix:v},{content:w})}};q.setGeometryRequest=function(u){r=u};q.getSpatialReference=c;q.projectGeometries=function(u,v){var w=c(v);v=Array.isArray(u)?u:[u];if(!v.length)return(new t).resolve(u);var z={},E=v.slice(),F=0;v=v.filter(function(D,B){if(D.spatialReference&&
D.spatialReference.wkid!==w.wkid)return z[B]=F++,!0});return v.length?(k.testSpatialReferenceWKID(w)&&k.testSpatialReferenceWKID(v[0].spatialReference)?b(v,w):f(v,w)).then(function(D){E.forEach(function(B,y){void 0!==z[y]&&(E[y]=D[z[y]])});return Array.isArray(u)?E:E[0]}):(new t).resolve(u)};q.unionGeometries=function(u){var v=c(u[0].spatialReference);u={sr:v.wkid||v.toJson(),geometries:m(u)};return r("union",u).then(function(w){return n([w.geometry],w.geometryType,v)[0]})};q.geometriesToJson=m;q.geometriesFromJson=
n;return q})},"esri/dijit/geoenrichment/utils/PolygonUtil":function(){define([],function(){var t={getNumberOfPoints:function(p){if(!p)return 0;Array.isArray(p)||(p=[p]);var l=0;p.forEach(function(k){l+=t.getGeometryPointCount(k.geometry||k)});return l},getGeometryPointCount:function(p){if(!p)return 0;var l=0,k=p.rings||p.paths;!k&&p.points&&(k=[p.points]);k?k.forEach(function(g){l+=g&&g.length||0}):l+="x"in p?1:2;return l}};return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_ServerSerializationSupport":function(){define("dojo/_base/declare esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/ImageUtil ./supportClasses/ReportDataProcessor ./supportClasses/tasks/parsers/DataXMLParser ./supportClasses/areas/AnalysisAreaUtil ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AreasPreprocessor ./supportClasses/GEUtil ../core/supportClasses/ReportTemplateTypes ../core/conversion/PortalToEditorConverter ../core/supportClasses/map/WebMapJsonUtil ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ./supportClasses/attachments/AttachmentsStoreSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder ../countryConfig".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u,v){return t(null,{reportDataToServerData:function(w){return null},reportDataFromServerData:function(w,z){function E(N){D.some(function(O){return"metadata.xml"===O.name})||D.push({name:"metadata.xml",data:u.recoverMetadataFromAreaData(I.areaData,N)})}function F(N){w.sites=[];var O={},S=1;I.areaData.forEach(function(R){R=R.headers&&R.headers.data||{};var U=R.SITE_NAME||R.STORE_NAME,Z=R.STORE_ID||"unclassified."+S++;"number"!==typeof O[Z]&&(O[Z]=w.sites.length,
w.sites.push({locationName:U,name:null,shortName:null,description:null,address:R.STORE_ADDR,latitude:R.STORE_LAT,longitude:R.STORE_LONG,areas:[]}));w.sites[O[Z]].areas.push({locationName:U,name:R.AREA_DESC?U+" ("+R.AREA_DESC+")":U,shortName:R.AREA_DESC,description:R.AREA_DESC2,address:R.STORE_ADDR,latitude:R.STORE_LAT,longitude:R.STORE_LONG,feature:{attributes:{STORE_ID:R.STORE_ID,AREA_ID:R.AREA_ID}}})});w.sites.forEach(function(R){var U=!1;R.shortName=R.areas.map(function(ca){return U=!!ca.shortName,
ca.shortName}).join(", ");U&&(R.name=R.locationName+" ("+R.shortName+")");var Z=R.areas.map(function(ca){return ca.description});R.description=1<Z.length?Z[0]===Z[1]?Z[0]:Z.join(", "):Z[0]||""});I.reportInfo.areaIdToAttachmentsInfo&&w.sites.forEach(function(R){R.areas.forEach(function(U){if(U=I.reportInfo.areaIdToAttachmentsInfo[U.feature.attributes.AREA_ID])R.attributes=R.attributes&&R.attributes.length?R.attributes:U.attributes,R.notes=R.notes&&R.notes.length?R.notes:U.notes,R.images&&R.images.length||
!U.images||(R.images=U.images,R.images.forEach(function(Z){function ca(Y){return(Y=N[Y])&&l.base64DataToDataURL(Y,"image/png")}Z.url=ca(Z.url);Z.thumbnail=ca(Z.thumbnail)}))})})}v.reset();var D=w.reportItem.resources,B;if(!Array.isArray(D)){var y=D;D=[];for(var A in y)D.push({name:A,data:y[A]})}D.forEach(function(N){"theme.css"===N.name&&(N.name="theme.css.txt")});var H=D.filter(function(N){return"report.xml"===N.name})[0],G=D.filter(function(N){return"data.xml"===N.name})[0],I;(function(){var N=
/.*\.(png|jpg|jpeg)$/i,O=/(.*\.(json)$)|(^maps\/.*\.(png)$)/i,S={},R={};D.forEach(function(Y){N.test(Y.name)&&(S[Y.name]=Y.data,"logo.png"===Y.name&&(B=l.base64DataToDataURL(Y.data,"image/png")));O.test(Y.name)&&(-1!==Y.data.indexOf("operationalLayers")?R[Y.name]=h.processWebMapJson(Y.name,Y.data):R[Y.name]=Y.data)});var U={},Z=H.data.match(/<section[^<>]*query=("|').+?("|').*?>/g);Z&&Z.forEach(function(Y){Y=Y.replace(/.*?query=("|')/,"");Y=Y.replace(/("|').*/,"");U[Y]=1});var ca={};I=g.parse(G.data,
function(Y,da,Q){return(Y=R[da])?ca[Q]=Y:S[da]||da});E({map:ca,locator:U});F(S)})();var L=new r;return p(function(N){var O=H.data.indexOf("\x3csection"),S={isGraphicReport:H.data.indexOf("\x3ctable")<O,isMultiFeature:!1,type:b.STANDARD,portalJson:{files:D}};return p(f.provideEditorJson(S,{variableProvider:N}),function(){S.templateJson=q.deserialize(S.templateJson);S.isMultiFeature=m.hasMultiFeatureSections(S.templateJson);delete S.portalJson;return S})}(L),function(N){e.parseSites(w);var O=a.areasFromJson(w.analysisAreas),
S=w.combinedAreasInfo&&a.combinedAreasInfoFromJson(w.combinedAreasInfo)||{},R=w.attachmentsProvider&&n.getAttachmentsStoreFromJson(w.attachmentsProvider),U={isMultiFeature:N.isMultiFeature&&1<O.length,reportTitle:null,templateJson:N.templateJson,reportObject:N,fieldData:{specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],reportInfo:null},analysisAreas:O,combinedAreasInfo:S,reverseAnalysisAreasOnMap:!0,attachmentsStore:R,templateVariableProvider:L,customLogo:B,
config:{}};e.populateCombinedAreasInfo(U.combinedAreasInfo,U.analysisAreas);d.provideAreasIndexes(U);c.setGeoenrichmentUrl(null);z&&z.forEach(function(Z){switch(Z){case "Maps":c.addCapability("FormatInfographicsMaps");break;case "ImageUrls":c.addCapability("FormatInfographicsImageUrls")}});return p(k.applyRunReportAndGetDataResults(I,U)).then(function(){return U})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportDataProcessor":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred ./tasks/EnrichAreasTask ./tasks/RunReportTask ./data/AreaCalculatorsUtil ./data/VariablesUtil ./CustomReportsManager ./stdGeographies/StdGeographiesModel esri/dijit/geoenrichment/utils/DateUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ../../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../../core/infographics/utils/InfographicJsonUtil ../../config ../../countryConfig".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u){return{runReportAndGetData:function(v,w){return p([d.getCustomReportByID(v),w]).then(function(z){var E=z[0];z=z[1];return(new g).execute({portalUrl:v.portalUrl,analysisAreas:v.analysisAreas,countryID:v.countryID,hierarchy:v.hierarchy,report:{reportID:E.reportID,portalUrl:E.templateData.getPortalUrl(!0),modified:E.modified,isMultiFeature:E.isMultiFeature},attachmentsStore:z,cacheResult:r.runReportTask.cacheResult}).then(function(F){return{taskIDs:F.taskIDs,
areaData:F.areaData,reportInfo:F.reportInfo}},function(F){v.fieldData.errors.push(F);return(new l).reject(F)})})},runReportFromVariables:function(v){var w={};v.variables.fullNames.forEach(function(z){var E=h.createFieldNameFromSource(z);w[z.substr(z.indexOf(".")+1)]=E});return(new k).enrichAreas({portalUrl:v.portalUrl,analysisAreas:v.analysisAreas,countryID:v.countryID,hierarchy:v.hierarchy,fields:a.convertForEnrich(v.variables),comparisonLevels:v.comparisonLevels||q.getDefaultLevels()}).then(function(z){var E=
v.analysisAreas.map(function(){return{}});e.addEnrichFeatures(z,w,h.DATA_COLLECTIONS_CALCULATOR_NAME,E);return{areaData:E}},function(z){v.fieldData.errors.push(z);return(new l).reject(z)})},applyRunReportAndGetDataResults:function(v,w){if(v&&v.areaData){var z=w.templateJson;w.fieldData.specialTradeAreaCalculatorName=z.metadata&&z.metadata.specialTradeAreaCalculatorName;delete z.metadata;w.fieldData.runReportTaskIDs=v.taskIDs;w.fieldData.areaData=v.areaData;(w.fieldData.reportInfo=v.reportInfo)&&this._populateReportDataFromReportInfo(v.reportInfo,
w);this._reportDataFromAreas(w.analysisAreas,w.fieldData.areaData);this._reportDataFromReport(w.reportObject,w.fieldData,w.combinedAreasInfo);return this._populateReportDataFromAttachmentsStore(w)}},_populateReportDataFromReportInfo:function(v,w){w.reportTitle=w.reportObject.title=w.reportTitle||v.Title||v.Name||"";w.fieldData.metadata.Name=v.Name||w.reportTitle;v.country&&!u.getCurrentCountry()&&(u.setCountry(v.country),u.setHierarchyID(null));v.stdLevels&&!u.getGeographiesModel()&&u.setGeographiesModel(new c({levels:v.stdLevels}));
if(r.updateVariableInfoFromDataXml||r.isPlayerOnServer){var z=v.variables;m.processTemplateFieldInfos(w.templateJson,function(E){if(E.hasVariable&&E.variableID&&E.templateName){var F=E.templateName.indexOf("."),D=E.templateName.substr(0,F);F=E.templateName.substr(F+1);(D=z[D]&&z[D][F])&&D.alias&&(E.alias=D.alias,E=w.templateVariableProvider.get(E.templateName))&&(E.alias=D.alias,D.vintage&&(E.vintage=D.vintage),D.source&&(E.source=D.source))}})}v=n.collectVariablesStats(w.templateJson);v=w.templateVariableProvider.getVariablesDataVintageAndSources({usedVariablesCache:v});
w.reportObject.dataVintageDescription=v.dataVintageDescription||w.reportObject.dataVintageDescription;w.reportObject.dataSources=v.dataSources||w.reportObject.dataSources;w.reportObject.dataVintage=v.dataVintage||w.reportObject.dataVintage},_populateReportDataFromAttachmentsStore:function(v){var w=v.attachmentsStore,z=[];v.analysisAreas.forEach(function(E,F){w.supportsMultipleAreas&&w.setCurrentAnalysisAreaIndex(F);z.push(t(w.getNotes(),function(D){if(D&&D.length){var B={attributes:{}};B.attributes[f.SITENOTES_FIELD_NAME]=
D.map(function(y){return y.text}).join("\x3cbr/\x3e\x3cbr/\x3e");D.forEach(function(y,A){B.attributes[f.getSiteNoteFieldNameAt(A+1)]=y.text});(D=v.fieldData.areaData[F])&&e.addFeatureAttributesCalculator(B,D)}}));z.push(t(w.getAttributes(),function(D){if(!D||!D.length)return null;var B={attributes:{}};D.forEach(function(y){B.attributes[y.name]=y});(D=v.fieldData.areaData[F])&&e.addFeatureAttributesCalculator(B,D)}))});return p(z)},_reportDataFromAreas:function(v,w){v.forEach(function(z,E){if(E=w[E])e.addFeatureAttributesCalculator(z.feature,
E),e.addAreaInfoCalculator(z,E)})},_reportDataFromReport:function(v,w,z){var E=w.metadata;v&&!E.Title&&(E.Title=v.title);E.Subtitle=w.reportInfo&&w.reportInfo.Subtitle||"";E.Source=E.Source||v.dataVintageDescription||"Esri";E.DataSources=E.DataSources||v.dataSources||"Esri";E.DataVintage=E.DataVintage||v.dataVintage||"";E.Date=b.getReportFooterDate();E.Copyright="\u00a9 "+b.getFullYear()+" Esri";E.ProductLabel="";E.ProductUrl="";E.PhoneNumber="";E.TrialUrlText="";v.isMultiFeature&&(E.SITE_NAME=z.locationName||
z.name,E.STORE_NAME=z.locationName||z.name,E.AREA_DESC2=z.description||z.name,E.STORE_ADDR=z.address)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/EnrichAreasTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/kernel esri/SpatialReference esri/tasks/FeatureSet esri/geometry/Point ../GEUtil ../areas/AnalysisAreaUtil ../attachments/AttributesUtil ../../../core/supportClasses/map/Projector ../../../countryConfig esri/dijit/geoenrichment/utils/CoordinateUtil".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n){function q(r){return(r=r&&g.id.findCredential(r)||g.id.credentials[0])&&r.token}return t(null,{enrichAreas:function(r){var u={};return l(this._analysisAreasToStudyAreas(r.analysisAreas,r.countryID,r.comparisonLevels),function(v){u.studyAreas=v;r.report?u.analysisVariables=[{itemid:r.report.reportID,url:r.report.portalUrl,token:q(r.portalUrl),outFields:["*"]}]:r.fields&&(u.analysisVariables=r.fields);return this._doRunTask(u,r,"enrich")}.bind(this)).then(this._handleFeatureSetsRequest.bind(this))},
createReport:function(r){var u={f:"bin",format:"xml",reportfields:{}};u.report={itemid:r.report.reportID,url:r.report.portalUrl,token:q(r.portalUrl)};return l(this._analysisAreasToStudyAreas(r.analysisAreas,r.countryID,null,r.getAttributes),function(v){u.studyAreas=v;return this._doRunTask(u,r,"createReport")}.bind(this))},_analysisAreasToStudyAreas:function(r,u,v,w){var z=this;v=v&&v.map(function(E){return{layer:E}});return k(r.map(function(E,F){if(E.geographies&&E.geographies.length){var D=z._studyAreaFromGeographies(E.geographies,
u,!0);E.feature&&E.feature.attributes&&(D.attributes=p.mixin({},D.attributes,E.feature.attributes))}else D={attributes:p.mixin({},E.feature.attributes),geometry:E.feature.geometry.toJson()};v&&(D.comparisonLevels=v);return k([z._getStorePointForArea(E),w&&w(E)]).then(function(B){var y=B[0];B=B[1];D.attributes=D.attributes||{};y&&(D.attributes.STORE_LAT=D.attributes.STORE_LAT||y.STORE_LAT,D.attributes.STORE_LONG=D.attributes.STORE_LONG||y.STORE_LONG);D.attributes.STORE_ID=F+"";B&&B.forEach(function(A){D.attributes[A.name]=
f.formatAttributeValueForStudyArea(A)});return D})}))},_getStorePointForArea:function(r){if(r=r.location&&r.location.geometry||r.buffer&&r.buffer.point){r=r instanceof d?r:new d(r);var u=b.geometryToLatLong(r);return u?u:l(h.projectGeometries(r,new e(n.WGS_84_WKID)),function(v){return b.geometryToLatLong(v)})}},createFeatureForGeographies:function(r,u){return this._createFeaturesForGeographies(r,u,!0).then(function(v){return v[0]})},createFeaturesForGeographies:function(r,u){return this._createFeaturesForGeographies(r,
u,!1)},_createFeaturesForGeographies:function(r,u,v){r={returnGeometry:!0,outSR:u.outSR||new e(n.WEB_MERCATOR_WKID),studyAreas:v?[this._studyAreaFromGeographies(r,u.countryID,!0,u.generalizationLevel)]:r.map(function(w){return this._studyAreaFromGeographies([w],u.countryID,!1,u.generalizationLevel)},this),dataCollections:["GlobalIntersect"]};return this._doRunTask(r,u,"enrich").then(this._handleFeatureSetsRequest.bind(this))},_studyAreaFromGeographies:function(r,u,v,w){var z={sourceCountry:u,layer:null,
ids:null},E=null,F=[],D;r.forEach(function(B){if(!B||!B.id)throw Error("Wrong geography.");var y=B.levelId;if(y)if(!E)E=y;else if(v&&E!==y)throw Error("Geographies have different level IDs.");F.push(B.id);B.sourceCountry&&(z.sourceCountry=B.sourceCountry);B.hierarchy&&(z.hierarchy=B.hierarchy);B.attributes&&(D=p.mixin(D||{},B.attributes))});z.layer=E;z.ids=v?[F.join(",")]:F;z.attributes=D;z.generalizationlevel=w;return z},createFeaturesForBuffer:function(r,u){u=u||{};var v={bufferUnits:r.units,bufferRadii:r.radii||
[r.radius],areaType:r.areaType||"RingBuffer"};"NetworkServiceArea"===v.areaType&&(v.travelMode=r.travelMode,v.networkOptions=r.networkOptions);r=r.point||r.polyline;v={returnGeometry:!0,outSR:u.outSR||r.spatialReference||new e(n.WEB_MERCATOR_WKID),dataCollections:["GlobalIntersect"],studyAreasOptions:v,studyAreas:[{geometry:r.toJson?r.toJson():r}]};return this._doRunTask(v,u,"enrich").then(this._handleFeatureSetsRequest.bind(this))},createFeaturesForBuffers:function(r,u){function v(E){var F=E.point||
E.polyline;return JSON.stringify(F.toJson?F.toJson():F)+";"+E.units+";"+E.areaType+";"+E.travelMode+";"+JSON.stringify(E.networkOptions)}var w={},z=[];r.forEach(function(E){var F=v(E),D=w[F],B=!1;if(D){var y=E.radii||[E.radius];D.radii.some(function(A){return-1!==y.indexOf(A)})&&(D=null,B=!0)}D||(D=p.clone(E),B||(w[F]=D),delete D.radius,D.radii=[],z.push(D));E.radii?D.radii=D.radii.concat(E.radii):D.radii.push(E.radius)});return k(z.map(function(E){return this.createFeaturesForBuffer(E,u)},this)).then(function(E){var F=
[];E.forEach(function(D){F=F.concat(D)});return F})},_doRunTask:function(r,u,v){r=p.mixin({useData:{sourceCountry:u.countryID,hierarchy:u.hierarchy||m.getHierarchyID()},forStorage:!1},r);return c[v](r)},_handleFeatureSetsRequest:function(r){return(new a(r[0])).features}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil":function(){define(["dojo/_base/lang","esri/layers/CodedValueDomain","esri/dijit/geoenrichment/utils/DateUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],
function(t,p,l,k){var g={composeAttributesFromFieldInfos:function(e,a){return e&&e.filter(function(d){return d.visible}).map(function(d){var c=d.fieldName,b=d.label,f=d.format&&d.format.places,h=d.format&&d.format.digitSeparator,m=d.format&&d.format.dateFormat,n=a[d.fieldName];d=(d=d.format)&&d.dateFormat?"esriFieldTypeDate":d&&void 0!==d.places?0<d.places?"esriFieldTypeDouble":"esriFieldTypeInteger":"esriFieldTypeString";return{name:c,alias:b,places:f,digitSeparator:h,dateFormat:m,value:n,type:d,
domain:null,length:void 0}})},formatAttributeValue:function(e,a){a=a||{};var d=a.hasOwnProperty("unavailableDataValue")?a.unavailableDataValue:"";if(!e||null===e.value||void 0===e.value)return d;if(!a.skipFormattedValue&&e.formattedValue&&e.formattedValue!==d)return e.formattedValue;var c=e.domain&&"codedValue"===e.domain.type?new p(e.domain):null;c?(a=c.getName(e.value))||(a=e.value+""):"esriFieldTypeString"===e.type?a=e.value:"esriFieldTypeDate"===e.type?a=l.formatDateShort(e.value):(a=a.format,
a=k.formatNumber(e.value,{places:a&&void 0!==a.decimals?a.decimals:e.places,noSeparator:a&&void 0!==a.useThousandsSeparator?!a.useThousandsSeparator:!1===e.digitSeparator,preserveTrailingZeroes:!0}));return null===a||void 0===a?d:a},formatAttributeValueForStudyArea:function(e){var a;e&&null!==e.value&&void 0!==e.value||(a=!0);a||(a=e.domain&&"codedValue"===e.domain.type||"esriFieldTypeDate"===e.type);return a?g.formatAttributeValue(e):e.value},getAttributeTypeForStudyArea:function(e){return"esriFieldTypeDate"===
e.type?"esriFieldTypeString":e.type},attributeToJson:function(e){return{name:e.name,alias:e.alias,type:e.type,value:e.value,domain:e.domain&&(e.domain.toJson?e.domain.toJson():t.clone(e.domain)),places:e.places,digitSeparator:e.digitSeparator,dateFormat:e.dateFormat,length:e.length}},attributeFromJson:function(e){return{name:e.name,alias:e.alias,type:e.type,value:e.value,domain:e.domain,places:e.places,digitSeparator:e.digitSeparator,dateFormat:e.dateFormat,length:e.length}}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/Projector":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/ProjectionUtil"],function(t,p,l,k,g){function e(a,d){return g.projectGeometries(a,d)}t=t(null,{_pendingInfos:null,_isBusy:!1,constructor:function(){this._pendingInfos=[]},addForProjection:function(a,d){if(this._isBusy)throw Error("Can't interrupt the current projection process.");a=a&&a.geometry||a;var c=new p;this._pendingInfos.push({geom:a,mapOrSR:d,dfd:c,index:this._pendingInfos.length});
return c.promise},project:function(){function a(n){var q=b[n];return l(e(q.geoms,q.mapOrSR),function(r){r.forEach(function(u,v){v=q.indexMap[v];h[v]=u;c[v].resolve(u)})})}var d=this;if(this._isBusy)throw Error("Can't interrupt the current projection process.");this._isBusy=!0;var c=[],b={};this._pendingInfos.forEach(function(n){c.push(n.dfd);var q=n.geom.type+";"+n.geom.spatialReference.wkid+";"+g.getSpatialReference(n.mapOrSR).wkid;q=b[q]=b[q]||{geoms:[],indexMap:{},mapOrSR:n.mapOrSR};q.geoms.push(n.geom);
q.indexMap[q.geoms.length-1]=n.index});this._pendingInfos.length=0;var f=[],h=[],m;for(m in b)f.push(a(m));return k(f).then(function(){d._isBusy=!1;return h})}});t.needProject=function(a,d){a=a&&a.geometry||a;return a.spatialReference&&a.spatialReference.wkid!==g.getSpatialReference(d).wkid};t.projectGeometries=e;return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/RunReportTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./parsers/DataXMLParser ./EnrichAreasTask ../areas/AnalysisAreaJsonUtil esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h){var m={_getCache:function(){return b.get("CreateReportResultCache")},_buildKey:function(q){return[q.countryID,q.hierarchy,JSON.stringify(d.areasToJson(q.analysisAreas,{excludeInfoTemplate:!0})),q.report.reportID,q.report.portalUrl,q.report.modified].join("_")},getCopy:function(q){q=this._buildKey(q);return(q=this._getCache()[q])&&p.clone(q)},copyAndPut:function(q,r){q=this._buildKey(q);this._getCache()[q]=r&&p.clone(r)},getResults:function(){var q=[],r;for(r in this._getCache())q.push(this._getCache()[r]);
return q}},n={execute:function(q){var r=q.cacheResult&&m.getCopy(q);if(r)return g(r);r=c.splitArrayToBunches(q.analysisAreas,10);var u;return l(r.map(function(v){function w(){var z=p.mixin({},q,{analysisAreas:v});z.getAttributes=function(E){if(!q.attachmentsStore)return null;if(!q.attachmentsStore.supportsMultipleAreas&&u)return u;q.attachmentsStore.supportsMultipleAreas&&q.attachmentsStore.setCurrentAnalysisAreaIndex(q.analysisAreas.indexOf(E));return g(q.attachmentsStore.getAttributes(),function(F){u=
u||F;return F})};return(new a).createReport(z).then(function(E){var F=E&&E.taskID;E=E&&E.result;try{h.emulateErrors.createReportError&&(E={error:{message:"Error test: something crashed on the server!"}});if(E&&"object"===typeof E)var D=E.error;if(!D&&"string"===typeof E&&-1!==E.indexOf("{"))try{var B=JSON.parse(E);D=B&&B.error}catch(A){}if(D)if(f.runReportTask.ignoreErrors)E=[];else return(new k).reject(D);var y=e.parse(E);return{taskID:F,areaData:y.areaData,reportInfo:y.reportInfo,originalXML:E,
error:D}}catch(A){return(new k).reject(A)}})}return g(w(),function(z){return!z||z.error?f.runReportTask.secondAttempt?w():z:z},function(z){return f.runReportTask.secondAttempt?w():(new k).reject(z)})})).then(function(v){var w={taskIDs:[],areaData:[],reportInfo:null,originalXMLs:[],errors:[]};v.forEach(function(z){w.taskIDs.push(z.taskID);w.originalXMLs.push(z.originalXML);z.error&&w.errors.push(z.error);w.areaData=w.areaData.concat(z.areaData);w.reportInfo=z.reportInfo});q.cacheResult&&!w.errors.length&&
m.copyAndPut(q,w);return w})}};t=t(null,{execute:function(q){console.log("Creating a new report...");return n.execute(q)}});t.CreateReportResultCache=m;return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/DataXMLParser":function(){define("esri/units esri/dijit/geoenrichment/utils/FieldUtil esri/dijit/geoenrichment/utils/JsonXmlConverter ../../data/AreaDataUtil ../../../../core/supportClasses/DocumentOptions ./AttrUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(t,p,l,k,g,e,a,d){function c(n){return n.innerHTML?n.innerHTML:n.tags&&n.tags.length&&n.tags[0].text||""}function b(n){var q={Title:null,Subtitle:null,country:null,hierarchyId:null,exportSettings:null};n.tags&&n.tags.forEach(function(r){if("ReportTitle"===r.name)q.Title=c(r);else if("ReportName"===r.name)q.Name=c(r);else if("ReportTitle2"===r.name)q.Subtitle=c(r);else if("CurrencyFormat"===r.name){r=c(r);var u=r.split(";")[0].replace("0","").trim();q.country={id:null,currencySymbol:u,currencyFormat:r}}else if("ReportLayout"===
r.name){var v=q.exportSettings={};r.tags&&r.tags.forEach(function(w){if("Options"===w.name&&w.attributes)v.addHeader=!!w.attributes.header,v.addDataSource=!!w.attributes.dataSource,v.addFooter=!!w.attributes.footer;else if("Page"===w.name&&w.attributes){v.pageSettings={};var z=w.attributes;if(z.width&&z.height&&z.units){w=Number(z.width);var E=Number(z.height);if(z=z.units===t.MILLIMETERS?"mm":z.units===t.CENTIMETERS?"cm":z.units===t.INCHES?"in":z.units===t.POINTS?"pt":null)v.pageSettings.pagesize=
g.combineCustomSizeString(w,E,z)}else z.size&&z.orientation&&(v.pageSettings.pagesize=z.size.toLowerCase(),v.pageSettings.orientation=z.orientation.toLowerCase())}})}});q.exportSettings&&q.Subtitle&&(q.exportSettings.reportSubtitle=q.Subtitle);return q}function f(n){function q(v){v.tags&&v.tags.forEach(function(w){var z=w.attributes.AREA_ID,E=u.areaIdToAttachmentsInfo[z];E||(E={attributes:null,notes:null,images:null},u.areaIdToAttachmentsInfo[z]=E);w.tags&&w.tags.forEach(function(F){"Attributes"===
F.name&&F.tags&&(E.attributes=F.tags.map(function(D){return{name:D.attributes.Name,alias:D.attributes.Alias,type:D.attributes.Type,value:p.isNumericField(D.attributes.Type)?Number(D.attributes.Value):D.attributes.Value}}));"Notes"===F.name&&F.tags&&(E.notes=F.tags&&F.tags.map(function(D){return{text:D.attributes.Text}}));"Images"===F.name&&F.tags&&(E.images=F.tags&&F.tags.map(function(D){return{url:D.attributes.Source,thumbnail:D.attributes.Thumbnail,description:D.attributes.Description,imageViewType:null}}))})})}
function r(v){var w;u.stdLevels=v.tags&&v.tags.map(function(z,E){w=w||z.attributes.Id.substr(0,z.attributes.Id.indexOf("."));return{id:z.attributes.Id,name:z.attributes.Caption,isWholeCountry:z.attributes.IsWholeCountry||0===E}});"US"===w&&(u.countrId="US");"CAN"===w&&(u.countrId="CA")}var u={areaIdToAttachmentsInfo:{},stdLevels:null,countrId:null};n.tags&&n.tags.forEach(function(v){"StudyAreas"===v.name?q(v):"StandardGeographyLevels"===v.name&&r(v)});return u}function h(n,q){function r(E){if(E=function(D){var B=
{},y,A;D.tags.forEach(function(I){var L=c(I),N=L,O=z[D.name][I.name];"string"===(O&&O.type)?L=String(L):(L=Number(L),isNaN(L)&&(L=N),d.emulateErrors.createReportNaN&&(L=NaN),d.emulateErrors.createReportNull&&(L=null));q&&(L=q(I.name,L,D.name));void 0===B[I.name]&&(B[I.name]=L);"AREA_ID"===I.name&&(H=L);"IDFNDFIELD"===I.name&&(y=L);"STORE_ID"===I.name&&(A=L)});var H=H||y;if(!H&&!A)return null;var G;!H&&A&&(G=Number(A));H&&void 0===v[H]&&(v[H]=w++);e.cleanUpAttrs(B,a.isPlayerOnServer?{STORE_ID:1,AREA_ID:1}:
null);return{name:D.name,attrs:B,areaIndex:void 0!==G?G:v[H]}}(E)){var F=u[E.areaIndex]=u[E.areaIndex]||{};F[E.name]?F[E.name].comparisonLevels.push(E.attrs):F[E.name]=k.createCalculator(E.attrs)}}var u=[],v={},w=0,z;n.tags[0].tags.forEach(function(E){"xs:schema"===E.name?z=m.parseSchema(E):r(E)});return{areaData:u,schemaParseResult:z}}var m={parseSchema:function(n){var q={};n.tags.forEach(function(r){"xs:element"===r.name&&r.attributes&&"ReportData"===r.attributes.name&&l.queryJson(r,"xs:element").filter(function(u){return!!u.tags}).forEach(function(u){var v=
q[u.attributes.name]={};l.queryJson(u,"xs:element").forEach(function(w){v[w.attributes.name]={type:"xs:string"===w.attributes.type?"string":"number",alias:w.attributes["msdata:Caption"]||"",vintage:w.attributes["msdata:Vintage"]||"",source:w.attributes["msdata:Source"]||""}})})});return q}};return{parse:function(n,q){return this._parseDataXmlJson(l.parseXml(n,{saveInnerHTML:!0}),q)},_parseDataXmlJson:function(n,q){if(!n||!n.tags||2>n.tags.length)return[];var r,u,v,w;n.tags.forEach(function(z){"ReportInfo"===
z.name?r=b(z):"ReportArea"===z.name?u=f(z):"ReportData"===z.name&&(z=h(z,q),w=z.areaData,v=z.schemaParseResult)});d.logData&&(console.log("DataXMLPareser.js \x3d\x3e areaData:"),console.log(w));u&&(r.country.id=u.countrId,r.areaIdToAttachmentsInfo=u.areaIdToAttachmentsInfo,r.stdLevels=u.stdLevels);r.variables=v;return{reportInfo:r,areaData:w}}}})},"esri/dijit/geoenrichment/utils/JsonXmlConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(t,p){function l(c,b,f,h){return d(f,
h)+"\x3c"+c+(b?a(b):"")+"\x3e"+(h?"\n":"")}function k(c,b,f){return d(b,f)+"\x3c/"+c+"\x3e"+(f?"\n":"")}function g(c,b,f,h){return d(f,h)+"\x3c"+c+(b?a(b):"")+" /\x3e"+(h?"\n":"")}function e(c,b,f){c=p.encodeXML(c,!1);return d(b,f)+c+(f?"\n":"")}function a(c){var b="",f;for(f in c){var h=c[f];Array.isArray(h)&&(h=h.join(";"));void 0===h||null===h||"number"===typeof h&&isNaN(h)||(b+=" "+f+'\x3d"'+p.encodeXML(h,!0)+'"')}return b}function d(c,b){if(!b)return"";b="";for(var f=0;f<c;f++)b+="     ";return b}
return t(null,{parseJson:function(c,b){function f(n,q){n.text||"#text"===n.name?m+=e(n.text,q,h):n.name&&(n.tags&&n.tags.length?(m+=l(n.name,n.attributes,q,h),n.tags&&n.tags.forEach(function(r){f(r,q+1)}),m+=k(n.name,q,h)):m+=g(n.name,n.attributes,q,h))}var h=b&&b.prettify,m="";b&&b.addDocumentOptions&&(m+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');f(c,0);return m=decodeURIComponent(encodeURIComponent(m).replace("%19",""))},parseXml:function(c,b){function f(u,v){u.name=v.nodeName;b.saveInnerHTML&&
(u.innerHTML=v.innerHTML);if(v.attributes&&v.attributes.length){u.attributes={};for(var w=0;w<v.attributes.length;w++){var z=v.attributes[w],E=z.value;if(!0===E||"true"===E)E=!0;else if(!1===E||"false"===E)E=!1;else if(h&&E){var F=Number(E);isNaN(F)||(E=F)}u.attributes[z.nodeName]=E}}if(v.childNodes&&v.childNodes.length)for(u.tags=[],w=0;w<v.childNodes.length;w++){if(E=z=v.childNodes[w],"#text"!==E.nodeName||(m?E.nodeValue.trim():E.nodeValue))E={},u.tags.push(E),f(E,z)}else"#text"===v.nodeName&&(delete u.name,
u.text=p.decodeXML(v.nodeValue))}b=b||{};var h=b.parseNumbers,m=b.ignoreWhiteSpacedTextNodes;m=void 0===m?!0:m;var n={};c=(new DOMParser).parseFromString(c,"text/xml").childNodes;for(var q=0;q<c.length;q++)if(1===c[q].nodeType){var r=c[q];break}r&&f(n,r);return n},queryTopJson:function(c,b){return this.queryJson(c,b,!0)},queryJson:function(c,b,f){function h(n,q){n.tags&&n.tags.forEach(function(r){(b.test?b.test(r.name):r.name===b)&&m.push(r);f&&0===q||h(r,q+1)})}var m=[];h(c,0);return m},traverseJson:function(c,
b){function f(m){h||(!0===b(m)?h=!0:m.tags&&m.tags.forEach(f))}var h=!1;f(c)},getInnerHTML:function(c){return c.innerHTML?c.innerHTML.trim():this.parseJson(c).replace(/^<[^<]*>/,"").replace(/<\/[^<]*>$/,"").trim()},_IS_RICH_RE:/<.+>.*<\/.+>|<br\s*\/>|<\/br>/,_UNRICH_RE:/<.*?>/g,isRichText:function(c){return(c=String(c))&&this._IS_RICH_RE.test(c)},unrichHTML:function(c){if(!c)return"";c=p.decodeXML(String(c).trim()).replace(this._UNRICH_RE,"");0===c.indexOf("\x3c")&&-1!==c.indexOf("\x3e")&&(c="");
return c}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/PageUnitsConverter","../themes/ThemeLibrary"],function(t,p,l){var k={},g={a:[[841,1189],[594,841],[420,594],[297,420],[210,297],[148,210],[105,148],[74,105],[52,74],[37,52],[26,37]],b:[[1E3,1414],[707,1E3],[500,707],[353,500],[250,353],[176,250],[125,176],[88,125],[62,88],[44,62],[31,44]],c:[[917,1297],[648,917],[458,648],[324,458],[229,
324],[162,229],[114,162],[81,114],[57,81],[40,57],[28,40]],letter:[216,279],legal:[216,356],tabloid:[279,432],ledger:[432,279]};k.PAPER_SIZES=g;var e={};"a3 a4 a5 b4 b5 c4 c5 letter legal tabloid ledger".split(" ").forEach(function(a){var d=2===a.length?g[a[0]][a[1]]:g[a];e[a]={portrait:{w:p.mmToIn(d[0]),h:p.mmToIn(d[1])},landscape:{w:p.mmToIn(d[1]),h:p.mmToIn(d[0])}}});k.SIZE_TYPE_TO_DIM_HASH=e;k.hasStandardSize=function(a){return e[a]};k.getSupportedPageSizes=function(){var a=[],d;for(d in g)1===
d.length?g[d].forEach(function(c,b){a.push(d+b)}):a.push(d);return a};k.getPageDim=function(a,d,c){e[a]?a=e[a][d||"portrait"]:(a=a.split("x"),a={w:p.ptToIn(Number(a[0])),h:p.ptToIn(Number(a[1]))});c&&(a=t.clone(a),p.roundNDigitsObj(a,c.places));return a};k.getPageBox=function(a){if(!a)return null;var d=k.getPageDim(a.pagesize,a.orientation),c=p.inToPx(d.w);d=p.inToPx(d.h);return{w:c,h:d,contentW:c-(a.left||0)-(a.right||0),contentH:d-(a.top||0)-(a.bottom||0)}};k.combineCustomSizeString=function(a,
d,c){return p.convert(a,c,"pt",5)+"x"+p.convert(d,c,"pt",5)};k.getDefaultDocumentOptions=function(a){return t.mixin({pagesize:"letter",orientation:"portrait",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.12,fontSize:10,fontFamily:l.DEFAULT_FONT_FAMILY_CLASSIC},a)};k.getDefaultDocumentOptionsGraphicReport=function(a){return t.mixin({pagesize:"letter",orientation:"landscape",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",fontSize:10,fontFamily:l.DEFAULT_FONT_FAMILY_GRAPHIC},
a)};k.getClosestStandrdSizes=function(a,d){function c(m){var n=m.w/b.w;m=m.h/b.h;return Math.max(1-(1<n?1/n:n),1-(1<m?1/m:m))}d=void 0===d?.4:d;var b=k.getPageDim(a.pagesize,a.orientation);a=[];for(var f in e){var h=e[f];a.push({pagesize:f,orientation:"portrait",score:c(h.portrait)});a.push({pagesize:f,orientation:"landscape",score:c(h.landscape)})}a=a.filter(function(m){return m.score<=d});a.sort(function(m,n){return m.score-n.score});return a};k.tryGetStandardPageSize=function(a,d){function c(q){var r=
"portrait"===d?1:0;return q["portrait"===d?0:1]===f&&q[r]===h}if(k.SIZE_TYPE_TO_DIM_HASH[a])return a;var b=a.split("x"),f=p.convert(Number(b[0]),"pt","mm",0),h=p.convert(Number(b[1]),"pt","mm",0),m;for(m in k.PAPER_SIZES)if(b=k.PAPER_SIZES[m],1===m.length){if(b.some(function(q,r){if(c(q))return n=m+r,!0}))break}else if(c(b)){var n=m;break}return n||a};return k})},"esri/dijit/geoenrichment/utils/PageUnitsConverter":function(){define(["dojo/_base/lang"],function(t){function p(g,e,a){a&&(g=t.mixin({},
g));for(var d in g){var c=g[d];null!==c&&""!==c&&"boolean"!=typeof c&&("object"==typeof c?g[d]=p(c,e,a):(c=Number(c),isNaN(c)||(g[d]=e(c))))}return g}var l={},k="px pt mm cm in twip".split(" ");k.forEach(function(g){k.forEach(function(e){if(g!==e){var a=g+"To"+e.charAt(0).toUpperCase()+e.substr(1);l[a]=function(d,c){return l.convert(d,g,e,void 0!==c?c:5)}}})});l.convert=function(g,e,a,d){g=Number(g)||0;switch(e){case "in":g*=72;break;case "px":g*=.75;break;case "mm":g=g/25.4*72;break;case "cm":g=
g/2.54*72;break;case "twip":g/=20}switch(a){case "in":g/=72;break;case "px":g/=.75;break;case "mm":g=g/72*25.4;break;case "cm":g=g/72*2.54;break;case "twip":g=Math.round(20*g)}void 0!==d&&(g=l.roundNDigits(g,d));return g};l.pxToPtObj=function(g,e){return p(g,l.pxToPt,!e)};l.ptToPxObj=function(g,e){return p(g,l.ptToPx,!e)};l.roundNDigits=function(g,e){return Number(Number(g).toFixed(e))};l.roundNDigitsObj=function(g,e){for(var a in g){var d=g[a];"object"==typeof d?l.roundNDigitsObj(d,e):g[a]=l.roundNDigits(d,
e)}};return l})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/AttrUtil":function(){define([],function(){var t={},p="ID OBJECTID AREA_ID STORE_ID HasData aggregationMethod sourceCountry radiusIndex".split(" ");t.cleanUpAttrs=function(l,k){l&&p.forEach(function(g){k&&k[g]||delete l[g]})};return t})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],function(t){var p={},l={}.toString();p.arraysEqual=function(k,g){if(!k&&!g)return!0;
if(!k||!g||k.length!==g.length)return!1;for(var e=0;e<k.length;e++)if(k[e]!==g[e])return!1;return!0};p.composeIdentityFunction=function(k,g){var e="function"===typeof k?k:k?function(a){return a[k]}:function(a){return a};return function(a){return(a=e(a))&&a.toString?a.toString():g&&void 0===a?a:String(a)}};p.removeDuplicates=function(k,g){var e=[],a={};g=p.composeIdentityFunction(g,!0);t.forEach(k,function(d,c){var b=g(d);b===l&&(void 0===d["__ArrayUtil.js_uniqueKey__"]&&(d["__ArrayUtil.js_uniqueKey__"]=
"__ArrayUtil.js_uniqueKey__"+c),b=d["__ArrayUtil.js_uniqueKey__"]);void 0===b||b in a||(a[b]=d,e.push(d))});return e};p.splitArrayToBunches=function(k,g){g=g||100;for(var e=[],a,d=0,c=k.length;d<c;d++)a&&a.length!==g||(a=[],e.push(a)),a.push(k[d]);return e};return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaCalculatorsUtil":function(){define(["./AreaDataUtil","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../tasks/parsers/FeatureSetParser"],
function(t,p,l){return{addFeatureAttributesCalculator:function(k,g,e){e=e||p.AREA_ATTRIBUTES_CALCULATOR_NAME;for(var a in k.attributes)t.setAreaDataObjectValue(a,k.attributes[a],g,e)},addAreaInfoCalculator:function(k,g,e){e=e||p.AREA_ATTRIBUTES_CALCULATOR_NAME;t.setAreaDataObjectValue("SITE_NAME",k.locationName||k.name,g,e);t.setAreaDataObjectValue("STORE_NAME",k.locationName||k.name,g,e);t.setAreaDataObjectValue("AREA_DESC",k.shortName||k.name,g,e);t.setAreaDataObjectValue("AREA_DESC2",k.description||
k.name,g,e);t.setAreaDataObjectValue("AREA_DESC3",k.description||k.name,g,e);t.setAreaDataObjectValue("STORE_ADDR",k.address||"",g,e);t.setAreaDataObjectValue("STORE_LAT",k.latitude||"",g,e);t.setAreaDataObjectValue("STORE_LONG",k.longitude||"",g,e)},addEnrichFeatures:function(k,g,e,a){var d={},c={},b;for(b in g)d[b.toLowerCase()]=g[b],c[b.toUpperCase()]=g[b];k=l.parse(k,e||p.ENRICHED_DATA_NO_LEVELS,function(f){return g[f]||d[f.toLowerCase()]||c[f.toUpperCase()]});t.mergeAreaData(k,a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/FeatureSetParser":function(){define(["./AttrUtil"],
function(t){var p={ID_FIELDS:["ID","AREA_ID","IDFNDFIELD"],KNOWN_ATTRIBUTES:{StdGeographyLevel:1,StdGeographyName:1,StdGeographyID:1},parse:function(l,k,g){if(!l)return[];l=l.features||l;if(!l.length)return[];var e=[],a={},d=0;l.forEach(function(c){var b=c.attributes[p.ID_FIELDS[0]]||c.attributes[p.ID_FIELDS[1]];if(b){void 0===a[b]&&(a[b]=d++);var f={},h;for(h in c.attributes){var m=p.KNOWN_ATTRIBUTES[h]?h:g?g(h):h;m&&(f[m]=c.attributes[h])}t.cleanUpAttrs(f);c={name:k,attrs:f,areaIndex:a[b]}}else c=
null;c&&(b=e[c.areaIndex]=e[c.areaIndex]||{},b[c.name]?b[c.name].comparisonLevels.push(c.attrs):b[c.name]={data:c.attrs,comparisonLevels:[]})});console.log("FeatureSetPareser.js \x3d\x3e areaData:");console.log(e);return e}};return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/VariablesUtil":function(){define(["../dataCollections/DataCollectionsLoader"],function(t){var p={preprocessVariables:function(l,k){var g=p.convertForEnrich(p._splitVariables(l)).filter(function(e){return e.itemid});
return t.loadCustomDataVariables(g,{forceLowerCase:!0,portalUrl:k}).then(function(e){return p._splitVariables(l,e)})},_splitVariables:function(l,k){var g=[],e={};l.forEach(function(a){"string"===typeof a?g.push(a.toLowerCase()):a&&a.outFields&&a.outFields.forEach(function(d,c){c=a.itemid+"."+d;c=c.toLowerCase();g.push(c);e[c]={itemid:a.itemid,url:a.url,token:a.token,variable:k?k.fullNameToVariableCache[c]:{id:d}}})});return{fullNames:g,customDataMapping:e}},convertForEnrich:function(l){var k={},g=
[];l.fullNames.forEach(function(e){var a=l.customDataMapping[e];a?(e=k[a.itemid],e||(e={itemid:a.itemid,url:a.url,token:a.token,outFields:[]},e.url||delete e.url,e.token||delete e.token),e.outFields.push(a.variable.id),k[e.itemid]||(k[e.itemid]=e,g.push(e))):g.push(e)});return g}};return p})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/dataCollections/DataCollectionsLoader":function(){define("esri/dijit/geoenrichment/promise/all ../GEUtil ../ReportTemplateData esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/JsonXmlConverter esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(t,p,l,k,g,e){return{canLoad:function(){return p.canMakeRequests()},loadVariables:function(a){var d=k.get("DataCollectionsLoader"),c="*"===a.outFields,b=c?["*"]:a.outFields,f=a.countryID+";"+a.hierarchy+";"+b.join(";")+";"+!!a.forceLowerCase;d[f]||(c||(b=b.slice(),-1===b.indexOf("id")&&b.push("id")),d[f]=p.getDataCollections(a.countryID,a.hierarchy,{f:"json",outFields:c?"*":JSON.stringify(b),suppressNullValues:!0,AddDerivativeVariables:"all"}).then(function(h){var m={dataCollections:h,idToVariableCache:{},
fullNameToVariableCache:{}};h.forEach(function(n){n.data.forEach(function(q){function r(w){return a.forceLowerCase?w.toLowerCase():w}function u(w){if(c)return Object.keys(w).length;var z=0;b.forEach(function(E){void 0!==w[E]&&z++});return z}var v=m.idToVariableCache[r(q.id)];if(!v||u(q)>u(v))m.idToVariableCache[r(q.id)]=q;m.fullNameToVariableCache[r(n.dataCollectionID+"."+q.id)]=q})});return m}));return d[f]},loadCustomDataVariables:function(a,d){d=d||{};var c={idToVariableCache:{},fullNameToVariableCache:{}};
return t(a.map(function(b){var f=e.combineMulti([b.url||d.portalUrl,"sharing/rest/content/items",b.itemid,"resources/metadata.xml"]);return l.loadResource(f,b.token||e.getToken(d.portalUrl)).then(function(h){var m=g.parseXml(h.data);h=[];var n=g.queryJson(m,"Fields")[0];n&&(h=h.concat(g.queryJson(n,"Field")));(m=g.queryJson(m,"CalculatedFields")[0])&&(h=h.concat(g.queryJson(m,"Script")));h.forEach(function(q){function r(u){return d.forceLowerCase?u.toLowerCase():u}q=q.attributes;q={id:q.Name,fullName:b.itemid+
"."+q.Name,alias:q.Alias,description:q.Alias,type:"esriFieldType"+q.Type,precision:q.Precision?Number(q.Precision):void 0,vintage:q.Vintage};c.idToVariableCache[r(q.id)]=q;c.fullNameToVariableCache[r(q.fullName)]=q})})})).then(function(){return c})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportTemplateData":function(){define("dojo/_base/declare dojo/_base/lang dojo/request/xhr esri/dijit/geoenrichment/promise/all esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h){function m(n,q){var r=n.substr(n.lastIndexOf("/")+1),u=a.getProxyRule(n);return l(u&&u.proxyUrl?u.proxyUrl+"?"+n:n,{method:"POST",handleAs:"arraybuffer",data:"token\x3d"+q,headers:{"X-Requested-With":null,"Content-Type":"application/x-www-form-urlencoded; charset\x3dutf-8"}}).then(function(v){var w=!/\.xml$|\.txt$|\.json$/i.test(r);return{name:r,data:w?d.base64FromByteSource(v):decodeURIComponent(escape(d.binaryStringFromByteSource(v)))}})}t=t(null,{id:null,_portalUrl:null,
_baseUrl:null,constructor:function(n,q){this.id=n.id;this._portalUrl=q;this._baseUrl=b.combine(this._portalUrl,"sharing/rest")},getFiles:function(){var n=this;return this._getResources().then(function(q){var r=[];q.map(function(u){u=u.resource;"thumbnail.png"!==u&&r.push(n.getFileByName(u))});return k(r)})},getFileByName:function(n){return m(this.getItemResourceUrl(n,!1),this._getToken())},getItemResourceUrl:function(n,q){n=this._baseUrl+"/"+this._contentItemPath(this.id+"/resources/"+n);return q?
b.addQueryPart(n,"token\x3d"+this._getToken()):n},updateFile:function(n,q){var r=this;return h.request({url:this._baseUrl,urlSuffix:"content/items/"+this.id}).then(function(u){var v=f.fromFileData(n,q);return h.request({url:r._baseUrl,urlSuffix:"content/users/"+u.owner+"/"+u.ownerFolder+"/items/"+r.id+"/updateResources"},{content:{file:v,filename:n}})})},_contentItemPath:function(n){return"content/items/"+n},_getToken:function(){var n=g.id.findCredential(this._portalUrl)||g.id.credentials[0];return n&&
n.token},_getResources:function(){var n=this;return c.query(function(q){return e({url:n._baseUrl+"/"+n._contentItemPath(n.id+"/resources"),content:p.mixin({f:"json",token:n._getToken()},q),handleAs:"json"},{usePost:!0})},null,"resources").then(function(q){return q.resources})},getPortalUrl:function(n){return n?/[^:]+:\/\/(.+)$/i.exec(this._portalUrl)[1]:this._portalUrl}});t.loadResource=m;return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/CustomReportsManager":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./PortalManager ./ReportTemplateData ./StandardGraphicReportTemplates esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/PortalQueryUtil esri/dijit/geoenrichment/utils/UrlUtil ../../config ../../countryConfig".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h){var m={TEMPLATE_TYPE:"Report Template",PLAYER_STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriReportPlayerStandardInfographic",STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriWebStandardInfographicReport",GALLERY_INFOGRAPHIC_TYPEKEYWORD:"esriWebGalleryInfographicReport",MOBILE_INFOGRAPHIC_TYPEKEYWORD:"esriMobileFactsInfographicReport",GALLERY_INFOGRAPHIC_USER:"esri_reports",resetCache:function(){a.set("CustomReportsManager",{})},_getCache:function(){return a.get("CustomReportsManager")},
getCustomReports:function(n){var q=this,r=b.getPortalUrl(n.portalUrl);return l(k.getSignedInPortal(r),function(u){u=u.user.username;u={q:c.combineQueryString({type:"Report Template",typeKeywords:n.typeKeywords,owner:!n.publicOnly&&u}),sortField:"modified",sortOrder:"desc"};return d.queryCommon(b.combine(r,"sharing/rest/search"),u).then(function(v){v=v.map(function(w){return q.prepareCustomReportFromItem(w,r,n)});return q._getCountryReports(v,n.countryID)})})},_getCountryReports:function(n,q){return n&&
("*"===q?n:n.filter(function(r){return!r.countries||r.countries.split(",").some(function(u){return q===u.trim()})}))},prepareCustomReportFromItem:function(n,q,r){function u(w){return"string"===typeof w?"true"===w:!!w}var v=t.mixin({},n.properties||n.details);v.isGraphicReport=u(v.isGraphicReport);v.isMultiFeature=u(v.isMultiFeature);v.reportID=n.id;q={title:n.title,templateData:q&&new g(n,q),modified:n.modified instanceof Date?n.modified.getTime():n.modified};r&&r.attachItemProperty&&(q[r.attachItemProperty]=
n);t.mixin(q,v);return q},getCustomReportByID:function(n){var q=this,r=this._getCache()[n.reportID];if(r)return r;var u=b.getPortalUrl(n.portalUrl);return this._getCache()[n.reportID]=l(k.getSignedInPortal(u),function(v){return v.user.getItem(n.reportID).then(function(w){return w&&q.prepareCustomReportFromItem(w,u,n)})}).otherwise(function(v){delete q._getCache()[n.reportID];return n.ignoreError?null:(new p).reject(v)})},tryFindReportIdByAlias:function(n){var q=this,r=e.aliasToID(n.countryID,n.reportID);
if(null==r)return null;var u=b.getPortalUrl(n.portalUrl);return l(r&&this.getCustomReportByID({reportID:r,portalUrl:u,ignoreError:!0,attachItemProperty:n.attachItemProperty}),function(v){return v?v&&(n.returnObject?v:v.reportID):l(q.getCustomReports({portalUrl:u,countryID:n.countryID,typeKeywords:"esriReportPlayerStandardInfographic",publicOnly:!0,attachItemProperty:n.attachItemProperty}),function(w){function z(A){A=A.split(".");return Number((Number(A[0])+Number(A[1])/100).toFixed(2))}var E=z(f.jsapiVersion),
F,D,B=-Infinity,y=Infinity;w.forEach(function(A){if(A.playerAlias===n.reportID){var H=z(A.jsapiVersion);E>=H&&H>B&&(B=H,F=A);E<H&&H<y&&(y=H,D=A)}});w=F||D;n.strictVersionCheck&&w&&w.jsapiVersion!==f.jsapiVersion&&(w=null);return w&&(n.returnObject?w:w.reportID)})})},itemUpdated:function(n){delete this._getCache()[n]},getFakeCustomReportByContext:function(n){return{title:"Generic template",type:"esriReportTemplateStandard",coverage:n.countryID,countries:n.countryID,hierarchy:n.hierarchy||h.getHierarchyID(),
isGraphicReport:!0,isMultiFeature:!1,reportID:null}}};m.resetCache();return m})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/PortalManager":function(){define(["dojo/Deferred","dojo/on","esri/dijit/geoenrichment/when","esri/arcgis/Portal","../../../utils/CacheUtil"],function(t,p,l,k,g){return{getSignedInPortal:function(e){var a=g.get("PortalManager.portal");if(!a[e]){var d=new t;a[e]=d.promise;var c=new k.Portal(e);p(c,"load",function(){c.user?d.resolve({user:new k.PortalUser({portal:c,
credential:{userId:c.user.username,server:c.url,token:"",expires:9999999999999,creationTime:9999999999999,scope:"portal",resources:[c.portalUrl]}}),portal:c}):l(c.signIn()).then(function(b){d.resolve({user:b,portal:c})})})}return a[e]}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/StandardGraphicReportTemplates":function(){define(["dojo/_base/lang","../../config","dojo/i18n!esri/nls/jsapi"],function(t,p,l){function k(){return a?a:a={"3.25":{"US.census":[{id:"e2a6868f979f4e37896b631581ae4918",
alias:"demographic-summary"},{id:"88420f4a98bb45cbacacbad67e23266e",alias:"key-facts"},{id:"efb6bee0a80d4801887ec4cf73aa67fc",alias:"marketing-profile"},{id:"12867e4a89d5461fbbe3b9c6c181993a",alias:"at-risk-population"},{id:"6637be1fbddf4e948fbd09ce6a7a7888",alias:"portrait-property-flyer"},{id:"02c1124e916847249aa91b9ce48c2552",alias:"skyscraper"},{id:"3afd4c5089584b089af5b0037d74a9d1",alias:"transportation-to-work"},{id:"a696eae378974ed5a63510fa70bed011",alias:"health-care"},{id:"c931fc6ebdb440189a8bc6bd34115807",
alias:"executive-summary-call-outs"},{id:"96096c8afa4847dea936942b1f89acb5",alias:"tapestry-profile"},{id:"7a20b92b48cc4e63bf7ba956295de948",alias:"nearby-restaurants"}],"CA.census":[{id:"6c467040a8a64c33972045cf091bca5b",alias:"key-facts"}],"*.census":[{id:"11c4cec3c0d34c4aa51cd8877e2db4ef",alias:"key-facts"}]},"3.26":{"US.census":[{id:"a5161c2ca50d44429daf2bf9dbe73eb5",alias:"demographic-summary"},{id:"693269bfbf6c4851901a3c9c56550294",alias:"key-facts"},{id:"aceee34210e748ba95cb9cae21e196b9",alias:"marketing-profile"},
{id:"a7936c5ce77c4d698140db21ab1a7858",alias:"at-risk-population"},{id:"8d42e32b12154bc580af89483c208d56",alias:"portrait-property-flyer"},{id:"7be44b15e29847a383906aac5699cf00",alias:"skyscraper"},{id:"537230b385fb45d9a8d6e59265e36fbf",alias:"transportation-to-work"},{id:"89c6ff4d96de4acaa024b7a408f186b0",alias:"health-care"},{id:"0fa71e0a74294e7b8265e4cd507c7d17",alias:"executive-summary-call-outs"},{id:"f2754d21223a491798dbc0ef2c71858f",alias:"tapestry-profile"},{id:"866e6a839ee348dfae5a8ee9bdafbfc0",
alias:"nearby-restaurants"},{id:"f808dfceddd149ff85a9d8825d4e5a5f",alias:"multi-ring-comparison"}],"CA.census":[{id:"f982018306a34cc58756ce0ed78c6b0c",alias:"key-facts"},{id:"c47fa8d040364abe80d288bb606da576",alias:"multi-ring-comparison"}],"*.census":[{id:"3813621424fc4443af1dcecab65be89c",alias:"key-facts"},{id:"dd1fa81faaf94541831cae16788393ab",alias:"multi-ring-comparison"}]},"3.27":{"US.census":[{id:"3c6959a7c7c4450f9bdcc7063c9023d5",alias:"demographic-summary"},{id:"4cc0a5e007d946d5909524fcf80bc666",
alias:"key-facts"},{id:"fb9b9a501c974540a52ab6d1027a8bcc",alias:"marketing-profile"},{id:"b0f05d5926d6444da40d6bf0c5c9846e",alias:"at-risk-population"},{id:"5cf609b26ce24633a2edc58d7ebeb3fd",alias:"portrait-property-flyer"},{id:"686d7af60bcb410db051ec8465889231",alias:"skyscraper"},{id:"a79a099ab7be4c34a9b0b28831b1aa9c",alias:"transportation-to-work"},{id:"6f64bb63647246dcb5d268fc301614f6",alias:"health-care"},{id:"99e919a7e9fd4fa2b55779f0dc118da8",alias:"executive-summary-call-outs"},{id:"f32b961757f347e2976ba011ee20cb13",
alias:"tapestry-profile"},{id:"a266260cc3ec46c1b66c86f263feb8e4",alias:"nearby-restaurants"},{id:"dab290529fd44063a2d83e03a8dc49eb",alias:"multi-ring-comparison"},{id:"1499719e83754c81ae1477223c0dde39",alias:"property-details"},{id:"9c441f80f80348c8b5b747e2cf2a2ccd",alias:"employment-overview"},{id:"bb59cd9292ec47a0928900c5fb9c17b8",alias:"office-market-profile"},{id:"6f75892c4a5f4f5ba3d0edb4d8a0b13b",alias:"health-care-and-insurance"},{id:"a7524b019e1f482493e43f32ab9568a0",alias:"demographic-profile"},
{id:"45d528a3865547bb89792d4517db2e7a",alias:"commute-profile"},{id:"acf5c12b54b64550ad7f582c9c97ed28",alias:"target-market-summary"},{id:"489d923d29d44c2681171a590fb37742",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"91d1e8c9d0ea482b9947dfe4bdfbe0ba",alias:"key-facts"},{id:"e05eb227df9b4ceba0ace202b1d0c1e2",alias:"multi-ring-comparison"}],"NL.NLD_4orange":[{id:"77e9461032b24e47b6c6b643cf02381f",alias:"housing-profile"},{id:"b80fd38e5f43448da530521832e0dfba",alias:"insurance-profile"},
{id:"d36520d68d8e449c9f300be0e800f698",alias:"media-profile"},{id:"bad567fdf36e48e9a5108b66c96bf0ae",alias:"personicx-segmentation"},{id:"5726fe6cad4c491a863eff64e538231c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"e4bd37bb10c74798a3600ca7484846ac",alias:"base-demographic-profile"},{id:"a5d7db5138644a9e95d9af1b40b31bb9",alias:"demographic-comparison-profile"},{id:"205b45f626f84650a1ca948be4f97411",alias:"future-population-profile"},{id:"ee12a9d9a2e04fb6b93628f075719bc9",alias:"population-households-profile"},
{id:"3f857a2a8d14488abfcec383197e5a0b",alias:"consumer-spending-profile"},{id:"77369125467c4c9a8f3b9a628eda3347",alias:"base-demographic-profile-ja"},{id:"08abfdb8b8174846bd3723f094a88d86",alias:"demographic-comparison-profile-ja"},{id:"e5db2ced023d4c53a0ef9fe231d7fd15",alias:"future-population-profile-ja"},{id:"4c55f8ddb53345298e59bccfeb45e489",alias:"population-households-profile-ja"},{id:"24c8ef9a8c5d45c78791a84445eed29d",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"7aa819f9816a494ab28ab7604553f488",
alias:"base-demographic-profile"},{id:"710051b492c3481a83e01bd6bf3dd3bf",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d046bf33ce04b598afd391a0dd195c9",alias:"base-demographic-profile"}],"PR.ACS":[{id:"d8b9f282034d47db808175fef56a15e2",alias:"at-risk-population"},{id:"eab5646a29324a6282db3b8ca47bf2b3",alias:"commute-profile"},{id:"ed6b5a0736aa4e04862a1a4307c608cc",alias:"demographic-summary"},{id:"a4c64a9006544751ad18ce75a401112e",alias:"health-care-and-insurance"},{id:"96d00aefd766428394d6ee6698a56591",
alias:"coronavirus-impact-planning"}],"*.census":[{id:"365d52e6bac147a68a12eee229eb9b6b",alias:"key-facts"},{id:"0f7d2ba850fa40579cae1342001d80d7",alias:"multi-ring-comparison"}]},"3.28":{"US.census":[{id:"45cb423066194f5f98c6f4ff81124db3",alias:"demographic-summary"},{id:"98d5848a944b4787b2ca038256c7878d",alias:"key-facts"},{id:"879849b937ec4eb0bef31ff2861251f2",alias:"marketing-profile"},{id:"456d7a22adc8439a93d4164ed3846243",alias:"at-risk-population"},{id:"c7e01c953c7e4b70a46ca6408c3ed000",alias:"portrait-property-flyer"},
{id:"34330a47546f412d9d09632347da11d3",alias:"skyscraper"},{id:"d349b23334454274ab2a7a20a0a9a55d",alias:"transportation-to-work"},{id:"02086fe6b92b4ff5a9a7a8d172540fc9",alias:"health-care"},{id:"5d8b51e2b27b4832b193d9932bc6f862",alias:"executive-summary-call-outs"},{id:"1b07c48d4b58423990023b43150d7e99",alias:"tapestry-profile"},{id:"c21dd81cd9064649a4bb454530f12790",alias:"nearby-restaurants"},{id:"4d8c102ca7324d09931cfe65ab3a1168",alias:"multi-area-comparison"},{id:"9ed3b5dba02d4b46a3e063c8405fd0cc",
alias:"property-details"},{id:"db0606e41ee7485f88122069e74a9b6b",alias:"employment-overview"},{id:"2a43c204c1dd4a758087372d7d7d786b",alias:"office-market-profile"},{id:"f59a3621583d44bbafa14035c2ae3947",alias:"health-care-and-insurance"},{id:"ad58f06a480c4b16aadcff789f543cca",alias:"demographic-profile"},{id:"bd7390ab31dc485489733d22475db0ed",alias:"commute-profile"},{id:"38eab30d7e6840da869fee264ca9fc40",alias:"target-market-summary"},{id:"03b420681f6a466fb14e254669583244",alias:"coronavirus-impact-planning"}],
"CA.census":[{id:"6c0a945e91d44640a08776e5bed1b297",alias:"key-facts"},{id:"7464708f379b463c8eec8aed1315989f",alias:"multi-area-comparison"},{id:"425150e63a5346659721bfc0be94511b",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"e602295128e34ea2b2b50a1aa04253bf",alias:"housing-profile"},{id:"3d0f7e63256b43a59fcf037502380685",alias:"insurance-profile"},{id:"fbc685a8837945eb82cde447acfda982",alias:"media-profile"},{id:"da063bf765e341708fad9eeec07b09c7",alias:"personicx-segmentation"},{id:"5003049227804e5cba6ad3bfdbf2dba7",
alias:"spending-profile"}],"JP.EsriJapan":[{id:"bd9685651f484488ba24c2838a6a9000",alias:"base-demographic-profile"},{id:"f36b1cc0b9d84ea4b4db1742e875ff80",alias:"demographic-comparison-profile"},{id:"99a48ec44af94af290ab0e6d691a31c7",alias:"future-population-profile"},{id:"b29af5c2e6754f61ba38ad3128668095",alias:"population-households-profile"},{id:"d568dd78527c462e83eb68cb9ca02f09",alias:"consumer-spending-profile"},{id:"a29c9143bd044dad9475e6b6ee292e46",alias:"base-demographic-profile-ja"},{id:"3bb56ea4c4bd4a2aaa124e2e3a0fad60",
alias:"demographic-comparison-profile-ja"},{id:"28ef1772bd884db5ae8885731318e503",alias:"future-population-profile-ja"},{id:"7896c8adf89e4f47ab6e0acc7759a1cd",alias:"population-households-profile-ja"},{id:"6c28a650baaa40cda26f4fb372b14d0f",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"31cf6eac0339433f8b4b5f8b62e47554",alias:"base-demographic-profile"},{id:"ccf6bc8472ae4ca8852fec621197fec3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"5b60de05c1694a78b6b6ce8e10a48cd4",alias:"base-demographic-profile"}],
"PR.ACS":[{id:"f1d79448541642648293f4b75d7b595a",alias:"at-risk-population"},{id:"7943a0c2f1ca4cad967bb0bfeb8af3a4",alias:"commute-profile"},{id:"ef0579311aac4d14a771389f23263445",alias:"demographic-summary"},{id:"4edd44657989475493ca92a69e80f08c",alias:"health-care-and-insurance"},{id:"c440f0c671264732b16c39f6326a5987",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5886dbf41f984a0a8ec4eb4b5e231584",alias:"key-facts"},{id:"41727f86773c4cf2a37fd99446ea83fc",alias:"multi-area-comparison"}]},
"3.29":{"US.census":[{id:"368e2bf603fb42c4aa3dac0fce50cdf8",alias:"demographic-summary"},{id:"a32be4a9e51d4affa4cc1ddc812cb629",alias:"key-facts"},{id:"df985e2579004a3292c3d00615d53c39",alias:"marketing-profile"},{id:"8c56287427f84ae8b59142fc5bf1df4c",alias:"at-risk-population"},{id:"d95e40c3c93d480ab4d1d0b0adbbc5d4",alias:"portrait-property-flyer"},{id:"f989f9b820cd44d390187402447051b4",alias:"skyscraper"},{id:"0d322ac073584079a8cd6a1bda981fe7",alias:"transportation-to-work"},{id:"2b9f186425844ec390584b739ffca026",
alias:"health-care"},{id:"3e9ccce6cca64e70be19ed789de5f290",alias:"executive-summary-call-outs"},{id:"2a812da4de404ceba3969472d32c42e7",alias:"tapestry-profile"},{id:"2cc25f7b5f194012b39c90b5f9bdb8d3",alias:"nearby-restaurants"},{id:"72d1e9e4cdf94bf9a2020f8214bef9ca",alias:"multi-area-comparison"},{id:"27034d31ab124b9bbe4e63b7df2a0d90",alias:"property-details"},{id:"4a59e329df06480eaa534513eb15f465",alias:"employment-overview"},{id:"d4fe343c4d6f4bea840a715f5b033d2d",alias:"office-market-profile"},
{id:"cb2224cc9cb24ce288da729f0650ebf0",alias:"health-care-and-insurance"},{id:"484825ed241c49d58eaf718d46772051",alias:"demographic-profile"},{id:"afee0a2eb16e46cc9bc61b5d82133249",alias:"commute-profile"},{id:"1d32fabd95b446e99049aa0a04f5508e",alias:"target-market-summary"},{id:"783847f3f03f402d855985b45a8bf2df",alias:"population-trends"},{id:"83aef26e61ca41da9b269c06cc418d79",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"73f1c835b1624ff0b29a6a364f7ba6dc",alias:"key-facts"},{id:"84b05aed2d2f478eb6bb1e4749811cf1",
alias:"multi-area-comparison"},{id:"ea0737e1e7554c5caf2be381c28369cc",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"3d8cb941742d4fffbaca48c65b4bd5b5",alias:"housing-profile"},{id:"f126395e7bcc494899cfc1a13a34be1f",alias:"insurance-profile"},{id:"8da901e5729e457683f2e4f7081b1bda",alias:"media-profile"},{id:"f9ba90b373a245e1b8fd14a027cf1ba5",alias:"personicx-segmentation"},{id:"81fc53b93a0c4269848ce2ae22ec19e2",alias:"spending-profile"}],"JP.EsriJapan":[{id:"79b2394ea50d44f3b4c1b4bdabed6cc2",alias:"base-demographic-profile"},
{id:"9e824283a8954639ab0c0ac237b9e14d",alias:"demographic-comparison-profile"},{id:"f5812c2f542644368c0ff34eef7b731c",alias:"future-population-profile"},{id:"b51d7dde64c34a9796418c1788a6762d",alias:"population-households-profile"},{id:"48a993403d30431784b7bf47a06e4261",alias:"consumer-spending-profile"},{id:"531c59f55de646d5a78fef6c903a678f",alias:"base-demographic-profile-ja"},{id:"cf553f2090a64662a1f9efa8a355964c",alias:"demographic-comparison-profile-ja"},{id:"321150c8ac1049fc9cd253cb12c0b0bc",
alias:"future-population-profile-ja"},{id:"e0d6dea7667c47b49f159c207fc311e9",alias:"population-households-profile-ja"},{id:"ba5f50bd617e4519a9322ec24b9cd5b1",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"60ec4173caac4f87a831447d5bf7b450",alias:"base-demographic-profile"},{id:"98d3d99aadba47a8ab53b0dcd4eebf22",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3978b02fbc354acca14d4e959fa5b531",alias:"base-demographic-profile"}],"PR.ACS":[{id:"e2141ddd911c4aadb403db1e858edb51",alias:"at-risk-population"},
{id:"78360505668743e0a39ac0d085612dfa",alias:"commute-profile"},{id:"f296deceb6204f85853ac85e98ba3552",alias:"demographic-summary"},{id:"8a1c4d55a77c4cf9805cec380727fc5a",alias:"health-care-and-insurance"},{id:"8dd9de996ba0491d82a2ee8f01cd55b0",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5645a1d6023c4d8a9d02943ad57a7ab2",alias:"key-facts"},{id:"e29f56b6d67447e08a45d08981db987c",alias:"multi-area-comparison"}]},"3.30":{"US.census":[{id:"981382ffe90c40bbb60318b1ce338ba4",alias:"demographic-summary"},
{id:"f62dec6c9750496796fdc0619c4c107f",alias:"key-facts"},{id:"f737236a8b644f1597a4457862fa169c",alias:"marketing-profile"},{id:"4746caa1254e4d93af121ce74e9aa8d6",alias:"at-risk-population"},{id:"0bcd882dd7a34fd39ace173243534df0",alias:"portrait-property-flyer"},{id:"4a340b8e642945f6bb7a381d07fb26b6",alias:"skyscraper"},{id:"3e2a42b2d03e42cf91e9727f67273ec3",alias:"transportation-to-work"},{id:"c26e9577d48b4499a07b75215c97c394",alias:"health-care"},{id:"cbc348e601104d0c9bbe971c0297142a",alias:"executive-summary-call-outs"},
{id:"d65aaa42b9824864b40eb1a75f2e4cbd",alias:"tapestry-profile"},{id:"d6242e8dd02142bdb98b85f094d5cd9b",alias:"nearby-restaurants"},{id:"aed9e00873fa4010881daaa90e7e8d71",alias:"multi-area-comparison"},{id:"eb0e0df0856e43cdb874f96945c566ac",alias:"property-details"},{id:"e29ebec17c2c4f42a1a929c40163bb90",alias:"employment-overview"},{id:"b84d0f0f5c69461ea52ce2702f7327d6",alias:"office-market-profile"},{id:"5eba537af36e4490869917ee888bacc4",alias:"health-care-and-insurance"},{id:"afb01a3f91374f65ba4c6be9229f2c15",
alias:"demographic-profile"},{id:"8074d1bbbfed4858bb24400a0c7bf224",alias:"commute-profile"},{id:"33621d85b1df4547851c904aaa7d44d2",alias:"target-market-summary"},{id:"440170eaae5240e79abbb0bb7de22b27",alias:"population-trends"},{id:"0576deee38714cc69357de9675ab39ae",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e054928366604fc7b401dcb4a343cd4c",alias:"key-facts"},{id:"986bc92490234c2697d5771b9771166e",alias:"multi-area-comparison"},{id:"52233708250449bc84f906d86616cace",alias:"prizm-profile"}],
"NL.NLD_4orange":[{id:"22a86d0f982d4b10934f32129f2674f9",alias:"housing-profile"},{id:"9811b2babd5f4283822782867476b92c",alias:"insurance-profile"},{id:"59957cc0524344449fc6035053bb6c4a",alias:"media-profile"},{id:"2511035fed0140b8a7eb7ec7240e41eb",alias:"personicx-segmentation"},{id:"defc390648e543508be22704f1db659c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"91a180442f614c4d96fb40e33aa30948",alias:"base-demographic-profile"},{id:"e7415b6c9ff74922850851eac65ddbc6",alias:"demographic-comparison-profile"},
{id:"12e9eb63e4834d3681e15196bfc64642",alias:"future-population-profile"},{id:"291cc1bc2cee455483c96f50e5916f1d",alias:"population-households-profile"},{id:"217c72b7d0534ebc81658c71917c3e15",alias:"consumer-spending-profile"},{id:"48d5baf8e5574abda8fd776219fa0eb6",alias:"base-demographic-profile-ja"},{id:"01a7a0cbacf948b3b715e4f6c55aa5f2",alias:"demographic-comparison-profile-ja"},{id:"0317412d6fb541c9b4067923e314cad3",alias:"future-population-profile-ja"},{id:"0c826ce1e2de415aa2f7af3e615b1fe8",alias:"population-households-profile-ja"},
{id:"201211e23758432db4a841dae8ba9428",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"ec6477ce41fa464fb38a360cad0d3da3",alias:"base-demographic-profile"},{id:"e53b2c145f544efaa7d7b4e802c3d747",alias:"household-profile"}],"ES.ESP_AIS":[{id:"4483924cb42043ec85486c58e61a99ef",alias:"base-demographic-profile"}],"PR.ACS":[{id:"7e3b955c4d904624b4cea5d015e693a0",alias:"at-risk-population"},{id:"8927492627124fd0845de8c0dc02bd3f",alias:"commute-profile"},{id:"a308a300f3b4482ea57b4ea4a54ea5ef",
alias:"demographic-summary"},{id:"5800acd3784e4a6d88e3228e1af1164f",alias:"health-care-and-insurance"},{id:"d40e2ba95fec40c6ad68ceddde4e160b",alias:"coronavirus-impact-planning"}],"*.census":[{id:"b9d1ca815d9a4a3ab35196ec299f0917",alias:"key-facts"},{id:"6f6d601c2eef4bd1a87baa2652e7bb0b",alias:"multi-area-comparison"}]},"3.31":{"US.census":[{id:"784d0b69c02c4cac862b89b0e44cd8fb",alias:"demographic-summary"},{id:"f1bb3a222fab470dbb96a79a51496b2b",alias:"key-facts"},{id:"1780d5b264734757b86e4655d779b213",
alias:"at-risk-population"},{id:"8c34121585894e91a50c493c360912f0",alias:"skyscraper"},{id:"1c314d9d06844d44b408caba6099b56b",alias:"executive-summary-call-outs"},{id:"4ee838a250084c9bad84f094895c793c",alias:"tapestry-profile"},{id:"dfba27ac04694513aee257cdd185c8c2",alias:"nearby-restaurants"},{id:"d7cfb836282747199cf0febea42627cc",alias:"multi-area-comparison"},{id:"3a34213116a340a0bbd0d463025444a2",alias:"property-details"},{id:"b277b8572469425fa54c5506c3dbcdf3",alias:"employment-overview"},{id:"eaf35c41f5714f48a1aa61fcbd6ae05f",
alias:"office-market-profile"},{id:"688f86931cc345f796154717dc6d0a15",alias:"health-care-and-insurance"},{id:"cb4edb43a1ae473ca651388b5c3fa54f",alias:"demographic-profile"},{id:"49224c10d4ac4c7ab0f8e016165ce235",alias:"commute-profile"},{id:"db67445e4dfa4b6c8c1e5fd30b229c92",alias:"target-market-summary"},{id:"6c9360bfec9041ddba0f03440cb446ca",alias:"population-trends"},{id:"2ae07567c78847abacb14773ffe9dede",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"0704defc6960439ea5b9c484af15eb4c",
alias:"key-facts"},{id:"ee01fe05db964878bc6fb627e55dc9b1",alias:"multi-area-comparison"},{id:"a426bb6d944a46658640aee2ba480866",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"710037ca0f024ec5abbe4cf9fecad23f",alias:"housing-profile"},{id:"83bc643ea48344c892a8e9636e3677dd",alias:"insurance-profile"},{id:"53f63e3a9e854a8fa5e2c0222df6f848",alias:"media-profile"},{id:"ca9d66bf4bf940918129d0d5c97e0b50",alias:"personicx-segmentation"},{id:"ab19f90750fd469aa702f961b12eaee8",alias:"spending-profile"}],"JP.EsriJapan":[{id:"7f7c37e8f1fa4ab18b88368c12058eff",
alias:"base-demographic-profile"},{id:"25a71f196b7e4db182be346264b442dd",alias:"demographic-comparison-profile"},{id:"e1075eaada7744a59ecabfc445dcd877",alias:"future-population-profile"},{id:"8e2746d993584a7d94d0e66ca6dabdaa",alias:"population-households-profile"},{id:"bc9b91d7ae2c41a5bdece1d322ef6b88",alias:"consumer-spending-profile"},{id:"4f4736d5b2f842faaee83c57417c56b6",alias:"base-demographic-profile-ja"},{id:"bc400448bf3347619349cb7d4ccb3d87",alias:"demographic-comparison-profile-ja"},{id:"00ad3ad05e384d7ea764b356a950356d",
alias:"future-population-profile-ja"},{id:"db94d6af598f48778c4471f9fa0d6e4f",alias:"population-households-profile-ja"},{id:"c5f602a9d6714dd6bd6a2b720eced874",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"b0cd9df36d0747ecac2bc34f055f5583",alias:"base-demographic-profile"},{id:"1751ab1998db4e6fb79f484069605cfd",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d17356c9a5549dbaa4096365e7eb703",alias:"base-demographic-profile"}],"PR.ACS":[{id:"7923818907d248ff8dcd7a5941e89b57",alias:"at-risk-population"},
{id:"c0b28d710379405eac4ecb6a64d817b4",alias:"commute-profile"},{id:"4b64ec164a3d4830ae8a4cedf067f55a",alias:"demographic-summary"},{id:"5e47986d4c4644a29a28c92c077919f2",alias:"health-care-and-insurance"},{id:"11c43309216b4d4a8fbd9a03cbcc22ec",alias:"coronavirus-impact-planning"}],"*.census":[{id:"f2d46b136acc46e2a2220388ddc43be0",alias:"key-facts"},{id:"228155af0095410c961cc82f33cdcf49",alias:"multi-area-comparison"}]},"3.32":{"US.census":[{id:"2ff58abf55554be4b19006c1e607afaa",alias:"demographic-summary"},
{id:"a19b321e3adc441886e706bb9704005c",alias:"key-facts"},{id:"f1e3b0c93e1d44e299eb0b752f93b7db",alias:"at-risk-population"},{id:"3bbc96da4ca142c7b80b082b0f986110",alias:"skyscraper"},{id:"1302184a2f584b86943b6c51d40acace",alias:"executive-summary-call-outs"},{id:"58035dcee74b4875bcd951b9174155d1",alias:"tapestry-profile"},{id:"4da5867dfda046ddb4b82ab01b7cb568",alias:"nearby-restaurants"},{id:"4498b9e35665480cafe3985f788ca61d",alias:"multi-area-comparison"},{id:"83a11d5f38f84e709ff1e24786e963b4",
alias:"property-details"},{id:"0a0354d2d0d842d8bd8e05d40545fc5b",alias:"employment-overview"},{id:"400924aa9d5f4bee8b9dd0c0af21dfbb",alias:"office-market-profile"},{id:"0a502ea9be8a43fdb6cd2fb5ff7503bc",alias:"health-care-and-insurance"},{id:"6147ac21718149a69ce15831f12181ed",alias:"demographic-profile"},{id:"4cdaddd947064ca690ebc06eec06ea57",alias:"commute-profile"},{id:"a8fe08a9c5114260a2a6f7ca436d36f6",alias:"target-market-summary"},{id:"34a17e1fceb646228e94089ec5e0890f",alias:"population-trends"},
{id:"eb5d984d78364a6596cd97e0bf7901a5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"5f6e17f3729145959fb38ed2cd508970",alias:"key-facts"},{id:"c86709cbd72043708e09e4a641adfbd0",alias:"multi-area-comparison"},{id:"bd9e3a17678843d4b1fa0716af91c231",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"470686f333d140c7b516294465eea037",alias:"housing-profile"},{id:"ab11f2f11ea3439197769a8189451bea",alias:"insurance-profile"},{id:"f0e6736d0f364d4b88ea613746e57c81",alias:"media-profile"},{id:"bfe0814bc0604a8faa48d01b026ef7a5",
alias:"personicx-segmentation"},{id:"bd1d4c7be5ad41ae909267b5e9c5f2dc",alias:"spending-profile"}],"JP.EsriJapan":[{id:"b9dcbb9f31fd4be7bd96a2f89ce66a1c",alias:"base-demographic-profile"},{id:"830ddad066c14c0dad27367a1b2ef132",alias:"demographic-comparison-profile"},{id:"7574f89d591f432da6ffdb94dcfdac52",alias:"future-population-profile"},{id:"ec8785d4c9cb446394e07fa7dd8451fd",alias:"population-households-profile"},{id:"9ac85d73187548b2bb0d0b4a73f88199",alias:"consumer-spending-profile"},{id:"e99eee823684452fbe564fe42dac9535",
alias:"base-demographic-profile-ja"},{id:"8598d6a8550d46aebd3fd598ceaefae7",alias:"demographic-comparison-profile-ja"},{id:"fdf81ddffb374e3f898006ffa59e259e",alias:"future-population-profile-ja"},{id:"f2468c2fef314427bd0865b460ef554f",alias:"population-households-profile-ja"},{id:"a96f28fb67024109b7c33161f3c9b308",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"40a5ba79d1204e78ac6deaa633ccd59b",alias:"base-demographic-profile"},{id:"2e647098c613476bbd92b1e07331cb86",alias:"household-profile"}],
"ES.ESP_AIS":[{id:"7d82cae4b3fc4575bab56ec82f51c368",alias:"base-demographic-profile"}],"PR.ACS":[{id:"aa65005b75ba4e158afe63baa4bc5fe2",alias:"at-risk-population"},{id:"292a269a813e4d7797baf88a76c11a8c",alias:"commute-profile"},{id:"b1d50628f2484689b9e39d49fc2e16a0",alias:"demographic-summary"},{id:"64839b7a81be45e287e805afc145652e",alias:"health-care-and-insurance"},{id:"44be3c42b70c4aee840fdeb4656b7922",alias:"coronavirus-impact-planning"}],"*.census":[{id:"ce57630d5cc24759809dd54bc1f82c91",alias:"key-facts"},
{id:"c48ee0f58c8645bf8d689eb0db2d2936",alias:"multi-area-comparison"}]},"3.33":{"US.census":[{id:"55689c3ee7c1490e83accae002a8d164",alias:"demographic-summary"},{id:"173e40bebc9d426a8e4680242acafea4",alias:"key-facts"},{id:"218eba57314e476ba16d1d5d40bb0182",alias:"at-risk-population"},{id:"3d470c82d8664e34b5026675596a7a87",alias:"skyscraper"},{id:"b9381f481f9f417f9647e0a2c8686979",alias:"executive-summary-call-outs"},{id:"d2800b578d1c4dd38ac95ce36882d881",alias:"tapestry-profile"},{id:"d9d8109c537943a78a24d65110291b43",
alias:"nearby-restaurants"},{id:"2e835e58629a4f1e8192a729792b638f",alias:"multi-area-comparison"},{id:"6f3c32ed18834a4ea34b200e32ad7c33",alias:"property-details"},{id:"6b1267be3fcb401bbcb49afd221713cf",alias:"employment-overview"},{id:"67e6efc15cb142c2a7cc30a48a59c769",alias:"office-market-profile"},{id:"9d8b447adc634228b24deb315107c0f0",alias:"health-care-and-insurance"},{id:"e45f96db738140869981b7443b6e2658",alias:"demographic-profile"},{id:"88d896eada3340dc8f8f1a2406bd48f9",alias:"commute-profile"},
{id:"61492956f89a43ee86d245fca92858a2",alias:"target-market-summary"},{id:"91de69dede414856892dfdd94d2c4bab",alias:"population-trends"},{id:"ee9c6fdc902e4ea09509e4d1bf1582b5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"dfb663da790248fe89504c662c42aae3",alias:"key-facts"},{id:"9873fcafe7194fcf9dffa8bbb8e001a1",alias:"multi-area-comparison"},{id:"4766ad797ef84968be4b4d0d54b98416",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"2212ff30c72143e6bcd9b8f26b01c47f",alias:"housing-profile"},{id:"c5efcef364ac4d8f82a6d54010ff75c7",
alias:"insurance-profile"},{id:"e00894c000a94c42aefce551fe4e48c2",alias:"media-profile"},{id:"9d1da1c80e93407cb94589cee43a0f5a",alias:"personicx-segmentation"},{id:"578199262aa646bf8b0713f3f2160af6",alias:"spending-profile"}],"JP.EsriJapan":[{id:"00bd747c0e48477d8df692848560a8a2",alias:"base-demographic-profile"},{id:"8ac4bd99dd1848dc98967419ab8d299c",alias:"demographic-comparison-profile"},{id:"88f94b5e3b6d414d913957b46e9f8394",alias:"future-population-profile"},{id:"41864cea64f3432a90006eb9a1f97608",
alias:"population-households-profile"},{id:"44333ddcda38473d9a24010ed387eda7",alias:"consumer-spending-profile"},{id:"c35ebbeffb3b47fc9bbe3fc6283aaa7b",alias:"base-demographic-profile-ja"},{id:"6c8a565d12954927b83daaad81409a25",alias:"demographic-comparison-profile-ja"},{id:"fcba5d5750514c9c93b2cb5222609d98",alias:"future-population-profile-ja"},{id:"7ad858351b6b4268b791b6cc24bf4e0f",alias:"population-households-profile-ja"},{id:"7d94fec6df6b4bff9ad14f5b711f18c6",alias:"consumer-spending-profile-ja"}],
"DE.DEU_Nexiga":[{id:"571f323738c44d5a8b85d6d1e78d9c52",alias:"base-demographic-profile"},{id:"ef7624e051b6407488d8ad59b7979fc4",alias:"household-profile"}],"ES.ESP_AIS":[{id:"46e9329c7b2042fa84dfc1444f7decc0",alias:"base-demographic-profile"}],"PR.ACS":[{id:"0cb7ba4d407640ff967829ae7dd39396",alias:"at-risk-population"},{id:"7598826f28124abf9134801a607d56ce",alias:"commute-profile"},{id:"848c5cc8a4284065a0055b047a106adf",alias:"demographic-summary"},{id:"ecfc8db522004ea6848667e43589efd9",alias:"health-care-and-insurance"},
{id:"4685d4c6c51e4ef392bdab89c0af8979",alias:"coronavirus-impact-planning"}],"*.census":[{id:"e4d3d1675d0044089f98a0f85ea16c8b",alias:"key-facts"},{id:"33b6e27f43644811b8a58f15c0832a67",alias:"multi-area-comparison"}]},"3.34":{"US.census":[{id:"13cd4abfa97e43b9a5f9d4ddcb43f492",alias:"demographic-summary"},{id:"8861429ac06948f79cdcaaadb39d597f",alias:"key-facts"},{id:"1056cbef133f49a18409a192fbdc221a",alias:"at-risk-population"},{id:"25145b3ca4284dcc999c8d05182588cd",alias:"skyscraper"},{id:"7db2109b9f844be48f3e9154e992699f",
alias:"executive-summary-call-outs"},{id:"f43c00c7b10241c097fb71fd5acf1ec2",alias:"tapestry-profile"},{id:"5fb04926a70345c18d6e21d9972ea347",alias:"nearby-restaurants"},{id:"fdd0406e7815402cbf70716c68f4f7d6",alias:"multi-area-comparison"},{id:"7b716975146743b3a56762befaca71ad",alias:"property-details"},{id:"2c0be4fe4d7245e39b4afd9b8eb607a9",alias:"employment-overview"},{id:"c7f42910bc4b49209835e333c6078e71",alias:"office-market-profile"},{id:"7517a7a0409d42748c7ad94f81322bc2",alias:"health-care-and-insurance"},
{id:"9919270d8b4846cb86761103def73e76",alias:"demographic-profile"},{id:"0bb0cc183ae145febbf3585518eeaae6",alias:"commute-profile"},{id:"27853eda823e4574b0666d533ba39061",alias:"target-market-summary"},{id:"1df7c5b56b6e431982ef2da037c081c8",alias:"population-trends"},{id:"aaf4cc69e58f43ea87a0c1e493431dd8",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"3a2fb82b034d48bbb9474f8c158c32a8",alias:"key-facts"},{id:"100f5b4d3cca46b38fd651e39cce97b1",alias:"multi-area-comparison"},{id:"41f7b7cfe9cb490593ace88aa627c6ca",
alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"f5b0ec07181f4b58a01ee0ca1df8201a",alias:"housing-profile"},{id:"a5e0b9b228da4ba5baaa5811c57f6552",alias:"insurance-profile"},{id:"5d24250e3cc14b0db3b3f9884462efbf",alias:"media-profile"},{id:"f216c6574ae0453c951e66ee8fb6b20f",alias:"personicx-segmentation"},{id:"267c816948334e72ab9ed94253790e22",alias:"spending-profile"}],"JP.EsriJapan":[{id:"434e01eacc8e432c8400f5a5aef6f3e4",alias:"base-demographic-profile"},{id:"c44be13f1f8e412288e58048136681d6",alias:"demographic-comparison-profile"},
{id:"35c0c12ce88645e7b7cbc0ffe73af85d",alias:"future-population-profile"},{id:"e87fb84cffaa49dba14b104d5b994aa5",alias:"population-households-profile"},{id:"31a4988db08c41d6b9ce755b21ea0b26",alias:"consumer-spending-profile"},{id:"bf9f0203a4c14d03823beadb3f7ac043",alias:"base-demographic-profile-ja"},{id:"fdbe0d4286ab419981bc80a96b46bdb1",alias:"demographic-comparison-profile-ja"},{id:"7541a90960e345308f73e99e4da5c0a8",alias:"future-population-profile-ja"},{id:"f17ecec5cb8d4baeab7af68e1e9ce683",alias:"population-households-profile-ja"},
{id:"ddaf4fb6c09447f6beaf4218139bfa20",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"80c74804e91440f08695ba11456f96af",alias:"base-demographic-profile"},{id:"eb49e7ee98f04e1e914a4ce29bbfc7d3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"2e82d587530548569ad792556044342b",alias:"base-demographic-profile"}],"PR.ACS":[{id:"b473aa30469e4e2eabcca3da3f306e94",alias:"at-risk-population"},{id:"4e91594fb4fe4bf3be24380408f1b0c6",alias:"commute-profile"},{id:"321c818398684510ac62e3403ad6628f",
alias:"demographic-summary"},{id:"1c3d60191b12460ca9a23dfcbce0c1db",alias:"health-care-and-insurance"},{id:"5e6d78b1c4aa4168b7a3af5751d92261",alias:"coronavirus-impact-planning"}],"*.census":[{id:"530b6aa054664166a7a3ab5f1e82e19b",alias:"key-facts"},{id:"4b8ddef8e8f0406ea9b0a6c3d062186a",alias:"multi-area-comparison"}]},"3.35":{"US.census":[{id:"167425f5e12d421eb5784cd3681eab45",alias:"demographic-summary"},{id:"a1ab8710e1104385941825fe772d58fa",alias:"key-facts"},{id:"b3103dee1c994fa0916bd2b5c8ad2cab",
alias:"at-risk-population"},{id:"0d261009a37247b4913266bc7093fedb",alias:"skyscraper"},{id:"2e7b01260b7840c196f30be52bf0b57e",alias:"executive-summary-call-outs"},{id:"f47aebc28aa64c7f924053a8c1ee16bd",alias:"tapestry-profile"},{id:"36e6e303ebd943d4aa55604ba7dc0bc0",alias:"nearby-restaurants"},{id:"2f6307fad95f43b193ac74f236fa82d3",alias:"multi-area-comparison"},{id:"1ac99acae7cf44c182727aca1387acc9",alias:"property-details"},{id:"33cb09681a2147a5a07ae801596568c3",alias:"employment-overview"},{id:"8abaef7ba033448693dc6e6db55667c7",
alias:"office-market-profile"},{id:"d29fcd15f66f46edad86499675b0ec03",alias:"health-care-and-insurance"},{id:"e631e96f389b4075bc249c01d7f4d1b7",alias:"demographic-profile"},{id:"f97c7b4c8bf84390ad5a5807fb6ca417",alias:"commute-profile"},{id:"c9aef7db1d56495eaf0765e1f3a2d87d",alias:"target-market-summary"},{id:"b0f42ee46e80440cbb567a9a754ba7d4",alias:"population-trends"},{id:"ac36af7d86b74071a1cff5dc11f52ae8",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e1b06b3915bc4e9ba702a604931390f2",
alias:"key-facts"},{id:"aabeb118af9d4d0ba61177b82ff20e6c",alias:"multi-area-comparison"},{id:"d91115c92b96414b8bebd5d5bee75feb",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"dc94c7a6946a49b5a2f3997a1d751b5d",alias:"housing-profile"},{id:"caaaf49e014840a2a7b2497a970fabc0",alias:"insurance-profile"},{id:"67e0ad06a076477d81f853755fe34fd9",alias:"media-profile"},{id:"2b777fe129f149e9830fa5659d83d164",alias:"personicx-segmentation"},{id:"109338143a024b8eb70a1afcad567363",alias:"spending-profile"}],"JP.EsriJapan":[{id:"1f22c748ad5441a197c4c35ec3b88c6e",
alias:"base-demographic-profile"},{id:"3321fc47d60b465bbf1f8312a2656c9d",alias:"demographic-comparison-profile"},{id:"44f656e0dd634f248501030bec1e4e56",alias:"future-population-profile"},{id:"10bee112cd5c452db06145cc97739272",alias:"population-households-profile"},{id:"9d50b931700f4d7e8bfff04362baf2b7",alias:"consumer-spending-profile"},{id:"6f15e753e76741e5b11443d987f9e31b",alias:"base-demographic-profile-ja"},{id:"c89ff30c389b4af28c5e95d56b8b8a2b",alias:"demographic-comparison-profile-ja"},{id:"82cf4d90d4444a9fab0db12c38398ddb",
alias:"future-population-profile-ja"},{id:"de0f4294ae8548f8852d3cfc44689262",alias:"population-households-profile-ja"},{id:"aa60be09466d494dab06b7fd3f227838",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"f65d4ab5669541eb82f8cfa44892076d",alias:"base-demographic-profile"},{id:"8f24b985758840bc865eb510c3a096c4",alias:"household-profile"}],"ES.ESP_AIS":[{id:"19973b06ff48411cbe8da96db2201889",alias:"base-demographic-profile"}],"PR.ACS":[{id:"08263fc5aa27402284ad1dd80de03ffe",alias:"at-risk-population"},
{id:"1386ceb53e0741428b78182d5ad1295c",alias:"commute-profile"},{id:"52ca001ddcf54d4eab0bbc476a962486",alias:"demographic-summary"},{id:"79480fbe1f5048b69bc0611a2828d74b",alias:"health-care-and-insurance"},{id:"4a9c5dbf1ee6480bbed9a48bdb8aa2ed",alias:"coronavirus-impact-planning"}],"TH.EsriThailand":[{id:"1b202dbb81d7436c91dbd98f7f16da74",alias:"demographic-by-gender"},{id:"a7575375c72244e3819a694bf6dcbd52",alias:"key-facts-circle"},{id:"2403e972375d4b178185c2dbcf94979f",alias:"market-indicators"},
{id:"575cfdd3fa9b4e8fafced3a47944156d",alias:"nearby-finance"},{id:"48ee9e3d4a0b4a208a3257ef2cc07692",alias:"nearby-restaurants"},{id:"d446734d5e3e4d13a4c1aebdd9497793",alias:"population-profile"}],"IE.census":[{id:"e6ef23654f6e48fa8854931b539418ac",alias:"community-profile"},{id:"83d14bb8a70e415e9b7d4df3a6a32690",alias:"population-and-spending-profile"},{id:"6bdafe103ba647ed9fb1de0ac21412ea",alias:"site-statistics"},{id:"6e388a60f9bc4194b79ac26140bfb29e",alias:"market-indicators"}],"FR.census":[{id:"938a7f87e6fd4b238be125bb2b25e0ec",
alias:"market-indicators"}],"FR.FRA_EsriFrance":[{id:"4a53f2a681c54186a29b8e0f21b0d691",alias:"market-summary"},{id:"35a06097a0e5427c87f8d14235fb8655",alias:"summary"}],"GB.census":[{id:"60d7a69925de41719c5a1779cbe2f9fc",alias:"market-indicators"}],"AU.AUS_ABS":[{id:"bfaa3c492a714a2292cc195a4cec7157",alias:"chain-link"},{id:"a6f5005fc71d4e3692ba2dccbc9085c6",alias:"community-profile"},{id:"4890c1ff7a7c464cb37650a76b77ef20",alias:"hexagon-facts-dark"},{id:"685c139ab196404e992bbf3a5c1788c2",alias:"hexagon-facts-light"},
{id:"8a7f81f303c64baf93740102f5142420",alias:"international-community-profile"},{id:"558a0b0e8c9c45b5b5d5aa73525de87b",alias:"key-facts-abs"},{id:"9fe2117084584005a1724635ebcb7a03",alias:"occupation-profile"}],"*.census":[{id:"de0d25e45d4549439c440d9f893afe18",alias:"key-facts"},{id:"19f9971696f74bae8c8fd383a61abac3",alias:"multi-area-comparison"},{id:"8ce8f38bdb87448eb09c031e3206aa76",alias:"key-facts-circle"}]}}}function g(b){var f=k();b=b||p.jsapiVersion;b=f[b]||f["3.35"];f={};for(var h in b){var m=
{};b[h].forEach(function(q){m[q.alias]=q.id});var n=h.substr(0,h.indexOf("."));f[n]=m}return f}function e(b,f){f=g(f);return t.mixin({},f["*"],f[b])}l=l.geoenrichment.dijit.ReportPlayer.StandardTemplates;var a,d={"demographic-summary":l.demographicSummary,"key-facts":l.keyFacts,"marketing-profile":l.marketingProfile,"at-risk-population":l.atRiskPopulation,"portrait-property-flyer":l.portraitPropertyFlyer,skyscraper:l.skyscraper,"transportation-to-work":l.transportationToWork,"health-care":l.healthCare,
"executive-summary-call-outs":l.executiveSummaryCallOuts,"tapestry-profile":l.tapestryProfile,"nearby-restaurants":l.nearbyRestaurants,"multi-area-comparison":l.multiAreaComparison,"property-details":l.propertyDetails,"employment-overview":l.employmentOverview,"office-market-profile":l.officeMarketProfile,"health-care-and-insurance":l.healthCareAndInsuranceStatistics,"demographic-profile":l.demographicProfile,"commute-profile":l.commuteProfile,"target-market-summary":l.targetMarketSummary,"population-trends":l.populationTrends,
"coronavirus-impact-planning":l.coronavirusImpactPlanning,"prizm-profile":l.prizmProfile,"housing-profile":l.housingProfile,"insurance-profile":l.insuranceProfile,"media-profile":l.mediaProfile,"personicx-segmentation":l.personicxSegmentation,"spending-profile":l.spendingProfile,"base-demographic-profile":l.baseDemographicProfile,"demographic-comparison-profile":l.demographicComparisonProfile,"future-population-profile":l.futurePopulationProfile,"population-households-profile":l.populationHouseholdsProfile,
"consumer-spending-profile":l.consumerSpendingProfile,"base-demographic-profile-ja":"\u57fa\u672c\u7d71\u8a08\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","demographic-comparison-profile-ja":"\u4eba\u53e3\u7d71\u8a08\u6bd4\u8f03\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","future-population-profile-ja":"\u5c06\u6765\u4eba\u53e3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","population-households-profile-ja":"\u4eba\u53e3\u30fb\u4e16\u5e2f\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","consumer-spending-profile-ja":"\u6d88\u8cbb\u984d\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",
"household-profile":l.householdProfile},c={portalUrl:"http://www.arcgis.com",user:"esri_reports",query:"http://www.arcgis.com/home/search.html?q\x3downer%3Aesri_reports",aliasToID:function(b,f,h){return e(b,h)[f]},aliasToLabel:function(b){return d[b]},getAliases:function(b,f){b=Object.keys(e(b,f));b.sort(function(h,m){return h.localeCompare(m)});return b},getListOptions:function(b,f){return c.getAliases(b,f).map(function(h){return{value:c.aliasToID(b,h,f),label:d[h]}})},getSupportedCountries:function(b){return Object.keys(g(b)).map(function(f){return"*"===
f?"AU":f})},getLibrary:function(){var b=t.clone(k()),f;for(f in b){var h=b[f];h["AU.census"]=h["*.census"];delete h["*.census"]}return b}};return c})},"esri/dijit/geoenrichment/utils/PortalQueryUtil":function(){define([],function(){var t={combineQueryString:function(p){var l="";p.type&&(l+='type:"'+p.type+'"');p.typeKeywords?l=Array.isArray(p.typeKeywords[0])?l+(" typekeywords:("+p.typeKeywords.map(function(k){return t.combineTypeKeywords(k)}).join(" OR ")+")"):l+(" typekeywords:"+t.combineTypeKeywords(p.typeKeywords,
p.typeKeywordsNot)):p.typeKeywordsNot&&(l+=" typekeywords:"+t.combineTypeKeywords(null,p.typeKeywordsNot));p.owner&&(l+=" owner:"+p.owner);p.isShared&&(l+=p.orgId?" ((orgid:"+p.orgId+' AND access:"public") OR access:"shared" OR access:"org")':' (access:"shared" OR access:"org")');p.ownerNot&&(l+=" NOT owner:"+p.ownerNot);return l},combineTypeKeywords:function(p,l){p=p?t._combineArray(p):"";return l?(l=t._combineArray(l," OR "),"("+p+" NOT "+l+")"):p},_combineArray:function(p,l){var k="string"===typeof p?
p:1===p.length?p[0]:null;return k?"("===k.charAt(0)||'"'===k.charAt(0)?k:'"'+k+'"':"("+p.map(function(g){return'"'+g+'"'}).join(l||" ")+")"}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer":function(){define(["./query/TemplateJsonQueryUtil"],function(t){return{collectVariablesStats:function(p){var l={};t.processTemplateFieldInfos(p,function(k){k.infographicJson&&k.infographicJson.variables?k.infographicJson.variables.forEach(function(g){l[g]=
1}):k.hasVariable&&(k.usedMapTos?k.usedMapTos.forEach(function(g){l[g]=1}):k.fullName&&(l[k.fullName]=1))});return l},collectMapItemIdsAndNames:function(p){var l={},k={};t.calcNumberOfMaps(p,function(a){a.defaultBasemapId&&(l[a.defaultBasemapId]=1);a.defaultBasemapName&&(k[a.defaultBasemapName]=1);a.webMapId&&(l[a.webMapId]=1);a.webMapName&&(k[a.webMapName]=1)});p=[];for(var g in l)p.push(g);var e=[];for(g in k)e.push(g);return{itemIds:p,mapNames:e}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/utils/InfographicJsonUtil":function(){define(["esri/dijit/geoenrichment/config",
"esri/dijit/geoenrichment/utils/ArrayUtil"],function(t,p){var l={getDefaultLevels:function(){var k=t.levels.slice();k.push(t.highestLevel);return k},getLevels:function(k){k=k.levels&&k.levels.length?k.levels:l.getDefaultLevels();return p.removeDuplicates(k)},getSubLevels:function(k){k=l.getLevels(k);k.pop();return k},getHighestLevel:function(k){k=l.getLevels(k);return k[k.length-1]},setLevels:function(k,g){g=p.removeDuplicates(g||[]);k.levels=g.length?g:l.getDefaultLevels()},getDataDrilling:function(k,
g){"string"!==typeof g&&(g=(g=k.variableTables&&k.variableTables[g])&&g.variable.fieldInfo&&g.variable.fieldInfo.templateName);return k.dataDrilling&&k.dataDrilling[g]},setDataDrilling:function(k,g,e){g&&(k.dataDrilling=k.dataDrilling||{},e?k.dataDrilling[g]=e:delete k.dataDrilling[g])},validateDataDrilling:function(k){var g=k.dataDrilling;if(g){var e={};k.variableTables.forEach(function(a){a.variable&&a.variable.fieldInfo&&a.variable.fieldInfo.templateName&&(e[a.variable.fieldInfo.templateName]=
!0)});Object.keys(g).forEach(function(a){e[a]||delete g[a]})}},analyzeVariables:function(k){k=k.fieldInfos?k.fieldInfos.map(function(d){return d.fullName}):k.variables;if(1===k.length&&-1!==k[0].indexOf(".*"))return{dataCollectionID:k[0].substr(0,k[0].indexOf("."))};var g={},e,a;k.forEach(function(d,c){g[d.substr(0,d.indexOf("."))]=1;e=d.substr(d.indexOf(".")+1);a=d});return{dataCollectionID:1===Object.keys(g).length?Object.keys(g)[0]:null,variableID:1===k.length?e:null,fullName:1===k.length?a:null}}};
return l})},"esri/dijit/geoenrichment/config":function(){define(["esri/urlUtils"],function(t){t=t.getProtocolForWebResource();return{portalUrl:t+"//arcgis.com",server:t+"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",levels:["Admin3","Admin2"],highestLevel:"Admin1",locatorUrl:t+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",addressFormat:"${Address}, ${City}, ${Region} ${Postal}"}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasPreprocessor":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/string esri/graphic esri/symbols/jsonUtils ./FeatureNameUtil ../tasks/EnrichAreasTask esri/dijit/geoenrichment/utils/GeometryUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f){var h={preprocessAreas:function(r,u){u=u||{};r.analysisAreas=r.analysisAreas.filter(function(v){return v.feature&&v.feature.geometry&&"polygon"===v.feature.geometry.type||v.geographies&&v.geographies.length||v.buffer});-1!==u.analysisAreasLimit&&(u.analysisAreasLimit=u.analysisAreasLimit||20,r.analysisAreas.length=Math.min(r.analysisAreas.length,u.analysisAreasLimit));h.provideAreasIndexes(r);r.analysisAreas.forEach(function(v){v.feature&&!v.feature.attributes&&(v.feature.attributes=
{})});r.analysisAreas.forEach(function(v){v.name=v.name||v.shortName;if(!v.name&&v.feature){var w=a.guessFeatureName(v.feature);w&&(v.name=v.shortName=w)}});return p(m.generalize(r.analysisAreas),function(){return l([n.provideGeographyFeatures(r),q.provideBufferFeatures(r)])})},provideAreasIndexes:function(r){var u=r.combinedAreasInfo.groups,v=u&&u.length;r.analysisAreas.forEach(function(w,z){w.index=z;u&&(u.forEach(function(E,F){-1!==E.indexes.indexOf(z)&&(w.isGrouped=!0,w.groupIndex=F)}),"number"!==
typeof w.groupIndex&&(w.isGrouped=!1,w.groupIndex=v++))})},removeGroupInfo:function(r){r.forEach(function(u){delete u.isGrouped;delete u.groupIndex})}},m={generalize:function(r){var u=[],v=[];r.forEach(function(w,z){!w.feature||w.geographies&&w.geographies.length||(u.push(w.feature),v.push(z))});return p(function(w){function z(y){var A=0;y.geometry.rings.forEach(function(H){A+=H.length});return A}var E=c.needGeneralizeGeometry(w,b.generalization.factor,b.generalization.maxVerticesInAllFeatures,b.generalization.numVerticesPerFeature);
if(E){var F=!0;var D=[];w=w.map(function(y){D.push(z(y));return new g(y.geometry,y.symbol,y.attributes)});var B=c.generalizeGeometry(w,E,b.generalization.numVerticesPerFeature,!0)}return p(B,function(){F&&(console.log("Generalize features:"),w.forEach(function(y,A){console.log("#"+A+" "+D[A]+" \x3d\x3e "+z(y))}));return w})}(u),function(w){v.forEach(function(z){r[z].feature=w.shift()})})}},n={provideGeographyFeatures:function(r){return l(r.analysisAreas.map(function(u){if(!u.feature&&u.geographies&&
u.geographies.length)return(new d).createFeatureForGeographies(u.geographies,{countryID:r.countryID,hierarchy:r.hierarchy}).then(function(v){u.feature=v;u.name=u.name||u.feature.attributes.StdGeographyName;u.description=u.description||f.geoenrichment.dijit.ReportPlayer.ReportPlayer.geography;u.address=u.address||u.name;u.geographies[0].attributes&&t.mixin(u.feature.attributes,u.geographies[0].attributes);if(v=u.geographies[0].symbol)v=v.toJson?v:e.fromJson(v),u.feature.setSymbol(v)})}))}},q={provideBufferFeatures:function(r){var u=
this,v=r.analysisAreas.filter(function(z){return!z.feature&&z.buffer}),w=v.map(function(z){return z.buffer});return(new d).createFeaturesForBuffers(w,{countryID:r.countryID}).then(function(z){z.forEach(function(E,F){F=v[F];F.feature=E;u._applyBufferParamsToArea(F)})})},_applyBufferParamsToArea:function(r){var u=r.buffer;if(!r.name){var v=f.geoenrichment.dijit.bufferTitle.pointRing;v[u.units]&&(r.name=k.substitute(v[u.units],{radius:u.radius}))}r.description=r.description||"Ring";u.attributes&&t.mixin(r.feature.attributes,
u.attributes);if(u=u.symbol)u=u.toJson?u:e.fromJson(u),r.feature.setSymbol(u)}};return h})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/FeatureNameUtil":function(){define([],function(){return{_nameScores:[/^name$/i,/^title$/i,/(^name)|(name$)/i,/(^title)|(title$)/i],guessFeatureName:function(t){var p=Object.keys(t.attributes),l;this._nameScores.some(function(k){return p.some(function(g){if(k.test(g))return l=g,!0})});return t.attributes[l]||""}}})},"esri/dijit/geoenrichment/utils/GeometryUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/geometry/Polygon esri/workers/WorkerClient ./PolygonUtil ./GeometryUtil_base".split(" "),
function(t,p,l,k,g,e){function a(c,b,f){var h=new p,m=new k("./mutableWorker",function(){m.importScripts(["../dijit/geoenrichment/utils/GeometryUtil_worker","../dijit/geoenrichment/utils/GeometryUtil_base"]).then(function(){m.postMessage({rings:c,maxAllowableOffset:f}).then(function(n){var q=n.rings;b.forEach(function(r){for(var u=r.source.length=0;u<r.count;u++)r.source.push(q.shift())});h.resolve();m.terminate()})})},!0);return h.promise}var d=t.mixin({},e);d.calculateMaxAllowableOffset=function(c,
b,f){"number"!==typeof b&&(b=1);b*=c.extent.getWidth()/c.width;f&&(b*=Math.min(f.getWidth()/c.extent.getWidth(),f.getHeight()/c.extent.getHeight()));return b};d.getNumberOfPoints=g.getNumberOfPoints;d.needGeneralizeGeometry=function(c,b,f,h){if(!c||!b)return!1;h=h||(f?f/10:500);f=f||5E3;Array.isArray(c)||(c=[c]);var m=0>b,n=0,q=Math.abs(b)/100,r=0,u=0,v;c.forEach(function(w){w=w.geometry||w;if(!w.rings||!w.getExtent)return!1;var z=w.getExtent();if(z=z.getWidth()*z.getHeight())z=Math.sqrt(z),w=d.getNumberOfPoints(w),
r+=w,u=Math.max(u,w),m&&(n=Math.max(n,z*q)),v||(v=m?r>f:w*b>4*z)});return v&&u>h?n||b:0};d.generalizeGeometry=function(c,b,f,h){if(!c||!b||0>b)return!1;f=f||500;Array.isArray(c)||(c=[c]);var m=[],n=[];c.map(function(q){var r=q.geometry||q;if(r!=q&&r.rings){q.geometry=new l;q.geometry.setSpatialReference(r.spatialReference);var u=q.geometry.rings}u&&r.rings.forEach(function(v){u.push(v.slice())});d.getNumberOfPoints(r)>f&&(q=u||r.rings,m=m.concat(q),n.push({source:q,count:q.length}))});if(h&&window.Worker)return a(m,
n,b);m.forEach(function(q){(new d.RingInfo(q)).generalize(b,.8)})};return d})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(t,p,l,k,g,e,a,d,c){var b=window.Blob||window.webkitBlob||window.mozBlob,f=window.URL||window.webkitURL||window.mozURL;t=p([t],{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(h,m,n){this._isIE=
e("ie");this.returnDeferreds=!!n;this._queue={};this._acceptMessage=k.hitch(this,this._acceptMessage);this._errorMessage=k.hitch(this,this._errorMessage);h&&this.setWorker(h,k.hitch(this,function(q){this.worker=q;m(q)}))},setWorker:function(h,m){if(h instanceof Array){var n=h;h=n.shift()}var q=this._getUrl(h);q=d.normalize(q);h=!d.hasSameOrigin(q,location.href);if(!1===q)return console.log("Can not resolve worker path"),!1;if(this.worker){var r=this.worker;r.removeEventListener("message",this._acceptMessage,
!1);r.removeEventListener("error",this._errorMessage,!1);r.terminate();r=null}if(h){h=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(h,k.hitch(this,function(u){u=f.createObjectURL(new b([u],{type:"text/javascript"}));m(this._createWorker(u,q))}))}catch(u){try{h=d.getProxyUrl(h).path+"?"+encodeURI(h),this._useProxy=!0,m(this._createWorker(h,n))}catch(v){return console.log("Can not create worker"),!1}}}else setTimeout(k.hitch(this,function(){m(this._createWorker(q,n))}),0)},_createWorker:function(h,
m){h=new Worker(h);h.addEventListener("message",this._acceptMessage,!1);h.addEventListener("error",this._errorMessage,!1);this.worker=h;m&&this.importScripts(m);return h},postMessage:function(h,m){if(h instanceof Array||"object"!=typeof h)h={data:h};var n=Math.floor(64E9*Math.random()).toString(36);h.msgId=n;n=this._queue[n]=new l;this.worker?(m?this.worker.postMessage(h,m):this.worker.postMessage(h),this.emit("start-message",{target:this,message:h})):n.reject({message:"No worker was set."});return this.returnDeferreds?
n:n.promise||n},terminate:function(){var h=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var m=h.length-1;0<=m;m--)this._queue[h[m]].cancel("terminated"),delete this._queue[h[m]]},addWorkerCallback:function(h,m){var n=this._getUrl(h,!0);!1===n?(m=new l,m.reject({message:"Could not load text from "+h})):(m=this.postMessage({action:"add-callback",url:n,cbName:m||"main"}),m.then(k.hitch(this,function(q){q.target=this;this.emit("callback-added",q)})));return m},importScripts:function(h){Array.isArray(h)||
(h=[h]);h=h.map(function(m){m=this._getUrl(m,!0);this._useProxy&&!d.hasSameOrigin(m,location.href)&&(m=d.getProxyUrl(m).path+"?"+encodeURI(m));return m},this);h=this.postMessage({action:"import-script",url:h});h.then(k.hitch(this,function(m){m.target=this;this.emit("scripts-imported",m)}));return h},_acceptMessage:function(h){var m=h.data,n=m.msgId;if(m.status&&"debug"==m.status)console[m.showAs||"debug"](m);else if(n&&n in this._queue){var q=this._queue[n];"progress"==m.status?q.progress(h.data):
("error"==m.status?q.reject(h.data):q.resolve(h.data),delete this._queue[n])}this.emit("message",{message:h.data,event:h,target:this})},_errorMessage:function(h){this.onerror||this.onError?this.onerror?this.onerror(h):this.onError(h):console.log("Worker Error: "+h.message+"\nIn "+h.filename+" on "+h.lineno)},_getUrl:function(h,m){if(!h)return console.error("can not resolve empty path"),!1;h.match(/\.js$/)||(h+=".js");h=c.toUrl(h);return m?d.getAbsoluteUrl(h):h},_getRemoteText:function(h,m){(h=this._getUrl(h))&&
g.get(h,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(n){m(n)})},_startBlobWorker:function(){var h=this._xdSource;h||(h=this._getUrl("./mutableWorker"),h=new b(["if(!self._mutable){importScripts('"+h+"');}"],{type:"text/javascript"}),h=this._xdSource=f.createObjectURL(h));try{return new Worker(h)}catch(m){return console.log(m.message),!1}}});e("extend-esri")&&k.setObject("workers.WorkerClient",t,a);return t})},"esri/dijit/geoenrichment/utils/GeometryUtil_base":function(){(function(t){function p(d,
c){var b=d.length;if(3>b)return 0;c||(c=d[0]);var f=c[0];c=c[1];var h=d[b-1];b=h[0]-f;for(var m=h[1]-c,n=0,q=0,r=d.length;q<r;q++){h=d[q];var u=h[0]-f;h=h[1]-c;n+=u*m-b*h;b=u;m=h}return n/2}var l={};l.calculateRingArea=p;l.calculateRingCentroid=function(d,c){var b=d.length;if(!b)return null;c||(c=d[0]);var f=c[0];c=c[1];var h=0,m=0,n=0;if(2<b){var q=d[b-1];b=q[0]-f;for(var r=q[1]-c,u=0,v=d.length;u<v;u++){q=d[u];var w=q[0]-f;q=q[1]-c;var z=w*r-b*q;h+=z;m+=(b+w)*z;n+=(r+q)*z;b=w;r=q}}0==h?m=n=0:(m/=
3*h,n/=3*h);return[f+m,c+n]};l.INTERIOR=1;l.EXTERIOR=-1;l.BOUNDARY=0;l.createRingInfo=function(d,c){return new e(d,c)};l.createSegmentCoordinates=function(d){return new a(null,0,0,d)};var k=function(d){return function(){for(var c in d){var b=d[c];this[c]="function"===typeof b?b.bind(this):b}d.ctr.bind(this).apply(this,arguments)}},g=k({xmin:null,ymin:null,xmax:null,ymax:null,spatialReference:null,ctr:function(d,c,b,f,h){this.xmin=d;this.ymin=c;this.xmax=b;this.ymax=f;this.spatialReference=h},printOut:function(){console.log([this.xmin,
this.xmax,this.ymin,this.ymax].join(" "))}}),e=k({ring:null,origin:null,area:0,clockwise:!1,extent:null,_coords:null,ctr:function(d,c){this.ring=d;this.origin=c;d=this.ring.length-1;if(!(0>d)){if(!d)d++;else if(this.ring[d][0]!=this.ring[0][0]||this.ring[d][1]!=this.ring[0][1])d++,this.ring.push(this.ring[0].slice());var b=0,f=0;c=!c;this.extent=new g(this.ring[0][0],this.ring[0][1],this.ring[0][0],this.ring[0][1]);for(var h=0;h<d;h++){var m=this.ring[h],n=m[0];c&&(b+=n);n<this.extent.xmin?this.extent.xmin=
n:n>this.extent.xmax&&(this.extent.xmax=n);n=m[1];c&&(f+=n);n<this.extent.ymin?this.extent.ymin=n:n>this.extent.ymax&&(this.extent.ymax=n)}c&&(this.origin=[b/d,f/d]);this.area=p(this.ring,this.origin);0>=this.area?this.area=-this.area:this.clockwise=!0}},setDirection:function(d){this.clockwise==!d&&(this.ring.reverse(),this.clockwise=!this.clockwise,this._coords=null)},testPoint:function(d,c){d=this.getRingCoordinates(c).testPoint(d[0]-this.origin[0],d[1]-this.origin[1]);return this.clockwise?d:-d},
generalize:function(d,c,b){function f(I,L,N){w=I;z=L;if(N||D<v)v=d,E=w-r,F=z-r,D=Math.sqrt(E*E+F*F),D>d*c?(E/=D,F/=D):D=0;v*=c}function h(){if(!D)return!0;var I=m.dx,L=m.dy,N=Math.sqrt(I*I+L*L);return N-I*E-L*F>=.9*N}c=c||.75;var m=this.getRingCoordinates(d),n=m.xs,q=m.ys,r=n[0],u=q[0],v,w,z,E,F,D=0,B=n.length-1;f(n[B],q[B],!0);for(var y=this,A=this.clockwise?function(I){y.ring.splice(I,1)}:function(I){y.ring.splice(-I-1,1)};0<B--&&4<n.length;){var H=n[B],G=q[B];m.setSegment(r,u,H,G)&&m.testPointOnTouch(w,
z,v)&&h()?(n.splice(B+1,1),q.splice(B+1,1),A(B+1),f(H,G)):(r=w,u=z,f(H,G,!0))}this._coords=null;b&&(this.area=p(this.ring,this.origin),this.clockwise||(this.area=-this.area))},getRingCoordinates:function(d,c){if(c)return new a(this.ring,c[0],c[1],d,this.extent,this.clockwise);this._coords&&this._coords.eps==d||(this._coords=new a(this.ring,this.origin[0],this.origin[1],d,this.extent,this.clockwise));return this._coords}});l.RingInfo=e;var a=k({xs:null,ys:null,extent:null,eps:NaN,dx:null,dy:null,_sx:null,
_sy:null,ctr:function(d,c,b,f,h,m){this.xs=[];this.ys=[];d||(d=[]);void 0===c&&(c=0);void 0===b&&(b=0);void 0===f&&(f=0);this.eps=Math.max(f,0);h&&(f=this.eps/2,this.extent=new g(h.xmin-c-f,h.ymin-b-f,h.xmax-c+f,h.ymax-b+f));var n=d.length-1;if(!(0>n))for(h=n?d[n][0]==d[0][0]&&d[n][1]==d[0][1]?n:n+1:1,f=m?1:-1,m=m?0:n;h--;m+=f)n=d[m],this.xs.push(n[0]-c),this.ys.push(n[1]-b)},testPoint:function(d,c){if(!this._pointBelongsToExtent(d,c))return-1;var b=this.xs.length,f=!1;this.dy=this.ys[0]-this.ys[b-
1];if(0==this.dy){for(f=b;1<f--&&(this.dy=this.ys[f]-this.ys[f-1],0==this.dy););if(0==this.dy)return 0}f=0<this.dy;for(var h=0,m=this.xs[0],n=this.ys[0],q,r,u=1;u<=b;u++,m=q,n=r)if(r=u==b?0:u,q=this.xs[r],r=this.ys[r],this.setSegment(m,n,q,r)){var v=n-c,w=r-c,z=!1;0>v&&(v=-v,w=-w,z=!0);if(!(v>this.eps&&w>this.eps)){if(this.testPointOnTouch(d,c,this.eps))return 0;0==v?0!==w&&(0>w&&(f=!f),d<m&&f&&h++):0==w?f=z:0>w&&d<m+this.dx/this.dy*(c-n)&&h++}}return 0!=h%2?1:-1},testPointOnTouch:function(d,c,b){var f=
this.findIntersectionDelta(d,c,d-this.dy,c+this.dx);d=this._sx+f*this.dx-d;c=this._sy+f*this.dy-c;return d*d+c*c<=b*b},_pointBelongsToExtent:function(d,c){return d>=this.extent.xmin&&d<=this.extent.xmax&&c>=this.extent.ymin&&c<=this.extent.ymax},setSegment:function(d,c,b,f){this._sx=d;this.dx=b-d;this._sy=c;this.dy=f-c;return 0!=this.dx||0!=this.dy},findIntersectionDelta:function(d,c,b,f,h){void 0===h&&(h=!0);b-=d;f-=c;var m=this.dy*b-this.dx*f;if(0==m)return 0;var n=d-this._sx,q=c-this._sy,r=q*b-
n*f;n=h?0:q*this.dx-n*this.dy;0>m&&(m=-m,r=-r,n=-n);return h||(n=0>n?0:n<m?n/m:1,this.testPointOnTouch(d+n*b,c+n*f,this.eps))?0>=r?0:r<m?r/m:1:-1},addPointOfSegmentAt:function(d){this.xs.push(this._sx+d*this.dx);this.ys.push(this._sy+d*this.dy)}});l.RingCoordinates=a;t.document?define(function(){return l}):t.GeometryUtil_base=l})(this)},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ReportTemplateTypes":function(){define([],function(){return{STANDARD:"esriReportTemplateStandard",MULTICOLUMN:"esriReportTemplateMultiColumn",
MAP:"esriReportTemplateMapReport",FUSION:"esriReportTemplateFusion"}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/PortalToEditorConverter":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/config ./portalToEditorUtils/layout/LayoutParser ./portalToEditorUtils/metadata/MetadataParser ./portalToEditorUtils/ImageCollector ./portalToEditorUtils/parsers/Parsers ./portalToEditorUtils/variables/PlayerVariableProvider ../supportClasses/DefaultStyles ../supportClasses/images/ImageDataHolder ../themes/conversion/CssParser esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h){return{provideEditorJson:function(m,n){function q(){function E(y,A,H){return t(n.preProcessFile&&n.preProcessFile(y,A,r),function(G){if(!1!==G)return t(H&&H(),function(){return n.postProcessFile&&n.postProcessFile(y,A,r)})})}if(u&&u.files&&u.files){var F=n.filesToProcess||["theme.css.txt","metadata.xml","report.xml"],D={"theme.css.txt":function(y){return E(y,"theme.css.txt",function(){r.theme=b.fromCssText(y.data,n)})},"metadata.xml":function(y){return E(y,"metadata.xml",
function(){return k.parseMetadataXML(y,r,n)})},"report.xml":function(y){return E(y,"report.xml",function(){return l.parseReportXML({report:m,parsers:e,file:y,templateJson:r,variableProvider:n.variableProvider,useVariableProviderToCollectOnly:n.useVariableProviderToCollectOnly,tableDefaultStyles:n.tableDefaultStyles,processFileName:w,putImageData:function(A,H){A=w(A);H=H||v[A];c.putImageData(A,H);return H},log:z,queryMetaDataFunc:function(A){return n.queryMetaDataFunc&&n.queryMetaDataFunc(A,r)},postProcessChartJson:function(A,
H){n.postProcessChartJson&&n.postProcessChartJson(r,A,H)},postProcessMapJson:function(A,H){n.postProcessMapJson&&n.postProcessMapJson(r,A,H)},postProcessInfographicJson:function(A,H){n.postProcessInfographicJson&&n.postProcessInfographicJson(r,A,H)},postProcessTableInSection:function(A,H){n.postProcessTableInSection&&n.postProcessTableInSection(r,A,H)}})})},generic:function(y,A){return E(y,A)}},B=new f;F.forEach(function(y){var A=u.files.filter(function(G){return G.name===y})[0],H=A&&(D[y]||D.generic);
H&&B.add(function(){return t(p.isPlayerOnServer?t():h.delay(50)).then(function(){return H(A,y)}).otherwise(function(G){r.metadata.parseErrors.push(G);console.log(G)})})});return B.getPromise()}}n=n||{};n.variableProvider=n.variableProvider||new a;n.tableDefaultStyles=n.tableDefaultStyles||new d;var r={documentOptions:{},metadata:{specialTradeAreaCalculatorName:null,parseErrors:[],mapImageInfosHash:{},comparisonCalculatorsHash:{},locatorCalculatorsHash:{}},theme:null},u=m.portalJson,v={};n.getImageData=
function(E){return v[w(E)]};var w=function(E){return E?E.toLowerCase():""},z=n.log||function(E){};return t(e.initialize(),function(){return t(g.collectImageResources(u,v,w),function(){for(var E in v)c.putImageData(E,v[E]);return t(q(),function(){r.metadata.parseErrors.length||(m.templateJson=r)})})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/LayoutParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./GraphicReportSectionsParser",
"./ClassicReportSectionsParser"],function(t,p,l){return{parseReportXML:function(k){k.log(k.file.data);var g=t.parseXml(k.file.data);k.parsers.getParser("document").parseDocument(g,k);k.report.isGraphicReport?(k.templateJson.sectionsTables=[],p.parseSectionsGraphic(g,k)):(k.templateJson.sections=[],l.parseSectionsClassic(g,k))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/GraphicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],
function(t){return{parseSectionsGraphic:function(p,l){t.queryTopJson(p,"table").forEach(function(k){try{l.templateJson.sectionsTables.push(l.parsers.getParser("section").parseTable(k,l,{fixTableWidthsForPage:!0}))}catch(g){console.log(g)}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/ClassicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(t){return{parseSectionsClassic:function(p,l){t.queryTopJson(p,"section").forEach(function(k){l.templateJson.sections.push(l.parsers.getParser("section").parseSection(k,
l,{fixTableWidthsForPage:!0}))});this._splitSections(l)},_splitSections:function(p){p=p.templateJson;var l=[];p.sections.forEach(function(k){function g(){e={type:k.type,stack:[]};l.push(e)}var e;g();k.stack.forEach(function(a){if("hr"===a.id){var d=!!e.stack.length;e.stack.push(a);d&&g()}else"table"===a.id?(e.stack.some(function(c){return"table"===c.id})&&g(),e.stack.push(a)):"pageBreak"===a.id?(e.stack.length&&g(),e.stack.push(a),g()):e.stack.push(a)})});l=l.filter(function(k){return!!k.stack.length});
p.sections=l}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataParser":function(){define("esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/utils/JsonXmlConverter ./DataCollectionsCalculatorsParser ./ScriptsCalculatorsParser ./LocatorCalculatorsParser ./map/MapCalculatorsParser ./TradeAreaCalculatorsParser".split(" "),function(t,p,l,k,g,e,a){return{parseMetadataXML:function(d,c,b){b.log&&b.log(d.data);var f=p.parseXml(d.data);if(f&&f.tags)return t([a.parseTradeAreaCalculators(f,
c,b),l.parseDataCollectionsCalculators(f,c,b),k.parseScriptsCalculators(f,c,b),g.parseLocatorCalculators(f,c,b)]).then(function(){return e.parseMapCalculators(f,c,b)})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/DataCollectionsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector","../../../../_devConfig"],function(t,p,l){return{parseDataCollectionsCalculators:function(k,g,e){t.queryJson(k,"DataCollections").forEach(function(a){var d=
t.queryJson(a,"ComparisonLevel");if(l.emulateErrors.metadataParseError)throw Error("Error test: something crashed during the parsing of the metadata!");if(e.variableProvider.isPlayerOnly||d.length)var c=p.getObjects(a);d.length&&(a={calculatorName:a.attributes.Name,levels:d.map(function(b){return b.attributes.Name}).filter(function(b){return!e.validateGeographyLevelFunc||e.validateGeographyLevelFunc(b)}),variableObjects:c.variableObjects},g&&(g.metadata.comparisonCalculatorsHash[a.calculatorName]=
a));e.variableProvider.isPlayerOnly&&(c.variableObjects.forEach(function(b){e.variableProvider.addVariable(b)}),c.scriptObjects.forEach(function(b){e.variableProvider.addScriptVariable(b)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/VariableScriptCollector":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(t,p){var l={getObjects:function(k,g){g=l._getVariableInfo(k,g);k=l._getScriptObjects(k,
g.fieldNameToVariableCache);return{variables:g.variables,variableObjects:g.variableObjects,scriptObjects:k}},_getVariableInfo:function(k,g){var e=[];t.queryJson(k,g?/^(RawFields|Fields)$/:"Fields").forEach(function(b){e=e.concat(t.queryJson(b,/^(Field|PortalField)$/))});var a=[],d=[],c={};e.forEach(function(b){a.push(b.attributes.MapTo);if(b=p.fieldTagToVariable(b,k.attributes.Name))c[b.fieldName]=b,d.push(b)});return{variables:a,variableObjects:d,fieldNameToVariableCache:c}},_getScriptObjects:function(k,
g){var e=t.queryJson(k,"Scripts"===k.name?"Fields":"CalculatedFields")[0];e=e&&t.queryJson(e,"Script")||[];"Scripts"===k.name&&(e=e.filter(function(a){return!("STORE_ID"===a.attributes.Name||"AREA_ID"===a.attributes.Name)}));return e.map(function(a){var d=p.scriptTagToVariable(a,k.attributes.Name);d.usedFields&&(d.usedMapTos=[],d.usedFields.forEach(function(c){var b=g[c];b?b.usedMapTos?d.usedMapTos=d.usedMapTos.concat(b.usedMapTos):d.usedMapTos.push(b.fullName):console.log("Error parsing used fields for "+
c)}),g[d.fieldName]=d);return d})}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/VariableUtil":function(){define([],function(){var t={getType:function(p,l){return p?0===p.indexOf("esriFieldType")?p:"esriFieldType"+p:l},fieldTagToVariable:function(p,l){return p.attributes.MapTo&&"AREA_ID"!==p.attributes.Name?{id:p.attributes.MapTo.substr(p.attributes.MapTo.lastIndexOf(".")+1),fullName:p.attributes.MapTo,alias:p.attributes.Alias,fieldName:p.attributes.Name,
precision:Number(p.attributes.Decimals)||0,calculatorName:l,templateName:l+"."+p.attributes.Name,type:t.getType(p.attributes.Type,p.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString"),vintage:null,source:null}:null},scriptTagToVariable:function(p,l){return{id:p.attributes.Name,fullName:l+"."+p.attributes.Name,fieldName:p.attributes.Name,alias:p.attributes.Alias,precision:Number(p.attributes.Decimals)||0,usedFields:p.attributes.usedFields?p.attributes.usedFields.split(","):[],usedMapTos:null,
expressionText:p.tags[0].text,calculatorName:l,templateName:l+"."+p.attributes.Name,type:t.getType(p.attributes.Type,p.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString")}}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/ScriptsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector"],function(t,p){return{parseScriptsCalculators:function(l,k,g){t.queryJson(l,"Scripts").forEach(function(e){g.variableProvider.isPlayerOnly&&
(e=p.getObjects(e),e.variableObjects.forEach(function(a){g.variableProvider.addVariable(a)}),e.scriptObjects.forEach(function(a){g.variableProvider.addScriptVariable(a)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/LocatorCalculatorsParser":function(){define(["esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(t,p,l,k){return{parseLocatorCalculators:function(g,
e,a){g=l.queryJson(g,"Locator");return t(g.map(function(d){var c=[];l.queryJson(d,/^(PointFields|Fields)$/).forEach(function(h){c=c.concat(l.queryJson(h,/^(Field|Direction|Distance)$/))});var b=[];c.forEach(function(h){"Direction"===h.name?h.attributes.MapTo="DIRECTION":"Distance"===h.name&&(h.attributes.MapTo="DISTANCE");(h=k.fieldTagToVariable(h,d.attributes.Name))&&b.push(h)});var f={calculatorName:d.attributes.Name,variableObjects:b,layerID:null,layerUrl:null,layerName:d.attributes.LayerName};
d.attributes.Points&&0===d.attributes.Points.indexOf("std:")?f.layerID=d.attributes.Points.replace("std:",""):f.layerUrl=d.attributes.Layer;e.metadata.locatorCalculatorsHash[d.attributes.Name]=f;a.variableProvider.isPlayerOnly&&b.forEach(function(h){a.variableProvider.addVariable(h)});return p(!a.validateLocatorCalculator||a.validateLocatorCalculator(f.layerID,f.layerUrl),function(h){f.isValid=h})}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./MetadataToRendererParser","./MapTagsUtil","esri/dijit/geoenrichment/utils/ImageUtil"],function(t,p,l,k){var g={parseMapCalculators:function(e,a,d){t.queryJson(e,"Maps").forEach(function(c){t.queryJson(c,"Map").forEach(function(b){var f=g._parsePortalLayers(b),h=g._parseStudyAreas(b);f={fieldName:b.attributes.Name,width:Number(b.attributes.Width),height:Number(b.attributes.Height),defaultBasemapId:f.defaultBasemapId,defaultBasemapName:f.defaultBasemapName,webMapId:f.webMapId,webMapName:f.webMapName,
additionalLayerInfos:g._parseAdditionalLayers(b,a),pinSymbolJson:g._parseSiteLayerPinSymbol(b,d),areaSymbolJsons:h.symbolJsons,areaSymbolRamp:h.ramp,mapScale:Number(b.attributes.Scale)||null};a&&(a.metadata.mapImageInfosHash[c.attributes.Name+"."+b.attributes.Name]=f)})})},_parsePortalLayers:function(e){var a;e=t.queryJson(e,"Layer").filter(function(d){return!(!d.attributes.PortalItemId&&!d.attributes.MapName)});1<e.length&&(a=e.shift());e=e.shift();return{defaultBasemapId:a&&a.attributes.PortalItemId,
defaultBasemapName:a&&a.attributes.MapName,webMapId:e&&e.attributes.PortalItemId,webMapName:e&&e.attributes.MapName}},_parseAdditionalLayers:function(e,a){var d=[];t.queryJson(e,/^(Layer|LocatorResultsLayer|ComparisonResultsLayer)$/).filter(function(c){return!!c.attributes.ServiceUrl||"LocatorResultsLayer"===c.name||"ComparisonResultsLayer"===c.name}).forEach(function(c){if(c.attributes.ServiceUrl)d.push({url:c.attributes.ServiceUrl});else if("LocatorResultsLayer"===c.name){var b=c.tags&&c.tags.filter(function(h){return"Renderer"===
h.name})[0],f=a.metadata.locatorCalculatorsHash[c.attributes.CalculatorName];f&&f.isValid&&d.push({isLocatorLayer:!0,layerName:c.attributes.LayerName,calculatorName:c.attributes.CalculatorName,calculatorInfo:f,rendererJson:b&&p.parseRendererJson(b)})}else"ComparisonResultsLayer"===c.name&&((b=(b=c.tags&&c.tags.filter(function(h){return"Renderer"===h.name})[0])&&p.parseRendererJson(b))&&"esriTS"===b.uniqueValueInfos[0].symbol.type?d[d.length-1].labelRendererJson=b:(f=(f=c.tags&&c.tags.filter(function(h){return"LabelingInfo"===
h.name})[0])&&p.parseLabelRendererJson(f),d.push({isComparisonLayer:!0,calculatorName:c.attributes.CalculatorName,rendererJson:b,labelRendererJson:f})))});return d.length&&d},_parseSiteLayerPinSymbol:function(e,a){var d;if(e=t.queryJson(e,"SiteLayer")[0])if((e=t.queryJson(e,"Symbol")[0])&&"Image"===e.attributes.Type)(a=a.getImageData(e.attributes.Name))&&(d={type:"esriPMS",contentType:k.getContentType(a),imageData:k.base64DataFromDataURL(a),url:e.attributes.Url,width:Number(e.attributes.Width),height:Number(e.attributes.Height),
angle:Number(e.attributes.Angle)||0,xoffset:Number(e.attributes.XOffset)||0,yoffset:Number(e.attributes.YOffset)||0});else if(e&&"Marker"===e.attributes.Type){d=(d=t.queryJson(e,"Fill")[0])&&t.queryJson(d,"Color")[0];var c=(a=t.queryJson(e,"Outline")[0])&&t.queryJson(a,"Color")[0];d={type:"esriSMS",style:"esriSMS"+(e.attributes.Style||"Circle"),size:Number(e.attributes.Size),angle:Number(e.attributes.Angle)||0,xoffset:Number(e.attributes.XOffset)||0,yoffset:Number(e.attributes.YOffset)||0,color:l.parseColorTag(d),
outline:a&&{type:"esriSLS",color:l.parseColorTag(c),style:"esriSLS"+(a.attributes.Style||"Solid"),width:void 0===a.attributes.Width?0:Number(a.attributes.Width)}}}return d},_parseStudyAreas:function(e){var a=(e=t.queryJson(e,"StudyAreasLayer")[0])&&t.queryTopJson(e,"SymbolsPalette")[0];e=(a&&t.queryTopJson(a,"Symbol")||[]).map(g._parseAreaSymbol);var d=a&&t.queryTopJson(a,"SymbolRamp")[0],c;d&&(a=t.queryTopJson(d,"First")[0],d=t.queryTopJson(d,"Last")[0],a=a&&t.queryTopJson(a,"Symbol")[0],d=d&&t.queryTopJson(d,
"Symbol")[0],a&&d&&(c=[a,d].map(g._parseAreaSymbol)));return{ramp:c,symbolJsons:e}},_parseAreaSymbol:function(e){var a=t.queryJson(e,"Fill")[0];a=a&&t.queryJson(a,"Color")[0];var d=(e=t.queryJson(e,"Outline")[0])&&t.queryJson(e,"Color")[0];return{type:"esriSFS",style:"esriSFSSolid",color:l.parseColorTag(a)||[0,0,0,1],outline:e&&{type:"esriSLS",color:l.parseColorTag(d),style:"esriSLS"+(e.attributes.Style||"Solid"),width:void 0===e.attributes.Width?0:Number(e.attributes.Width)}}}};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MetadataToRendererParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlTypedConverter",
"esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(t,p){return{parseRendererJson:function(l){return t.parseXml(p.parseJson(l))},parseLabelRendererJson:function(l){return{type:"uniqueValue",field1:"StdGeographyLevel",uniqueValueInfos:t.parseXml(p.parseJson(l)).map(function(k){return{value:k.where.match(/StdGeographyLevel='(.*?)'/)[1],symbol:k.symbol}})}}}})},"esri/dijit/geoenrichment/utils/JsonXmlTypedConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(t,p){return t(null,
{parseJson:function(l,k){function g(c,b){if("string"===typeof c)d+="\x3c"+b+' type\x3d"string"\x3e'+p.encodeXML(c,!1)+"\x3c/"+b+"\x3e";else if("number"===typeof c)d+="\x3c"+b+' type\x3d"number"\x3e'+c+"\x3c/"+b+"\x3e";else if("boolean"===typeof c)d+="\x3c"+b+' type\x3d"boolean"\x3e'+c+"\x3c/"+b+"\x3e";else if(Array.isArray(c))e(c,b);else if(c&&"object"===typeof c){d+="\x3c"+b+' type\x3d"object"\x3e';for(var f in c)g(c[f],f);d+="\x3c/"+b+"\x3e"}}function e(c,b){d+="\x3c"+b+' type\x3d"array"\x3e';c.forEach(function(f){g(f,
"item")});d+="\x3c/"+b+"\x3e"}var a=k&&k.rootName||"root",d="";k&&k.addDocumentOptions&&(d+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');g(l,a);return d=decodeURIComponent(encodeURIComponent(d).replace("%19",""))},parseXml:function(l){function k(f){if(!f.attributes)return null;for(var h=0;h<f.attributes.length;h++){var m=f.attributes[h];if("type"===m.name)return m.value}return null}function g(f,h){if(h.childNodes)for(var m=0,n=h.childNodes.length;m<n;m++){var q=h.childNodes[m],r=e(q);void 0!==
r&&(f[q.nodeName]=r)}return f}function e(f){var h=k(f);if(f.nodeName&&h)switch(h){case "string":return f.childNodes[0]?p.decodeXML(f.childNodes[0].nodeValue):"";case "number":return Number(f.childNodes[0].nodeValue);case "boolean":return"true"===f.childNodes[0].nodeValue;case "object":return g({},f);case "array":return a([],f)}}function a(f,h){if(h.childNodes)for(var m=0,n=h.childNodes.length;m<n;m++)f[m]=e(h.childNodes[m]);return f}var d;l=(new DOMParser).parseFromString(l,"text/xml").childNodes;
for(var c=0;c<l.length;c++)if(1===l[c].nodeType){var b=l[c];break}b&&(l=k(b),"object"===l?g(d={},b):"array"===l&&a(d=[],b));return d}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapTagsUtil":function(){define([],function(){return{parseColorTag:function(t){if(!t)return null;t=t.attributes;return[Number(t.Red)||0,Number(t.Green)||0,Number(t.Blue)||0,t.Transparency?255*(1-Number(t.Transparency)/100):255]}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/TradeAreaCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./VariableScriptCollector","../../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary"],function(t,p,l){return{parseTradeAreaCalculators:function(k,g,e){k=t.queryJson(k,"SpecialTradeAreaFields");g.metadata.specialTradeAreaCalculatorName=k[0]&&k[0].attributes&&k[0].attributes.Name;k.forEach(function(a){e.variableProvider.isPlayerOnly&&p.getObjects(a,!0).variableObjects.forEach(function(d){d.alias=d.alias||l.getFieldLabel(d.id);e.variableProvider.addVariable(d)})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/ImageCollector":function(){define(["esri/dijit/geoenrichment/when",
"esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/DataUtil","esri/dijit/geoenrichment/utils/ImageUtil","esri/dijit/geoenrichment/utils/ImageInfoUtil"],function(t,p,l,k,g){return{collectImageResources:function(e,a,d){function c(f){return t(g.getImageInfo(a[f],f),null,function(){/\.svg$/.test(f)||delete a[f]})}e&&e.files&&e.files.forEach(function(f){var h=l.getContentType(f.name);h&&"image/"===h.substr(0,6)&&(a[d(f.name)]=k.base64DataToDataURL(f.data,h))});e=[];for(var b in a)e.push(c(b));
return p(e)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/Parsers":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(t,p){var l={},k={},g;l.initialize=function(){if(g)return g.promise;g=new t;p("./DocumentParser ./ChartConverterPtoE ./InfographicConverterPtoE ./SectionParser ./FieldParser ./FilterParser ./SortingParser ../../../supportClasses/templateJsonUtils/fieldInfo/utils".split(" "),function(e,a,d,c,b,f,h,m){k.document=e;k.chart=
a;k.infographic=d;k.section=c;k.field=b;k.filter=f;k.sorting=h;m.init().then(g.resolve)});return g.promise};l.getParser=function(e){return k[e]};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/PlayerVariableProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","dojo/i18n!esri/nls/jsapi"],function(t,p,l,k){k=k.geoenrichment.dijit.ReportPlayer.Variables;var g=t(null,{variable:null,constructor:function(e){this.variable=e},calculate:function(e){return 0},
getCalcType:function(){return"n/"},getAliasWithType:function(){return this.variable.alias},getDescriptionWithType:function(){return this.variable.alias},getDecimals:function(){return this.variable.precision||0}});return t(null,{isPlayerOnly:!0,_fieldNameToVariableCache:null,_templateNameToVariableCache:null,constructor:function(e){this._templateNameToVariableCache=e&&e.templateNameToVariableCache||{};this._fieldNameToVariableCache={};for(var a in this._templateNameToVariableCache)e=this._templateNameToVariableCache[a],
this._fieldNameToVariableCache[e.fieldName]=e},get:function(e){return this._templateNameToVariableCache[e]||this._fieldNameToVariableCache[e]},toCalculator:function(e){return(e=this.get(e))&&new g(e)},addVariable:function(e){this._fieldNameToVariableCache[e.fieldName]=e;this._templateNameToVariableCache[e.templateName]=e},addScriptVariable:function(e){this._fieldNameToVariableCache[e.fieldName]=e;this._templateNameToVariableCache[e.templateName]=e},getVariables:function(){return Object.keys(this._fieldNameToVariableCache).map(function(e){return this._fieldNameToVariableCache[e]},
this)},getVariablesDataVintageAndSources:function(e){var a=[],d={},c={};this.getVariables().forEach(function(h){h.fullName&&(c[h.fullName.toLowerCase()]=h)});for(var b in e.usedVariablesCache)if((e=c[b.toLowerCase()])&&e.vintage&&e.source){var f=e.vintage+";"+e.source;d[f]||(d[f]=!0,a.push({vintage:e.vintage,source:e.source}))}d=a.map(function(h){return h.source}).join(", ");a=a.map(function(h){return h.vintage}).join(", ");return{dataVintageDescription:d&&a?l.substitute(k.sourcePattern,{source:d})+
" "+l.substitute(k.vintagePattern,{vintage:a}):"",dataSources:d,dataVintage:a}},toJson:function(){return{templateNameToVariableCache:p.clone(this._templateNameToVariableCache)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DefaultStyles":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil"],function(t,p,l){return t(null,{_styles:null,_stylesArray:null,constructor:function(k){this._styles={Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"}};
p.mixin(this._styles,k);this._stylesArray=[];for(var g in this._styles)this._stylesArray.push(g)},getStyle:function(k){return this._styles[k]},getStylesArray:function(){return this._stylesArray},tryApplyStyle:function(k,g,e){if(g=this.getStyle(g))for(var a in g)e&&void 0!==k[a]||(k[a]=g[a])},findDefaultStyle:function(k){var g,e=this;this.getStylesArray().some(function(a){var d=e.getStyle(a),c;for(c in d){if(!k[c])return!1;if("color"===c||"backgroundColor"===c){if(!l.colorsEqual(k[c],d[c]))return!1}else if(k[c]!==
d[c])return!1}g=a;return!0});return g}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/ImageDataHolder":function(){define(["esri/dijit/geoenrichment/utils/CacheUtil"],function(t){function p(){return t.get("ImageDataHolder.imageData")}function l(){return t.get("ImageDataHolder.fileNameToOriginal")}var k={},g;k.setImageDataHolder4x=function(e){g=e;e=p();for(var a in e)g.putImageData(a,e[a])};k.putImageData=function(e,a){if(g)g.putImageData(e,a);else if("string"===typeof e&&a){var d=
e.toLowerCase();l()[d]=e;p()[d]=a}else console.error("Invalid image filename or data!")};k.getImageData=function(e){return g?g.getImageData(e):"string"!==typeof e?null:p()[e.toLowerCase()]};k.findFileNameByData=function(e){if(g)return g.findFileNameByData(e);var a=p(),d;for(d in a)if(e===a[d])return l()[d];return null};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/conversion/CssParser":function(){define(["../PageBorderStyles","../ThemeUpdateUtil","../../../_devConfig"],function(t,
p,l){var k={"font-size":"fontSize","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor",opacity:"opacity",url:"data","background-position":"position","background-repeat":"repeat","background-size":"scale"},g={colors:1,colors3series:1};return{fromCssText:function(e){function a(n){var q=f;n.split("@").forEach(function(r){q=q[r]=q[r]||{}});return q}function d(n,q){if(q.borderStyle||q.border)if(n.border=
{},n.border.style=t.toSupportedValue(q.borderStyle),"string"===typeof q.border){var r=q.border.split(" ");3===r.length&&(n.border.thickness=Number(r[0].replace("px","")),n.border.lineStyle=r[1],n.border.color=r[2])}for(var u in q)if("border"!==u&&"borderStyle"!==u){r=q[u];var v=u;var w=r,z=n;"font-size"===v?(z[k[v]]=c(w.replace("px","")),v=!0):"background-repeat"===v?(z[k[v]]=c("repeat"===w),v=!0):"background-size"===v?(z[k[v]]=c("contain"===w||"cover"===w),z.size="auto"===w?null:w,v=!0):v=!1;v||
(n[k[u]||u]=c(r))}}function c(n){if(void 0===n||null===n||"null"===n||"undefined"===n)return"";if("true"===n)return!0;if("false"===n)return!1;if(!0===n)return!0;if(!1===n)return!1;var q=Number(n);return isNaN(q)?n:q}function b(n){if(l.emulateErrors.themeParseError)throw Error("Error test: something crashed during the parsing of the theme!");if("object"===typeof n)for(var q in n){var r=n[q];if(g[q]){var u=[],v=Object.keys(r);if(v.length){var w=v.every(function(z){return-1!==z.indexOf("_")});v.forEach(function(z,
E){u[w?z.split("_")[1]:E]=r[z]})}n[q]=u}else b(r)}}var f={};e=e.replace(/\r?\n|\r/g,"");e=e.replace(/(\w|\d)_(\w|\d)/g,"$1@$2");e=e.replace("data:","dataM");e=e.replace(";base64","Mbase64");var h=function(){var n={};(e.match(/\..*?\}/g)||[]).forEach(function(q){var r=q.substring(1,q.indexOf("{")).trim(),u={};q.substring(q.indexOf("{")+1,q.indexOf("}")).trim().split(";").forEach(function(v){if(v=v.trim()){v=v.split(":");var w=v[1].trim();w=w.replace("dataM","data:");w=w.replace("Mbase64",";base64");
u[v[0].trim()]=w}});n[r]=u});return n}(),m;for(m in h)d(a(m),h[m]);delete f.themeMetadata;b(f);p.populateMissingStyles(f);return f}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUpdateUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ThemeLibrary","./ThemeUtil"],function(t,p,l,k){return{populateMissingStyles:function(g){if(g){g.table&&g.table.overrideStyles||(g.table={overrideStyles:t.mixin({},g.table)});g.icon||(g.icon=t.clone(g.infographic.staticInfographic.icon),
g.highlightedIcon=t.clone(g.infographic.staticInfographic.highlightedIcon));g.chart.icon||(g.chart.icon=t.clone(g.infographic.staticInfographic.icon));g.chart.xAxis.lineColor||(g.chart.xAxis.lineColor=g.chart.xAxis.axisStyle.color,g.chart.yAxis.lineColor=g.chart.yAxis.axisStyle.color);var e=k.getThemeColors(g),a=g.chart.colors.slice(),d=g.chart.colors3series&&g.chart.colors3series.slice(),c=l.getDefaultTheme({defaultFontFamilty:g.document.fontFamily,defaultFontSize:g.document.fontSize});k.applyThemeColorsToTheme({theme:c,
colors:e,chartColors:a,colors3series:d});p.populateObject(g,c,!1)}}}})},"esri/dijit/geoenrichment/utils/async/AsyncQueue":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dijit/Destroyable ../DelayUtil".split(" "),function(t,p,l,k,g,e){var a=t(g,{_lastPromise:null,_isFinished:!1,_isDestroyed:!1,_lastDfd:null,_lastResult:null,constructor:function(d){p.mixin(this,d)},add:function(d,c){c=c||{};var b=this;if(!this._isDestroyed){this._lastDfd||
(this.onStarted(),this._lastDfd=new l);this._isFinished=!1;var f=function(){var m=function(){if(!b._isDestroyed)try{return"function"===typeof d?d():d}catch(q){return(new l).reject(q)}},n=0<=c.delayBefore?function(){return e.delay(m,c.delayBefore)}:m;return(0<=c.delayAfter?function(){return k(n(),function(q){return e.delay(function(){return q},c.delayAfter)})}:n)()};!this._lastPromise||this._lastPromise.isFulfilled()?this._lastPromise=k(f()):this._lastPromise=k(this._lastPromise).then(f);var h=this._lastPromise;
k(h,function(m){h!==b._lastPromise||b._isDestroyed||b._isFinished||h&&!h.isFulfilled()||(b._isFinished=!0,b._lastDfd.resolve(m),b._lastResult=m,b._lastDfd=null,b.onFinished(m))},this._lastDfd.reject);return this.getPromise()}},getPromise:function(){return this._isDestroyed?null:this._lastDfd&&this._lastDfd.promise||this._lastResult},isFinished:function(){return this._isFinished},isDestroyed:function(){return this._isDestroyed},destroy:function(){this._isDestroyed=!0},onStarted:function(){},onFinished:function(d){}});
a.executeFunctions=function(d,c,b){b=b||{};var f=new a,h=[];d.forEach(function(m,n){f.add(function(){return k(m(),function(q){h.push(q);return q})},{delayBefore:0===n?void 0:c})});b.onQueueReady&&b.onQueueReady(f);return k(f.getPromise(),function(m){return b.collectResults?h:m})};a.processArrayInBatches=function(d,c){function b(){if(d.length){for(var h=[],m=0;m<c.batchSize&&d.length;m++)h.push(d.shift());c.processBatch?c.callback(h):h.forEach(c.callback);setTimeout(b,c.timeout||0)}else f.resolve()}
d=d.slice();var f=new l;b();return f.promise};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/WebMapJsonUtil":function(){define([],function(){return{processWebMapJson:function(t,p){function l(g,e,a){g=g.featureCollection.layers[0].featureSet.features[0];g.attributes=g.attributes||{};g.attributes[e]=a}var k=JSON.parse(p);k.operationalLayers.forEach(function(g){var e=g.featureCollection&&g.featureCollection.layers&&1===g.featureCollection.layers.length?g.featureCollection.layers[0].id:
void 0;"string"===typeof e&&0===e.indexOf("SiteLayer")?(g.isSiteLayer=!0,(e=0===e.indexOf("SiteLayer.")?e.replace("SiteLayer.",""):void 0)&&l(g,"STORE_ID",e)):"string"===typeof e&&0===e.indexOf("StudyAreasLayer.")?(g.isSiteLayer=!0,l(g,"AREA_ID",e.replace("StudyAreasLayer.",""))):"string"===typeof e&&0===e.indexOf("LocatorResultsLayer.")?(g.isLocatorLayer=!0,g.calculatorName=e.replace("LocatorResultsLayer.","")):"string"===typeof e&&0===e.indexOf("ComparisonResultsLayer.")?(g.isComparisonLayer=!0,
g.calculatorName=e.replace("ComparisonResultsLayer.","")):g.isOtherLayer=!0});return{fileName:t,originalString:p,webMapJson:k}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsStoreSerializer":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all ./AttributesUtil ./NotesUtil ./CustomAttachmentsStore esri/dijit/geoenrichment/utils/ImageInfoUtil".split(" "),function(t,p,l,k,g,e){return{getAttachmentsStoreJson:function(a,d){function c(r){if(d.noCache)return r;
h=h||{};for(var u in h)if(h[u]===r)return u;u="image_"+f++;h[u]=r;return u}function b(){return p([d.saveImages&&a.getImages(),a.getAttributes(),a.getNotes()]).then(function(r){var u=r[0]||[],v=r[1]||[],w=r[2]||[];return p(u.map(function(z){return p([t(z.getThumbnail(),function(E){return e.ensureDataUrlForRemoveImage(E)}),t(z.getUrl(),function(E){return e.ensureDataUrlForRemoveImage(E)})]).then(function(E){z.__thumbnail=c(E[0]);z.__url=c(E[1])})})).then(function(){return{images:u.map(function(z){var E=
z.__thumbnail,F=z.__url;delete z.__thumbnail;delete z.__url;return{description:z.description,thumbnail:E,url:F,filename:z.filename,imageViewType:z.imageViewType}}),attributes:v.map(function(z){return l.attributeToJson(z)}),notes:w.map(function(z){return k.noteToJson(z)})}})})}if(!a)return null;var f=0,h,m=[],n=[];if(a.supportsMultipleAreas)for(var q=0;q<d.numAreas;q++)a.setCurrentAnalysisAreaIndex(q),n.push(t(b(),function(r){m.push(r)}));else n.push(t(b(),function(r){m.push(r)}));return p(n).then(function(){return{supportsMultipleAreas:a.supportsMultipleAreas,
areaAttachments:m,imageDataCache:h}})},getAttachmentsStoreFromJson:function(a){return a&&new g(a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/NotesUtil":function(){define([],function(){return{noteToJson:function(t){return{text:t.text}},noteFromJson:function(t){return{text:t.text}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/CustomAttachmentsStore":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/when"],
function(t,p){var l={fromJson:function(k){function g(e){return k.imageDataCache&&k.imageDataCache[e]||e}k.areaAttachments=k.areaAttachments||k.areaAttachements;delete k.areaAttachements;return{getImagesForAreaAt:function(e){e=k.supportsMultipleAreas?e:0;return(k.areaAttachments[e]&&(k.areaAttachments[e].images||k.areaAttachments[e].attachments)||[]).map(function(a){return{description:a.description,filename:a.filename,imageViewType:a.imageViewType,getThumbnail:function(){return g(a.thumbnail)},getUrl:function(){return g(a.url)}}})},
getAttributesForAreaAt:function(e){e=k.supportsMultipleAreas?e:0;return k.areaAttachments[e]&&k.areaAttachments[e].attributes||[]},getNotesForAreaAt:function(e){e=k.supportsMultipleAreas?e:0;return k.areaAttachments[e]&&k.areaAttachments[e].notes||[]}}}};return t(null,{supportsMultipleAreas:!1,_currentAreaIndex:0,_provider:null,constructor:function(k){(this._provider=k.getAttachmentsForAreaAt||k.getImagesForAreaAt||k.getAttributesForAreaAt||k.getNotesForAreaAt?k:l.fromJson(k))&&this._provider.getAttachmentsForAreaAt&&
(k.getImagesForAreaAt=function(g){return k.getAttachmentsForAreaAt(g)});this.supportsMultipleAreas=k.supportsMultipleAreas},initialize:function(){},getImages:function(){function k(e){e.forEach(function(a){!a.getUrl&&a.getAttachmentUrl&&(a.getUrl=function(){return a.getAttachmentUrl()})})}var g=this._provider.getImagesForAreaAt?this._provider.getImagesForAreaAt(this._currentAreaIndex):[];return g?Array.isArray(g)?(k(g),g):p(g,function(e){k(e);return e}):g},getAttributes:function(){return this._provider.getAttributesForAreaAt?
this._provider.getAttributesForAreaAt(this._currentAreaIndex):[]},getNotes:function(){return this._provider.getNotesForAreaAt?this._provider.getNotesForAreaAt(this._currentAreaIndex):[]},setCurrentAnalysisAreaIndex:function(k){this._currentAreaIndex=k}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonSerializer":function(){define(["./query/TemplateJsonQueryUtil","../images/ImageDataHolder","../conditionalStyling/ConditionalStyleUtil"],function(t,p,l){return{serialize:function(k){this._attachImagesToTemplateJson(k);
return k},_attachImagesToTemplateJson:function(k){function g(a){var d=p.getImageData(a);d&&(e[a]=d)}var e={};t.processTemplateFieldInfos(k,function(a){a.isImage?(g(a.imageJson.fileName),a.triggerJson&&l.collectImageFileNames(a.triggerJson).forEach(g)):a.isInfographic&&a.infographicJson.variableTables&&a.infographicJson.variableTables.forEach(function(d){d.image&&g(d.image.imageJson.fileName)})});t.processSectionElements(k,function(a){"img"===a.id&&g(a.fileName)});k.imageData=e},deserialize:function(k){this._takeImagesFromTemplateJson(k);
return k},_takeImagesFromTemplateJson:function(k){for(var g in k.imageData)p.putImageData(g,k.imageData[g]);delete k.imageData}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleUtil":function(){define(["esri/dijit/geoenrichment/utils/PageUnitsConverter","esri/dijit/geoenrichment/utils/SortUtil"],function(t,p){var l={getConditionalStyle:function(d,c,b){return(d=l.getMatchedCase(d,c,b))?l.styleFromSetters(d.setters):null},getMatchedCase:function(d,c,
b){if(null!==d&&""!==d&&(d=Number(d),c&&!isNaN(d))){var f;c.cases.some(function(h){if(l._checkValueMatchesCase(d,h,b))return f=h,!0});return f}},_checkValueMatchesCase:function(d,c,b){function f(h,m,n){n=b?(h=+h,b(+n)):n;switch(m){case "\x3d":return h===n;case "\x3c":return h<n;case "\x3e":return h>n;case "\x3c\x3d":return h<=n;case "\x3e\x3d":return h>=n}return!1}return c.compareInfos&&c.compareInfos.length&&c.compareInfos.every(function(h){return f(d,h.operator,Number(h.value))})}},k={FontSize:"fontSize",
FontColor:"fontColor",FontFamily:"fontFamily",ForeColor:"color",BackColor:"backgroundColor"},g={},e;for(e in k)g[k[e]]=e;l.styleFromSetters=function(d){if(!d)return null;var c={};d.forEach(function(b){k[b.property]&&(c[k[b.property]]=b.value);"IsBold"===b.property&&(c.fontWeight="True"===b.value?"bold":"normal");"IsItalic"===b.property&&(c.fontStyle="True"===b.value?"italic":"normal");"IsUnderlined"===b.property&&(c.textDecoration="True"===b.value?"underline":"none")});t.ptToPxObj(c);return c};l.settersFromStyle=
function(d){var c=[];d=t.pxToPtObj(d,!0);for(var b in d){var f=g[b],h=d[b];!f||"string"!==typeof h&&isNaN(h)||c.push({property:f,value:h});"fontWeight"===b?c.push({property:"IsBold",value:"bold"===h?"True":"False"}):"fontStyle"===b?c.push({property:"IsItalic",value:"italic"===h?"True":"False"}):"textDecoration"===b&&c.push({property:"IsUnderlined",value:"underline"===h?"True":"False"})}return c};l.getConditionalFileName=function(d,c,b){function f(h){var m;c.cases.some(function(n){return n.isDefault===
h?(m=n,!0):!1});return m}return(d=(d="first-non-default"===d?f(!1):l.getMatchedCase(d,c,b))||f(!0))?d.setters[0].value:null};var a=/\.png$/i;l.collectImageFileNames=function(d){var c=[];d&&d.cases&&d.cases.forEach(function(b){b.setters&&b.setters.forEach(function(f){"Source"===f.property&&a.test(f.value)&&c.push(f.value)})});return c};l.isSupportedStyleCalcMethod=function(d){return"percentInGroup"===d||"aboveAverage"===d||"belowAverage"===d||"indexDescOrder"===d};l.getConditionalStylesOrFileNamesForGroup=
function(d,c,b){var f=c.map(function(w,z){return{value:w,index:z}}),h=[];for(c=0;c<f.length;c++)h.push(void 0);if(f.length){var m=d.calcMethod;f=f.filter(function(w){return"number"===typeof w.value&&!isNaN(w.value)});m&&(f=f.sort(function(w,z){return p.compareNumeric(w.value,z.value,"indexDescOrder"===m)}));if(f.length)if(m)if("percentInGroup"===m){var n=f[0].value,q=f[f.length-1].value;var r={min:n,max:q};f.forEach(function(w){var z=(w.value-n)/(q-n||.001)*100;h[w.index]=b?l.getConditionalFileName(z,
d):l.getConditionalStyle(z,d)})}else if("indexDescOrder"===m){r={min:null,max:null,numElements:f.length};var u=function(w){return 0<=w?w:f.length+w};f.forEach(function(w,z){h[w.index]=b?l.getConditionalFileName(z,d,u):l.getConditionalStyle(z,d,u)})}else{c=function(){var w=0;f.forEach(function(z){w+=z.value});return w/f.length};if("aboveAverage"===m){var v=c();f=f.filter(function(w){return w.value>v})}else if("belowAverage"===m)v=c(),f=f.filter(function(w){return w.value<v});else return{styles:h};
f.forEach(function(w){h[w.index]=b?l.getConditionalFileName("first-non-default",d):l.styleFromSetters(d.cases[0].setters)})}else f.forEach(function(w){h[w.index]=b?l.getConditionalFileName(w.value,d):l.getConditionalStyle(w.value,d)})}return{styles:h,stats:r}};l.conditionalValueFromPercentInGroup=function(d,c,b){return d+b/100*(c-d)};l.getStatistics=function(d){var c=Infinity,b=-Infinity,f,h;if(d)if(d.calcMethod&&"percentInGroup"!==d.calcMethod){c=0;b=100;var m=!0}else d.cases.forEach(function(n){n.compareInfos&&
n.compareInfos.forEach(function(q){var r=Number(q.value);isNaN(r)||(r<c&&(c=r,f="\x3c"===q.operator||"\x3c\x3d"===q.operator),r>b&&(b=r,h="\x3e"===q.operator||"\x3e\x3d"===q.operator),m=!0)})});return m&&-1E12<c&&1E12>c&&-1E12<b&&1E12>b?{calcMethod:d.calcMethod,min:c,max:b,canFallBelowMin:f,canFallAboveMax:h}:null};return l})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function t(g,e,a,d){g=void 0===g||null===g;return g!=(void 0===e||null===e)?(e=g?-1:1,(void 0===d?
a:d)?-e:e):g?0:null}function p(g){var e=/^(.+)\s([1-9]\d*)$/.exec(g);return e?{base:e[1],number:e[2]}:/^[1-9]\d*$/.test(g)?{base:"",number:+g}:{base:g,number:0}}var l={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(g,e,a,d){d=t(g,e,a,d);if(null!==d)return d;g=Number(g);e=Number(e);d=g>e?1:g<e?-1:0;return a?-d:d},compareString:function(g,e,a,d){d=t(g,e,a,d);if(null!==d)return d;g=String(g);e=String(e);d=g.localeCompare(e);return a?
-d:d}},k=/^(.+)\s([1-9]\d*)(\D*)$/;l.compareNames=function(g,e,a,d){var c=p("string"===typeof g?g.toLowerCase():g),b=p("string"===typeof e?e.toLowerCase():e),f=null;if(c.base===b.base)f=l.compareNumeric(c.number,b.number,a,d);else{var h=k.exec(c.base);if(h){var m=k.exec(b.base);m&&h[1]===m[1]&&h[3]===m[3]&&(f=l.compareNumeric(h[2],m[2],a,d))}null===f&&(f=l.compareString(c.base,b.base,a,d))}return f||l.compareString(g,e,a,d)};l.compare=function(g,e,a,d){var c=t(g,e,a,d);if(null!==c)return c;c=typeof g;
typeof e!=c&&(c="");switch(c){case "number":case "boolean":break;case "object":g=g.valueOf();e=e.valueOf();break;default:return l.compareString(g,e,a,d)}c=g>e?1:g<e?-1:0;return a?-c:c};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./map/RendererToMetadataConverter"],function(t,p){var l={},k={STORE_ID:1,AREA_ID:1,StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1};
l.recoverMetadataFromAreaData=function(g,e){g=g[0];var a={name:"DataCollection",tags:[{name:"Calculators",tags:[]}]},d={},c;for(c in g){var b=g[c].data,f=g[c].comparisonLevels,h=e.map[c],m=!!h;h=m&&"object"===typeof h&&h.webMapJson||null;var n=e.locator[c];n={name:m?"Maps":n?"Locator":"DataCollections",attributes:{Name:c},tags:[]};a.tags[0].tags.push(n);var q=[];if(m)for(var r in b){if(!k[r]){var u={name:"Map",attributes:{Name:r},tags:[{name:"Layers",tags:[]}]};h&&h.operationalLayers.forEach(function(z){if(z.isLocatorLayer){var E=
{name:"LocatorResultsLayer",attributes:{CalculatorName:z.calculatorName},tags:[p.convertRendererJson(z.featureCollection.layers[0].layerDefinition.drawingInfo.renderer)]};d[z.calculatorName]=z.featureCollection.layers[0].title;u.tags[0].tags.push(E)}z.isComparisonLayer&&(E=z.featureCollection.layers[0].layerDefinition.drawingInfo,z={name:"ComparisonResultsLayer",attributes:{CalculatorName:z.calculatorName},tags:[p.convertRendererJson(E.renderer)]},E.labelingInfo&&z.tags.push(p.convertLabelingInfo(E.labelingInfo)),
u.tags[0].tags.push(z))});q.push(u)}}else for(r in b)q.push({name:"Field",attributes:{Name:r,Alias:r,MapTo:"DC."+r,Type:"number"===typeof b[r]?"Double":"String"}});n.tags.push({name:"Fields",tags:q});if(f&&f.length){var v=[],w={};f.forEach(function(z){z.StdGeographyLevel&&!w[z.StdGeographyLevel]&&(w[z.StdGeographyLevel]=1,v.push(z.StdGeographyLevel))});v.length&&n.tags.push({name:"ComparisonLevels",tags:v.map(function(z){return{name:"ComparisonLevel",attributes:{Name:z}}})})}}a.tags[0].tags.forEach(function(z){if("Locator"===
z.name){var E=d[z.attributes.Name];E&&(z.attributes.LayerName=E)}});return t.parseJson(a)};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/RendererToMetadataConverter":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/JsonXmlTypedConverter","esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(t,p,l){var k={convertRendererJson:function(g){switch(g.type){case "simple":"esriPMS"===g.symbol.type&&(g=t.clone(g),delete g.symbol.url)}return l.parseXml(p.parseJson(g,
{rootName:"Renderer"}))},convertLabelRendererJson:function(g){g=g.uniqueValueInfos.map(function(e){return{labelExpressionInfo:{expression:"$feature.StdGeographyName"},where:"StdGeographyLevel\x3d'"+e.value+"'",labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:e.symbol}});return k.convertLabelingInfo(g)},convertLabelingInfo:function(g){return l.parseXml(p.parseJson(g,{rootName:"LabelingInfo"}))}};return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/TemplateJsonLoader":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/CacheUtil ./CustomReportsManager ./GenericTemplateGenerator ./dataCollections/DataCollectionsLoader ../../core/conversion/PortalToEditorConverter ../../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f){var h={_getCache:function(){return k.get("TemplateJsonLoader")},getCachedTemplateJsonPromise:function(m,n){m=m+";"+n.reportID;return(m=this._getCache()[m])&&m.modified===n.modified?m.promise.then(function(q){return{templateJson:t.clone(q.templateJson),templateVariableProvider:q.templateVariableProvider}}):null},putCachedTemplateJsonPromise:function(m,n,q){n=n+";"+q.reportID;this._getCache()[n]={modified:q.modified,promise:m}}};return{getTemplateJsonByID:function(m,
n){var q=this,r=new p;l(g.getCustomReportByID(m),function(u){if(u){var v=n&&h.getCachedTemplateJsonPromise(m.countryID,u);v?v.then(r.resolve,r.reject):(v=q._loadCustomReportData(u).then(function(){var w=new c;return l(d.provideEditorJson(u,{variableProvider:w}),function(){var z=u.templateJson;u.portalJson=null;u.templateJson=null;return{templateJson:z,templateVariableProvider:w}})}),n?(h.putCachedTemplateJsonPromise(v,m.countryID,u),h.getCachedTemplateJsonPromise(m.countryID,u).then(r.resolve,r.reject)):
v.then(r.resolve,r.reject))}else r.reject("Can't find a report")},r.reject);return r.promise},_loadCustomReportData:function(m){m.portalJson=null;return m.templateData.getFiles().then(function(n){m.portalJson={files:n}})},createTemplateJsonFromVariables:function(m){return a.loadVariables({countryID:m.countryID,outFields:["description","precision","type","vintage"],forceLowerCase:!0}).then(function(n){var q=new c,r=n.fullNameToVariableCache;n=m.variables.fullNames.map(function(u){var v=b.createFieldNameFromSource(u),
w=m.variables.customDataMapping[u];w=w?w.variable:r[u];u={id:w.id.toLowerCase(),fullName:u,alias:w.description,fieldName:v,precision:w.precision,calculatorName:b.DATA_COLLECTIONS_CALCULATOR_NAME,templateName:b.DATA_COLLECTIONS_CALCULATOR_NAME+"."+v,type:w.type,vintage:w.vintage};q.addVariable(u);return f.getCalculatorOrScriptFieldInfo(u.templateName,{variableProvider:q})});return{templateJson:e.generateTemplatesFromFieldInfos(n,{comparisonLevels:m.comparisonLevels}),templateVariableProvider:q}})}}})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GenericTemplateGenerator":function(){define("../../core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder ../../core/supportClasses/tableJson/TableJsonUtil ../../core/sections/sectionUtils/SectionJsonUtil ../../core/infographics/InfographicTypes ../../core/infographics/utils/InfographicJsonUtil".split(" "),function(t,p,l,k,g,e){var a={},d={calcNumRowsColumns:function(f){var h=
2>=f?1:6>=f?2:12>=f?3:Math.ceil(f/4);var m=1===f?1:4>=f?2:9>=f?3:4;return{numRows:h,numColumns:m,numVarsInLastRow:m-(h*m-f),lastRowCellIndexes:null,lastRowCellWidths:null}}},c={mergeLastRow:function(f,h,m){2===h.numColumns?1===h.numVarsInLastRow&&(l.modifyTableJson(f,h.numRows-1,0,{columnSpan:2}),h.lastRowCellWidths=[2*m]):3===h.numColumns?1===h.numVarsInLastRow?(l.modifyTableJson(f,h.numRows-1,0,{columnSpan:3}),h.lastRowCellWidths=[3*m]):2===h.numVarsInLastRow&&(l.modifyTableJson(f,h.numRows-1,0,
{cellStyle:{width:1.5*m}}),l.modifyTableJson(f,h.numRows-1,1,{columnSpan:2,cellStyle:{width:.5*m}}),h.lastRowCellWidths=[1.5*m,1.5*m]):4===h.numColumns&&(1===h.numVarsInLastRow?(l.modifyTableJson(f,h.numRows-1,0,{columnSpan:4}),h.lastRowCellWidths=[4*m]):2===h.numVarsInLastRow?(l.modifyTableJson(f,h.numRows-1,0,{columnSpan:2}),l.modifyTableJson(f,h.numRows-1,2,{columnSpan:2}),h.lastRowCellIndexes=[0,2],h.lastRowCellWidths=[2*m,2*m]):3===h.numVarsInLastRow&&(l.modifyTableJson(f,h.numRows-1,0,{cellStyle:{width:4*
m/3}}),l.modifyTableJson(f,h.numRows-1,1,{columnSpan:2,cellStyle:{width:2*m/3}}),l.modifyTableJson(f,h.numRows-1,2,{cellStyle:{width:2*m/3}}),l.modifyTableJson(f,h.numRows-1,3,{cellStyle:{width:4*m/3}}),h.lastRowCellIndexes=[0,1,3],h.lastRowCellWidths=[4*m/3,4*m/3,4*m/3]))}},b={insertNextPanel:function(f,h,m){void 0===h.currentRowIndex&&(h.currentRowIndex=0,h.currentColumnIndex=0);var n=h.currentRowIndex===h.numRows-1;f.rows[h.currentRowIndex].fieldInfos["field"+(n&&h.lastRowCellIndexes?h.lastRowCellIndexes[h.currentColumnIndex]:
h.currentColumnIndex)]=m(n&&h.lastRowCellWidths&&h.lastRowCellWidths[h.currentColumnIndex]);h.currentColumnIndex++;h.currentColumnIndex>h.numColumns-1&&(h.currentColumnIndex=0,h.currentRowIndex++)}};a.generateTemplatesFromFieldInfos=function(f){var h=d.calcNumRowsColumns(f.length),m=t.createBlankTemplate({elementWidth:500,elementHeight:250,layout:{numRows:h.numRows,numColumns:h.numColumns}}),n=m.sectionsTables[0];c.mergeLastRow(n,h,500);f.forEach(function(q){b.insertNextPanel(n,h,function(r){var u=
a._createInfographicJson(q,r||500,250);r=l.createSingleCellTable({width:r||500,height:250,fieldInfo:p.createFieldInfoFromInfographic(u)});return p.createFieldInfoFromSection(k.wrapInDetailsSectionJson(r))})});return m};a._createInfographicJson=function(f,h,m){return{type:g.ONE_VAR,title:f.alias,style:{width:h,height:m},levels:e.getDefaultLevels(),fieldInfos:[f],calcData:{calculatorName:f.templateName.substr(0,f.templateName.indexOf(".")),variables:[f.fullName]}}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions",
"./TemplateJsonModificationUtil"],function(t,p){return{createBlankTemplate:function(l){var k={},g=l.documentOptions||t.getDefaultDocumentOptionsGraphicReport();g.pagesize=t.combineCustomSizeString(g.left+g.right+l.layout.numColumns*l.elementWidth,g.top+g.bottom+l.layout.numRows*l.elementHeight,"px");k.documentOptions=g;g={style:{width:l.layout.numColumns*l.elementWidth},columns:[],rows:[]};for(var e=0;e<l.layout.numColumns;e++)g.columns.push({field:"field"+e,style:{width:l.elementWidth}});for(e=0;e<
l.layout.numRows;e++)g.rows.push({style:{height:l.elementHeight},fieldInfos:{}});k.sectionsTables=[g];p.adjustDocumentOptions(k);return k}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonModificationUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator"],function(t,p){var l={},k={getJsonStat:function(e){var a=0,d=0,c=[];e.sectionsTables.forEach(function(b){var f=
0;b.columns.forEach(function(m){f+=g.getFieldWidth(b,b.rows[0],m)});a=Math.max(a,f);var h=0;b.rows.forEach(function(m){h+=g.getDataHeight(b,m,b.columns[0])});d=Math.max(d,h);c.push({totalW:f,totalH:h})});return{tableInfos:c,totalWMax:a,totalHMax:d}}},g={getFieldWidth:function(e,a,d){return p.getFieldWidth({looseResize:!0},a,d)||d.style.width},getDataHeight:function(e,a,d){return p.getDataHeight({looseResize:!0},a,d.field)},getAverageFieldWidth:function(e,a){var d=0;e.rows.forEach(function(c){d+=g.getFieldWidth(e,
c,a)});return d/e.rows.length},getAverageDataHeight:function(e,a){var d=0;e.columns.forEach(function(c){d+=g.getDataHeight(e,a,c)});return d/e.columns.length}};l.adjustDocumentOptions=function(e){if(e.documentOptions){var a=k.getJsonStat(e);a.totalWMax&&a.totalHMax&&!isNaN(a.totalWMax)&&!isNaN(a.totalHMax)&&(e=e.documentOptions,e.pagesize=t.combineCustomSizeString(e.left+e.right+a.totalWMax,e.top+e.bottom+a.totalHMax,"px"),(a=t.getClosestStandrdSizes(e)[0])&&.001>a.score&&a.orientation===e.orientation&&
(e.pagesize=a.pagesize))}};l.JsonStatCollector=k;l.DataUtil=g;return l})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator":function(){define("dojo/_base/lang ./gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil ./gridLayoutCalcUtils/GridElementBoxCalculator ./gridLayoutCalcUtils/GridCellNodePlacer ./gridLayoutCalcUtils/rows/GridLayoutRowsCalculator ./gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator ./gridLayoutCalcUtils/GridLayoutSnapper ../../supportClasses/tableJson/TableJsonUtil".split(" "),
function(t,p,l,k,g,e,a,d){var c={};l.calculator=c;c.markAsDirty=p.markAsDirty;c.fieldToColumn=p.fieldToColumn;c.dataIdToData=p.dataIdToData;c.getSpannedColumns=p.getSpannedColumns;c.recalcRows=g.recalcRows;c.recalcColumns=e.recalcColumns;c.recalcColumnsTableJson=e.recalcColumnsTableJson;c.recalcRowsToFitHeight=g.recalcRowsToFitHeight;c.adjustColumnWidth=e.adjustColumnWidth;c.getAffectedCellsForColumnAdjust=e.getAffectedCells;c.adjustRowHeight=g.adjustRowHeight;c.getAffectedCellsForRowAdjust=g.getAffectedCells;
c.recalcGridWidth=e.recalcGridWidth;c.calcFieldWidth=e.calcFieldWidth;c.getFieldWidth=e.getFieldWidth;c.setFieldWidth=e.setFieldWidth;c.calcDataHeight=g.calcDataHeight;c.getDataHeight=g.getDataHeight;c.setDataHeight=g.setDataHeight;c.autoSnapLayout=a.autoSnapLayout;c.positionCells=k.positionCells;c.calcFeatureCount=function(b,f,h){return(b-f)/h};c.calcRingIndexForCell=function(b){var f=b.parentGrid;if(!f)return-1;if(f.getNumDynamicRows())return void 0!==b.row.currentFeatureIndex?b.row.currentFeatureIndex:
b.row.index-f.getNumFixedRows();var h=f.getNumFixedColumns();return b.column.index<h?-1:Math.floor((b.column.index-h)/f.getNumDynamicColumns())};c.trimColumnsForNumberOfFeatures=function(b){for(var f=b.viewModel.dynamicReportInfo.fieldData.areaData.length,h=c.recalcGridWidth(b),m=0,n=0;n<b.getNumFixedColumns();n++)m+=b.columns[n].style.width;h-=m;m=c.calcFeatureCount(b.columns.length,b.getNumFixedColumns(),b.getNumDynamicColumns())-f;if(!(0>m)){var q=b.columns.slice();n=q.length=b.getNumFixedColumns();
for(var r=[],u=0;b.columns[n];){for(var v=0;v<f;v++){var w=b.columns[n++];u+=w.style.width;r.push(w)}n+=m}var z=h/u;r.forEach(function(E){E.style.width*=z});b.columns=q.concat(r)}};c.adjustRowsForNumberOfFeatures=function(b){var f=b.viewModel.dynamicReportInfo.fieldData.areaData.length;if(!(1>=f)){var h=b.rows[b.getNumFixedRows()];h.currentFeatureIndex=0;for(var m=1;m<f;m++){var n=t.clone(h);n.currentFeatureIndex=m;b.rows.push(n)}d.applyDefaultStyling({rows:b.rows,columns:b.columns})}};return c})},
"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil":function(){define([],function(){var t={markAsDirty:function(p){p._fieldToColumnHash=null;p._dataIdToDataHash=null},_calcGridHashes:function(p){p._fieldToColumnHash={};p.columns.forEach(function(l){p._fieldToColumnHash[l.field]=l});p._dataIdToDataHash={};p.rows.forEach(function(l){p._dataIdToDataHash[l.id]=l})},fieldToColumn:function(p,l){p._fieldToColumnHash||t._calcGridHashes(p);return p._fieldToColumnHash&&
p._fieldToColumnHash[l]},dataIdToData:function(p,l){p._dataIdToDataHash||t._calcGridHashes(p);return p._dataIdToDataHash&&p._dataIdToDataHash[l]},getSpannedColumns:function(p,l,k){var g=[];if(1>k)return[];var e;p.columns.some(function(a){if(e||a.field===l)g.push(a),e=!0;if(g.length===k)return!0});return g},getColumnSpannedFields:function(p,l,k){var g=null,e=l.fieldToRowSpanSourceDataIndex&&l.fieldToRowSpanSourceDataIndex[k];l=void 0!==e?p.rows[e]:l;l=l.columnSpans&&l.columnSpans[k];if(1<l)for(g=[],
k=t.fieldToColumn(p,k),e=k=p.columns.indexOf(k);e<k+l;e++)g.push(p.columns[e].field);return g},getRowSpannedData:function(p,l,k){var g=null;k=l.fieldToColumnSpanSourceField&&l.fieldToColumnSpanSourceField[k]||k;k=l.rowSpans&&l.rowSpans[k];if(1<k){g=[];for(var e=l=p.rows.indexOf(l);e<l+k;e++)g.push(p.rows[e])}return g},getMovableData:function(p,l,k){return(l=l.movableIndexHashVertical&&l.movableIndexHashVertical[k])&&p.rows[l]},getMovableColumn:function(p,l,k){return(l=l.movableFieldsHashHorizontal&&
l.movableFieldsHashHorizontal[k])&&t.fieldToColumn(p,l)}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridElementBoxCalculator":function(){define([],function(){function t(l,k,g,e,a){function d(n){return e&&void 0!==e.places?Number(n.toFixed(e.places)):n}if(!k||!g)return null;var c=p.calculator[a?"getFieldWidth":"calcFieldWidth"](l,k,g);a=p.calculator[a?"getDataHeight":"calcDataHeight"](l,k,g);for(var b=0,f=0,h=p.calculator.fieldToColumn(l,g),m=0;m<h.index;m++)b+=
p.calculator.getFieldWidth(l,k,l.columns[m].field);for(m=0;m<k.index;m++)f+=p.calculator.getDataHeight(l,l.rows[m],g);return{x:d(b),y:d(f),w:d(c),h:d(a)}}var p={calculator:null,calcCellBox:function(l,k){return t(l.parentGrid,l.row,l.column.field,k,!1)},calcDataBox:function(l,k,g,e){return t(l,k,g,e,!0)}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridCellNodePlacer":function(){define(["./rows/GridLayoutRowsCalculator","./columns/GridLayoutColumnsCalculator"],
function(t,p){return{positionCells:function(l){var k={},g={},e={},a={};if(l.rows.length){l.rows.forEach(function(f,h){l.columns.forEach(function(m,n){var q=e[n]||0,r=a[h]||0,u=t.getDataHeight(l,f,m.field);m=p.getFieldWidth(l,f,m.field);q+=u;r+=m;g[n+"_"+h]=q;k[n+"_"+h]=r;e[n]=q;a[h]=r})});l.getCells().forEach(function(f){f.domNode.style.left=(k[f.column.index-1+"_"+f.row.index]||0)+"px";f.domNode.style.top=(g[f.column.index+"_"+(f.row.index-1)]||0)+"px"});var d=0,c;for(c in e)d=Math.max(d,e[c]);var b=
0;for(c in a)b=Math.max(b,a[c]);l.mainNode.style.width=b+"px";l.mainNode.style.height=d+"px";l.domNode.style.width=b+"px";l.domNode.style.height=d+"px";l._width=b;l._height=d}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/GridLayoutRowsCalculator":function(){define(["./RowsProcessor","./RowsScaler","./RowDataUtil","./RowModifier"],function(t,p,l,k){var g={};g.recalcRows=t.recalcRows;g.recalcRowsToFitHeight=p.recalcRowsToFitHeight;g.adjustRowHeight=k.adjustRowHeight;
g.getAffectedCells=k.getAffectedCells;g.getDataHeight=l.getDataHeight;g.setDataHeight=l.setDataHeight;g.calcDataHeight=l.calcDataHeight;return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./RowDataUtil","../GridLayoutCalculatorQueryUtil"],function(t,p,l){function k(e,a){var d=[],c,b=0;a&&Object.keys(a).forEach(function(f){l.fieldToColumn(e,f)?b++:delete a[f]});b&&e.columns.some(function(f){if(c||
a[f.field])d.push(f),c=!0;a[f.field]&&b--;if(!b)return!0});return d}function g(e,a){var d=[],c,b=0;a&&Object.keys(a).forEach(function(f){l.dataIdToData(e,f)?b++:delete a[f]});b&&e.rows.some(function(f){if(c||a[f.id])d.push(f),c=!0;a[f.id]&&b--;if(!b)return!0});return d}return{recalcRows:function(e){var a={};e.columns.forEach(function(f,h){a[f.field]=h});var d;e.rows.forEach(function(f,h){f.index=h;f.style=f.style||{};f.style.fields=f.style.fields||{};void 0===f.id&&(f.id=t());void 0===f.style.height&&
(f.style.height=e.layoutDefaults.defaultRowHeight);delete f.excludedIndexHorizontal;delete f.movableFieldsHashHorizontal;delete f.fieldToColumnSpanSourceField;if(f.columnSpans){f.excludedIndexHorizontal={};f.movableFieldsHashHorizontal={};f.fieldToColumnSpanSourceField={};f._columnSpans=f._columnSpans||{};for(d in f.columnSpans){h=f._columnSpans[d];var m={};h=h?k(e,h):l.getSpannedColumns(e,d,f.columnSpans[d]);1<h.length&&(h.forEach(function(q){m[q.field]=!0;q.field!==d&&(f.excludedIndexHorizontal[a[q.field]]=
!0,f.fieldToColumnSpanSourceField[q.field]=d)}),f.movableFieldsHashHorizontal[d]=h[h.length-1].field);f.columnSpans[d]=h.length;f._columnSpans[d]=m}var n=0;Object.keys(f.columnSpans).forEach(function(q){2>f.columnSpans[q]?(delete f.columnSpans[q],delete f._columnSpans[q]):n++});n||(delete f.columnSpans,delete f._columnSpans)}delete f.excludedIndexVertical;delete f.movableIndexHashVertical;delete f.fieldToRowSpanSourceDataIndex;f.fieldInfos=f.fieldInfos||{}});e.rows.forEach(function(f,h){if(f.rowSpans)for(d in f._rowSpans=
f._rowSpans||{},f.rowSpans){var m=f._rowSpans[d],n={};n[f.id]=!0;var q=a[d],r=f.rowSpans[d];if(m)m=g(e,m);else{m=[];for(var u=h;u<h+r;u++)m.push(e.rows[u])}1<m.length&&(m.forEach(function(v){if(v.id!==f.id){v.excludedIndexVertical=v.excludedIndexVertical||{};v.excludedIndexVertical[q]=!0;v.fieldToRowSpanSourceDataIndex=v.fieldToRowSpanSourceDataIndex||{};v.fieldToRowSpanSourceDataIndex[d]=f.index;var w=f.columnSpans&&f.columnSpans[d];if(w)for(var z=1;z<w;z++)v.excludedIndexVertical[q+z]=!0,v.fieldToRowSpanSourceDataIndex[e.columns[q+
z].field]=f.index}n[v.id]=!0}),f.movableIndexHashVertical=f.movableIndexHashVertical||{},f.movableIndexHashVertical[d]=h+m.length-1);f.rowSpans[d]=m.length;f._rowSpans[d]=n}});e.rows.forEach(function(f,h){if(f.rowSpans){for(d in f.rowSpans)f.rowSpans[d]=Math.min(f.rowSpans[d],e.rows.length-h);var m=0;Object.keys(f.rowSpans).forEach(function(n){2>f.rowSpans[n]?(delete f.rowSpans[n],f._rowSpans&&delete f._rowSpans[n]):m++});m||(delete f.rowSpans,delete f._rowSpans)}});e.rows.forEach(function(f,h){f.fieldInfos&&
Object.keys(f.fieldInfos).forEach(function(m){void 0===a[m]&&delete f.fieldInfos[m]});f.style&&f.style.fields&&Object.keys(f.style.fields).forEach(function(m){void 0===a[m]&&delete f.style.fields[m]})});if(e.looseResize){e.rows.forEach(function(f){e.columns.some(function(h){p.getDataHeightOwn(e,f,h.field)||p.setDataHeight(e,f,h.field,f.style.height)})});var c=e.rows[e.rows.length-1],b=p.recalcGridHeight(e);e.columns.some(function(f){var h=0;e.rows.forEach(function(n){h+=p.getDataHeightOwn(e,n,f.field)});
var m=b-h;0!==m&&p.setDataHeight(e,c,f.field,p.getDataHeightOwn(e,c,f.field)+m)})}p.recalcGridHeight(e)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(t){var p={getDataHeight:function(l,k,g){return l.looseResize?p.getDataHeightOwn(l,k,g)||k.style.height||0:k.style.height||0},getDataHeightOwn:function(l,k,g){if(l.looseResize)return k.style.fields=k.style.fields||{},(k.style.fields[g]=
k.style.fields[g]||{}).height},setDataHeight:function(l,k,g,e,a){l.looseResize?(a?t.getColumnSpannedFields(l,k,g)||[g]:[g]).forEach(function(d){k.style.fields=k.style.fields||{};(k.style.fields[d]=k.style.fields[d]||{}).height=e}):k.style.height=e},calcDataHeight:function(l,k,g,e){var a=0,d=k.rowSpans&&k.rowSpans[g];if(1<d)for(var c=k.index;c<k.index+d;c++)c!==e&&(a+=p.getDataHeight(l,l.rows[c],g));else a=p.getDataHeight(l,k,g);return a},recalcGridHeight:function(l){l._height=0;var k=l.columns[0].field;
l.rows.forEach(function(g){l._height+=p.getDataHeight(l,g,k)});return l._height}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsScaler":function(){define(["./RowDataUtil"],function(t){return{recalcRowsToFitHeight:function(p,l){function k(a){a.forEach(function(d){p.columns.some(function(c,b){if(!p.looseResize&&b)return!0;t.setDataHeight(p,d,c.field,t.getDataHeight(p,d,c.field)*e)})})}var g=t.recalcGridHeight(p),e=l/g;1!==e&&(k(p.rows),p._getSavedOriginalData()&&
k(p._getSavedOriginalData()),t.recalcGridHeight(p))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./RowDataUtil","./_RowModifierLoose","./_RowModifierNormal"],function(t,p,l,k){var g={},e={checkHeightLimit:function(c,b,f,h){if(c.getMaxHeight()){var m=0;c.rows.forEach(function(n){n!==b&&(m+=p.getDataHeight(c,n,f))});h=Math.min(c.getMaxHeight()-m,h)}return h}},a={findDataToMove:function(c,
b,f,h){var m=t.getMovableData(c,b,f);m&&(c=p.calcDataHeight(c,b,f,m.index),h-=c);return{data:m||b,height:h}}},d={finalResizeGridCells:function(c){c.getCells().forEach(function(b){b.setHeight(p.calcDataHeight(c,b.row,b.column.field))})}};g.adjustRowHeight=function(c,b,f,h){h=e.checkHeightLimit(c,b,f,h);b=a.findDataToMove(c,b,f,h);(c.looseResize?l:k).adjustRowHeight(c,b.data,f,b.height);d.finalResizeGridCells(c)};g.getAffectedCells=function(c,b,f){return c.looseResize?l.getAffectedCells(c,a.findDataToMove(c,
b,f).data,f):null};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./RowDataUtil ../../GridQueryUtil".split(" "),function(t,p,l,k,g,e){var a={collectRowBoxes:function(f,h){for(var m=[],n=0;n<f.columns.length;){var q=f.columns[n],r=this._createEmptyBox();q=l.getColumnSpannedFields(f,h,q.field)||[q.field];r.elements=
this._getFieldsElements(f,h,q);this._measureBox(r);var u=m[m.length-1];u&&(u.nextSibling=r,r.prevSibling=u);m.push(r);n+=q.length}return m},_createEmptyBox:function(){return{id:p(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getFieldsElements:function(f,h,m){var n=[];m.forEach(function(q){q={data:h,dataIndex:h.index,field:q,box:k.calcDataBox(f,h,q,{places:2})};n.push(q)});return n},_measureBox:function(f){var h=0;f.elements.forEach(function(m){h+=
m.box.w});f.box={x:f.elements[0].box.x,y:f.elements[0].box.y,h:f.elements[0].box.h,w:h}},mergeBoxesForBottomRow:function(f){var h=this._createEmptyBox();f.forEach(function(m){m.elements.forEach(function(n){h.elements.push({data:null,field:n.field,box:t.clone(n.box)})})});this._measureBox(h);h.box.h=1E6;return[h]},getBoxAtField:function(f,h){return f.filter(function(m){return m.elements[0].field===h})[0]}},d={buildInfluenceTree:function(f,h,m){function n(q,r){(r?h:f).forEach(function(u){var v;if(v=
!u.overlappingBoxesCache[q.id]){v=q.box;var w=u.box;v=!(v.x+.5>=w.x+w.w||v.x+v.w<=w.x+.5)}v&&(q.overlappingBoxes.push(u),q.overlappingBoxesCache[u.id]=!0)});q.overlappingBoxes.forEach(function(u){n(u,!r)})}m=a.getBoxAtField(f,m);n(m,!0);return m}},c={applyForce:function(f,h,m){function n(r,u){var v=r.elements[0];v.data&&g.setDataHeight(f,v.data,v.field,g.getDataHeight(f,v.data,v.field)+(u?-1:1)*q,!0);r.overlappingBoxes.forEach(function(w){n(w,!u)})}var q=this._checkDelta(f,h,m);n(h,!1)},_checkDelta:function(f,
h,m){function n(u,v){0!==r&&(v?0>r||(r=Math.min(r,u.box.h-q),u.prevSibling&&(r=Math.min(r,u.prevSibling.box.y+u.prevSibling.box.h-q-u.box.y)),u.nextSibling&&(r=Math.min(r,u.nextSibling.box.y+u.nextSibling.box.h-q-u.box.y))):0<r||(r=Math.max(r,-(u.box.h-q)),u.prevSibling&&(r=Math.max(r,-(u.box.y+u.box.h-(u.prevSibling.box.y+q)))),u.nextSibling&&(r=Math.max(r,-(u.box.y+u.box.h-(u.nextSibling.box.y+q))))),u.overlappingBoxes.forEach(function(w){n(w,!v)}))}var q=f.layoutDefaults.rowMinHeight;m=Math.max(m,
q);var r=m-h.box.h;n(h,!1);return r}},b={_getInluencedStartBox:function(f,h,m){var n=f.rows[h.index+1];h=a.collectRowBoxes(f,h);f=n?a.collectRowBoxes(f,n):a.mergeBoxesForBottomRow(h);return d.buildInfluenceTree(h,f,m)},getAffectedCells:function(f,h,m){function n(r){if(r.elements[0].data){var u=e.querySingleCell(f,{rowIndex:r.elements[0].data.index,columnField:r.elements[0].field,considerSpans:!0});u&&q.push(u)}r.overlappingBoxes.forEach(n)}var q=[];h=this._getInluencedStartBox(f,h,m);n(h);return q},
adjustRowCell:function(f,h,m,n){h=this._getInluencedStartBox(f,h,m);c.applyForce(f,h,n)}};return{adjustRowHeight:function(f,h,m,n){b.adjustRowCell(f,h,m,n)},getAffectedCells:function(f,h,m){return b.getAffectedCells(f,h,m)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridQueryUtil":function(){define(["dojo/dom-geometry","./GridDataUtil","esri/dijit/geoenrichment/utils/ArrayUtil","esri/dijit/geoenrichment/utils/DomUtil","esri/dijit/geoenrichment/utils/MouseUtil"],function(t,p,l,
k,g){var e={querySingleCell:function(a,d){d.fieldCell&&(d={rowId:d.fieldCell.row.id,columnId:d.fieldCell.column.id});var c;a.getCells().some(function(n){if(n.parentGrid&&n.column&&n.row&&!(n.column.id!==d.columnId&&n.column.index!==d.columnIndex&&n.column.field!==d.columnField||n.row.id!==d.rowId&&n.row.index!==d.rowIndex))return c=n,!0});if(c)return c;if(d.considerSpans){var b=e.queryColumn(a,d),f=e.queryData(a,d);if(!b||!f)return null;var h=b.index,m=f.index;a.rows.some(function(n){return a.columns.some(function(q){var r=
q.index,u=q.index+(n.columnSpans&&n.columnSpans[q.field]||0),v=n.index;q=n.index+(n.rowSpans&&n.rowSpans[q.field]||0);if(r<=h&&u>=h&&v<=m&&q>=m)return c=e.querySingleCell(a,{columnIndex:r,rowIndex:v}),!0})})}return c},queryColumn:function(a,d){var c;a.columns.some(function(b){if(b.id===d.columnId||b.index===d.columnIndex||b.field===d.columnField)return c=b,!0});return c},queryData:function(a,d){var c;a.rows.some(function(b){if(b.id===d.rowId||b.index===d.rowIndex)return c=b,!0});return c},queryCells:function(a,
d){if(d.fieldCell){var c=[],b=d.rowSpan||1,f=d.columnSpan||1;if(d=e.querySingleCell(a,d))for(var h=d.row.index;h<d.row.index+b;h++)for(var m=d.column.index;m<d.column.index+f;m++){var n=e.querySingleCell(a,{rowIndex:h,columnIndex:m});n&&c.push(n)}return c}return this.queryCellsInArray(a.getCells(),d)},queryCellsInArray:function(a,d){var c=[];if(!Object.keys(d).length)return c;a.forEach(function(b,f){void 0!==d.cellIndex&&f!==d.cellIndex||void 0!==d.cellIndexes&&-1===d.cellIndexes.indexOf(f)||void 0!==
d.columnId&&b.column.id!==d.columnId||void 0!==d.columnIds&&-1===d.columnIds.indexOf(b.column.id)||void 0!==d.columnIndex&&b.column.index!==d.columnIndex||void 0!==d.columnIndexes&&-1===d.columnIndexes.indexOf(b.column.index)||void 0!==d.columnField&&b.column.field!==d.columnField||void 0!==d.columnFields&&-1===d.columnFields.indexOf(b.column.field)||void 0!==d.rowId&&b.row.id!==d.rowId||void 0!==d.rowIds&&-1===d.rowIds.indexOf(b.row.id)||void 0!==d.rowIndex&&b.row.index!==d.rowIndex||void 0!==d.rowIndexes&&
-1===d.rowIndexes.indexOf(b.row.index)||c.push(b)});return c},isDynamicFieldCell:function(a,d){return a._dynamicBindings&&a._dynamicBindings[d.column.field]},getDynamicallyBoundColumns:function(a,d){return a._dynamicBindings&&a._dynamicBindings[d.field]},getDynamicallyBoundFieldCells:function(a,d){if(d.column){var c=a._dynamicBindings&&a._dynamicBindings[d.column.field];if(!c)return null;var b=[];c.forEach(function(f){(f=f&&e.querySingleCell(a,{columnId:f.id,rowId:d.row.id}))&&b.push(f)});return b}},
getAllBoundCells:function(a,d,c){var b=[],f={};d&&d.forEach(function(h){if((!c||c(h))&&!f[h.uniqueId]){f[h.uniqueId]=!0;var m=e.getDynamicallyBoundFieldCells(a,h);m?m.forEach(function(n){b.push(n);f[n.uniqueId]=!0}):b.push(h)}});return l.removeDuplicates(b,"uniqueId")},trimDynamicBindings:function(a,d){var c=[],b={};d&&d.forEach(function(f){var h=e.getDynamicallyBoundFieldCells(a,f);h&&h.length?(b[h[0].uniqueId]||c.push(h[0]),h.forEach(function(m){b[m.uniqueId]=!0})):c.push(f)});return c},collectFieldInfos:function(a,
d){var c=[];d=d||{};var b=d.fieldCells||a.getCells();d.trimDynamicBinding&&b&&(b=e.trimDynamicBindings(a,b));b&&b.forEach(function(f){(f=p.getFieldInfo(f))&&c.push(f)});return c},cellHasFloatingTableParent:function(a){function d(c){return c.isSection&&c.isDataDrillingView?!1:c.isFloatingTable?!0:c.parentWidget?d(c.parentWidget):!1}return a&&a.parentGrid?d(a.parentGrid):!1},isMouseOver:function(a){return g.isMouseOverBox(e.getBBox(a))},getOverFieldCell:function(a,d){d=d||{};var c=d.cellFilter||function(){return!0},
b;a.getForegroundFloatingCells({topFirst:!0}).some(function(f){if(c(f)&&f.isMouseOver())return b=f,!0});b||a.getCells().some(function(f){if(c(f)&&f.isMouseOver())return b=f,!0});b||a.getBackgroundFloatingCells({topFirst:!0}).some(function(f){if(c(f)&&f.isMouseOver())return b=f,!0});return b},getBBox:function(a,d){var c=a.isSingleCelledTable()&&a.getFirstCell().getAngle();return"number"===typeof c&&0!==c?a.getFirstCell().getBBox(d):d&&d.noTransformation?k.noTransformPosition(a.domNode):t.position(a.domNode)}};
return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierNormal":function(){define(["./RowDataUtil"],function(t){return{adjustRowHeight:function(p,l,k,g){var e=p.layoutDefaults.rowMinHeight;g=Math.max(g,e);var a=g-t.getDataHeight(p,l,k);if(p.keepGridHeightWhenResized){var d=p.rows[l.index+1];d&&(a=t.getDataHeight(p,d,k)-a,a<e&&(g-=e-a,a=e),t.setDataHeight(p,d,k,a,!0))}t.setDataHeight(p,l,k,g,!0)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator":function(){define(["./ColumnDataUtil",
"./ColumnModifier","./ColumnsProcessor"],function(t,p,l){var k={};k.recalcColumns=l.recalcColumns;k.recalcColumnsTableJson=l.recalcColumnsTableJson;k.adjustColumnWidth=p.adjustColumnWidth;k.getAffectedCells=p.getAffectedCells;k.getFieldWidth=t.getFieldWidth;k.setFieldWidth=t.setFieldWidth;k.calcFieldWidth=t.calcFieldWidth;k.recalcGridWidth=t.recalcGridWidth;return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],
function(t){var p={getFieldWidth:function(l,k,g){var e="string"===typeof g?t.fieldToColumn(l,g):g;g=e?e.field:"string"===typeof g?g:null;return l.looseResize?p.getFieldWidthOwn(l,k,g)||e&&e.style.width||0:e&&e.style.width||0},getFieldWidthOwn:function(l,k,g){if(l.looseResize)return k.style.fields=k.style.fields||{},(k.style.fields[g]=k.style.fields[g]||{}).width},setFieldWidth:function(l,k,g,e,a){var d="string"===typeof g?t.fieldToColumn(l,g):g,c=d?d.field:"string"===typeof g?g:null;l.looseResize?
(a?t.getRowSpannedData(l,k,c)||[k]:[k]).forEach(function(b){b.style.fields=b.style.fields||{};(b.style.fields[c]=b.style.fields[c]||{}).width=e}):d&&(d.style.width=e)},calcFieldWidth:function(l,k,g,e){var a=0;1<(k.columnSpans&&k.columnSpans[g])?t.getSpannedColumns(l,g,k.columnSpans[g]).forEach(function(d){e!==d.field&&(a+=p.getFieldWidth(l,k,d.field))}):a=p.getFieldWidth(l,k,g);return a},recalcGridWidth:function(l){l._width=0;var k=l.rows[0];l.columns.forEach(function(g){l._width+=p.getFieldWidth(l,
k,g.field)});return l._width},getAllowedWidth:function(l){return l.fitParentWhenResized?l.getAllowedWidthFromParent():l.getAllowedWidth()}};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./ColumnDataUtil","./_ColumnModifierNormal","./_ColumnModifierLoose"],function(t,p,l,k){var g={},e={getColumnToChange:function(c,b,f,h){var m=t.getMovableColumn(c,b,f.field);m&&(c=p.calcFieldWidth(c,
b,f.field,m.field),h-=c);return{column:m||f,width:h}}},a={finalResizeGridCells:function(c){c.getCells().forEach(function(b){b.setWidth(p.calcFieldWidth(c,b.row,b.column.field))});p.recalcGridWidth(c)}},d={recalcToStick:function(c){var b=c.columns[c.columns.length-1];c.rows.some(function(f,h){if(!c.looseResize&&h)return!0;var m=0;c.columns.forEach(function(n){n!==b&&(m+=p.getFieldWidth(c,f,n.field))});p.setFieldWidth(c,f,b.field,p.getAllowedWidth(c)-m)})}};g.adjustColumnWidth=function(c,b,f,h){f=e.getColumnToChange(c,
b,f,h);(c.looseResize?k:l).adjustColumnWidth(c,b,f.column,f.width);c.stickToRight&&d.recalcToStick(c);a.finalResizeGridCells(c)};g.getAffectedCells=function(c,b,f){return c.looseResize?k.getAffectedCells(c,b,e.getColumnToChange(c,b,f).column):null};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierNormal":function(){define(["./ColumnDataUtil"],function(t){var p={},l={adjustColumnWidth:function(k,g,e,a,d){function c(r,u){return t.setFieldWidth(k,
g,r.field,u,!0)}var b=k.layoutDefaults.columnMinWidth,f=function(){if(!e)return null;var r=t.getFieldWidth(k,g,e.field);void 0!==d&&(a=r+d);a=Math.max(b,a);var u,v=0,w=!1;k.columns.forEach(function(E){v+=t.getFieldWidth(k,g,E.field);w&&!u?u=E:E===e&&(w=!0)});var z=t.getAllowedWidth(k)-(v-r);return isNaN(z)?null:{width:a,widthMemo:r,maxAllowedColumnWidth:z,nextColumn:u}}();if(f){a=f.width;var h=f.widthMemo,m=f.maxAllowedColumnWidth,n=(f=f.nextColumn)&&t.getFieldWidth(k,g,f.field);h=a-h;var q=0;k.keepGridWidthWhenResized?
(f&&(h=n-h,h<b&&(a-=b-h,h=b),h<n&&(m+=n-h),c(f,h)),c(e,Math.min(m,a))):(f&&m<a&&n>b?(c(e,a),q=m-a):c(e,Math.min(m,a)),0!==q&&l.adjustColumnWidth(k,g,f,null,q))}}};p.adjustColumnWidth=function(k,g,e,a){l.adjustColumnWidth(k,g,e,a)};return p})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./ColumnDataUtil ../../GridQueryUtil".split(" "),
function(t,p,l,k,g,e){var a={collectColumnBoxes:function(f,h){for(var m=[],n=0;n<f.rows.length;){var q=f.rows[n],r=this._createEmptyBox();q=l.getRowSpannedData(f,q,h.field)||[q];r.elements=this._getSpannedDataElements(f,h,q);this._measureBox(r);var u=m[m.length-1];u&&(u.nextSibling=r,r.prevSibling=u);m.push(r);n+=q.length}return m},_createEmptyBox:function(){return{id:p(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getSpannedDataElements:function(f,
h,m){var n=[];m.forEach(function(q){q={data:q,dataIndex:q.index,field:h.field,box:k.calcDataBox(f,q,h.field)};n.push(q)});return n},_measureBox:function(f){var h=0;f.elements.forEach(function(m){h+=m.box.h});f.box={x:f.elements[0].box.x,y:f.elements[0].box.y,w:f.elements[0].box.w,h:h}},mergeBoxesForRightColumn:function(f){var h=this._createEmptyBox();f.forEach(function(m){m.elements.forEach(function(n){h.elements.push({data:n.data,field:null,box:t.clone(n.box)})})});this._measureBox(h);h.box.w=1E6;
return[h]},getBoxAtDataIndex:function(f,h){return f.filter(function(m){return m.elements[0].dataIndex===h})[0]}},d={buildInfluenceTree:function(f,h,m){function n(q,r){(r?h:f).forEach(function(u){var v;if(v=!u.overlappingBoxesCache[q.id]){v=q.box;var w=u.box;v=!(v.y+.5>=w.y+w.h||v.y+v.h<=w.y+.5)}v&&(q.overlappingBoxes.push(u),q.overlappingBoxesCache[u.id]=!0)});q.overlappingBoxes.forEach(function(u){n(u,!r)})}m=a.getBoxAtDataIndex(f,m.index);n(m,!0);return m}},c={applyForce:function(f,h,m){function n(r,
u){var v=r.elements[0];v.field&&g.setFieldWidth(f,v.data,v.field,g.getFieldWidth(f,v.data,v.field)+(u?-1:1)*q,!0);r.overlappingBoxes.forEach(function(w){n(w,!u)})}var q=this._checkDelta(f,h,m);n(h,!1)},_checkDelta:function(f,h,m){function n(v,w){0!==r&&(w?0>r||(r=Math.min(r,v.box.w-q),v.prevSibling&&(r=Math.min(r,v.prevSibling.box.x+v.prevSibling.box.w-q-v.box.x)),v.nextSibling&&(r=Math.min(r,v.nextSibling.box.x+v.nextSibling.box.w-q-v.box.x))):0<r||(r=Math.max(r,-(v.box.w-q)),v.prevSibling&&(r=Math.max(r,
-(v.box.x+v.box.w-(v.prevSibling.box.x+q)))),v.nextSibling&&(r=Math.max(r,-(v.box.x+v.box.w-(v.nextSibling.box.x+q))))),v.overlappingBoxes.forEach(function(z){n(z,!w)}))}var q=f.layoutDefaults.columnMinWidth;m=Math.max(m,q);var r=m-h.box.w;if(0<r&&h.elements[0].field===f.columns[f.columns.length-1].field){var u=0;f.columns.forEach(function(v){u+=g.getFieldWidth(f,h.elements[0].data,v.field)});r=Math.min(r,g.getAllowedWidth(f)-u)}n(h,!1);return r}},b={_getInluencedStartBox:function(f,h,m){var n=f.columns[m.index+
1];m=a.collectColumnBoxes(f,m);f=n?a.collectColumnBoxes(f,n):a.mergeBoxesForRightColumn(m);return d.buildInfluenceTree(m,f,h)},getAffectedCells:function(f,h,m){function n(r){if(r.elements[0].data){var u=e.querySingleCell(f,{rowIndex:r.elements[0].data.index,columnField:r.elements[0].field,considerSpans:!0});u&&q.push(u)}r.overlappingBoxes.forEach(n)}var q=[];h=this._getInluencedStartBox(f,h,m);n(h);return q},adjustColumnCell:function(f,h,m,n){h=this._getInluencedStartBox(f,h,m);c.applyForce(f,h,n)}};
return{adjustColumnWidth:function(f,h,m,n){b.adjustColumnCell(f,h,m,n)},getAffectedCells:function(f,h,m){return b.getAffectedCells(f,h,m)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./ColumnDataUtil"],function(t,p){function l(g){g._dynamicBindings={};if(g.getNumDynamicColumns()){for(var e=g.getNumDynamicColumns(),a=g.getNumFixedColumns(),d=0;d<a;d++)g.columns[d].isFixed=!0;d=[];for(var c=
0;c<e;c++){for(var b=a,f=[];b<g.columns.length;){var h=g.columns[b+c];h.isDynamic=!0;f.push(h);b+=e}d.push(f)}d.forEach(function(m){m.forEach(function(n){g._dynamicBindings[n.field]=m})})}}var k={recalcColumns:function(g,e){var a=e&&e.resetWidth,d=e&&e.columnsToPreserve,c=e&&e.stickToRight,b=e&&e.newWidth,f=e&&e.rightOffsetWeight;e=e&&e._isJson;var h={},m=0;g.columns.every(function(z,E){if(!z.style||!z.style.width||isNaN(z.style.width)||"number"!==typeof z.style.width)return m=0,!1;m+=z.style.width;
h[E]=z.style.width;return!0});var n=b?b:c?g.getAllowedWidth():m?Math.min(m,g._width):g._width;n-=0<f?n*f:0;var q=n/g.columns.length,r=n;if(d){var u=d.length*q,v=0;d.forEach(function(z){v+=z.style.width});d.forEach(function(z){z.style.width=u/v*z.style.width/r*100+"%"})}g.columns.forEach(function(z,E,F){z.index=E;z.style=z.style||{};if("number"!==typeof z.style.width||a)if(E===F.length-1)z.style.width=r;else{var D=z.style.width;"string"===typeof D&&-1!==D.indexOf("%")?z.style.width=parseFloat(D.substr(0,
D.length-1))/100*n:z.style.width=q}r-=z.style.width;E===F.length-1&&0>r&&(z.style.width+=r);void 0===z.id&&(z.id=t())});if(g.looseResize){g.columns.some(function(z,E){var F=h[E]?z.style.width/h[E]:void 0;g.rows.forEach(function(D){var B=p.getFieldWidthOwn(g,D,z.field);B?F&&1!==F&&p.setFieldWidth(g,D,z.field,B*F):p.setFieldWidth(g,D,z.field,z.style.width)})});var w=g.columns[g.columns.length-1].field;g.rows.forEach(function(z){var E=0;g.columns.some(function(D){E+=p.getFieldWidthOwn(g,z,D.field)});
var F=n-E;0!==F&&p.setFieldWidth(g,z,w,p.getFieldWidthOwn(g,z,w)+F)})}e||(l(g),p.recalcGridWidth(g));return n},recalcColumnsTableJson:function(g){k.recalcColumns(g,{resetWidth:!0,newWidth:g.style.width,_isJson:!0})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutSnapper":function(){define(["dojo/_base/lang","./rows/RowDataUtil","./columns/ColumnDataUtil","./GridElementBoxCalculator"],function(t,p,l,k){return{autoSnapLayout:function(g){function e(){var n=
[];g.rows.forEach(function(q){g.columns.forEach(function(r){n.push(t.mixin({id:q.index+"_"+r.field,data:q,dataIndex:q.index,column:r,field:r.field},k.calcDataBox(g,q,r.field)))})});return n}if(g.looseResize)for(var a=g.rows.length*g.columns.length,d={},c=0;c<a;c++){var b=e(),f=b[c],h=f.x+f.w,m=f.y+f.h;d[f.id]=!0;b.forEach(function(n){if(!d[n.id]){var q=h-(n.x+n.w);.5>=Math.abs(q)&&l.setFieldWidth(g,n.data,n.field,n.w+q);q=m-(n.y+n.h);.5>=Math.abs(q)&&p.setDataHeight(g,n.data,n.field,n.h+q)}})}}}})},
"esri/dijit/geoenrichment/ReportPlayer/core/sections/sectionUtils/SectionJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes","../../supportClasses/tableJson/TableJsonUtil"],function(t,p,l){var k={wrapInDetailsSectionJson:function(g,e){g=Array.isArray(g)?g:[g];var a=g.some(function(d){return"table"===d.id&&d.attributes&&(0<d.attributes.dynamicColumns||
0<d.attributes.dynamicRows)});return{type:e||(a?p.GROUP:p.DETAILS),stack:g}},createSectionJsonFromInfographicJson:function(g,e,a){g=l.createSingleCellTable({width:e,height:a,fieldInfo:t.createFieldInfoFromInfographic(g)});return k.wrapInDetailsSectionJson(g)},getSectionJsonInfographic:function(g){var e;g.stack&&g.stack.some(function(a){e="table"===a.id&&l.getTableJsonInfographic(a);return!!e});return e},getSectionJsonInfographicTable:function(g){var e;g.stack&&g.stack.some(function(a){if("table"===
a.id&&l.getTableJsonInfographic(a))return e=a,!0});return e},calcSectionJsonBox:function(g){var e,a;function d(f){e=Math.min(e,f.l);c=Math.min(c,f.t);a=Math.max(a,f.l+f.w);b=Math.max(b,f.t+f.h)}var c=e=Infinity;var b=a=0;g.stack&&g.stack.forEach(function(f){switch(f.id){case "table":var h=0;f.rows.forEach(function(m){h+=m.style.height});d({l:f.style.left||0,t:f.style.top||0,w:f.style.width,h:h});break;case "img":case "map":d({l:f.style.left||0,t:f.style.top||0,w:f.style.width,h:f.style.height})}});
g=g.style||{};return{x:g.left,y:g.top,w:g.width||e+a,h:g.height||c+b,contentLeft:e,contentTop:c,contentW:a-e,contentH:b-c}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder":function(){define(["../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","dojo/i18n!esri/nls/jsapi"],function(t,p){p=p.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{getCalculatorOrScriptFieldInfo:function(l,k,g){if(!l)return null;if(k.variableProvider.isPlayerOnly&&
!k.useVariableProviderToCollectOnly){var e=k.variableProvider.toCalculator(l);if(!e)return console.log("Can't create a dummy calculator for \x3d\x3e "+l),null;g=g||{};g.calculatorName=e.variable.calculatorName;l=t.createFieldInfoFromCalculator(e,k.variableProvider,g);l.name=e.variable.fieldName;l.templateName=e.variable.templateName;return l}e=k.queryMetaDataFunc(l);var a=l.substr(0,l.indexOf("."));g=g||{};g.calculatorName=a;if(e)return e.isScript?t.createFieldInfoFromScript(e,g):t.createFieldInfoFromCalculator(e,
k.variableProvider,g);g=t.createFieldInfoFromMissingVariable(l);k.variableProvider.isPlayerOnly&&(e=k.variableProvider.toCalculator(l),g.alias=e&&e.variable.alias);g.alias=g.alias?g.alias+" ("+p.missingVariable+")":p.missingVariable;return g}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/DefaultAttachmentsStore":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","./WebMapAttachmentStore"],function(t,p,
l,k){return t(null,{supportsMultipleAreas:!0,_analysisAreas:null,_currentAreaIndex:-1,_webMapStores:null,constructor:function(g){this._analysisAreas=g},initialize:function(){var g=this;this._webMapStores={};return p(this._analysisAreas.map(function(e,a){if(e=e.feature||e.location||e.additionalFeatures&&e.additionalFeatures[0])return(g._webMapStores[a]=new k(e)).initialize()})).then(function(){return g})},_callStoreMethod:function(g){var e=this._webMapStores[this._currentAreaIndex];return e?l(e[g](),
function(a){return a?a.slice():[]}):[]},getImages:function(){return this._callStoreMethod("getImages")},getAttributes:function(){return this._callStoreMethod("getAttributes")},getNotes:function(){return this._callStoreMethod("getNotes")},setCurrentAnalysisAreaIndex:function(g){this._currentAreaIndex=g}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/WebMapAttachmentStore":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/ImageUtil ./AttachmentsUtil".split(" "),
function(t,p,l,k,g,e,a,d){var c={getThumbnail:function(b){var f=e.get("WebMapAttachmentStore");f[b.url]||(f[b.url]=this._getDataURL(b));return f[b.url]},_getDataURL:function(b){return 0===b.url.indexOf("data:")?b.url:g.request(b.url).then(function(f){return f&&f.Attachment&&a.base64DataToDataURL(f.Attachment,b.contentType)}).otherwise(function(){return null})}};return t(null,{supportsMultipleAreas:!1,_attachmentInfos:null,_feature:null,_fieldInfos:null,_attributes:null,constructor:function(b,f){this._feature=
b;this._attachmentInfos=f},initialize:function(){this._tryGetFieldInfosAndAttributes();return l(this._attachmentInfos||this._tryGetAttachmentInfos()).always(function(){return!!this._attachmentInfos}.bind(this))},_tryGetFieldInfosAndAttributes:function(){var b=this._feature.getLayer();this._fieldInfos=(b=this._feature.infoTemplate||b&&b.infoTemplate)&&b.info.fieldInfos||[];this._attributes=p.mixin({},this._feature.attributes)},_tryGetAttachmentInfos:function(){return l(d.getFeatureAttachmentInfos(this._feature),
function(b){this._attachmentInfos=b}.bind(this))},getImages:function(){return this._attachmentInfos?this._attachmentInfos.map(function(b){return{getThumbnail:function(){return c.getThumbnail(b)},getUrl:function(){return b.url}}}):[]},getAttributes:function(){return k.composeAttributesFromFieldInfos(this._fieldInfos,this._attributes)},getNotes:function(){return[]},setCurrentAnalysisAreaIndex:null})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsUtil":function(){define([],
function(){return{getFeatureAttachmentInfos:function(t){var p=t.getLayer();if(p&&p.hasAttachments&&p.queryAttachmentInfos&&p.objectIdField)return p.queryAttachmentInfos(t.attributes[p.objectIdField])}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/supportClasses/LayoutXMLBuilder":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/JsonXmlConverter esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/converters/DocumentConverter esri/dijit/geoenrichment/ReportPlayer/core/conversion/ConversionUtil esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes".split(" "),
function(t,p,l,k,g,e){return{buildLayoutXML:function(a){var d=l.buildDocumentTag({addDefaultQuery:!0,report:{templateJson:{documentOptions:t.mixin({},a.documentOptions,{left:0,right:0,top:0,bottom:0})}}}).documentTag,c=g.getPageBox(a.documentOptions),b=k.pxToPt(c.w),f=k.pxToPt(c.h);a.svgStrings.forEach(function(m,n){d.tags.push({name:"section",attributes:{type:e.DETAILS},tags:[{name:"img",attributes:{left:0,top:0,width:b,height:f},tags:[{text:"__svgString__"+n+"__svgString__"}]}]});n<a.svgStrings.length-
1&&d.tags.push({name:"pageBreak"})});var h=p.parseJson(d);a.svgStrings.forEach(function(m,n){h=h.replace("__svgString__"+n+"__svgString__",m)});return h},stitchDocuments:function(a){if(!a||!a.length)return null;var d=a[0],c=d.substr(0,d.indexOf("\x3csection")),b="";a.forEach(function(f,h){b+=f.replace(c,"").replace("\x3c/HTMLextReport\x3e","")+(h<a.length-1?"\x3cpageBreak /\x3e":"")});return c+b+"\x3c/HTMLextReport\x3e"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/converters/DocumentConverter":function(){define(["../../ConversionUtil",
"../ReportingEnginePageSizeCompatibilityUtil"],function(t,p){var l={buildDocumentTag:function(k){var g=k.report,e=g.templateJson.documentOptions,a={name:"HTMLextReport",attributes:{version:"10.1",pagesize:p.getReportingEnginePageSize(e.pagesize,e.orientation),orientation:e.orientation,left:t.pxToPt(e.left),right:t.pxToPt(e.right),top:t.pxToPt(e.top),bottom:t.pxToPt(e.bottom),style:t.composeStyleString(l.buildDocumentStyle(k)),comparisonZoom:e.defaultComparisonZoom||void 0},tags:[]};k.addDefaultQuery&&
a.tags.push({name:"queries",tags:[{name:"query",attributes:{name:"default",table:"headers"}}]});k.report.isGraphicReport||a.tags.push({name:"def",attributes:{align:e.align,lineSpacing:e.lineSpacing}});g.templateJson.tooltipInfo&&(g.templateJson.tooltipInfo.table||g.templateJson.tooltipInfo.chart)&&(k={name:"tooltip",tags:[]},a.tags.push(k),(e=g.templateJson.tooltipInfo.table)&&k.tags.push({name:"table",attributes:{value:e.value||void 0,alias:e.alias||void 0,expression:e.expression||void 0,conditional:e.conditional||
void 0}}),(g=g.templateJson.tooltipInfo.chart)&&k.tags.push({name:"chart",attributes:{title:g.title||void 0,value:g.value||void 0,weight:g.weight||void 0,min:g.min||void 0,max:g.max||void 0,avg:g.avg||void 0,conditional:g.conditional||void 0}}));return{documentTag:a}},buildDocumentStyle:function(k){k=k.report.templateJson.documentOptions;return{fontSize:t.pxToPt(k.fontSize),fontFamily:k.fontFamily}}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/ConversionUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/PageUnitsConverter","esri/dijit/geoenrichment/utils/ColorUtil"],function(t,p,l){var k={};t.mixin(k,p);var g={"font-size":"fontSize","line-height":"lineHeight","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor"},e={},a;for(a in g)e[g[a]]=a;k.splitTrim=function(b,f,h){b=String(b).split(f).map(function(m){return m.trim()});return h?b.filter(function(m){return!!m}):
b};k.parseStyleString=function(b){var f={};k.splitTrim(b||"",";",!0).forEach(function(h){var m=k.splitTrim(h,":");if(h=g[m[0]])m=m[1],"rgba(0, 0, 0, 0)"===m&&(m="transparent"),f[h]=m});return f};k.composeStyleString=function(b,f){f=f&&f.addPx;var h="",m;for(m in b){var n=e[m];if(n){var q=b[m];q&&("backgroundColor"===m&&(q=l.toCSSColor(q)),h+=n+":"+q+(f&&f[n]?"px;":";"))}}return h};k.removeZeroProperties=function(b){Object.keys(b).forEach(function(f){0===Number(b[f])&&delete b[f]});return b};var d=
{valign:{center:"middle"}},c={valign:{middle:"center"}};k.getPropValuePtoE=function(b,f){return d[b]&&d[b][f]||f};k.getPropValueEtoP=function(b,f){return c[b]&&c[b][f]||f};k.KEY_OPERATOR_RE=/^(!=|>=|<=|<|>|=)/;k.ONE_FIELD_KEY_TEST=/^((<|>|<=|>=|!=|=|)(-?\d+\.\d+|-?\d+))$/;k.KEY_INTERVAL_SEPARATOR=";";return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/ReportingEnginePageSizeCompatibilityUtil":function(){define(["../../supportClasses/DocumentOptions"],function(t){var p=
{},l={a4:1,letter:1};p.getReportingEnginePageSize=function(k,g){return l[k]?k:(g=t.SIZE_TYPE_TO_DIM_HASH[k]&&t.SIZE_TYPE_TO_DIM_HASH[k][g])?t.combineCustomSizeString(g.w,g.h,"in"):k};return p})},"widgets/BusinessAnalyst/utils/ReportUtil":function(){define("dojo/Deferred dojo/promise/all dojo/when dojo/_base/array esri/request ./GEUtil jimu/portalUtils dojo/i18n!../nls/strings".split(" "),function(t,p,l,k,g,e,a,d){STANDARD_INFOGRAPHIC_TYPEKEYWORD="esriReportPlayerStandardInfographic";return{_ownedCachedCustomReports:null,
_sharedCachedCustomReports:null,_cachedCountryClassicReports:[],_cachedInfographicReports:null,_countryInitDfds:[],getAvailableClassicReports:function(c,b){var f=this,h=[],m=new t,n;b&&k.forEach(b.countryConfig,function(v){c==v.countryID&&(n=v)});n||(n={countryID:c,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,
defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],enabledOrgInfographics:[]});var q=null,r=null,u=null;l(this._initReports(c),function(){if(!b||n.allowAllEsriReports||f._hasEnabledReports(f._cachedCountryClassicReports[c],n.enabledEsriReports))q=h.length,h.push({value:"esriReports",label:d.esriReports,children:[]});if(!b||n.allowAllOrgReports&&f._hasReportsForCountry(f._ownedCachedCustomReports,c)||f._hasEnabledReportsForCountry(f._ownedCachedCustomReports,
c,n.enabledOrgReports))r=h.length,h.push({value:"myReports",label:d.myReports,children:[]});if(!b||n.allowAllOrgReports&&f._hasReportsForCountry(f._sharedCachedCustomReports,c)||f._hasEnabledReportsForCountry(f._sharedCachedCustomReports,c,n.enabledOrgReports))u=h.length,h.push({value:"sharedReports",label:d.sharedReports,children:[]});(n.allowAllEsriReports||f._hasEnabledReports(f._cachedCountryClassicReports[c],n.enabledEsriReports))&&f._cachedCountryClassicReports[c]&&0<f._cachedCountryClassicReports[c].length&&
k.forEach(f._cachedCountryClassicReports[c],function(z){(n.allowAllEsriReports||n.enabledEsriReports.includes(z.reportID))&&h[q].children.push(f._formatClassicReportsForDropDown(z))});var v=["esriWebInfographicReport","esriWebSingleInfographic","esriWebBlankInfographic","esriWebHiddenInfographic","esriWebComparisonReport"];(n.allowAllOrgReports&&f._hasReportsForCountry(f._ownedCachedCustomReports,c)||f._hasEnabledReportsForCountry(f._ownedCachedCustomReports,c,n.enabledOrgReports))&&k.forEach(f._ownedCachedCustomReports,
function(z){z.properties.countries.includes(c)&&(n.allowAllOrgReports||n.enabledOrgReports.includes(z.id))&&(z.typeKeywords.some(function(E){return 0<=v.indexOf(E)})||(e.getCountryDisableMultiHierarchySupport()[c]?z.properties.hierarchy===e.getCountryHierarchies()[c]&&h[r].children.push(f._formatClassicReportsForDropDown(z)):h[r].children.push(f._formatClassicReportsForDropDown(z))))});(n.allowAllOrgReports&&f._hasReportsForCountry(f._sharedCachedCustomReports,c)||f._hasEnabledReportsForCountry(f._sharedCachedCustomReports,
c,n.enabledOrgReports))&&k.forEach(f._sharedCachedCustomReports,function(z){z.properties.countries.includes(c)&&(n.allowAllOrgReports||n.enabledOrgReports.includes(z.id))&&(z.typeKeywords.some(function(E){return 0<=v.indexOf(E)})||(e.getCountryDisableMultiHierarchySupport()[c]?z.properties.hierarchy===e.getCountryHierarchies()[c]&&h[u].children.push(f._formatClassicReportsForDropDown(z)):h[u].children.push(f._formatClassicReportsForDropDown(z))))});var w=function(z,E){z=z.label.toUpperCase();E=E.label.toUpperCase();
var F=0;z>E?F=1:z<E&&(F=-1);return F};0<h.length&&h[0].children.sort(w);1<h.length&&h[1].children.sort(w);2<h.length&&h[2].children.sort(w);m.resolve(h)});return m},_hasEnabledReports:function(c,b){return c&&b?k.some(c,function(f){return b.includes(f.reportID)}):!1},_hasReportsForCountry:function(c,b){return c&&b?k.some(c,function(f){return f.properties.countries.includes(b)}):!1},_hasEnabledReportsForCountry:function(c,b,f){return c&&b&&f?k.some(c,function(h){return h.properties.countries.includes(b)?
f.includes(h.id):!1}):!1},_formatClassicReportsForDropDown:function(c){return c.metadata?{label:c.metadata.title,value:c.reportID,reportType:c.metadata.type}:{label:c.title,value:c.id,reportType:c.properties.type,item:{itemid:c.id,url:portalUrl,token:esri.id.credentials[0].token}}},getAvailableInfographicReports:function(c,b){var f=this,h=[],m=new t,n;b&&k.forEach(b.countryConfig,function(v){c==v.countryID&&(n=v)});n||(n={countryID:c,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,
allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],enabledOrgInfographics:[]});var q=null,r=null,u=null;l(this._initReports(c),function(){if(!b||n.allowAllEsriInfographics||f._hasEnabledInfographics(f._cachedInfographicReports,n.enabledEsriInfographics))q=h.length,h.push({value:"esriReports",
label:d.esriInfographics,children:[]});if(!b||n.allowAllOrgInfographics&&0<f._ownedCachedCustomReports.length||f._hasEnabledInfographics(f._ownedCachedCustomReports,n.enabledOrgInfographics))r=h.length,h.push({value:"myReports",label:d.myInfographics,children:[]});if(!b||n.allowAllOrgInfographics&&0<f._sharedCachedCustomReports.length||f._hasEnabledInfographics(f._sharedCachedCustomReports,n.enabledOrgInfographics))u=h.length,h.push({value:"sharedReports",label:d.sharedInfographics,children:[]});
(n.allowAllEsriInfographics||f._hasEnabledInfographics(f._cachedInfographicReports,n.enabledEsriInfographics))&&k.forEach(f._cachedInfographicReports,function(w){if(w.properties.countries.includes(c)&&(n.allowAllEsriInfographics||n.enabledEsriInfographics.includes(w.id))){var z=f._getIndexOfInfographicByTitle(w.title,h[q].children);if(-1===z)h[q].children.push(f._formatInfographicReportsForDropDown(w));else{var E=e.getCountryHierarchies()[c];w.properties.hierarchy===E&&(h[q].children[z]=f._formatInfographicReportsForDropDown(w))}}});
(n.allowAllOrgInfographics&&0<f._ownedCachedCustomReports.length||f._hasEnabledInfographics(f._ownedCachedCustomReports,n.enabledOrgInfographics))&&k.forEach(f._ownedCachedCustomReports,function(w){w.properties.countries.includes(c)&&(n.allowAllOrgInfographics||n.enabledOrgInfographics.includes(w.id))&&(w.typeKeywords.includes("esriWebInfographicReport")||f._isOldPortalInfographic(w))&&(e.getCountryDisableMultiHierarchySupport()[c]?w.properties.hierarchy===e.getCountryHierarchies()[c]&&h[r].children.push(f._formatInfographicReportsForDropDown(w)):
h[r].children.push(f._formatInfographicReportsForDropDown(w)))});(n.allowAllOrgInfographics&&0<f._sharedCachedCustomReports.length||f._hasEnabledInfographics(f._sharedCachedCustomReports,n.enabledOrgInfographics))&&k.forEach(f._sharedCachedCustomReports,function(w){w.properties.countries.includes(c)&&(n.allowAllOrgInfographics||n.enabledOrgInfographics.includes(w.id))&&(w.typeKeywords.includes("esriWebInfographicReport")||f._isOldPortalInfographic(w))&&(e.getCountryDisableMultiHierarchySupport()[c]?
w.properties.hierarchy===e.getCountryHierarchies()[c]&&h[u].children.push(f._formatInfographicReportsForDropDown(w)):h[u].children.push(f._formatInfographicReportsForDropDown(w)))});var v=function(w,z){w=w.label.toUpperCase();z=z.label.toUpperCase();var E=0;w>z?E=1:w<z&&(E=-1);return E};0<h.length&&h[0].children.sort(v);1<h.length&&h[1].children.sort(v);2<h.length&&h[2].children.sort(v);m.resolve(h)});return m},_hasEnabledInfographics:function(c,b){return k.some(c,function(f){return b.includes(f.id)})},
_isOldPortalInfographic:function(c){return c.properties&&c.properties.isHidden&&"true"===c.properties.isHidden?!1:c.properties&&c.properties.isGraphicReport&&"true"===c.properties.isGraphicReport?!0:!1},_formatInfographicReportsForDropDown:function(c){return{label:c.title,value:c.id}},_getIndexOfInfographicByTitle:function(c,b){var f=-1;k.some(b,function(h,m){if(h.label===c)return f=m,!1});return f},_initReports:function(c){var b=[],f=this;if(this._countryInitDfds[c])return this._countryInitDfds[c];
this._countryInitDfds[c]=new t;var h=function(m,n){return g(m).then(function(q){k.forEach(q.results,function(r){n.push(r)});if(-1!=q.nextStart)return m.content.start=q.nextStart,h(m,n)},function(q){alert(q)})};a.getPortal(portalUrl).loadSelfInfo().then(function(m){var n=m&&m.helperServices&&m.helperServices.geoenrichment&&m.helperServices.geoenrichment.url?m.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";f._cachedCountryClassicReports[c]||
b.push(g({url:n+"/Geoenrichment/reports/"+c,content:{appID:"webappbuilder",f:"json",langCode:"en-us"}}).then(function(q){f._cachedCountryClassicReports[c]=q.reports},function(q){alert(q)}));f._cachedInfographicReports||(f._cachedInfographicReports=[],b.push(h({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:"typekeywords:(esriWebStandardInfographicReport)"}},f._cachedInfographicReports)));f._ownedCachedCustomReports||
(f._ownedCachedCustomReports=[],b.push(h({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) owner:'+esri.id.credentials[0].userId}},f._ownedCachedCustomReports)));f._sharedCachedCustomReports||(f._sharedCachedCustomReports=[],b.push(h({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",
sortOrder:"desc",q:'access:shared type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},f._sharedCachedCustomReports)),b.push(h({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:org type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},f._sharedCachedCustomReports)),
m&&m.appInfo&&m.appInfo.orgId&&b.push(h({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:public type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId+" orgid: "+m.id}},f._sharedCachedCustomReports)));0===b.length?f._countryInitDfds[c].resolve():p(b).then(function(){f._countryInitDfds[c].resolve()})});return this._countryInitDfds[c]}}})},
"widgets/BusinessAnalyst/esriAnalystX/widgets/Selects/FilteringSelectTree":function(){define(["dojo/_base/declare","./FilteringSelect","esri/dijit/geoenrichment/SelectableTree","../../widgets/SelectableTreeGrid/SelectableTreeGrid","xstyle/css!./css/FilteringSelect.css"],function(t,p,l,k){function g(a,d){var c=[];a.forEach(function(b){b.children.forEach(function(f){var h={};h[d.idProperty]=f[d.idProperty];h[d.labelProperty]=f[d.labelProperty];h.__item=f;c.push(h)})});return c}function e(a,d,c){var b=
{};d.forEach(function(h){b[h[c.idProperty]]=h});var f=[];a.forEach(function(h){var m=h.children.filter(function(q){return b[q[c.idProperty]]});if(m.length){var n={};n[c.idProperty]=h[c.idProperty];n[c.labelProperty]=h[c.labelProperty];n.children=m.map(function(q){var r={};r[c.idProperty]=q[c.idProperty];r[c.labelProperty]=q[c.labelProperty];return r});f.push(n)}});return{treeData:f,idsHash:b}}k=t(k,{showRootCheckbox:!1,showCheckboxColumn:!1,enableRowSelection:!0,expandOnNodeClick:!0,baseTree:null,
hostWidget:null,defaultExpand:null,_firstTimeExpand:!0,getLabel:function(a,d){return a[this.labelProperty]},onRowsSelected:function(a,d){a=a&&a[0];d=d&&d[0];a&&!a.children&&(d.setAttribute("item",a[this.idProperty]),this.onChange(d))},createOptions:function(a,d,c){a=e(this.baseTree.data,a,this);this.items=a.idsHash;this.tree.clear();if(this._firstTimeExpand){this._firstTimeExpand=!1;if(this.defaultExpand)var b=Object.assign({},this.defaultExpand);else{b={};var f=this;a.treeData.forEach(function(h){b[h[f.idProperty]]=
!0})}this.grid._expanded=b}this.tree.addNodes(a.treeData);this.refresh()},getHighlightedOption:function(){},highlightFirstOption:function(){},highlightLastOption:function(){},clearResultList:function(){this.tree.clear()},onChange:function(a){}});t=t(p,{dropDownClass:k,tree:null,autoComplete:!1,defaultExpand:null,postCreate:function(){this.inherited(arguments);this.tree&&this.setItems(this._getStoreItemsFromTree())},_setTreeAttr:function(a){this.tree=a;this._isCreated&&this.setItems(this._getStoreItemsFromTree());
this.dropDown&&(this.dropDown.baseTree=this.tree)},_getStoreItemsFromTree:function(){return g(this.tree.data,this)},_startSearch:function(a){if(!this.dropDown){var d=this.id+"_popup";this.dropDown=new this.dropDownClass({gridClass:"esriMapsAnalystXSelectableTreeGrid esriMapsAnalystXFilteringSelect_treeGrid",onChange:function(){return this._selectOption.apply(this,arguments)}.bind(this),id:d,dir:this.dir,textDir:this.textDir,tree:new l([],{idProperty:this.idProperty}),idProperty:this.idProperty,labelProperty:this.labelProperty,
baseTree:this.tree,hostWidget:this,defaultExpand:this.defaultExpand})}this.inherited(arguments)},_openResultList:function(){this.inherited(arguments);this.dropDown&&this.dropDown.refresh()},getSelectedItem:function(){var a=this.inherited(arguments);return a&&a.__item}});t.NONE_ID=p.NONE_ID;return t})},"widgets/BusinessAnalyst/esriAnalystX/widgets/Selects/FilteringSelect":function(){define("dojo/_base/declare dojo/store/Memory dojo/query dojo/dom-class dojo/dom-style dojo/dom-geometry dijit/form/FilteringSelect dijit/form/_ComboBoxMenu ../../dijit/tooltips/TooltipUtil dojo/i18n!../../../nls/strings xstyle/css!./css/FilteringSelect.css".split(" "),
function(t,p,l,k,g,e,a,d,c,b){var f=t(p,{filtered:!1,noneItem:null,get:function(h){return"None"==h?this.noneItem:this.inherited(arguments)},query:function(h,m){var n=this.inherited(arguments);this.filtered=n.length!=this.data.length;return n}});p=t(d,{baseClass:"dijitComboBoxMenu",idProperty:"value",postCreate:function(){this.inherited(arguments);c.autoTooltip(this.domNode)},_createMenuItem:function(){var h=this.inherited(arguments);h.className+=" TrimWithEllipses";return h},selectItem:function(h){if(this.items){for(var m=
-1,n=0;n<this.items.length;n++)if(this.items[n][this.idProperty]==h){m=n;break}if(!(0>m))for(h=this.containerNode.children,n=0;n<h.length;n++){var q=h[n];if("none"!=q.style.display&&q.getAttribute("item")==m){this.selectLastNode();this.set("selected",q,!0);break}}}}});t=t(a,{forceWidth:!1,autoWidth:!1,selectOnClick:!0,idProperty:"value",labelProperty:"label",placeHolder:null,dropDownClass:p,options:null,_assignedStore:null,_isCreated:!1,postMixInProperties:function(){this.searchAttr=this.labelAttr=
this.labelProperty;var h={};h[this.idProperty]="None";h[this.labelAttr]=this.placeHolder||b.None;this.set("store",new f({idProperty:this.idProperty,noneItem:h}));this.inherited(arguments)},_startSearch:function(){this.inherited(arguments);this.dropDown.idProperty=this.idProperty;this.dropDown.labelProperty=this.labelProperty},postCreate:function(){this.inherited(arguments);c.autoTooltip(this.domNode);(this.options||this._assignedStore)&&this.setItems(this.options||this._assignedStore.data);k.add(this.domNode,
"esriMapsAnalystXFilteringSelect");this._isCreated=!0},_onFocus:function(){this._updateTrimWithEllipses(!0);this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this._updateTrimWithEllipses(!1)},_updateTrimWithEllipses:function(h){var m=l(".dijitInputInner",this.domNode)[0];if(m)k[h?"remove":"add"](m,"TrimWithEllipses")},_setStoreAttr:function(h){h instanceof f?(this.store=h,this.inherited(arguments)):(this._assignedStore=h,this._isCreated&&this.setItems(this._assignedStore.data))},
_setOptionsAttr:function(h){this.options=h;this._isCreated&&this.setItems(this.options)},setItems:function(h,m){this.store.setData(h);this.closeDropDown();this.dropDown&&this.dropDown.clearResultList();h=this.get("value");m=m||"None";this.set("value",m);m==h&&this.emit("Change");this._updateTrimWithEllipses(this.get("focused"))},_openResultList:function(h,m,n){var q=e.getContentBox(this.domNode).w;g.set(this.dropDown.domNode,"width",q+"px");this.inherited(arguments);this.store.filtered||this.dropDown.selectItem&&
this.dropDown.selectItem(this.get("value"))},_setBlurValue:function(){var h=this.get("displayedValue");"undefined"==typeof this.item&&(this.item=null,this.set("displayedValue",h));this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0);this._refreshState();this.focusNode.removeAttribute("aria-activedescendant")},getSelectedItem:function(){var h=this;return this.store.data.filter(function(m){return m[h.idProperty]==h.get("value")})[0]}});t.NONE_ID="None";return t})},"widgets/BusinessAnalyst/esriAnalystX/dijit/tooltips/TooltipUtil":function(){define("dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/dom-class dojo/query dojo/on dojox/gfx dojo/sniff dojo/aspect dojox/uuid/generateRandomUuid dijit/Tooltip ../utils/DomUtil ../utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/domReady!".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n){function q(){D&&(D.isMultilineContainer?z.hideTooltipForNode(D):(clearInterval(D.__autoTooltipInLayoutCheckHandle),delete D.__autoTooltipInLayoutCheckHandle,f.hide(D)),D=null)}function r(B,y){y=y||"";var A=t.create("div",{class:"esriMapsAnalystXValidationTooltip"+y},document.body);!y&&t.create("div",{class:"esriMapsAnalystXValidationTooltipTip"+y},A);t.create("div",{innerHTML:B,class:"esriMapsAnalystXValidationTooltipBody"+y},A);p.set(A,"position","fixed");return A}
function u(B,y){function A(){B&&(document.body.removeChild(B),I.forEach(function(L){L.remove()}),B=I=null)}y=y.textbox||y;var H=l.getMarginBox(B),G=l.position(y);"rtl"===document.dir?p.set(B,{left:G.x-H.w+"px",top:G.y+G.h/2-H.h/2+"px"}):p.set(B,{left:G.x+G.w+"px",top:G.y+G.h/2-H.h/2+"px"});var I=[e(document.body,"mousedown, keydown",A),e(y,"blur",A)];return{remove:A}}function v(B,y,A){function H(){var O=t.create("div",{class:"esriMapsAnalystXClosableTooltipTip"},I);k.add(O,"right"===A?"esriMapsAnalystXClosableTooltipTipRight":
"esriMapsAnalystXClosableTooltipTipLeft")}function G(){L=t.create("div",{class:"esriMapsAnalystXClosableTooltipBody"},I);t.create("div",{innerHTML:B,class:"esriMapsAnalystXClosableTooltipLabel"},L);N=t.create("div",{class:"esriMapsAnalystXClosableTooltipCloseButton esriMapsAnalystXCloseWindow esriMapsAnalystXCloseWindowWhite"},L)}y={class:"esriMapsAnalystXClosableTooltip "+(y||"")};y.id=b();var I=t.create("div",y,document.body),L,N;"right"!==A?(G(),H()):(H(),G());p.set(I,"position","fixed");return{tooltip:I,
body:L,closeButton:N}}function w(B,y,A,H){var G=l.getMarginBox(B.tooltip),I=l.position(y);"rtl"===document.dir&&"right"!==H||"rtl"!==document.dir&&"right"===H?p.set(B.tooltip,{left:I.x+I.w+"px",top:I.y+I.h/2-G.h/2+"px"}):p.set(B.tooltip,{left:I.x-G.w+"px",top:I.y+I.h/2-G.h/2+"px"});var L,N=function(){L&&clearTimeout(L);O&&clearInterval(O);S&&S.remove();B.tooltip.parentNode===document.body&&document.body.removeChild(B.tooltip)};var O=setInterval(function(){h.isNodeInLayout(y)||N();h.isNodeVisible(y)?
h.show(B.tooltip):h.hide(B.tooltip)},300);A&&(L=setTimeout(N,A));var S=e(B.closeButton,"click",function(){N()});B.tooltip._removeFunc=N;return B.tooltip}var z={},E={};z.hideTooltipForNode=n.hideTooltipForNode;z.setTooltipToNode=n.setTooltipToNode;z.createTooltip=function(B,y,A){var H={orientation:l.isBodyLtr(document)?"right":"left",offset:{x:15,y:0}};y&&(H.innerHTML=y);A&&(H=Object.assign(H,A));H.id=b();H.toMouseCursor&&(H.mouseEvent=m.getCursorPosition(),delete H.toMouseCursor);y=H.mouseEvent;delete H.mouseEvent;
A=H.htmlFragment;delete H.htmlFragment;var G=H.widget;delete H.widget;var I=H.orientation;delete H.orientation;var L=H.offset;delete H.offset;var N=H.horizontalOffset;delete H.horizontalOffset;var O=t.create("div",H,B?B.container:document.body);A?t.place(A,O):G&&G.placeAt(O);p.set(O,"position","fixed");var S=l.getMarginBox(O),R=function(U,Z){var ca=U.touches?event.touches[0].clientX:U.clientX;U=U.touches?event.touches[0].clientY:U.clientY;var Y,da,Q=L.x,X=L.y;"left"===I?0>ca-S.w-Q&&(Y="right"):ca+
S.w+Q>document.body.clientWidth&&(Y="left");U+S.h+X>document.body.clientHeight&&(da="above");Y=Y||I;p.set(O,{left:Z?Z+"px":ca+("left"===Y?-S.w-Q:Q)+"px",top:U+("above"===da?-S.h-X:X)+"px"});O.style.display=""};y&&R(y,N);H=[];H.push(e(B?B:document.body,B?"mouse-move, mousemove":"mousemove, touchmove",function(U){R(U,N)}));H.push(e(B?B:document.body,B?"mouse-out, mouseout":"mouseout, touchend",function(U){O.style.display="none"}));B={};B.handlers=H;B.tooltip=O;E[O.id]=B;return O};z.removeTooltip=function(B){if(B){B=
"string"===typeof B?B:B.id;var y=E[B];delete E[B];y&&(y.handlers.forEach(function(A){A.remove()}),t.destroy(y.tooltip))}};var F={};z.registerTooltipForSlider=function(B,y,A,H){var G={offsetX:0,offsetY:0,class:"esriMapsAnalystXTooltip"};y&&(G=Object.assign(G,y));G.id=b();var I=t.create("div",G,document.body);I.style.display="none";p.set(I,"position","fixed");var L=!1,N=function(S,R){if(!L){L=!0;I.style.display="";I.innerHTML=R();var U=l.getMarginBox(I),Z=l.position(S);p.set(I,{left:Z.x+Z.w/2-U.w/2+
G.offsetX+"px",top:Z.y-U.h-5+G.offsetY+"px"});var ca=[];ca.push(c.after(B,"onChange",function(){I.innerHTML=R();Z=l.position(S);p.set(I,{left:Z.x+Z.w/2-U.w/2+"px",top:Z.y-U.h-5+"px"})}));var Y=function(){I.style.display="none";ca.forEach(function(Q){Q.remove()});L=!1},da=!1;ca.push(e(S,"mousedown, mouseDown, mouse-down",function(){da=!0;ca.push(e(document,"mouseup, mouseUp, mouse-up",function(){Y()}))}));ca.push(e(S,"mouseout, mouseOut, mouse-out",function(){da||Y()}))}};y=[];y.push(e(B.sliderHandle,
"mouseover, mouseOver, mouse-over",function(){H&&B.isSliderDisabled&&B.isSliderDisabled()||N(B.sliderHandle,function(){var S=H?B.get("value")[0]:B.get("value");return A?A(S):S})}));H&&y.push(e(B.sliderHandleMax,"mouseover, mouseOver, mouse-over",function(){B.isSliderDisabled&&B.isSliderDisabled()||N(B.sliderHandleMax,function(){return A?A(B.get("value")[1]):B.get("value")[1]})}));y.push(c.before(B,"destroy",function(){z.unregisterTooltipForSlider(B)}));B.tooltipId=I.id;var O={};O.tooltip=I;O.handlers=
y;F[I.id]=O};z.unregisterTooltipForSlider=function(B){var y=F[B.tooltipId];y&&(y.handlers.forEach(function(A){A.remove()}),t.destroy(y.tooltip));delete F[B.tooltipId];delete B.tooltipId};var D=null;z.autoTooltip=function(B,y,A){"string"===typeof y&&(y=y.split(" ").filter(function(G){return G&&!!G.trim().length}));y=y||[];y.push("TrimWithEllipses");A=A||[];A.push("esriMapsAnalystXInfoIcon");for(var H=0;H<y.length;H++)e(B,"."+y[H]+":mouseover, "+y[H]+":touchstart, ",function(G){this!==D&&this.offsetWidth<
this.scrollWidth&&!this.noAutoTooltip&&(G=getComputedStyle(this).width,G=Number(G.substr(0,G.length-2)),0>G-Math.round(G)&&this.offsetWidth==this.scrollWidth-1||(q(),D=this,G=D.autoTooltip||D.textContent||D.value,D.title&&(G+=" ("+D.title+")"),G&&f.show(G,D,["above","below"]),e.once(D,"mouseout, touchstart, touchout",function(){q()}),D.__autoTooltipInLayoutCheckHandle=setInterval(function(){h.isNodeInLayout(D)||q()},500)))});if(d("touch"))for(H=0;H<A.length;H++)e(B,"."+A[H]+":touchstart ",function(G){this!==
D&&(D=this,D.title&&(f.show(D.title,D,["above","below"]),e.once(D,"touchstart, touchout",function(){f.hide(D);D=null})))})};z.addAutoTooltipsToTabContainer=function(B){g(".tabLabel",B.domNode).forEach(function(y){k.add(y,"TrimWithEllipses")});z.autoTooltip(B)};z.setMultilineText=function(B,y,A,H){A=A||2;y=y.trim();H=H||["above","below"];k.remove(B,"TrimWithEllipses");B.style.overflow="hidden";B.innerHTML="";for(var G=y,I=!1;G;){A--;var L=t.create("div",null,B);L.style.overflow="hidden";L.style.whiteSpace=
"nowrap";for(var N=G;N;)if(L.textContent=N,L.offsetWidth<L.scrollWidth-1)N=(N=N.match(/^(.*[^\s]+)\s+[^\s]+$/))&&N[1]||"";else break;!N||!A&&N!==G?(L.textContent=G,G="",L.style.textOverflow="ellipsis",I=!0):G=G.substr(N.length).trim()}I&&z.setTooltipToNode(B,function(){q();D=B;D.isMultilineContainer=!0;return y},{position:H})};z.showErrorTip=function(B,y){return u(r(y),B.domNode||B)};z.showNewStyleErrorTip=function(B,y,A){return u(r(y,"NewStyle"+(A?" esriMapsAnalystXWarningStyle":"")),B.domNode||
B)};z.showAlertTooltip=function(B){B&&B.node&&B.message&&(f.show(B.message,B.node,B.position||["above","below"]),setTimeout(function(){f.hide(B.node)},B.timeout||5E3))};z.showClosableTooltip=function(B){var y=v(B.message,B.tooltipClass,B.position);return w(y,B.component,B.timeout,B.position)};z.removeClosableTooltip=function(B){B&&B._removeFunc&&B._removeFunc()};z.showClosableTooltipOnVerticalBracket=function(B){var y=B.below||B.above,A=l.position(B.above,!0),H=l.position(y,!0),G="rtl"!==document.dir?
"start"===B.direction:"end"===B.direction,I=A.x+A.w*(G?0:1);A=A.y;var L=H.y+H.h,N=t.create("div",{class:"esriMapsAnalystFlexibleTooltip_tooltip esriMapsAnalystXNonSelectable"},document.body),O=t.create("div",{class:"esriMapsAnalystFlexibleTooltip_surfaceContainer"},N);H={};I={top:A-2,left:I+(G?-3:3),height:L-A+4,width:10};for(var S in I)H[S]=I[S]+"px";p.set(N,H);var R=a.createSurface(O,I.width,I.height);R.clear();R.createPolyline([{x:G?I.width:0,y:0},{x:G?0:I.width,y:0},{x:G?0:I.width,y:I.height},
{x:G?I.width:0,y:I.height}]).setStroke({color:"#6E6E6E",width:6});B.component=N;G=v(B.message,B.tooltipClass,B.position);var U=function(){clickHandler&&clickHandler.remove();Z&&clearInterval(Z);R&&R.clear();t.destroy(O);t.destroy(N)},Z=setInterval(function(){h.isNodeInLayout(y)||U();h.isNodeVisible(y)?p.set(N,"visibility","visible"):p.set(N,"visibility","hidden")},300);B.timeout&&setTimeout(U,B.timeout);clickHandler=e(G.closeButton,"click",U);tooltip=w(G,B.component,B.timeout,B.position);var ca=tooltip._removeFunc;
tooltip._removeFunc=function(){ca();U()};return tooltip};return z})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DomUtil":function(){define("dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on ../../utils/ObjectUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(t,p,l,k,g,e,a){var d=Object.assign({},a);d.select=function(c){return d.addTag(c,"selected")};d.unselect=function(c){return d.removeTag(c,"selected")};d.floatStart=function(c){return d.addTag(c,"esriMapsAnalystXFloatStart")};
d.floatEnd=function(c){return d.addTag(c,"esriMapsAnalystXFloatEnd")};d.addSpacer=function(c,b){c=t.create("div",{"class":"esriMapsAnalystXSpacer",innerHTML:"\x26nbsp;"},c);if(b)d[b](c);return c};d.getAndUpdateNumber=function(c,b){if(!c)return NaN;var f=c.get&&c.set;void 0===b&&(b=0);var h=e.parseNumber(f?c.get("value"):c.value,b);isNaN(h)||(f?c.set("value",e.formatNumber(h,b)):c.value=e.formatNumber(h,b));return h};d.getAndUpdateString=function(c){if(!c)return null;if(c.get&&c.set){var b=c.get("value").trim();
c.set("value",b)}else b=c.value.trim(),c.value=b;return b};d.getScreenScaleFactor=function(){return d.getTextBox("",{style:"width: 72pt; height: 72pt"}).w/96};d.positionAtCenter=function(c,b){if(c&&b){var f=p.position(c);b=p.position(b);f.w&&f.h&&b.w&&b.h&&l.set(c,{left:(b.w-f.w)/2+"px",top:(b.h-f.h)/2+"px"})}};d.showAroundOverlay=function(c,b){b=b||{};d.removeAroundOverlay(c);var f={w:"width",h:"height",l:"left",t:"top",r:"right",b:"bottom"},h=p.position(c);if(b.viewPortContainer){var m=p.position(b.viewPortContainer),
n=h.x,q=h.y;h.x=Math.max(h.x,m.x);h.w-=h.x-n;h.y=Math.max(h.y,m.y);h.h-=h.y-q;h.w=Math.min(h.w,m.x+m.w-h.x);h.h=Math.min(h.h,m.y+m.h-h.y)}c.__aroundOverlays=(b.placeInNode?[{l:0,t:-h.y,w:h.w,h:h.y},{l:h.w,t:-h.y,w:document.body.clientWidth-(h.x+h.w),h:document.body.clientHeight},{l:0,t:h.h,w:h.w,h:document.body.clientHeight-(h.y+h.h)},{l:-h.x,t:-h.y,w:h.x,h:document.body.clientHeight}]:[{l:h.x,t:0,w:h.w,h:h.y},{w:document.body.clientWidth-(h.x+h.w),r:0,t:0,b:0},{l:h.x,h:document.body.clientHeight-
(h.y+h.h),w:h.w,b:0},{l:0,t:0,w:h.x,b:0}]).map(function(u){var v=t.create("div",{"class":b.overlayClass||"esriMapsAnalystXNodeAroundOverlay"},b.placeInNode?c:document.body),w={position:"absolute"},z;for(z in f)void 0!==u[z]&&(w[f[z]]=Math.round(u[z])+"px");l.set(v,w);return v});h=function(){d.removeAroundOverlay(c)};b.removeOnClick&&(c.__aroundOverlaysRemoveHandle=g.once(document.body,"click",h));c.__aroundOverlaysResizeHandle=g(window,"resize",function(){d.showAroundOverlay(c,b)});var r;c.__aroundOverlaysSetIntervalHandle=
setInterval(function(){if(r){var u=p.position(c);u.x==r.x&&u.y==r.y&&u.w==r.w&&u.h==r.h||d.showAroundOverlay(c,b)}else r=p.position(c)},50);return{remove:h}};d.removeAroundOverlay=function(c){c.__aroundOverlays&&c.__aroundOverlays.forEach(function(b){t.destroy(b)});delete c.__aroundOverlays;c.__aroundOverlaysRemoveHandle&&c.__aroundOverlaysRemoveHandle.remove();delete c.__aroundOverlaysRemoveHandle;c.__aroundOverlaysResizeHandle&&c.__aroundOverlaysResizeHandle.remove();delete c.__aroundOverlaysResizeHandle;
clearInterval(c.__aroundOverlaysSetIntervalHandle);delete c.__aroundOverlaysSetIntervalHandle};d.getDocumentStyleDeclaration=function(c){function b(m){try{var n=m.rules||m.cssRules}catch(r){n=null}if(n)for(m=0;m<n.length;m++){var q=n[m];if(q.styleSheet){if(q=b(q.styleSheet))return q}else if(q.selectorText==c)return q.style}}for(var f=0;f<document.styleSheets.length;f++){var h=b(document.styleSheets[f]);if(h)return h}return null};d.getNodeFontFamily=function(c){return(c=l.get(c,"fontFamily")||l.getComputedStyle(c)["font-family"])?
c.replace(/'|"/g,"").split(",")[0]:c};d.getNodeFontSize=function(c){return l.toPixelValue(c,l.get(c,"fontSize"))};d.listenToNodeAdded=function(c,b,f){if(d.isNodeInLayout(c))b();else{c.__listenToNodeAddedHandle&&c.__listenToNodeAddedHandle.remove();var h=setInterval(function(){d.isNodeInLayout(c)&&(c.__listenToNodeAddedHandle&&c.__listenToNodeAddedHandle.remove(),b())},f||100);c.__listenToNodeAddedHandle={remove:function(){clearInterval(h);delete c.__listenToNodeAddedHandle}};return c.__listenToNodeAddedHandle}};
d.isNodeVisible=function(c){return d.isChildOf(c,document.body,function(b){return!k.contains(b,"dijitHidden")&&"hidden"!=l.get(b,"visibility")})};d.enableHyperlink=function(c,b){b?k.replace(c,"esriMapsAnalystXLink","esriMapsAnalystXLinkDisabled"):k.replace(c,"esriMapsAnalystXLinkDisabled","esriMapsAnalystXLink")};return d})},"widgets/BusinessAnalyst/esriAnalystX/utils/ObjectUtil":function(){define(["../../baUtil/ObjectUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/utils/SortUtil"],
function(t,p,l){var k=Object.assign({},t,p,l);k.getPrototypeOf=function(g){try{return Object.getPrototypeOf?Object.getPrototypeOf(g):g.__proto__||g.constructor&&g.constructor.prototype}catch(e){return null}};k.isJson=function(g){return"object"===typeof g&&k.getPrototypeOf(g)===Object.prototype};k.copyJson=function(g){return void 0===g||null===g?null:JSON.parse(JSON.stringify({object:g})).object};k.convert=function(g,e,a){var d=e||function(){};e=d(g);if("undefined"!==typeof e)return e;if(Array.isArray(g)){var c=
[];g.forEach(function(m){c.push(k.convert(m,d,a))},this);return c}if(!k.isJson(g))return g;e={};for(var b in g){var f=g[b],h=a?d(b):b;"undefined"===typeof h&&(h=b);e[h]=k.convert(f,d,a)}return e};k.getDeepCopy=function(g){return k.convert(g)};k.getRange=function(g,e,a){e="function"===typeof e?e.bind(null==a?null:a):null;var d,c;for(c in g)if(a=g[c],a=Number(null===e?a:e(a,c)),!isNaN(a))if(void 0===b)var b=d=a;else b=Math.min(b,a),d=Math.max(d,a);return void 0===b?{}:{min:b,max:d}};k.removeEmptyObjects=
function(g){function e(d){d&&"object"===typeof d&&Object.keys(d).forEach(function(c){var b=d[c];!b||"object"!==typeof b||Array.isArray(b)||Object.keys(b).length?e(b):(a=!0,delete d[c])})}for(var a=!0;a;)a=!1,e(g);return g};k.removeValues=function(g,e){function a(d){d&&"object"===typeof d&&Object.keys(d).forEach(function(c){e(c,d[c])?a(d[c]):delete d[c]})}a(g);return g};k.isEqual=function(g,e){if(null===g||"object"!==typeof g||null===e||"object"!==typeof e)return g===e;if(Object.keys(g).length!==Object.keys(e).length)return!1;
var a={},d;for(d in g)a[d]=!0;for(d in e)if(void 0!==a[d])delete a[d];else return!1;for(d in g)if(!k.isEqual(g[d],e[d]))return!1;return!0};k.getObject=function(g,e){if(!e)return g;e=e.split(".");for(var a=0;a<e.length;a++)g=g&&g[e[a]];return g};k.formatNumber=function(g,e){e="number"===typeof e?{places:e}:e||{};if(null==e.places||0>e.places)e.places=k.getPlaces(g,!0),e.maxPlaces&&e.places>e.maxPlaces&&(e.places=e.maxPlaces);return p.formatNumber(g,e)};k.getPlaces=function(g,e){function a(h,m){var n=
g.indexOf(h,d);if(0>n)return c;h=g.charAt(n+h.length);return!h||0>m.indexOf(h)?c:n-d}g=+g;if(isNaN(g))return-1;g+="";var d=g.indexOf(".")+1,c=d?g.length-d:0;if(2>=c||!e)return c;e=0;if(!+g.substr(0,d-1))for(;"0"===g.charAt(d);)d++,e++,c--;for(var b=c-1;2<=b;b--){var f=Math.min(a("000000000000000".substr(0,b),"01234"),a("999999999999999".substr(0,b),"56789"));if(f!==c){c=f;break}}return c+e};return k})},"widgets/BusinessAnalyst/baUtil/ObjectUtil":function(){define(["require","exports"],function(t,
p){function l(k,g){for(var e=0,a=Object.keys(g);e<a.length;e++){var d=a[e];"object"!==typeof k[d]||null===k[d]||"object"!==typeof g[d]||null===g[d]?k[d]=g[d]:Array.isArray(k[d])?Array.isArray(g[d])?k[d].concat(g[d]):k[d]=g[d]:Array.isArray(g[d])?k[d]=g[d]:l(k[d],g[d])}}return{map:function(k,g,e){void 0!==e&&(g=g.bind(e));if("object"!==typeof k)throw Error("Object or array expected");if(Array.isArray(k)){e=[];for(var a=0,d=k.length;a<d;a++)e.push(g(k[a],a));return e}e={};a=0;for(d=Object.keys(k);a<
d.length;a++){var c=d[a];Object.hasOwnProperty.call(k,c)&&(e[c]=g(k[c],c))}return e},deepAssign:function(k){for(var g=[],e=1;e<arguments.length;e++)g[e-1]=arguments[e];for(e=0;e<g.length;e++)l(k,g[e]);return k}}})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/MouseUtil":function(){define(["dojo/dom-geometry","esri/dijit/geoenrichment/utils/MouseUtil"],function(t,p){var l;p.unitTesting_setCursorOverNode=function(k){k=t.position(k);p.unitTesting_setCursorPosition(k.x+k.w/2,k.y+k.h/2)};p.unitTesting_setCursorPosition=
function(k,g){p._latestEvent={clientX:k,pageX:k,clientY:g,pageY:g}};p.unitTesting_lockPosition=function(k){l=k};p.unitTesting_shiftMousePosition=function(k,g){p.unitTesting_setCursorPosition(p._latestEvent.clientX+(k||0),p._latestEvent.clientY+(g||0))};p._setLatestEvent=function(k){l||(p._latestEvent=k)};return p})},"widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dijit/Tooltip dijit/_WidgetBase ../../dijit/_TemplatedMixin dgrid/OnDemandGrid dgrid/tree esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/TriStateItem ../../dijit/utils/DgridUtil ../../dijit/utils/DomUtil ../../dijit/utils/MouseUtil ../../dijit/tooltips/TooltipUtil dojo/text!./templates/SelectableTreeGrid.html xstyle/css!./css/SelectableTreeGrid.css".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u,v,w,z){var E=t(null,{_selectedRowInfos:null,_lastSelectedRowInfo:null,_outsideHandler:null,_isSelectionFrozen:!1,keepSelectionOnOutsideClick:!1,_previouslySelectedRowsByNode:null,constructor:function(){this._previouslySelectedRowsByNode=new WeakMap},buildRendering:function D(){this._selectedRowInfos={};this.inherited(D,arguments)},postCreate:function B(){this.inherited(B,arguments);k.add(this.domNode,"esriMapsAnalystXNonSelectable")},_reselectSingleNode:function(B){this.selectSingleRow(this._previouslySelectedRowsByNode.get(B),
B)},selectSingleRow:function(B,y){this.unselectAllRows();this._selectRow(B,y)},_selectRow:function(B,y){k.add(B,this.selectedRowClass);k.add(B,"row-level-"+this._getNodeLevel(y));var A=this.tree.getIdentity(y),H={row:B,node:y,nodeId:A,index:y.parent&&y.parent.children.indexOf(y)};this._lastSelectedRowInfo=this._selectedRowInfos[A]=H;this._previouslySelectedRowsByNode.set(y,B);var G=this;this._outsideHandler=this._outsideHandler||a(document.body,"click",function(){v.isMouseOver(G.domNode)||G._isSelectionFrozen||
G.keepSelectionOnOutsideClick||G.unselectAllRows()})},_unselectRow:function(B,y){delete this._selectedRowInfos[this.tree.getIdentity(y)];k.remove(B,this.selectedRowClass)},unselectAllRows:function(){for(var B in this._selectedRowInfos)k.remove(this._selectedRowInfos[B].row,this.selectedRowClass);this._selectedRowInfos={};this._lastSelectedRowInfo=null;this._outsideHandler&&this._outsideHandler.remove();this._outsideHandler=null},getSelectedRowNodes:function(){return this._getSelectedNodesRows().nodes},
selectRowNodes:function(B){var y=this;B&&B.forEach(function(A){var H=y.grid.row(A);H&&H.element&&y._selectRow(H.element,A)})},freezeRowSelection:function(){this._isSelectionFrozen=!0},unfreezeRowSelection:function(){this._isSelectionFrozen=!1},_getSelectedNodesRows:function(){var B=[],y=[],A=[],H;for(H in this._selectedRowInfos)A.push(this._selectedRowInfos[H]);A.sort(function(G,I){return G.index-I.index});A.forEach(function(G){B.push(G.node);y.push(G.row)});return{nodes:B,rows:y}},_emitSelectedRowsEvent:function(){var B=
this._getSelectedNodesRows();if(B.nodes.length)this.onRowsSelected(B.nodes,B.rows)}});return t([b,f,l,E],{templateString:z,tree:null,grid:null,gridClass:"",highlightSelected:!0,firstColumns:null,additionalColumns:null,showRootCheckbox:!0,showCheckboxColumn:!0,showHeader:!0,labelColumnField:"label",gridParams:null,keepContentUnderScroll:void 0,hideInvisibleExpandoIcons:!1,expandOnNodeClick:!1,checkLimit:0,checkLimitMessage:null,checkLimitMessageTimeout:5E3,handleMultipleCheck:!1,enableRowSelection:!1,
enableMultipleRowSelection:!1,allowSelectionFromManyParents:!1,selectedRowFilter:null,selectedRowClass:"row-selected",enableHeaderLabelToggleClick:!0,defaultExpand:null,fitParentSize:!1,renderAllRows:!1,rowPostProcessor:null,_rootCheckbox:null,_checkboxes:null,_lastCheckedNode:null,updateSelectionCountDiv:function(B,y){},getLabel:function(B,y){return B.label},postCreate:function y(){this.inherited(y,arguments);this._createGrid()},resize:function(){this.grid.resize();this._updateCheckboxState(this._rootCheckbox);
for(var y in this._checkboxes)this._updateCheckboxState(this._checkboxes[y]);this._emitSelectionChanged()},setWidth:function(y){this.grid&&this.grid.domNode&&e.set(this.grid.domNode,"width",y+"px")},setHeight:function(y){this.grid&&this.grid.domNode&&e.set(this.grid.domNode,"height",y+"px")},row:function(y){return this.grid.row(y)},cell:function(y){return this.grid.cell(y)},_labelColumn:null,_createGrid:function(){var y=this;this._checkboxes={};var A={label:this.getLabel(this.tree.root,!0),sortable:!1,
field:this.labelColumnField,renderCell:this._renderLabel.bind(this),renderHeaderCell:this._renderLabelHeader.bind(this,this.tree.root)},H;if(this.additionalColumns&&this.additionalColumns.length&&(H=this.additionalColumns.filter(function(I){return I.field===y.labelColumnField})[0])){for(var G in A)void 0===H[G]&&(H[G]=A[G]);A=H}A.indentWidth=A.indentWidth||16;this._labelColumn=A=this._prepareTreeColumn(A);G=[];this.firstColumns&&(G=G.concat(this.firstColumns));this.showCheckboxColumn&&G.push({label:"",
field:"checkbox",sortable:!1,renderCell:this._renderCheckboxForColumn.bind(this),renderHeaderCell:this._renderCheckboxForColumn.bind(this,this.tree.root)});H||G.push(A);this.additionalColumns&&(G=G.concat(this.additionalColumns));A=["esriMapsAnalystXSelectableTreeGrid"];this.gridClass&&A.push(this.gridClass);this.fitParentSize&&A.push("fitParentSize");A=Object.assign({class:A.join(" "),keepScrollPosition:!0,store:this.tree,columns:G},this.gridParams);this.grid=this._createGridObject(A,this.gridContainer);
this.own(this.grid);this.grid._expanded=this.defaultExpand||this.grid._expanded||{};r.oddEvenFix(this.grid);this.own(a(this.tree,"updated",this._onStoreUpdated.bind(this)));this._addKeepScrollHandlers();this._addGridHandlers();this.renderAllRows&&(this.grid.minRowsPerPage=1E4,this.grid.maxRowsPerPage=10250);this.grid.startup();w.autoTooltip(this.domNode);this.showHeader||k.add(this.domNode,"esriMapsAnalystXGridNoHeader");a(this.grid.domNode,".dgrid-expando-icon:click,.dgrid-content .dgrid-column-labelColumn:dblclick,.dgrid-content .dgrid-column-labelColumn:keydown",
function(I){(I=y.grid.row(I))&&y.onExpandChangedUser(I.data)})},_createGridObject:function(y,A){return new h(y,A)},onRowInserted:function(y,A){},_addGridHandlers:function(){function y(H,G){A.enableRowSelection&&G.parent&&(!A.selectedRowFilter||A.selectedRowFilter(G))&&(k.add(H,"esriMapsAnalystXClickable"),a(H,"click",function(I){setTimeout(function(){if(!A._isSelectionFrozen){if(I.shiftKey&&A.enableMultipleRowSelection){if(A._lastSelectedRowInfo&&A._lastSelectedRowInfo.row.parentNode&&A._lastSelectedRowInfo.node.parent===
G.parent){var L=u.getChildIndex(A._lastSelectedRowInfo.row.parentNode,A._lastSelectedRowInfo.row),N=u.getChildIndex(H.parentNode,H),O=L<=N?A._lastSelectedRowInfo.row:H;L=L<=N?H:A._lastSelectedRowInfo.row;N=O;if(O.id!==L.id){do{O=A.grid.row(N).data;A._selectRow(N,O);if(N.id===L.id)break;N=N.nextSibling}while(N)}}else A.selectSingleRow(H,G);u.stealFocus()}else n.isCtrl(I)&&A.enableMultipleRowSelection?A._lastSelectedRowInfo&&A._lastSelectedRowInfo.row.parentNode&&A._lastSelectedRowInfo.node.parent===
G.parent||A.allowSelectionFromManyParents?A._selectedRowInfos[G.id]?A._unselectRow(H,G):A._selectRow(H,G):A.selectSingleRow(H,G):A.selectSingleRow(H,G);A._emitSelectedRowsEvent()}})}))}var A=this;this.own(p.after(this.grid,"insertRow",function(H){var G=H&&A.grid._rowIdToObject[H.id];if(H){if(G&&A.hideInvisibleExpandoIcons&&(!G.children||!G.children.length)){var I=d(".dgrid-expando-icon",H)[0];I&&(I.style.width="0")}u[G&&!1===G.visible?"hide":"show"](H);y(H,G)}G&&(A._updateRowHighlighting(G,H),A.onRowInserted(H,
G));A.rowPostProcessor&&A.rowPostProcessor(H,G);return H}))},_addKeepScrollHandlers:function(){function y(H){if(!A.grid.contentNode)return H;if(A.fitParentSize){var G=u.hasScrollbars(A.grid.bodyNode);A.grid.headerNode.style[A.isLeftToRight()?"right":"left"]=G.w?"":"0px";A._lastContentWidth=A.grid.contentNode.style.width||A._lastContentWidth||"";A.grid.contentNode.style.width=G.h?A._lastContentWidth:""}else A.keepContentUnderScroll?A.grid.contentNode.style.width=A.grid.headerNode.firstChild.offsetWidth+
"px":!1===A.keepContentUnderScroll&&(A.grid.contentNode.style.width="");return H}var A=this;if(this.fitParentSize||void 0!==this.keepContentUnderScroll)p.before(this.grid,"refresh",function(){A.hideCheckLimitMessage();A._lastCheckedNode=null}),p.after(this.grid,"resize",y),p.after(this.grid,"refresh",y)},_getNodeLevel:function(y){var A=-1;for(y=y&&y.parent;y;)A++,y=y.parent;return A},_prepareTreeColumn:function(y){return this._wrapTreeColumn(m(y))},_wrapTreeColumn:function(y){return y},_onStoreUpdated:function(){this._checkboxes=
{};this._refreshGrid();this._rootCheckbox&&this._updateCheckboxState(this._rootCheckbox);this._emitSelectionChanged()},_emitSelectionChanged:function(y){var A=this.tree.root.selectCount;this.updateSelectionCountDiv(this.selectionCounter,A);this.emit("SelectionChanged",{selected:A,toggledTreeNode:y})},refresh:function(){this._refreshGrid();this.refreshCheckboxes()},_isRefreshSuspended:!1,setRefreshSuspended:function(y){this._isRefreshSuspended=y},_refreshGrid:function(){if(!this._isRefreshSuspended){var y=
this.grid.getScrollPosition();this.grid.refresh();this.grid.scrollTo(y);for(var A in this._selectedRowInfos)this.grid.row(this._selectedRowInfos[A].node).element&&this._selectRow(this.grid.row(this._selectedRowInfos[A].node).element,this._selectedRowInfos[A].node)}},getScrollPosition:function(){return this.grid&&this.grid.getScrollPosition()},setScrollPosition:function(y){return this.grid&&this.grid.scrollTo(y)},_renderCheckbox:function(y){if(!y.leafCount&&y!==this.tree.root||!this.showCheckboxColumn||
!1===y.selectable&&void 0===y.indepSelection)return document.createTextNode("");var A=new q(null,{class:"esriStyleInTable"});A.autoToggle=!1;A.node=y;this._updateCheckboxState(A,y);!1===y.enabled&&A.set("disabled",!0);y===this.tree.root?(this._rootCheckbox=A,u[this.showRootCheckbox?"show":"hide"](A.domNode)):this._checkboxes[this.tree.getIdentity(y)]=A;A.onClick=this._onCheckboxClick.bind(this,y,A);return A},_renderCheckboxForColumn:function(y){return(y=this._renderCheckbox(y))&&y.domNode},refreshCheckboxes:function(){this._rootCheckbox&&
this._updateCheckboxState(this._rootCheckbox);for(var y in this._checkboxes)this._updateCheckboxState(this._checkboxes[y])},clearLastCheckInfo:function(){this._lastCheckedNode=null},_onCheckboxClick:function(y,A,H){H.stopPropagation();this.hideCheckLimitMessage();var G=this.handleMultipleCheck&&("function"!==typeof this.handleMultipleCheck||this.handleMultipleCheck(y));G&&H.shiftKey&&this._tryToggleMultipleNodes(this._lastCheckedNode,y,A||H)?this._lastCheckedNode=y:(this._lastCheckedNode=G?y:null,
this._toggleNodeSelection(y,A||H),this.refreshCheckboxes())},_tryToggleMultipleNodes:function(y,A,H){if(!y||y===A||y.parent!==A.parent)return!1;var G=A.parent.children,I=G.indexOf(y);A=G.indexOf(A);y=I<A?1:-1;var L=[],N=[];for(I+=y;;I+=y){var O=G[I];((void 0===O.indepSelection?O.selected:O.indepSelection)?L:N).push(O);if(I===A)break}L.forEach(function(S){this._toggleNodeSelection(S,H)},this);N.every(function(S){return this._toggleNodeSelection(S,H)},this);this.refreshCheckboxes();return!0},_toggleNodeSelection:function(y,
A){var H=void 0===y.indepSelection?!y.selected:!y.indepSelection;if(H&&this.checkLimit){var G=this.getSelectedNodes().length,I="function"===typeof this.checkLimit?this.checkLimit(this.tree,G):this.checkLimit;if(G>=I)if(void 0===y.indepSelection&&y.children&&!1!==this.tree.getSelectionState(y))H=!1;else return this.showCheckLimitMessage(A),!1}G=!0;void 0===y.indepSelection?(G=this.tree.changeSelect(y,H,I),!G&&this.showCheckLimitMessage(A)):y.indepSelection=H;this._emitSelectionChanged(y);return G},
_checkLimitHandler:null,showCheckLimitMessage:function(y){if(this.checkLimitMessage){var A=y&&(y.domNode||y.target);A&&(c.show(this.checkLimitMessage,A,["above","below"]),y=function(){A&&c.hide(A);A=null},setTimeout(y,this.checkLimitMessageTimeout),this._checkLimitHandler=y,this.onCheckLimitReached(y))}},hideCheckLimitMessage:function(){this._checkLimitHandler&&this._checkLimitHandler();this._checkLimitHandler=null},onCheckLimitReached:function(y){},_updateCheckboxState:function(y){if(y){var A=this._getNodeSelection(y.node);
y.set("checked",A);this._updateRowHighlighting(y.node,null,A)}},_getNodeSelection:function(y){return void 0!==y.indepSelection?y.indepSelection:this.tree.getSelectionState(y)},_updateRowHighlighting:function(y,A,H){this.highlightSelected&&y&&(H=void 0!==H?H:this._getNodeSelection(y),(A=A||this.grid&&this.row(y).element)&&(!0!==H||void 0===y.indepSelection&&!1===y.selectable?k.remove(A,"selected"):k.add(A,"selected")))},_renderLabel:function(y,A,H){A=this._renderLabelNode(y,H);this._provideLabelClickAction(A,
H,y);return A},_provideLabelClickAction:function(y,A,H){var G=this.expandOnNodeClick&&H.children?H.children.length&&(y=A,function(){this.toggleExpand(H);this.onExpandChangedUser(H)}.bind(this)):!1!==H.enabled&&this.showCheckboxColumn?this._onCheckboxClick.bind(this,H,null):null;G&&(k.add(y,"esriMapsAnalystXClickable"),a(y,"click",function(I){I.stopPropagation();G(I)}))},_renderLabelNode:function(y){return g.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(y)})},
_renderLabelHeader:function(y){var A=g.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(y)||this._labelColumn&&this._labelColumn.label||""});this.enableHeaderLabelToggleClick&&this.showRootCheckbox&&(k.add(A,"esriMapsAnalystXClickable"),a(A,"click",this._onCheckboxClick.bind(this,y,null)));return A},onRowsSelected:function(y,A){},isNodeSelected:function(y){return y&&(y.selected||y.indepSelection)},getSelectedNodes:function(){var y=this.tree.getSelectedNodes(!1),
A=this._getIndepSelectedNodes();return y.concat(A)},_getIndepSelectedNodes:function(){function y(H){H&&(H.indepSelection&&A.push(H),H.children&&H.children.forEach(y))}var A=[];y(this.tree.root);return A},getSelectedState:function(){if(!this.tree)return null;var y={normalSelection:{},indepSelection:{}},A=this.tree.getSelectedNodes(!1);A&&A.forEach(function(H){y.normalSelection[H.id]=!0});(A=this._getIndepSelectedNodes())&&A.forEach(function(H){y.indepSelection[H.id]=!0});return y},setSelectedState:function(y){if(this.tree){this.tree.changeSelect(this.tree.root,
!1);if(y){for(var A in y.normalSelection){var H=this.tree.get(A);H&&this.tree.changeSelect(H,!0)}for(A in y.indepSelection)if(H=this.tree.get(A))H.indepSelection=!0}this.refreshCheckboxes()}},setNodeSelected:function(y,A,H){y&&(void 0!==y.indepSelection?y.indepSelection=A:this.tree.changeSelect(y,A),!1!==H&&this.refreshCheckboxes())},isExpanded:function(y){y="string"===typeof y?y:y[this.tree.idProperty];return this.grid._expanded&&this.grid._expanded[y]},setExpanded:function(y,A,H){y="string"==typeof y?
y:y[this.tree.idProperty];void 0!==y&&(!1!==H?(H=this.grid.row(y))&&H.element&&this.grid.expand(y,A):this.grid._expanded[y]=A)},toggleExpand:function(y){this.setExpanded(y,!this.isExpanded(y))},getExpandedState:function(){return Object.assign({},this.grid._expanded)},setExpandedState:function(y){this.grid._expanded=y||{}},onExpandChangedUser:function(y){},destroy:function(){this.unselectAllRows();this.inherited(arguments)}})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_TemplatedMixin":function(){define(["dojo/_base/declare",
"dijit/_TemplatedMixin","./_EscapeValueMixin"],function(t,p,l){return t([p,l],{})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_EscapeValueMixin":function(){define(["dojo/_base/declare"],function(t){return t(null,{_escapeValue:function(p){return p.replace(/"/g,"\x26quot;")}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(t,
p,l,k,g,e,a,d,c,b,f){function h(q,r,u,v){v=this.grid.isRTL?"right":"left";var w=".dgrid-expando-icon";r&&(w+=".ui-icon.ui-icon-triangle-1-"+(u?"se":"e"));q=f("div"+w+"[style\x3dmargin-"+v+": "+q*(this.indentWidth||9)+"px; float: "+v+"]");q.innerHTML="\x26nbsp;";return q}function m(q){var r=this,u=this.style.height;u&&(this.style.display="0px"==u?"none":"block");q&&(f(this,".dgrid-tree-resetting"),setTimeout(function(){f(r,"!dgrid-tree-resetting")}));this.style.height=""}function n(q){var r=q.renderCell||
c.defaultRenderCell,u,v;q||(q={});q.shouldExpand=q.shouldExpand||function(w,z,E){return E};a.after(q,"init",function(){var w=q.grid,z=".dgrid-content .dgrid-column-"+q.id,E=[];w.cleanEmptyObservers=!1;if(!w.store)throw Error("dgrid tree column plugin requires a store to operate.");q.renderExpando||(q.renderExpando=h);E.push(w.on(q.expandOn||".dgrid-expando-icon:click,"+z+":dblclick,"+z+":keydown",function(F){var D=w.row(F);w.store.mayHaveChildren&&!w.store.mayHaveChildren(D.data)||"keydown"==F.type&&
32!=F.keyCode||"dblclick"==F.type&&v&&1<v.count&&D.id==v.id&&-1<F.target.className.indexOf("dgrid-expando-icon")||w.expand(D);-1<F.target.className.indexOf("dgrid-expando-icon")&&(v&&v.id==w.row(F).id?v.count++:v={id:w.row(F).id,count:1})}));d("touch")&&E.push(w.on(b.selector(z,b.dbltap),function(){w.expand(this)}));w._expanded||(w._expanded={});E.push(a.after(w,"insertRow",function(F){var D=this.row(F);q.shouldExpand(D,u,this._expanded[D.id])&&this.expand(F,!0,!0);return F}));E.push(a.before(w,"removeRow",
function(F,D){if(F=F.connected)g("\x3e.dgrid-row",F).forEach(function(B){w.removeRow(B,!0)}),D||f(F,"!")}));q.collapseOnRefresh&&E.push(a.after(w,"cleanup",function(){this._expanded={}}));w._calcRowHeight=function(F){var D=F.connected;return F.offsetHeight+(D?D.offsetHeight:0)};w.expand=function(F,D,B){var y=F.element?F:w.row(F),A=d("transitionend");F=new l;var H=F.promise;F.resolve();F=y.element;F=-1<F.className.indexOf("dgrid-expando-icon")?F:g(".dgrid-expando-icon",F)[0];B=B||!1===q.enableTransitions;
if(F&&F.mayHaveChildren&&(B||D!==!!this._expanded[y.id])){var G=void 0===D?!this._expanded[y.id]:D;f(F,".ui-icon-triangle-1-"+(G?"se":"e")+"!ui-icon-triangle-1-"+(G?"e":"se"));D=y.element;var I=D.connected,L={originalQuery:this.query};if(!I){I=L.container=D.connected=f(D,"+div.dgrid-tree-container");var N=function(R){return w.store.getChildren(y.data,R)};q.allowDuplicates&&(L.parentId=y.id);"level"in F&&(N.level=F.level);H=H.then(function(){if(w.renderQuery)return w.renderQuery(N,L);var R=f(I,"div"),
U=w.renderArray(N(L),R,"level"in N?{queryLevel:N.level}:{});l.when(U,function(){f(R,"!")});return U});A?e(I,A,m):m.call(I)}I.hidden=!G;var O=I.style;if(!A||B)O.display=G?"block":"none",O.height="";else{if(G){O.display="block";var S=I.scrollHeight;O.height="0px"}else f(I,".dgrid-tree-resetting"),O.height=I.scrollHeight+"px";setTimeout(function(){f(I,"!dgrid-tree-resetting");O.height=G?S?S+"px":"auto":"0px"})}G?this._expanded[y.id]=!0:delete this._expanded[y.id]}return H};a.after(q,"destroy",function(){p.forEach(E,
function(F){F.remove()});delete w.expand;delete w._calcRowHeight})});q.renderCell=function(w,z,E,F){var D=q.grid,B=Number(F&&F.queryLevel)+1,y=!D.store.mayHaveChildren||D.store.mayHaveChildren(w),A=F.parentId;B=u=isNaN(B)?0:B;D=q.renderExpando(B,y,D._expanded[(A?A+"-":"")+D.store.getIdentity(w)],w);D.level=B;D.mayHaveChildren=y;(w=r.call(q,w,z,E,F))&&w.nodeType?(f(E,D),f(E,w)):E.insertBefore(D,E.firstChild)};return q}n.defaultRenderExpando=h;k.getObject("dgrid.tree",!0);return dgrid.tree=n})},"dgrid/util/has-css3":function(){define(["dojo/has"],
function(t){function p(k,g){k=k.style;var e;if(g in k)return!0;g=g.slice(0,1).toUpperCase()+g.slice(1);for(e=l.length;e--;)if(l[e]+g in k)return l[e];return!1}var l=["ms","O","Moz","Webkit"];t.add("css-transitions",function(k,g,e){return p(e,"transitionProperty")});t.add("css-transforms",function(k,g,e){return p(e,"transform")});t.add("css-transforms3d",function(k,g,e){return p(e,"perspective")});t.add("transitionend",function(){var k=t("css-transitions");return k?!0===k?"transitionend":{ms:"MSTransitionEnd",
O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[k]:!1});return t})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DgridUtil":function(){define(["dojo/aspect","dojo/dom-class","dojo/query","../../utils/ArrayUtil"],function(t,p,l,k){function g(c,b,f){if(void 0===f){var h=c._rowIdToObject[b.id];h&&(f=(c=c.store)&&c.isOdd&&c.isOdd(h))}0!==f&&1!==f||p.replace(b,d[f],d[1-f])}function e(c,b,f){var h=c.store;if(h&&h.updateExpand){f=h.updateExpand(b.data,f,!0,c.getSortingFunction());
for(var m in f)b=c.row(h.get(m)),b.element&&g(c,b.element,f[m])}}var a=["ui-icon-triangle-1-e","ui-icon-triangle-1-se"],d=["dgrid-row-even","dgrid-row-odd"];return{createExpando:function(c){p.add(c,"dgrid-expando-icon ui-icon ui-icon-triangle-1-e esriMapsAnalystXClickable");return{expando:c,update:function(b){b=b?1:0;p.replace(c,a[b],a[1-b])}}},oddEvenFix:function(c){c.expand&&(c.getSortingFunction=function(){var b=this.get("sort");return b&&b.length?k.getSorting(b):null},t.after(c,"insertRow",function(b){g(c,
b);return b}),t.before(c,"refresh",function(){var b=c.store;b&&b.updateExpandedNodes&&b.updateExpandedNodes(c._expanded,c.getSortingFunction())}),t.around(c,"expand",function(b){return function(f,h){var m=f.element?f:c.row(f);void 0===h&&(h=!c._expanded[m.id]);!0===h&&e(c,m,!0);var n=b.apply(this,arguments);!1===h&&e(c,m,!1);return n}}),t.around(c,"adjustRowIndices",function(b){return function(){var f=c.store;f&&f.updateExpandedNodes&&f.updateExpand&&f.isOdd||b.apply(this,arguments)}}))},makeContentNeverGoUnderScroll:function(c){function b(){var f=
c.headerNode.firstChild,h=c.contentNode;h&&f&&f.offsetWidth!==h.offsetWidth&&(h.style.width="",f.style.width="",f.style.width=h.offsetWidth+"px")}t.after(c,"resize",b);t.after(c,"refresh",b);t.after(c,"expand",function(f){setTimeout(b,100);setTimeout(b,300);return f})},inlineSortArrow:function(c,b,f){b=k.arrayToObject(k.listToArray(b));t.after(c,"updateSortArrow",function(h,m){if((m=h[0]&&h[0].attribute)&&b[m]){var n=(m=c._sortNode||c._findSortArrowParent(m))&&l(".dgrid-sort-arrow",m)[0];h=h[0].descending;
if(n){n.remove();p.remove(m,"dgrid-sort-down dgrid-sort-up");var q=f?l(f,m)[0]:m.lastChild.append?m.lastChild:m;q.append||(q=m);p.add(q,h?"dgrid-sort-down":"dgrid-sort-up");q.append(n)}}},!0)}}})},"widgets/BusinessAnalyst/esriAnalystX/utils/ArrayUtil":function(){define("require exports ../../baUtil/array dojo/store/util/SimpleQueryEngine ./ObjectUtil esri/dijit/geoenrichment/utils/ArrayUtil".split(" "),function(t,p,l,k,g,e){function a(b,f){b.some(function(h,m){f.func(h,m,f,b);if(f.stop)return!0});
return f}function d(b){var f=b.split(" "),h=f[1];b={};switch(f[0]){case "max":b.result=-Infinity;f=function(m,n,q){q.result=Math.max(q.result,g.getObject(m,h))};break;case "min":b.result=Infinity;f=function(m,n,q){q.result=Math.min(q.result,g.getObject(m,h))};break;case "sum":b.result=0;f=function(m,n,q){q.result+=g.getObject(m,h)};break;case "random":b.result=void 0;f=function(m,n,q,r){q.result=r[Math.round((r.length-1)*Math.random())];q.stop=!0};break;default:throw Error("Unsupported query.");}b.func=
f;return b}var c={getSorting:function(b,f){if(!b)return g.compare;if("function"===typeof b)return b;var h=Array.isArray(b)?b:b.sort||[b];var m={};"string"===typeof f&&(f=[f]);Array.isArray(f)?f.forEach(function(n){m[n]=g.compareNames}):f&&(m=f);return function(n,q){for(var r=void 0,u=0;r=h[u];u++){var v=n[r.attribute],w=q[r.attribute];if(v=(m[r.attribute]||(m["*"]?m["*"].bind(null,r.attribute):g.compare))(v,w,!1,!1,n,q))return r.descending?-v:v}return 0}},sort:function(b,f,h){return b.sort(c.getSorting(f,
h))},sortIndices:function(b,f,h){b=l.map(b,function(n,q){return{value:n,index:q}});var m=c.getSorting(f,h);b.sort(function(n,q){return m(n.value,q.value)});return l.map(b,function(n){return n.index})},getQueryEngine:function(b,f){return function(h,m){m&&m.sort&&(m=Object.assign({},m),m.sort=c.getSorting(m.sort,b));return(f||k)(h,m)}},objectToArray:function(b,f){void 0===f&&(f=null);var h=[],m=f?function(r){return b[r]?b[r][f]:void 0}:function(r){return b[r]},n;for(n in b){var q=m(n);"undefined"!==
typeof q&&h.push(q)}return h},arrayToObject:function(b,f){var h={},m=e.composeIdentityFunction(f);l.forEach(b,function(n){h[m(n)]=n});return h},composeIdentityFunction:e.composeIdentityFunction,removeDuplicates:e.removeDuplicates,splitArrayToBunches:e.splitArrayToBunches,contains:function(b,f){return-1!==l.indexOfLoose(b,f)},remove:function(b,f){f=l.indexOfLoose(b,f);-1!==f&&b.splice(f,1);return-1!==f},merge:function(b,f){b=b||[];null!=f&&Array.prototype.push.apply(b,f);return b},listToArray:function(b,
f){if(null==b)return[];void 0===f&&(f=",");b="string"===typeof b?b.split(f):b.slice();for(f=0;f<b.length;f++)"string"===typeof b[f]&&(b[f]=b[f].trim());return b},reorderArray:function(b,f){var h=b.length,m=0,n=Array(h),q={},r={},u;for(u in f){var v=Math.round(u);if(0<=v&&v<h&&!q[v]){var w=Math.round(f[u]);0<=w&&w<h&&!r[w]&&(n[w]=b[v],q[v]=1,r[w]=1,m++)}}m!==h&&(n=n.filter(function(z,E){return r[E]}),b.forEach(function(z,E){!q[E]&&n.push(z)}));return n},mapIndices:function(b,f,h,m){m=null==m?null:
m;if(1===b)h.call(m,0,Math.floor(f/2));else{f=(f-1)/(b-1);for(var n=0;n<b;n++)h.call(m,n,Math.floor(.5+n*f))}},moveElement:function(b,f,h,m){var n=Array.isArray(f)?f:[f];if(-1!==n.indexOf(h))return b.slice();var q=[];b.forEach(function(r){-1===n.indexOf(r)&&(r==h?"before"===m?(n.forEach(function(u){q.push(u)}),q.push(h)):"after"===m&&(q.push(h),n.forEach(function(u){q.push(u)})):q.push(r))});return q},min:function(b,f){var h=b.length;switch(h){case 0:return null;case 1:return b[0];default:for(var m=
b[0],n=f(m),q=0,r=1;r<h;r++){var u=f(b[r]);n>u&&(m=b[r],n=u,q=r)}return{key:q,value:m,comparisonValue:n}}},max:function(b,f){var h=b.length;switch(h){case 0:return null;case 1:return b[0];default:for(var m=b[0],n=f(m),q=0,r=1;r<h;r++){var u=f(b[r]);n<u&&(m=b[r],n=u,q=r)}return{key:q,value:m,comparisonValue:n}}},query:function(b,f){if("object"===typeof f)return a(b,f);if("string"===typeof f)return f=d(f),a(b,f).result},everyEqualProperty:function(b,f){if(2>b.length)return!0;var h;return!b.some(function(m,
n){if(0===n)h=m[f];else if(h!==m[f])return!0})}};return c})},"widgets/BusinessAnalyst/baUtil/array":function(){define(["require","exports"],function(t,p){var l=Array.prototype,k={every:function(g,e,a){return null==g?!0:"string"===typeof g?l.every.call(g.split(""),e,a):l.every.call(g,e,a)},some:function(g,e,a){return null==g?!1:"string"===typeof g?l.some.call(g.split(""),e,a):l.some.call(g,e,a)},forEach:function(g,e,a){if(null!=g)return"string"===typeof g?l.forEach.call(g.split(""),e,a):l.forEach.call(g,
e,a)},map:function(g,e,a){return null==g?[]:"string"===typeof g?l.map.call(g.split(""),e,a):l.map.call(g,e,a)},filter:function(g,e,a){return null==g?[]:"string"===typeof g?l.filter.call(g.split(""),e,a):l.filter.call(g,e,a)},indexOf:function(g,e){return null==g?-1:"string"===typeof g?l.indexOf.call(g.split(""),e):l.indexOf.call(g,e)},indexOfLoose:function(g,e){if(null==g||void 0===g.length)return-1;if("string"===typeof g)return k.indexOfLoose(g.split(""),e);for(var a=0,d=g.length;a<d;a++)if(g[a]==
e)return a;return-1},lastIndexOf:function(g,e){return null==g?-1:"string"===typeof g?l.lastIndexOf.call(g.split(""),e):l.lastIndexOf.call(g,e)},lastIndexOfLoose:function(g,e){if(null==g||void 0===g.length)return-1;if("string"===typeof g)return k.lastIndexOfLoose(g.split(""),e);for(var a=g.length-1;0<=a;a--)if(g[a]==e)return a;return-1}};return k})},"widgets/BusinessAnalyst/SelectPointPolygonPage":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/dom-class dojo/dom-style dojo/on dojo/query dojo/when dijit/_TemplatedMixin dijit/_WidgetBase esri/Color esri/dijit/Search esri/dijit/geoenrichment/_WizardPage esri/geometry/webMercatorUtils esri/graphic esri/InfoTemplate esri/symbols/PictureMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/toolbars/draw jimu/dijit/EditorXssFilter jimu/utils dojo/text!./SelectPointPolygonPage.html ./utils/GeocodeUtil".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u,v,w,z,E,F,D,B){return t([b,c,m],{templateString:D,polygonActive:!1,freehandPolygonActive:!1,postCreate:function(){this.inherited(arguments);var y=this;this.config.firstPageText=E.getInstance().sanitize(this.config.firstPageText);this.config.searchTextBoxOption?(this.search=(new h({map:this.map})).placeAt(this.searchContainer),this.search.activeSource.outFields.push("country"),this.own(e(this.search,"select-result",function(){y._loadSearchResult()}))):(k.remove(this.activatePinButton,
"esriBusinessAnalystButtonSearchPadding"),k.remove(this.activatePolygonButton,"esriBusinessAnalystButtonSearchPadding"),k.remove(this.activateFreehandPolygonButton,"esriBusinessAnalystButtonSearchPadding"));this.config.dropPinOption?this.own(e(this.activatePinButton,"click",function(){y._onActivatePinButtonClick()})):g.set(this.activatePinButton,"display","none");this.config.drawPolygonOption?this.own(e(this.activatePolygonButton,"click",function(){y._onActivatePolygonButtonClick()})):g.set(this.activatePolygonButton,
"display","none");this.config.drawFreehandPolygonOption?this.own(e(this.activateFreehandPolygonButton,"click",function(){y._onActivateFreehandPolygonButtonClick()})):g.set(this.activateFreehandPolygonButton,"display","none")},startup:function(){this.resize();this._started||k.add(this.layoutGrid.domNode,"business-analyst-search-suggestions-overflow")},_loadSearchResult:function(){this.wizard.selectedPoint.geometry=this.search.selectedResult.feature.geometry;this.wizard.selectedPoint.locationName=this.search.selectedResult.name;
var y=n.xyToLngLat(this.search.selectedResult.feature.geometry.x,this.search.selectedResult.feature.geometry.y);this.wizard.selectedPoint.long=y[0].toFixed(5);this.wizard.selectedPoint.lat=y[1].toFixed(5);this.wizard.setSelectedCountry(this.search.selectedResult.feature.attributes.country);this.onNext()},_onActivatePinButtonClick:function(){this._executeHandler?(this._deactivate(),this._deactivatePolygon(),this._deactivateFreehandPolygon()):(this._deactivatePolygon(),this._deactivateFreehandPolygon(),
this._setActive())},_setActive:function(){this._executeHandler||(k.add(this.activatePinButton,"esriBusinessAnalystPressedButton"),this.map.setInfoWindowOnClick(!1),this.map.setMapCursor("default"),this.map.disablePan(),this._executeHandler=e(this.map,"click",this._addPoint.bind(this)))},_deactivate:function(){this._executeHandler&&(k.remove(this.activatePinButton,"esriBusinessAnalystPressedButton"),this.map.setInfoWindowOnClick(!0),this.map.enablePan(),this._executeHandler.remove(),this._executeHandler=
null)},_addPoint:function(y){if(this._executeHandler){this._deactivate();var A=n.xyToLngLat(y.mapPoint.x,y.mapPoint.y),H=this;d(B.reverseGeocode({x:A[0],y:A[1]}),function(G){var I=new u("https://js.arcgis.com/3.28/esri/dijit/Search/images/search-pointer.png",36,36);H.wizard.selectedPoint.pointGraphic=new q(y.mapPoint,I);H.map.graphics.add(H.wizard.selectedPoint.pointGraphic);H.map.centerAndZoom(y.mapPoint,12);H.wizard.selectedPoint.geometry=y.mapPoint;H.wizard.selectedPoint.locationName=G&&G.address&&
G.address.LongLabel?G.address.LongLabel:"";H.wizard.setSelectedCountry(G.address.CountryCode);H.wizard.selectedPoint.long=A[0].toFixed(5);H.wizard.selectedPoint.lat=A[1].toFixed(5);H.onNext()})}},_onActivatePolygonButtonClick:function(){this.polygonActive?(this._deactivatePolygon(),this._deactivate(),this._deactivateFreehandPolygon()):(this._deactivate(),this._deactivateFreehandPolygon(),this._setActivePolygon())},_setActivePolygon:function(){this.polygonActive||(k.add(this.activatePolygonButton,
"esriBusinessAnalystPressedButton"),this.polygonActive=!0,this.toolbar||(this.toolbar=new z(this.map),this.toolbar.on("draw-end",l.hitch(this,this._addPolygon))),this.map.disablePan(),this.map.setInfoWindowOnClick(!1),this.toolbar.activate("polygon"))},_deactivatePolygon:function(){this.polygonActive&&(k.remove(this.activatePolygonButton,"esriBusinessAnalystPressedButton"),this.toolbar&&(this.toolbar.deactivate(),this.map.enablePan(),this.map.setInfoWindowOnClick(!0)),this.polygonActive=!1)},_onActivateFreehandPolygonButtonClick:function(){this.freehandPolygonActive?
(this._deactivateFreehandPolygon(),this._deactivate(),this._deactivatePolygon()):(this._deactivate(),this._deactivatePolygon(),this._setActiveFreehandPolygon())},_setActiveFreehandPolygon:function(){this.freehandPolygonActive||(k.add(this.activateFreehandPolygonButton,"esriBusinessAnalystPressedButton"),this.freehandPolygonActive=!0,this.toolbar||(this.toolbar=new z(this.map),this.toolbar.on("draw-end",l.hitch(this,this._addPolygon))),this.map.disablePan(),this.map.setInfoWindowOnClick(!1),this.toolbar.activate("freehandpolygon"))},
_deactivateFreehandPolygon:function(){this.freehandPolygonActive&&(k.remove(this.activateFreehandPolygonButton,"esriBusinessAnalystPressedButton"),this.toolbar&&(this.toolbar.deactivate(),this.map.enablePan(),this.map.setInfoWindowOnClick(!0)),this.freehandPolygonActive=!1)},_addPolygon:function(y){this._deactivate();this._deactivatePolygon();this._deactivateFreehandPolygon();var A=new v(v.STYLE_SOLID,new w(w.STYLE_SOLID,new f([199,55,36,1]),2),new f([199,55,36,.5]));y=new q(y.geometry,A);y.attributes=
{title:this.nls.customPolygon};A=new r;A.title="${title}";A.content=" ";A.info={};A.info.fieldInfos=[];y.setInfoTemplate(A);this.map.graphics.add(y);this.map.infoWindow.setFeatures([y]);this.map.infoWindow.show(this.map.toScreen(y.geometry.getExtent().getCenter()));this.map.infoWindow.removeActions("addMarker");this.wizard.drawnPolygonGraphic=y},resize:function(){this._resizeContentImg()},_resizeContentImg:function(){var y=document.activeElement;p.empty(this.contentContainer);var A=p.toDom(this.config.firstPageText);
p.place(A,this.contentContainer);this.contentContainer.nodeType&&1===this.contentContainer.nodeType&&((A=a("img",this.contentContainer))&&A.length&&A.forEach(l.hitch(this,function(H){"undefined"!==typeof H.complete&&!1===H.complete?this.own(e(H,"load",l.hitch(this,function(){this._resizeImg(H)}))):this._resizeImg(H)})),A=F.getFocusNodesInDom(this.domNode),A.length&&(F.initFirstFocusNode(this.domNode,A[0]),F.initLastFocusNode(this.domNode,A[A.length-1])),this.isOpen||p.isDescendant(y,this.domNode))&&
(y=F.getFirstFocusNode(this.domNode),F.isAutoFocusFirstNodeWidget(this)&&y.focus(),this.isOpen=!1)},_resizeImg:function(y){var A=p.getContentBox(this.contentContainer),H=p.getContentBox(y);H&&H.w&&H.w>=A.w&&p.setStyle(y,{maxWidth:A.w-20+"px",maxHeight:A.h-40+"px"})}})})},"esri/dijit/Search":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/Deferred dojo/keys dojo/on dojo/query dojo/uacss dojo/regexp dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/date/locale dojo/i18n!../nls/jsapi dojo/text!./Search/templates/Search.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_FocusMixin dijit/a11yclick dijit/focus ../lang ../InfoTemplate ../kernel ../SpatialReference ../graphic ../promiseList ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/TextSymbol ../symbols/Font ../geometry/Point ../geometry/Extent ../geometry/normalizeUtils ../geometry/scaleUtils ../tasks/locator ../tasks/query ../Color ../styles/basic".split(" "),
function(t,p,l,k,g,e,a,d,c,b,f,h,m,n,q,r,u,v,w,z,E,F,D,B,y,A,H,G,I,L,N,O,S,R,U,Z,ca,Y,da,Q,X,V,fa,ka){function oa(C,J){C&&J&&(C._layer=J,C._sourceLayer=J)}p=p([z,E,F,g],{declaredClass:"esri.dijit.Search",templateString:w,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,constructor:function(C,J){this.css={searchGroup:"searchGroup",searchInput:"searchInput",searchInputGroup:"searchInputGroup",searchBtn:"searchBtn",searchSubmit:"searchSubmit",searchIcon:"searchIcon esri-icon-search",searchButtonText:"searchButtonText",
searchToggle:"searchToggle",searchToggleIcon:"searchIcon esri-icon-down-arrow",searchMenu:"searchMenu",searchMenuHeader:"menuHeader",searchClear:"searchClear",searchClearIcon:"searchIcon esri-icon-close searchClose",searchSpinner:"searchIcon esri-icon-loading-indicator searchSpinner",searchSourceName:"sourceName",suggestionsMenu:"suggestionsMenu",sourcesMenu:"sourcesMenu",activeSource:"active",hasValue:"hasValue",hasButtonMode:"hasButtonMode",hasMultipleSources:"hasMultipleSources",showSuggestions:"showSuggestions",
showSources:"showSources",showNoResults:"showNoResults",searchLoading:"searchLoading",latLonHeader:"searchLatLongHeader",searchMoreResults:"moreResults",searchMoreResultsList:"resultsList",searchMoreResultsHeader:"moreHeader",searchMoreResultsItem:"moreItem",searchMoreResultsListHeader:"popupHeader",searchShowMoreResults:"showMoreResults",searchNoResultsMenu:"noResultsMenu",searchNoResultsBody:"noResultsBody",searchNoResultsHeader:"noResultsHeader",searchNoValueIcon:"noValueIcon esri-icon-notice-triangle",
searchNoValueText:"noValueText",searchNoResultsText:"noResultsText",searchExpandContainer:"searchExpandContainer",searchAnimateContainer:"searchAnimate",searchExpanded:"searchExpanded",searchCollapsed:"searchCollapsed",searchClearFloat:"searchClearFloat"};this._allIndex="all";this._objectIdIdentifier="_objectId";this._deferreds=[];this._sourceNames=[];this.defaultSource={locator:new X("//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),singleLineFieldName:"SingleLine",outFields:["Addr_type",
"Match_addr","StAddr","City"],name:v.widgets.Search.main.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:v.widgets.Search.main.placeholder,highlightSymbol:(new N(t.toUrl("./Search/images/search-pointer.png"),36,36)).setOffset(9,18)};this.options={map:null,theme:"arcgisSearch",visible:!0,value:"",allPlaceholder:"",sources:[this.defaultSource],activeSourceIndex:0,suggestionDelay:350,enableSourcesMenu:!0,enableSuggestionsMenu:!0,enableInfoWindow:!0,showInfoWindowOnSelect:!0,
enableSuggestions:!0,enableButtonMode:!1,autoNavigate:!0,autoSelect:!0,addLayersFromMap:!1,zoomScale:1E3,graphicsLayer:null,enableHighlight:!0,highlightGraphic:null,enableLabel:!1,labelSymbol:(new U).setColor(new fa([181,56,46,.9])).setFont(new Z("14px",Z.STYLE_NORMAL,Z.VARIANT_NORMAL,Z.WEIGHT_BOLD,"Arial")),labelGraphic:null,infoTemplate:new A(v.widgets.Search.main.searchResult,'\x3cdiv class\x3d"${searchTheme}"\x3e\x3cdiv id\x3d"${searchMoreResultsId}" class\x3d"${searchMoreResults}"\x3e\x3cdiv class\x3d"${searchMoreResultsItem}"\x3e${searchResult}\x3c/div\x3e\x3cdiv\x3e${searchMoreResultsHtml}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
searchResults:null,suggestResults:null,selectedResult:null,magicKey:null,selectedFeatureId:null,expanded:!1,maxLength:128,maxResults:6,maxSuggestions:6,locationToAddressDistance:1500,minCharacters:3,enableSearchingAll:!0};C=l.mixin({},this.options,C);this.set(C);this._updateActiveSource();this._i18n=v;this._defaultSR=new G(4326);this.domNode=J},startup:function(){this.inherited(arguments);this.sources||(this.sources=[]);this._mapLoaded().then(l.hitch(this,this._init))},postCreate:function(){var C=
this;this.inherited(arguments);this._moreResultsId=this.id+"_more_results";this.own(d(this.submitNode,D,l.hitch(this,this._searchButton)));this.own(d(this.sourcesBtnNode,D,l.hitch(this,this._toggleSourcesMenu)));this.own(d(this.inputNode,D,l.hitch(this,this._inputClick)));this.own(d(this.clearNode,D,l.hitch(this,this._clearButton)));this.own(d(this.formNode,"submit",l.hitch(this,function(J){J.preventDefault();this._cancelSuggest();this.search()})));this.own(d(this.inputNode,"keyup",l.hitch(this,function(J){this._inputKey(J)})));
this.own(d(this.sourcesBtnNode,"keyup",l.hitch(this,function(J){this._sourceBtnKey(J)})));this.own(d(this.suggestionsNode,"li:click, li:keyup",function(J){C._suggestionsEvent(J,this)}));this.own(d(this.sourcesNode,"li:click, li:keyup",function(J){C._sourcesEvent(J,this)}));this.own(d(this.inputNode,"input, paste",l.hitch(this,function(){this._suggestDelay()})));this.map&&this.map.infoWindow&&this.map.infoWindow.domNode&&this.enableInfoWindow&&(this.own(d(this.map.infoWindow.domNode,"#"+this._moreResultsId+
"_show:click",l.hitch(this,function(J){this._showMoreResultsClick(J)}))),this.own(d(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_list li a:click",l.hitch(this,function(J){this._moreResultsClick(J)}))),this.own(d(this.map.infoWindow.domNode,"#"+this._moreResultsId+" [data-switch-coordinates]:click",l.hitch(this,function(J){this._switchCoordinatesClick(J)}))));this.value&&this._checkStatus();this._hideMenus();this._updateVisible();this._insertSources(this.sources);this._setPlaceholder(this.activeSourceIndex);
this._updateButtonMode(this.enableButtonMode);this.toggle(this.expanded)},destroy:function(){this.clear();r.empty(this.domNode);this.inherited(arguments)},clear:function(){this.clearGraphics();m.get(this.inputNode,"value")&&m.set(this.inputNode,"value","");this._changeAttrValue("value","");this.set("searchResults",null);this.set("suggestResults",null);this.set("selectedResult",null);this.set("magicKey",null);this.set("selectedFeatureId",null);n.remove(this.containerNode,this.css.hasValue);m.set(this.clearNode,
"title","");this._hideMenus();this._closePopup();this._hideLoading();this.emit("clear-search")},show:function(){q.set(this.domNode,"display","block")},hide:function(){q.set(this.domNode,"display","none")},expand:function(){this.enableButtonMode&&(n.add(this.containerNode,this.css.searchExpanded),n.remove(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!0))},collapse:function(){this.enableButtonMode&&(n.remove(this.containerNode,this.css.searchExpanded),n.add(this.containerNode,
this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!1))},toggle:function(C){this.enableButtonMode&&("undefined"===typeof C&&(C=!this.expanded),C?this.expand():this.collapse())},search:function(C){var J=new e;this._mapLoaded().then(l.hitch(this,function(){this._searchDeferred(C).then(l.hitch(this,function(M){var K=M.results;this.set("searchResults",K);0===M.numResults&&(this._noResults(M.value),this._showNoResultsMenu());this._hideLoading();this.emit("search-results",M);this._selectFirstResult(K,
M.activeSourceIndex);J.resolve(K)}),l.hitch(this,function(M){J.reject(M)}))}));return J.promise},suggest:function(C){var J=new e;this._mapLoaded().then(l.hitch(this,function(){this._suggestDeferred(C).then(l.hitch(this,function(M){if(M){var K=M.results;this.set("suggestResults",K);this._insertSuggestions(K,M.value);this.emit("suggest-results",M);J.resolve(K)}}),l.hitch(this,function(M){J.reject(M)}))}));return J.promise},select:function(C){var J=this._getDefaultSymbol(C),M=this.labelSymbol,K=this.sources,
P=this.activeSourceIndex,T=this.enableHighlight,aa=this.enableLabel,ia=this.autoNavigate,ba=this.showInfoWindowOnSelect,ha=this.enableInfoWindow,W=this.infoTemplate,ea=C.feature?new I(C.feature.toJson()):null,la=ea?C.feature._sourceLayer:null;oa(ea,la);if(P===this._allIndex){var ma=this._getSourceIndexOfResult(C);if(null!==ma){var ja=K[ma];P=ma}}else ja=K[P];ja&&(ja.hasOwnProperty("highlightSymbol")&&(J=ja.highlightSymbol),ja.hasOwnProperty("labelSymbol")&&(M=ja.labelSymbol),ja.hasOwnProperty("enableHighlight")&&
(T=ja.enableHighlight),ja.hasOwnProperty("enableLabel")&&(aa=ja.enableLabel),ja.hasOwnProperty("autoNavigate")&&(ia=ja.autoNavigate),ja.hasOwnProperty("showInfoWindowOnSelect")&&(ba=ja.showInfoWindowOnSelect),ja.hasOwnProperty("enableInfoWindow")&&(ha=ja.enableInfoWindow),ja.hasOwnProperty("infoTemplate")?W=ja.infoTemplate:ja.featureLayer&&ja.featureLayer.infoTemplate&&(W=ja.featureLayer.infoTemplate));this._hideMenus();this._hideLoading();if(ea){K=this.highlightGraphic;var na=this.graphicsLayer;
ma=this.labelGraphic;var pa=l.mixin({},ea.attributes,{searchTheme:this.theme,searchResult:this._searchResultHTML(C),searchMoreResults:this.css.searchMoreResults,searchMoreResultsItem:this.css.searchMoreResultsItem,searchMoreResultsId:this._moreResultsId,searchMoreResultsHtml:this._moreResultsHTML(C)}),qa=null;ha&&(qa=W);ma?(ma.setGeometry(ea.geometry),ma.setAttributes(pa),ma.setSymbol(M),M&&"textsymbol"===M.type&&ma.symbol.setText(C.name)):(ma=new I(ea.geometry,M,pa),oa(ma,la),M&&"textsymbol"===M.type&&
ma.symbol.setText(C.name),aa&&(na?na.add(ma):this.map&&this.map.graphics&&this.map.graphics.add(ma)));K?(K.setGeometry(ea.geometry),K.setAttributes(pa),K.setInfoTemplate(qa),K.setSymbol(J)):(K=new I(ea.geometry,J,pa,qa),oa(K,la),T&&(na?na.add(K):this.map&&this.map.graphics&&this.map.graphics.add(K)));K&&K.symbol&&"textsymbol"===K.symbol.type&&K.symbol.setText(C.name);this.map&&this.map.infoWindow&&ha&&ba&&(this.map.infoWindow.setFeatures([K]),J=this._getPointFromGeometry(K.geometry),this.map.infoWindow.show(J));
this.map&&ia&&C&&C.hasOwnProperty("extent")&&"function"===typeof this.map.setExtent&&this.map.setExtent(C.extent,!0);this.set("highlightGraphic",K);this.set("labelGraphic",ma)}this.set("selectedResult",C);this.emit("select-result",{result:C,source:ja,sourceIndex:P})},focus:function(){B.focus(this.inputNode)},blur:function(){this.inputNode.blur();B.curNode&&B.curNode.blur()},clearGraphics:function(){var C=this.highlightGraphic,J=this.graphicsLayer,M=this.labelGraphic;C&&(J?J.remove(C):this.map&&this.map.graphics&&
this.map.graphics.remove(C));M&&(J?J.remove(M):this.map&&this.map.graphics&&this.map.graphics.remove(M));this.set("labelGraphic",null);this.set("highlightGraphic",null)},_mapLoaded:function(){var C=new e;if(this.map)if(this.map.loaded)C.resolve();else d.once(this.map,"load",l.hitch(this,function(){C.resolve()}));else C.resolve();return C.promise},_init:function(){this._getMapLayers().then(l.hitch(this,function(){this.set("loaded",!0);this.emit("load")}))},_clearButton:function(){this.clear();B.focus(this.inputNode)},
_error:function(C){return Error(this.declaredClass+" "+C)},_searchDeferred:function(C){var J=new e,M=this.value,K=this.activeSourceIndex;C&&C.hasOwnProperty("index")&&(K=C.index);this._showLoading();this._hideMenus();this._closePopup();this.clearGraphics();var P={magicKey:this.magicKey,text:M};C?"string"===typeof C?(P.text=C,C=this._searchQueries(P)):C="object"===typeof C&&C.hasOwnProperty("magicKey")?this._searchQueries(C):"object"===typeof C&&C.hasOwnProperty("geometry")?this._searchQueries({geometry:C}):
"object"===typeof C&&C.hasOwnProperty(this._objectIdIdentifier)?this._searchQueries(C):"object"===typeof C&&"point"===C.type?this._searchQueries({point:C}):C instanceof Array&&2===C.length?this._searchQueries({latlon:C}):this._searchQueries(P):C=this._searchQueries(P);C.always(l.hitch(this,function(T){T=this._formatResults(T,K,M);J.resolve(T)}));return J.promise},_suggestDeferred:function(C){var J=new e;this._deferreds.push(J);C||(C=this.value);var M=this.activeSourceIndex;this._suggestQueries({text:C}).always(l.hitch(this,
function(K){var P;if(K)for(var T=0;T<K.length;T++)K[T]&&(P=!0);P?(K=this._formatResults(K,M,C),J.resolve(K)):J.resolve()}));return J.promise},_getDefaultSymbol:function(C){var J;this.map&&(J=this.map.getBasemap());J||(J="topo");if(C&&C.feature&&C.feature.geometry)var M=C.feature.geometry.type;"polyline"===M?M="line":"circle"===M||"extent"===M?M="polygon":"multipoint"===M&&(M="point");if(M){if(C=ka.getSchemes({theme:"default",basemap:J,geometryType:M}))var K=C.primaryScheme;if(K){K.color&&K.hasOwnProperty("opacity")&&
(K.color.a=K.opacity);var P=K;C=K.color;K=K.size;switch(M){case "point":var T=new O;T.setColor(C);T.setSize(null!==K?K:P.size);M=new S;M.setColor(P.outline.color);M.setWidth(P.outline.width);T.setOutline(M);break;case "line":T=new S;T.setColor(C);T.setWidth(null!==K?K:P.width);break;case "polygon":T=new R,T.setColor(C),M=new S,M.setColor(P.outline.color),M.setWidth(P.outline.width),T.setOutline(M)}P=T}}return P},_selectFirstResult:function(C,J){if(this.autoSelect&&C){var M;J===this._allIndex?M=this._getFirstResult(C):
C[J]&&C[J][0]&&(M=C[J][0]);M&&this.select(M)}},_getSourceIndexOfResult:function(C){var J=this.searchResults;if(J)for(var M in J)if(J[M]&&J[M].length)for(var K=0;K<J[M].length;K++)if(J[M][K]===C)return parseInt(M,10);return null},_getFirstResult:function(C){if(C)for(var J in C)if(C[J]&&C[J][0])return C[J][0];return!1},_onFocus:function(){this.map&&"function"===typeof this.map.disableKeyboardNavigation&&this.map.disableKeyboardNavigation();this.emit("focus");this.inherited(arguments)},_onBlur:function(){this._hideMenus();
this.map&&"function"===typeof this.map.enableKeyboardNavigation&&this.map.enableKeyboardNavigation();this.enableButtonMode&&this.loaded&&this.collapse();this.emit("blur");this.inherited(arguments)},_getMapLayers:function(){var C=new e;if(this.addLayersFromMap&&this.map){var J=[],M=this.map.graphicsLayerIds;if(M&&M.length){for(var K=0;K<M.length;K++){var P=this.map.getLayer(M[K]);P&&J.push(this._featureLayerLoaded(P))}L(J).always(l.hitch(this,function(T){for(var aa,ia=this.sources,ba=0;ba<T.length;ba++)T[ba]&&
T[ba].loaded&&"Feature Layer"===T[ba].type&&(ia.push({featureLayer:T[ba],enableSuggestions:!0}),aa=!0);aa&&this.set("sources",ia);C.resolve()}))}else C.resolve()}else C.resolve();return C.promise},_switchCoordinatesClick:function(C){C.preventDefault();if(C=m.get(C.target,"data-switch-coordinates"))this._cancelSuggest(),this.set("value",C),this.search()},_moreResultsClick:function(C){C.preventDefault();var J=C.target;C=parseInt(m.get(J,"data-source-index"),10);J=parseInt(m.get(J,"data-index"),10);
var M=this.searchResults;M&&M[C]&&(C=M[C][J])&&this.select(C)},_showMoreResultsClick:function(C){C.preventDefault();if(C=h.byId(this._moreResultsId)){n.toggle(C,this.css.searchShowMoreResults);var J=h.byId(this._moreResultsId+"_show");J&&(n.contains(C,this.css.searchShowMoreResults)?m.set(J,"textContent",v.widgets.Search.main.hideMoreResults):m.set(J,"textContent",v.widgets.Search.main.showMoreResults))}},_featureLayerLoaded:function(C){var J=new e;if(C.loaded)J.resolve(C);else if(C.loadError)J.reject(this._error("Layer failed to load."));
else{var M=d.once(C,"load",l.hitch(this,function(){K.remove();J.resolve(C)}));var K=d.once(C,"error",l.hitch(this,function(){M.remove();J.reject(this._error("Layer could not be loaded."))}))}return J.promise},_getObjectSize:function(C){var J=0,M;for(M in C)C.hasOwnProperty(M)&&J++;return J},_sourcesEvent:function(C,J){var M=m.get(J,"data-index"),K=c("li",this.sourcesNode);J=k.indexOf(K,J);M!==this._allIndex&&(M=parseInt(M,10));"click"===C.type||C.keyCode===a.ENTER?(this.set("activeSourceIndex",M),
B.focus(this.inputNode),this._hideSourcesMenu()):C.keyCode===a.UP_ARROW?(C.stopPropagation(),C.preventDefault(),C=J-1,0>C?B.focus(this.sourcesBtnNode):B.focus(K[C])):C.keyCode===a.DOWN_ARROW?(C.stopPropagation(),C.preventDefault(),C=J+1,C>=K.length?B.focus(this.sourcesBtnNode):B.focus(K[C])):C.keyCode===a.ESCAPE&&(this._hideSourcesMenu(),B.focus(this.inputNode))},_suggestionsEvent:function(C,J){var M=m.get(J,"data-source-index"),K=parseInt(m.get(J,"data-index"),10),P=c("li",this.suggestionsNode),
T=this.sources;J=k.indexOf(P,J);M!==this._allIndex&&(M=parseInt(M,10));var aa;this._clearQueryTimeout();"click"===C.type||C.keyCode===a.ENTER?((P=this.suggestResults)&&P[M]&&P[M][K]&&(aa=P[M][K]),aa&&(aa.index=M,T[M].featureLayer?(M=T[M].featureLayer.objectIdField,aa[this._objectIdIdentifier]=aa.feature.attributes[M],this.set("value",this._getSuggestionName(aa)),this.set("selectedFeatureId",aa.feature.attributes[M])):aa.magicKey&&aa.text&&(this.set("value",aa.text),this.set("magicKey",aa.magicKey)),
this.search(aa),B.focus(this.inputNode))):C.keyCode===a.BACKSPACE||C.keyCode===a.DELETE?B.focus(this.inputNode):C.keyCode===a.UP_ARROW?(C.stopPropagation(),C.preventDefault(),aa=J-1,0>aa?B.focus(this.inputNode):B.focus(P[aa])):C.keyCode===a.DOWN_ARROW?(C.stopPropagation(),C.preventDefault(),aa=J+1,aa>=P.length?B.focus(this.inputNode):B.focus(P[aa])):C.keyCode===a.ESCAPE&&(this._hideMenus(),B.focus(this.inputNode))},_getResultName:function(C){var J;C.hasOwnProperty("name")&&null!==C.name&&(J=C.name.toString());
J||(J=v.widgets.Search.main.untitledResult);return J},_getSuggestionName:function(C){var J;C.hasOwnProperty("name")&&null!==C.name&&(J=C.name.toString());C=C.text||J;C||(C=v.widgets.Search.main.untitledResult);return C},_searchResultHTML:function(C){var J="";if(C.feature&&C.feature.attributes&&C.feature.attributes.Addr_type&&"LatLong"===C.feature.attributes.Addr_type){var M=C.name.split(" ");if(2===M.length){var K=M[0];var P=M[1]}P&&K?(C=parseFloat(K),P=parseFloat(P),M=P+", "+C,J+='\x3cdiv class\x3d"'+
this.css.searchMoreResultsItem+'"\x3e',J+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+v.widgets.Search.main.lonlat+"\x3c/div\x3e",J=J+(C+", "+P)+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsItem+'"\x3e'),C===P||90<C||-90>C||180<P||-180>P||(J+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+v.widgets.Search.main.reverseLonLatHeader+"\x3c/div\x3e",J+='\x3ca data-switch-coordinates\x3d"'+M+'" tabindex\x3d"0" href\x3d"#"\x3e'+M+"\x3c/a\x3e\x3c/div\x3e")):J=C.name}else J=C.name;
return J},_moreResultsHTML:function(C){var J="",M="",K=this.searchResults,P=this.sources,T=0;if(K){M+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e';M+='\x3ca href\x3d"#" id\x3d"'+this._moreResultsId+'_show"\x3e'+v.widgets.Search.main.showMoreResults+"\x3c/a\x3e";M=M+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsList+'"\x3e');M+='\x3cdiv id\x3d"'+this._moreResultsId+'_list"\x3e';for(var aa in K)if(K[aa]){var ia=K[aa].length;if(ia){var ba=1===ia&&K[aa][0]===C;if(1<this._getObjectSize(K)&&
!ba){var ha=this._getSourceName(aa);M+='\x3cdiv class\x3d"'+this.css.searchMoreResultsListHeader+'"\x3e'+ha+"\x3c/div\x3e"}if(ia&&!ba){M+="\x3cul\x3e";ha=P[aa].maxResults||this.maxResults;for(ba=0;ba<ia&&ba<ha;++ba)if(K[aa][ba]!==C){var W=this._getResultName(K[aa][ba]);M+='\x3cli\x3e\x3ca tabindex\x3d"0" data-index\x3d"'+ba+'" data-source-index\x3d"'+aa+'" href\x3d"#"\x3e'+W+"\x3c/a\x3e\x3c/li\x3e";T++}M+="\x3c/ul\x3e"}}}M+="\x3c/div\x3e\x3c/div\x3e"}T&&(J+=M);return J},_validField:function(C,J){return C.getField(J)},
_validFields:function(C,J){if(C&&J&&J.length){for(var M=0;M<J.length;M++)if(!this._validField(C,J[M]))return!1;return!0}return!1},_getCodedName:function(C,J){if(C&&C.length)for(var M=0,K=C.length;M<K;M++){var P=C[M];if(P.code===J)return P.name}},_getCodedValue:function(C,J,M){if(C&&C.length)for(var K=0,P=C.length;K<P;K++){var T=C[K],aa=T.name,ia=J;M||(aa=aa.toLowerCase(),ia=ia.toLowerCase());if(aa===ia)return T.code}return!1},_whereClause:function(C,J,M,K,P){var T=null;if(C){var aa="",ia=this.reHostedFS.test(J.url);
ia&&this._containsNonLatinCharacter(C)&&(aa="N");if(M&&M.length)for(var ba=0,ha=M.length;ba<ha;ba++){var W="";W=C.replace(/'/g,"''");var ea=M[ba],la=J.getField(ea),ma=J.getDomain(ea);ma&&"codedValue"===ma.type&&(W=this._getCodedValue(ma.codedValues,W,K));!1!==W&&(la=la.type,"esriFieldTypeString"===la||"esriFieldTypeDate"===la?K&&"search"===P?W=ea+" \x3d "+aa+"'"+W+"'":(ea=ia?ea:"UPPER("+ea+")",W=ia?W:W.toUpperCase(),W=ea+" LIKE "+aa+"'"+(K?W+"%":"%"+W+"%")+"'"):"esriFieldTypeOID"===la||"esriFieldTypeSmallInteger"===
la||"esriFieldTypeInteger"===la||"esriFieldTypeSingle"===la||"esriFieldTypeDouble"===la?(W=parseFloat(W),W=isNaN(W)?!1:ea+" \x3d "+W):W=ea+" \x3d "+W,W&&(T=T?T+" or ":"",T+=W))}}return T},_suggest:function(C){C||(C={index:this.activeSourceIndex,text:this.value});var J=new e,M=C.index,K=this.sources[M],P=this.enableSuggestions;K.hasOwnProperty("enableSuggestions")&&(P=K.enableSuggestions);var T=0;if(C.hasOwnProperty("text")&&C.text){var aa=l.trim(C.text);T=C.text.length}C=K.minCharacters||this.minCharacters;
if(P&&aa&&T>=C&&this._supportsPagination(K)){var ia="";K.prefix&&(ia+=K.prefix);ia+=aa;K.suffix&&(ia+=K.suffix);var ba=this._defaultSR;this.map&&(ba=this.map.spatialReference);P={};K.locator?(K.categories&&(P.categories=K.categories),K.locator.outSpatialReference=ba,this.map&&K.localSearchOptions&&K.localSearchOptions.hasOwnProperty("distance")&&K.localSearchOptions.hasOwnProperty("minScale")&&(T=this._getScale(),!K.localSearchOptions.minScale||T&&T<=parseFloat(K.localSearchOptions.minScale))&&(P.location=
this.map.extent.getCenter(),P.distance=K.localSearchOptions.distance),P.text=ia,K.useMapExtent&&this.map&&this.map.extent&&(P.searchExtent=this.map.extent),K.searchExtent&&(P.searchExtent=K.searchExtent),P.maxSuggestions=K.maxSuggestions||this.maxSuggestions,K.sourceCountry&&(P.countryCode=K.sourceCountry),K.countryCode&&(P.countryCode=K.countryCode),K.locator.suggestLocations(P).then(l.hitch(this,function(ha){J.resolve(ha)}),l.hitch(this,function(ha){ha||(ha=this._error("Locator suggestLocations could not be performed."));
J.reject(ha)}))):K.featureLayer?this._featureLayerLoaded(K.featureLayer).then(l.hitch(this,function(){var ha=this._getDisplayField(K),W=K.searchFields||[ha],ea=[];K.suggestionTemplate?K.suggestionTemplate.replace(/(?:\$\{([^}]+)\})/g,function(na,pa){ea.push(pa)}):ea=[ha];-1===k.indexOf(ea,K.featureLayer.objectIdField)&&ea.push(K.featureLayer.objectIdField);ha=this._validField(K.featureLayer,ha);var la=this._validFields(K.featureLayer,ea),ma=this._validFields(K.featureLayer,W);if(ha&&la&&ma){ha=new V;
K.hasOwnProperty("suggestQueryParams")&&l.mixin(ha,K.suggestQueryParams);ha.outSpatialReference=ba;ha.returnGeometry=!1;ha.num=K.maxSuggestions||this.maxSuggestions;ha.outFields=ea;K.useMapExtent&&this.map&&this.map.extent&&(ha.geometry=this.map.extent);K.searchExtent&&(ha.geometry=K.searchExtent);if(W=this._whereClause(ia,K.featureLayer,W,K.exactMatch,"suggest")){ha.where=W;var ja=!0}ja?K.featureLayer.queryFeatures(ha,l.hitch(this,function(na){var pa;(na=na.features)&&(pa=this._hydrateResults(na,
M,!0));J.resolve(pa)}),l.hitch(this,function(na){na||(na=this._error("FeatureLayer queryFeatures errored with suggestions"));J.reject(na)})):J.resolve()}else J.reject(this._error("Invalid FeatureLayer field"))})):J.reject(this._error("Invalid source"))}else J.resolve();return J.promise},_supportsPagination:function(C){var J;C.locator?J=!0:C.featureLayer&&C.featureLayer.advancedQueryCapabilities&&C.featureLayer.advancedQueryCapabilities.supportsPagination&&(J=!0);return J},_suggestQueries:function(C){var J=
this.sources,M=this.activeSourceIndex,K=[];if(M===this._allIndex)for(M=0;M<J.length;M++){var P=C;P.index=M;P=this._suggest(P);K.push(P)}else C.index=M,P=this._suggest(C),K.push(P);return L(K)},_getPointFromGeometry:function(C){switch(C.type){case "extent":var J=C.getCenter();break;case "multipoint":J=C.getPoint(0);break;case "point":J=C;break;case "polygon":J=C.getCentroid();break;case "polyline":J=C.getPoint(0,0)}return J},_searchQueries:function(C){C.hasOwnProperty("index")||(C.index=this.activeSourceIndex);
var J=[];if(C.index===this._allIndex)for(var M=this.sources,K=0;K<M.length;K++){var P=C;P.index=K;P=this._search(P);J.push(P)}else C=this._search(C),J.push(C);return L(J)},_searchButton:function(){this.enableButtonMode&&!this.expanded?(this.expand(),B.focus(this.inputNode)):(this._cancelSuggest(),this.search())},_search:function(C){C||(C={text:this.value,magicKey:null,geometry:null,point:null,index:this.activeSourceIndex,latlon:null});this.selectedFeatureId&&(C.text=null,C[this._objectIdIdentifier]=
this.selectedFeatureId);var J,M=new e,K=C.index,P=this.sources[K],T;C.hasOwnProperty("text")&&C.text&&(T=l.trim(C.text));if(P){var aa="";P.prefix&&!C.magicKey&&(aa+=P.prefix);aa+=T;P.suffix&&!C.magicKey&&(aa+=P.suffix);var ia=this._defaultSR;this.map&&(ia=this.map.spatialReference);if(P.locator)if(C.hasOwnProperty("text")&&T){var ba={};P.categories&&(ba.categories=P.categories);P.locationType&&(ba.locationType=P.locationType);ia&&(P.locator.outSpatialReference=ia);if(this.map&&P.localSearchOptions&&
P.localSearchOptions.hasOwnProperty("distance")&&P.localSearchOptions.hasOwnProperty("minScale")){var ha=this._getScale();if(!P.localSearchOptions.minScale||ha&&ha<=parseFloat(P.localSearchOptions.minScale))ba.location=this.map.extent.getCenter(),ba.distance=P.localSearchOptions.distance}ba.address={};ba.maxLocations=P.maxResults||this.maxResults;P.useMapExtent&&this.map&&this.map.extent&&(ba.searchExtent=this.map.extent);P.searchExtent&&(ba.searchExtent=P.searchExtent);P.sourceCountry&&(ba.countryCode=
P.sourceCountry);P.countryCode&&(ba.countryCode=P.countryCode);C.magicKey&&(ba.magicKey=C.magicKey);P.singleLineFieldName?ba.address[P.singleLineFieldName]=aa:ba.address["Single Line Input"]=aa;P.outFields&&(ba.outFields=P.outFields);P.locator.addressToLocations(ba).then(l.hitch(this,function(W){W=this._hydrateResults(W,K,!1);M.resolve(W)}),l.hitch(this,function(W){W||(W=this._error("Locator addressToLocations could not be performed"));M.reject(W)}))}else C.geometry?(J=this._getPointFromGeometry(C.geometry.geometry))?
this._reverseGeocodePoint(K,J).then(function(W){M.resolve(W)},function(W){M.reject(W)}):M.reject(this._error("Invalid point to reverse geocode")):C.point?this._reverseGeocodePoint(K,C.point).then(function(W){M.resolve(W)},function(W){M.reject(W)}):C.latlon?(ba=new ca(C.latlon,this._defaultSR),this._reverseGeocodePoint(K,ba).then(function(W){M.resolve(W)},function(W){M.reject(W)})):C.hasOwnProperty("text")&&!T?M.resolve([]):M.reject(this._error("Invalid query type for Locator"));else P.featureLayer?
this._featureLayerLoaded(P.featureLayer).then(l.hitch(this,function(){var W=this._getDisplayField(P),ea=P.searchFields||[W];W=this._validField(P.featureLayer,W);var la=this._validFields(P.featureLayer,ea);if(W&&la){W=new V;P.hasOwnProperty("searchQueryParams")&&l.mixin(W,P.searchQueryParams);ia&&(W.outSpatialReference=ia,la=this.map&&this.map.getMaxResolution()||1/Q.getUnitValueForSR(ia))&&(W.maxAllowableOffset=la);W.returnGeometry=!0;P.outFields&&(W.outFields=P.outFields);if(!C.hasOwnProperty(this._objectIdIdentifier)){this._supportsPagination(P)&&
(W.num=P.maxResults||this.maxResults);P.useMapExtent&&this.map&&this.map.extent&&(W.geometry=this.map.extent);P.searchExtent&&(W.geometry=P.searchExtent);var ma=P.exactMatch}C.hasOwnProperty("text")&&T?(ea=this._whereClause(aa,P.featureLayer,ea,ma,"search"))?(W.where=ea,ea=!0):ea=!1:C.hasOwnProperty(this._objectIdIdentifier)?(W.objectIds=[C[this._objectIdIdentifier]],ea=!0):C.geometry?(W.geometry=C.geometry,ea=!0):C.point?(W.geometry=C.point,ea=!0):C.latlon?(J=new ca(C.latlon,this._defaultSR),W.geometry=
J,ea=!0):(C.hasOwnProperty("text")&&!T?M.resolve([]):M.reject(this._error("Invalid query type for FeatureLayer")),ea=!1);ea?P.featureLayer.queryFeatures(W,l.hitch(this,function(ja){ja=ja.features;var na;ja&&(na=this._hydrateResults(ja,K,!1));M.resolve(na)}),l.hitch(this,function(ja){ja||(ja=this._error("FeatureLayer queryFeatures could not be performed"));M.reject(ja)})):M.resolve()}else M.reject(this._error("Invalid FeatureLayer field"))})):M.reject(this._error("Invalid source"))}else M.reject(this._error("Source is undefined"));
return M.promise},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer)},_formatResults:function(C,J,M){M={activeSourceIndex:J,value:M,numResults:0,numErrors:0,errors:null,results:null};var K={},P={};if(C)if(J===this._allIndex)for(J=0;J<C.length;J++)C[J]&&(C[J]instanceof Error?(K[J]=C[J],M.numErrors++):(P[J]=C[J],M.numResults+=C[J].length));else C[0]&&(C[0]instanceof Error?(K[J]=C[0],M.numErrors++):(P[J]=C[0],M.numResults+=C[0].length));M.numErrors&&(M.errors=K);M.numResults&&
(M.results=P);return M},_reverseGeocodePoint:function(C,J){var M=new e,K=this.sources[C];if(J&&K){var P=K.locationToAddressDistance||this.locationToAddressDistance;K.locator.outSpatialReference=this._defaultSR;this.map&&(K.locator.outSpatialReference=this.map.spatialReference);K.locator.locationToAddress(J,P,l.hitch(this,function(T){T=this._hydrateResults([T],C,!1);M.resolve(T)}),l.hitch(this,function(T){T||(T=this._error("Locator locationToAddress could not be performed"));M.reject(T)}))}else M.reject(this._error("No point or source defined for reverse geocoding"));
return M.promise},_cancelDeferreds:function(){if(this._deferreds&&this._deferreds.length)for(var C=0;C<this._deferreds.length;C++)this._deferreds[C].cancel(this.declaredClass+" cancelling request");this._deferreds=[]},_sourceBtnKey:function(C){if(C){var J=c("li",this.sourcesNode);C.keyCode===a.UP_ARROW?(C.stopPropagation(),C.preventDefault(),this._showSourcesMenu(),(C=J.length)&&B.focus(J[C-1])):C.keyCode===a.DOWN_ARROW&&(C.stopPropagation(),C.preventDefault(),this._showSourcesMenu(),J[0]&&B.focus(J[0]))}},
_inputKey:function(C){if(C){var J=c("li",this.suggestionsNode),M=this.suggestResults;if(C.keyCode===a.TAB||C.keyCode===a.ESCAPE)this._cancelSuggest(),this._hideMenus();else if(C.keyCode===a.UP_ARROW)C.stopPropagation(),C.preventDefault(),this._cancelSuggest(),M&&this._showSuggestionsMenu(),(C=J.length)&&B.focus(J[C-1]);else if(C.keyCode===a.DOWN_ARROW)C.stopPropagation(),C.preventDefault(),this._cancelSuggest(),M&&this._showSuggestionsMenu(),J[0]&&B.focus(J[0]);else{if(C.ctrlKey||C.metaKey||C.keyCode===
a.copyKey||C.keyCode===a.LEFT_ARROW||C.keyCode===a.RIGHT_ARROW||C.keyCode===a.ENTER)return C;this._suggestDelay()}}},_cancelSuggest:function(){this._cancelDeferreds();this._clearQueryTimeout()},_suggestDelay:function(){this._cancelSuggest();this._changeValue();this._queryTimer=setTimeout(l.hitch(this,function(){this.suggest()}),this.suggestionDelay)},_changeValue:function(){this.set("magicKey",null);this.set("selectedFeatureId",null);this._changeAttrValue("value",this.inputNode.value);this._checkStatus()},
_inputClick:function(){this._hideSourcesMenu();this._hideNoResultsMenu()},_getSourceName:function(C){return this._sourceNames[C]},_loadSources:function(C){C=k.filter(C,function(J){return!!J.featureLayer});C=k.map(C,function(J){return this._featureLayerLoaded(J.featureLayer)},this);return L(C)},_createSourceNameMap:function(C){return this._loadSources(C).then(l.hitch(this,function(){var J=k.map(C,function(M){return M.name||M.featureLayer&&M.featureLayer.name||v.widgets.Search.main.untitledSource});
this._preventDuplicateSourceNames(C,J);return J}))},_getDuplicateSourceNameIndexes:function(C){var J={},M=[];k.forEach(C,function(K,P){J.hasOwnProperty(K)?(-1===M.indexOf(J[K])&&M.push(J[K]),M.push(P)):C.lastIndexOf(K)!==P&&(J[K]=P)});return M},_preventDuplicateSourceNames:function(C,J){if(J&&1<J.length){var M=this._getDuplicateSourceNameIndexes(J);k.forEach(M,function(K){J[K]+=this._getFieldsString(C[K])},this)}},_getFieldsString:function(C){var J="",M=C.featureLayer;if(M){C=C.searchFields||[this._getDisplayField(C)];
for(var K=0;K<C.length;K++){J=0===K?J+": ":J+", ";var P=C[K],T=M.getFieldLabel(P);J+=T||P}}return J},_splitResult:function(C,J){J=f.escapeString(J);return C.replace(new RegExp("(^|)("+J+")(|$)","ig"),"$1|$2|$3").split("|")},_insertSuggestions:function(C,J){if(this.enableSuggestionsMenu&&this.suggestionsNode){this._hideSourcesMenu();this._hideNoResultsMenu();var M=this.sources;if(C){var K=r.create("div");for(var P in C)if(C[P]&&C[P].length){var T=this._getSourceName(P);1<M.length&&this.activeSourceIndex===
this._allIndex&&r.create("div",{className:this.css.searchMenuHeader,textContent:T},K);T=r.create("ul",{role:"menu"},K);for(var aa=M[P].maxSuggestions||this.maxSuggestions,ia=0;ia<C[P].length&&ia<aa;++ia){var ba=r.create("li",{"data-index":ia,"data-source-index":P,role:"menuitem",tabindex:0},T),ha=this._getSuggestionName(C[P][ia]);ha=this._splitResult(ha,J);for(var W=ha.length,ea=0;ea<W;ea++){var la=ha[ea];la.toLowerCase()===J.toLowerCase()?r.create("strong",{textContent:la},ba):(la=document.createTextNode(la),
r.place(la,ba))}}}}K?(r.place(K,this.suggestionsNode,"only"),this._showSuggestionsMenu()):(r.empty(this.suggestionsNode),this._hideSuggestionsMenu())}},_insertSources:function(C){if(this.enableSourcesMenu&&C&&1<C.length){var J,M=this.activeSourceIndex,K=r.create("ul",{role:"menu"});if(this.enableSearchingAll){var P="";M===this._allIndex&&(P="active");r.create("li",{"data-index":this._allIndex,role:"menuitem",className:P,tabIndex:0,textContent:v.widgets.Search.main.all},K)}for(J=0;J<C.length;J++){P=
"";J===M&&(P=this.css.activeSource);var T=this._getSourceName(J);r.create("li",{"data-index":J,role:"menuitem",className:P,tabIndex:0,textContent:T},K)}n.add(this.containerNode,this.css.hasMultipleSources);r.place(K,this.sourcesNode,"only")}else n.remove(this.containerNode,this.css.hasMultipleSources),r.empty(this.sourcesNode)},_showLoading:function(){n.add(this.containerNode,this.css.searchLoading)},_hideLoading:function(){n.remove(this.containerNode,this.css.searchLoading)},_checkStatus:function(){this.value?
(n.add(this.containerNode,this.css.hasValue),m.set(this.clearNode,"title",v.widgets.Search.main.clearButtonTitle)):this.clear()},_closePopup:function(){this.enableInfoWindow&&this.map&&this.map.infoWindow&&this.map.infoWindow.hide()},_noResults:function(C){var J;C&&(J=l.trim(C));var M=r.create("div",{className:this.css.searchNoResultsBody});C&&J?(r.create("div",{className:this.css.searchNoResultsHeader,textContent:v.widgets.Search.main.noResults},M),r.create("div",{className:this.css.searchNoResultsText,
textContent:y.substitute({value:'"'+C+'"'},v.widgets.Search.main.noResultsFound)},M)):(C=r.create("div",{},M),r.create("span",{"aria-hidden":"true",className:this.css.searchNoValueIcon},C),r.create("span",{className:this.css.searchNoValueText,textContent:v.widgets.Search.main.emptyValue},C));r.place(M,this.noResultsMenuNode,"only")},_hideMenus:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();this._hideNoResultsMenu()},_hideNoResultsMenu:function(){n.remove(this.containerNode,this.css.showNoResults)},
_showNoResultsMenu:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();n.add(this.containerNode,this.css.showNoResults)},_hideSourcesMenu:function(){n.remove(this.containerNode,this.css.showSources)},_hideSuggestionsMenu:function(){n.remove(this.containerNode,this.css.showSuggestions)},_showSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();n.add(this.containerNode,this.css.showSources)},_showSuggestionsMenu:function(){this._hideSourcesMenu();this._hideNoResultsMenu();
n.add(this.containerNode,this.css.showSuggestions)},_toggleSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();n.toggle(this.containerNode,this.css.showSources)},_getFirstStringField:function(C){if(C&&(C=C.fields)&&C.length)for(var J=0;J<C.length;J++){var M=C[J];if("esriFieldTypeString"===M.type)return M.name}return""},_getDisplayField:function(C){return C.displayField||C.featureLayer.displayField||this._getFirstStringField(C.featureLayer)},_validLocation:function(C){return C&&
"number"===typeof C.x&&"number"===typeof C.y},_validExtent:function(C){return C&&"number"===typeof C.xmin&&"number"===typeof C.ymin&&"number"===typeof C.xmax&&"number"===typeof C.ymax},_hydrateResult:function(C,J,M){var K={},P=this._defaultSR;J=this.sources[J];this.map&&(P=this.map.spatialReference);if(C.hasOwnProperty("text")&&C.hasOwnProperty("magicKey"))return C;if(C.hasOwnProperty("geometry")){var T=new I(C.toJson());K.feature=T;(T=K.feature.geometry)&&T.setSpatialReference(P)}else if(C.hasOwnProperty("location")&&
this._validLocation(C.location)){var aa=new ca(C.location.x,C.location.y,P);T={};C.hasOwnProperty("attributes")&&(T=C.attributes);C.hasOwnProperty("address")&&"object"===typeof C.address&&l.mixin(T,C.address);C.hasOwnProperty("score")&&(T.score=C.score);K.feature=new I(aa,null,T,null)}!K.feature&&M&&(T={},C.hasOwnProperty("attributes")&&(T=C.attributes),C.hasOwnProperty("score")&&(T.score=C.score),K.feature=new I(null,null,T,null));if(K.feature){if(C.hasOwnProperty("extent")&&this._validExtent(C.extent))K.extent=
new Y(C.extent),K.extent.setSpatialReference(P);else if(K.feature&&K.feature.geometry)switch(K.feature.geometry.type){case "extent":K.extent=K.feature.geometry;break;case "multipoint":K.extent=da.getDenormalizedExtent(K.feature.geometry);break;case "polygon":K.extent=da.getDenormalizedExtent(K.feature.geometry);break;case "polyline":K.extent=da.getDenormalizedExtent(K.feature.geometry);break;case "point":this.map?(P=this.zoomScale,J&&J.zoomScale&&(P=J.zoomScale),this._getScale()>P?K.extent=Q.getExtentForScale(this.map,
P).centerAt(K.feature.geometry):K.extent=this.map.extent.centerAt(K.feature.geometry)):K.extent=new Y({xmin:K.feature.geometry.x-.25,ymin:K.feature.geometry.y-.25,xmax:K.feature.geometry.x+.25,ymax:K.feature.geometry.y+.25,spatialReference:this._defaultSR})}else K.extent=null;K.name="";J.featureLayer?J.suggestionTemplate&&M?K.name=y.substitute(C.attributes,J.suggestionTemplate):J.searchTemplate?K.name=y.substitute(C.attributes,J.searchTemplate):(T=this._getDisplayField(J),M=J.featureLayer.getField(T),
P=J.featureLayer.getDomain(T),T&&C.hasOwnProperty("attributes")&&C.attributes.hasOwnProperty(T)&&(C=C.attributes[T],P&&"codedValue"===P.type?K.name=this._getCodedName(P.codedValues,C):M&&"esriFieldTypeDate"===M.type&&!isNaN(C)?K.name=u.format(new Date(C)):K.name=C)):C.address&&J.searchTemplate?K.name=y.substitute(C.address,J.searchTemplate):C.hasOwnProperty("name")?K.name=C.name:C.hasOwnProperty("attributes")&&"object"===typeof C.attributes&&C.attributes.LongLabel?K.name=C.attributes.LongLabel:C.hasOwnProperty("attributes")&&
"object"===typeof C.attributes&&C.attributes.Match_addr?(K.name=C.attributes.Match_addr,C.attributes.Addr_type&&"POI"===C.attributes.Addr_type&&C.attributes.StAddr&&C.attributes.City?K.name+=" - "+C.attributes.StAddr+", "+C.attributes.City:C.attributes.Addr_type&&"POI"===C.attributes.Addr_type&&C.attributes.City&&(K.name+=" - "+C.attributes.City)):C.hasOwnProperty("address")&&"string"===typeof C.address?K.name=C.address:C.hasOwnProperty("address")&&"object"===typeof C.address&&C.address.hasOwnProperty("Address")?
C.address.hasOwnProperty("Match_addr")?K.name=C.address.Match_addr:C.address.hasOwnProperty("Address")&&(K.name=C.address.Address):K.feature&&K.feature.geometry&&(K.name=K.feature.geometry.x+","+K.feature.geometry.y);J.featureLayer&&K.feature&&oa(K.feature,J.featureLayer);return K}},_getScale:function(){var C;this.map&&"function"===typeof this.map.getScale&&(C=this.map.getScale());return C},_hydrateResults:function(C,J,M,K){K=[];var P=0;if(C&&C.length)for(P;P<C.length;P++){var T=this._hydrateResult(C[P],
J,M);T&&K.push(T)}return K},_containsNonLatinCharacter:function(C){for(var J=0;J<C.length;J++)if(255<C.charCodeAt(J))return!0;return!1},_setPlaceholder:function(C){var J="",M=this.sources[C];C===this._allIndex?J=this.allPlaceholder||v.widgets.Search.main.allPlaceholder:M&&M.placeholder&&(J=M.placeholder);var K=v.widgets.Search.main.all;M&&(K=this._getSourceName(C));m.set(this.sourceNameNode,"textContent",K);m.set(this.inputNode,"placeholder",J);m.set(this.inputNode,"title",J)},_updateActiveSource:function(){var C=
this.sources,J=this.activeSourceIndex,M;C&&C[J]&&(M=C[J]);M?this.set("activeSource",M):this.set("activeSource",null)},_updateVisible:function(){this.visible?this.show():this.hide()},_updateButtonMode:function(C){C?(n.toggle(this.containerNode,this.css.searchExpanded,this.expanded),n.toggle(this.containerNode,this.css.searchCollapsed,!this.expanded),n.add(this.containerNode,this.css.hasButtonMode)):(n.remove(this.containerNode,this.css.searchExpanded),n.remove(this.containerNode,this.css.searchCollapsed),
n.remove(this.containerNode,this.css.hasButtonMode))},_setDefaultActiveSourceIndex:function(C){C&&1===C.length||!this.enableSearchingAll?this.set("activeSourceIndex",0):this.set("activeSourceIndex",this._allIndex)},_setEnableSourcesMenuAttr:function(C){this._set("enableSourcesMenu",C);this._created&&this._insertSources(this.sources)},_setEnableSearchingAllAttr:function(C){this._set("enableSearchingAll",C);this._created&&(this._setDefaultActiveSourceIndex(this.sources),this._hideMenus(),this._insertSources(this.sources))},
_setSourcesAttr:function(C){this._createSourceNameMap(C).then(l.hitch(this,function(J){this._sourceNames=J;this._created&&(this._setDefaultActiveSourceIndex(C),this._hideMenus(),this._insertSources(C))}));this._set("sources",C)},_setAllPlaceholderAttr:function(C){this._set("allPlaceholder",C);this._created&&this._setPlaceholder(this.activeSourceIndex)},_setActiveSourceIndexAttr:function(C){this._set("activeSourceIndex",C);this._updateActiveSource();this._created&&(this._setPlaceholder(C),this._hideMenus(),
this._insertSources(this.sources))},_setMaxLengthAttr:function(C){this._set("maxLength",C);this._created&&m.set(this.inputNode,"maxLength",C)},_setValueAttr:function(C){this.set("magicKey",null);this.set("selectedFeatureId",null);this._set("value",C);this._created&&(m.set(this.inputNode,"value",C),this._checkStatus())},_setVisibleAttr:function(C){this._set("visible",C);this._created&&this._updateVisible()},_setEnableButtonModeAttr:function(C){this._set("enableButtonMode",C);this._created&&this._updateButtonMode(C)},
_setThemeAttr:function(C){this._created&&(n.remove(this.domNode,this.theme),n.add(this.domNode,C));this._set("theme",C)}});b("extend-esri")&&l.setObject("dijit.Search",p,H);return p})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),function(t,p,l,k,g,e,a,d,c,b,f){t=t(b,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],
"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],"suggest-locations-complete":["suggestions"]},constructor:function(h){this._geocodeHandler=p.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=p.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=p.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(h){this.outSpatialReference=h},_geocodeHandler:function(h,
m,n,q,r){try{var u=h.candidates;m=[];var v,w=u.length,z=h.spatialReference,E;for(v=0;v<w;v++){var F=u[v];if(E=F.location)E.spatialReference=z;m[v]=new f(F)}this._successHandler([m],"onAddressToLocationsComplete",n,r)}catch(D){this._errorHandler(D,q,r)}},_geocodeAddressesHandler:function(h,m,n,q,r){try{var u=h.locations;m=[];var v,w=u.length,z=h.spatialReference,E;for(v=0;v<w;v++){if(E=u[v].location)E.spatialReference=z;m[v]=new f(u[v])}this._successHandler([m],"onAddressesToLocationsComplete",n,r)}catch(F){this._errorHandler(F,
q,r)}},addressToLocations:function(h,m,n,q,r){var u;if(h.address){q=n;n=m;m=h.outFields;r=h.searchExtent;var v=h.countryCode;var w=h.magicKey;var z=h.distance;var E=h.categories;h.location&&this.normalization&&(u=h.location.normalize());var F=h.locationType;var D=h.maxLocations;var B=h.forStorage;h=h.address}r&&(r=r.shiftCentralMeridian());var y=this.outSpatialReference;h=this._encode(p.mixin({},this._url.query,h,{f:"json",outSR:y&&g.toJson(y.toJson()),outFields:m&&m.join(",")||null,searchExtent:r&&
g.toJson(r.toJson()),category:E&&E.join(",")||null,countryCode:v||null,magicKey:w||null,distance:z||null,location:u||null,locationType:F||null,maxLocations:D||null,forStorage:B||null}));var A=this._geocodeHandler,H=this._errorHandler,G=new k(c._dfdCanceller);G._pendingDfd=d({url:this._url.path+"/findAddressCandidates",content:h,callbackParamName:"callback",load:function(I,L){A(I,L,n,q,G)},error:function(I){H(I,q,G)}});return G},suggestLocations:function(h){var m=new k(c._dfdCanceller);h.hasOwnProperty("location")&&
this.normalization&&(h.location=h.location.normalize());h.searchExtent&&(h.searchExtent=h.searchExtent.shiftCentralMeridian());h=this._encode(p.mixin({},this._url.query,{f:"json",text:h.text,maxSuggestions:h.maxSuggestions,searchExtent:h.searchExtent&&g.toJson(h.searchExtent.toJson()),category:h.categories&&h.categories.join(",")||null,countryCode:h.countryCode||null,location:h.location||null,distance:h.distance||null},{f:"json"}));h=d({url:this._url.path+"/suggest",content:h,callbackParamName:"callback"});
m._pendingDfd=h;h.then(p.hitch(this,function(n){n=n.suggestions||[];this.onSuggestLocationsComplete(n);m.resolve(n)}),p.hitch(this,function(n){this._errorHandler(n);m.reject(n)}));return m},addressesToLocations:function(h,m,n){var q=this.outSpatialReference,r=[],u=h.categories,v=h.locationType,w=h.countryCode;l.forEach(h.addresses,function(D,B){r.push({attributes:D})});h=this._encode(p.mixin({},this._url.query,{category:u&&u.join(",")||null,locationType:v||null,sourceCountry:w||null},{addresses:g.toJson({records:r})},
{f:"json",outSR:q&&g.toJson(q.toJson())}));var z=this._geocodeAddressesHandler,E=this._errorHandler,F=new k(c._dfdCanceller);F._pendingDfd=d({url:this._url.path+"/geocodeAddresses",content:h,callbackParamName:"callback",load:function(D,B){z(D,B,m,n,F)},error:function(D){E(D,n,F)}});return F},_reverseGeocodeHandler:function(h,m,n,q,r){try{var u=new f({address:h.address,location:h.location,score:100});this._successHandler([u],"onLocationToAddressComplete",n,r)}catch(v){this._errorHandler(v,q,r)}},locationToAddress:function(h,
m,n,q){h&&this.normalization&&(h=h.normalize());var r=this.outSpatialReference;h=this._encode(p.mixin({},this._url.query,{outSR:r&&g.toJson(r.toJson()),location:h&&g.toJson(h.toJson()),distance:m,f:"json"}));var u=this._reverseGeocodeHandler,v=this._errorHandler,w=new k(c._dfdCanceller);w._pendingDfd=d({url:this._url.path+"/reverseGeocode",content:h,callbackParamName:"callback",load:function(z,E){u(z,E,n,q,w)},error:function(z){v(z,q,w)}});return w},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},
onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});e("extend-esri")&&p.setObject("tasks.Locator",t,a);return t})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(t,p,l,k,g){t=t(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(e){p.mixin(this,e);this.location=new g(this.location)}});l("extend-esri")&&p.setObject("tasks.AddressCandidate",t,k);return t})},
"esri/styles/basic":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../Color"],function(t,p,l,k,g){function e(f,h){if(f){var m={};m.color=new g(f.color);m.opacity=f.opacity||1;switch(h){case "point":m.outline={color:new g(f.outline.color),width:f.outline.width};m.size=f.size;break;case "line":m.width=f.width;break;case "polygon":m.outline={color:new g(f.outline.color),width:f.outline.width}}}return m}function a(f){if("esriGeometryPoint"===f||"esriGeometryMultipoint"===
f)f="point";else if("esriGeometryPolyline"===f)f="line";else if("esriGeometryPolygon"===f||"esriGeometryMultiPatch"===f)f="polygon";return f}var d={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},
pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,
77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},secondary:[{color:[128,128,128,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},{color:[255,255,255,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]},dark:{primary:{color:[227,
139,79,1],outline:{color:[92,92,92,.25],width:1},opacity:.8},secondary:[{color:[178,178,178,1],outline:{color:[92,92,92,.25],width:1},opacity:.8},{color:[26,26,26,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]}}}},c={};(function(){var f,h,m;for(f in d){var n=d[f];var q=n.basemapGroups;var r=c[f]={basemaps:[].concat(q.light).concat(q.dark),point:{},line:{},polygon:{}};for(h in q){var u=q[h];for(m=0;m<u.length;m++){var v=u[m];n.pointSchemes&&(r.point[v]=n.pointSchemes[h]);n.lineSchemes&&
(r.line[v]=n.lineSchemes[h]);n.polygonSchemes&&(r.polygon[v]=n.polygonSchemes[h])}}}})();var b={getAvailableThemes:function(f){var h=[],m;for(m in d){var n=d[m];var q=c[m];f&&-1===t.indexOf(q.basemaps,f)||h.push({name:n.name,label:n.label,description:n.description,basemaps:q.basemaps.slice(0)})}return h},getSchemes:function(f){var h=f.theme,m=f.basemap,n=a(f.geometryType);f=c[h];var q;(f=(f=f&&f[n])&&f[m])&&(q={primaryScheme:e(f.primary,n),secondarySchemes:t.map(f.secondary,function(r){return e(r,
n)})});return q},cloneScheme:function(f){if(f){var h=p.mixin({},f);h.color&&(h.color=new g(h.color));h.outline&&(h.outline={color:h.outline.color&&new g(h.outline.color),width:h.outline.width})}return h}};l("extend-esri")&&p.setObject("styles.basic",b,k);return b})},"jimu/dijit/EditorXssFilter":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dojo/_base/lang dojo/Evented libs/arcgis-html-sanitizer/arcgis-html-sanitizer".split(" "),function(t,p,l,k,g,e){var a=null,d=t([l,g],
{baseClass:"jimu-editor-xss-filter",declaredClass:"jimu.dijit.EditorXssFilter",sanitizer:null,xss:null,whiteList:{},graphicsWhiteList:{},postCreate:function(){this.whiteList=this._getWhiteList();this.sanitizer=new e({whiteList:this.whiteList,safeAttrValue:k.hitch(this,function(c,b,f,h){return"style"===b?this.xss.friendlyAttrValue(f).replace(/"/g,"'"):"img"===c&&"src"===b?this.xss.escapeAttrValue(f):this.xss.safeAttrValue(c,b,f,h)}),onTag:k.hitch(this,function(c,b,f){if(f.isWhite&&this._isInWhiteList(c,
this.graphicsWhiteList))return b}),onIgnoreTagAttr:k.hitch(this,function(c,b,f,h){if("data-"===b.substr(0,5))return b+'\x3d"'+this.xss.escapeAttrValue(f)+'"'}),onIgnoreTag:k.hitch(this,function(c,b,f){if("o:"===c.substr(0,2)||"!--[if"===c||"!--[endif]--"===c)return b})},!0);this.xss=this.sanitizer.xss},sanitize:function(c){return this.sanitizer.sanitize(c)},_getWhiteList:function(){var c="title height width class style font-family id align text-align".split(" "),b={div:c,h1:c,h2:c,h3:c,h4:c,h5:c,
h6:c,span:c,p:c,s:c,strong:c,em:c,u:c,ol:c,ul:c,li:c,a:["href","target"].concat(c),img:["src","alt","border"].concat(c),blockquote:c,font:["face","size","color"].concat(c),pre:c,code:c,b:c,i:c,wbr:c,video:"autoplay controls loop muted poster preload".split(" ").concat(c),audio:["autoplay","controls","loop","muted","preload"].concat(c),source:["media","src","type"].concat(c),table:["cellpadding","cellspacing","border"].concat(c),tbody:[].concat(c),tr:["valign"].concat(c),td:["valign","colspan","rowspan",
"nowrap"].concat(c),th:["valign","colspan","rowspan","nowrap"].concat(c),hr:c,html:c,title:c,link:["rel","href"],style:["type"].concat(c),body:c};this.graphicsWhiteList={animate:[],animateMotion:[],animateTransform:[],circle:[],clipPath:[],"color-profile":[],defs:[],desc:[],discard:[],ellipse:[],feBlend:[],feColorMatrix:[],feComponentTransfer:[],feComposite:[],feConvolveMatrix:[],feDiffuseLighting:[],feDisplacementMap:[],feDistantLight:[],feDropShadow:[],feFlood:[],feFuncA:[],feFuncB:[],feFuncG:[],
feFuncR:[],feGaussianBlur:[],feImage:[],feMerge:[],feMergeNode:[],feMorphology:[],feOffset:[],fePointLight:[],feSpecularLighting:[],feSpotLight:[],feTile:[],feTurbulence:[],filter:[],foreignObject:[],g:[],hatch:[],hatchpath:[],line:[],linearGradient:[],marker:[],mask:[],mesh:[],meshgradient:[],meshpatch:[],meshrow:[],metadata:[],mpath:[],path:[],pattern:[],polygon:[],polyline:[],radialGradient:[],rect:[],set:[],solidcolor:[],stop:[],svg:[],switch:[],symbol:[],text:[],textPath:[],title:[],tspan:[],
use:[],view:[],object:[],canvas:c};return this._extendObjectOfArrays([b,{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size",
"face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],
ul:[],video:"autoplay controls loop preload src height width".split(" ")},this.graphicsWhiteList])},_extendObjectOfArrays:function(c){var b={};p.forEach(c,function(f){var h=Object.keys(f);p.forEach(h,function(m){Array.isArray(f[m])&&Array.isArray(b[m])?b[m]=b[m].concat(f[m]):b[m]=f[m]},this)},this);return b},_isInWhiteList:function(c,b){b=Object.keys(b);var f=!1;p.forEach(b,function(h){c===h&&(f=!0)},this);return f}});d.getInstance=function(){null===a&&(a=new d);return a};return d})},"widgets/BusinessAnalyst/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:esri/dijit/geoenrichment/templates/_WizardPage.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/geoenrichment/Grid" data-dojo-attach-point\x3d"layoutGrid"  class\x3d"Grid"\x3e\r\n        ${content}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/BusinessAnalyst/CreateBuffersPage.html":'\x3cdiv\x3e\r\n\t\x3cdiv\x3e${nls.addRingsDtWt}\x3c/div\x3e\r\n\t\x3cbr\x3e\r\n    \x3cdiv style\x3d"width: 350 px; height: 110px"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"ringDtWtTabContainer" style\x3d"width: 100%; height: 110px;"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"ringsContentPane" title\x3d"${nls.rings}" style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t${nls.radius}\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 1" data-dojo-attach-point\x3d"ringsBufferRadii1"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 3" data-dojo-attach-point\x3d"ringsBufferRadii2"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 5" data-dojo-attach-point\x3d"ringsBufferRadii3"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"ringsBufferUnits"\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriMiles" selected\x3d"selected"\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"ringValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont" style\x3d"position: absolute; right: 0px; top: 94px;"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"driveTimeContentPane" title\x3d"${nls.driveTime}" style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t${nls.time}\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 5" data-dojo-attach-point\x3d"driveTimeBufferRadii1"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 10" data-dojo-attach-point\x3d"driveTimeBufferRadii2"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 15" data-dojo-attach-point\x3d"driveTimeBufferRadii3"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"driveTimeBufferUnits"\x3e\r\n\t\t\t\t\t\x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"driveTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont" style\x3d"position: absolute; right: 0px; top: 94px;"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"walkTimeContentPane" title\x3d"${nls.walkTime}" style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t${nls.time}\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 5" data-dojo-attach-point\x3d"walkTimeBufferRadii1"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 10" data-dojo-attach-point\x3d"walkTimeBufferRadii2"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 15" data-dojo-attach-point\x3d"walkTimeBufferRadii3"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"walkTimeBufferUnits"\x3e\r\n\t\t\t\t\t\x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"walkTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont" style\x3d"position: absolute; right: 0px; top: 94px;"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv style\x3d"margin-top: 10px;" class\x3d"jimu-btn jimu-btn-vacation"  data-dojo-attach-point\x3d"backBtn" data-dojo-attach-event\x3d"onclick:backOnClick"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3cdiv style\x3d"margin-top: 10px;" class\x3d"jimu-btn"  data-dojo-attach-point\x3d"createBufferBtn" data-dojo-attach-event\x3d"onclick:applyBuffer"\x3e${nls.apply}\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/ErrorPage.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noPermissionsErrorDiv"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"servicesErrorDiv"\r\n\x3c/div\x3e\r\n',"url:esri/dijit/geoenrichment/templates/OnDemandSelect.html":'\x3cdiv class\x3d"esriGEOnDemandSelect"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"openButton" class\x3d"onDemandSelect_openButton"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"arrow" class\x3d"onDemandSelect_arrow"\x3e\x26nbsp;\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedLabel" class\x3d"onDemandSelect_selectedLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedItemHolder" class\x3d"onDemandSelect_selectedItem TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ComparisonSettings.html":'\x3cdiv class\x3d"esriGEReportPlayerToolbar_comparisonSettings esriGENonSelectable"\x3e\r\n    \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n        ${nls.comparisonSettings}\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriGESpaceBefore20"\x3e\r\n        \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"showBackgroundImageLabel"\x3e\x26nbsp;${nls.showBackgroundImage}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"splitPanelsLabel"\x3e\x26nbsp;${nls.splitPanels}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"splitPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e${nls.zoomPanels}\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"zoomPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomSplitBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomSplitLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetSplitButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/PlayerToolbarHolder.html":'\x3cdiv class\x3d"esriGEPlayerToolbar"\x3e\r\n\r\n    \x3c!--left--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"infographicsSelectDiv" class\x3d"dijitInline playerToolbar_infographicsSelectDiv"\x3e\x3c/div\x3e\r\n    \r\n    \x3c!--center--\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"areaTitleDiv" class\x3d"dijitInline playerToolbar_areaTitleDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"areaTitleInnerDiv" class\x3d"dijitInline playerToolbar_areaTitleInnerDiv TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"areasSelectDiv" class\x3d"dijitInline playerToolbar_areasSelectDiv"\x3e\x3c/div\x3e\r\n\r\n    \x3c!--right--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rightSideControlsBlock" class\x3d"dijitInline playerToolbar_rightSideControlsBlock"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"zoomSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_zoomSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"pageSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_pageSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"commandButtonsContainer" class\x3d"dijitInline playerToolbar_commandButtonsContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ReportPlayer.html":'\x3cdiv class\x3d"esriGEReportPlayer esriGENonSelectable"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"printBackgroundView" class\x3d"esriGEAbsoluteStretched"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"normalViewDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"playerToolbarDiv"\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"printableDivContainer" class\x3d"reportPalyer_printableDivContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printableDiv" class\x3d"reportPalyer_printableDiv"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"reportContainerDiv"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"reportPlayer_sidePageNavigator" data-dojo-attach-point\x3d"sidePageNavigator"\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowUp" data-dojo-attach-point\x3d"prevPageButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowDown" data-dojo-attach-point\x3d"nextPageButton"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"playerAfterToolbarDiv" class\x3d"reportPlayer_playerAfterToolbarDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/templates/SelectableTreeGrid.html":'\x3cdiv class\x3d"esriMapsAnalystXNonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectionCounter" class\x3d"esriMapsAnalystXSelectableTreeCounter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/BusinessAnalyst/RunReportsPage.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"business-analyst-run-reports-page" style\x3d"width: 350 px; height: 150px"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"runReportTabContainer" style\x3d"width: 100%; height: 155px;"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"infographicsContentPane" title\x3d"${nls.infographics}" style\x3d"overflow-y: hidden"\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"infographicDropDownContainer"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cbr /\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-btn runReportButton jimu-state-disabled" data-dojo-attach-point\x3d"runInfographicBtn" data-dojo-attach-event\x3d"onclick:runInfographic"\x3e${nls.runInfographic}\x3c/div\x3e\r\n\t\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"reportsContentPane" title\x3d"${nls.reports}" style\x3d"overflow-y: hidden"\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"reportFilteringSelectDropDownContainer"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cbr /\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-btn runReportButton jimu-state-disabled" data-dojo-attach-point\x3d"runReportBtn" data-dojo-attach-event\x3d"onclick:runReport"\x3e${nls.runReport}\x3c/div\x3e\r\n\t\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cbr\x3e\r\n\t\x3cdiv class\x3d"jimu-btn jimu-btn-vacation" data-dojo-attach-point\x3d"backBtn" data-dojo-attach-event\x3d"onclick:backOnClick"\x3e${nls.back}\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/Search/templates/Search.html":'\x3cdiv role\x3d"presentation" class\x3d"${theme}"\x3e\r\n  \x3cdiv role\x3d"presentation" class\x3d"${css.searchGroup}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"expandNode" class\x3d"${css.searchExpandContainer}"\x3e\r\n      \x3cdiv class\x3d"${css.searchAnimateContainer}"\x3e\r\n        \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchIn}" id\x3d"${id}_menu_button" class\x3d"${css.searchBtn} ${css.searchToggle}" tabindex\x3d"0" data-dojo-attach-point\x3d"sourcesBtnNode"\x3e\r\n          \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchToggleIcon}"\x3e\x3c/span\x3e\x3cspan class\x3d"${css.searchSourceName}" data-dojo-attach-point\x3d"sourceNameNode"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.searchInputGroup}"\x3e\r\n          \x3cform data-dojo-attach-point\x3d"formNode"\x3e\r\n            \x3cinput maxlength\x3d"${maxLength}" autocomplete\x3d"off" type\x3d"text" tabindex\x3d"0" class\x3d"${css.searchInput}" value\x3d"${value}" aria-haspopup\x3d"true" id\x3d"${id}_input" data-dojo-attach-point\x3d"inputNode" role\x3d"textbox"\x3e\r\n          \x3c/form\x3e\r\n          \x3cdiv role\x3d"button" class\x3d"${css.searchClear}" tabindex\x3d"0" data-dojo-attach-point\x3d"clearNode"\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchClearIcon}"\x3e\x3c/span\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchSpinner}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"suggestionsNode" class\x3d"${css.searchMenu} ${css.suggestionsMenu}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchButtonTitle}" class\x3d"${css.searchBtn} ${css.searchSubmit}" tabindex\x3d"0" data-dojo-attach-point\x3d"submitNode"\x3e\r\n      \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchIcon}"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"${css.searchButtonText}"\x3e${_i18n.widgets.Search.main.searchButtonTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sourcesNode" class\x3d"${css.searchMenu} ${css.sourcesMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noResultsMenuNode" class\x3d"${css.searchMenu} ${css.searchNoResultsMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.searchClearFloat}"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/SelectPointPolygonPage.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"contentContainer"\x3e\x3c/div\x3e\r\n    \x3cbr\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"searchContainer" class\x3d"esriBusinessAnalystSearchContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv tabindex\x3d"0" role\x3d"button" data-dojo-attach-point\x3d"activatePinButton" title\x3d"${nls.addPoint}" class\x3d"esriBusinessAnalystButton esriBusinessAnalystPinButton esriBusinessAnalystButtonSearchPadding" data-blur-on-click\x3d"true" \x3e\x3c/div\x3e\r\n    \x3cdiv tabindex\x3d"1" role\x3d"button" data-dojo-attach-point\x3d"activatePolygonButton" title\x3d"${nls.addPolygon}" class\x3d"esriBusinessAnalystButton esriBusinessAnalystPolygonButton esriBusinessAnalystButtonSearchPadding" data-blur-on-click\x3d"true" \x3e\x3c/div\x3e\r\n    \x3cdiv tabindex\x3d"2" role\x3d"button" data-dojo-attach-point\x3d"activateFreehandPolygonButton" title\x3d"${nls.addFreehandPolygon}" class\x3d"esriBusinessAnalystButton esriBusinessAnalystFreehandPolygonButton esriBusinessAnalystButtonSearchPadding" data-blur-on-click\x3d"true" \x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/Widget.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"wizardContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/BusinessAnalyst/css/style.css":'.esriBusinessAnalystButton {background: #fff; border: 1px solid #c5c5c5; color: #555; -webkit-border-radius: 3px; -moz-border-radius: 3px; -ms-border-radius: 3px; -o-border-radius: 3px; border-radius: 3px; font-size: 12px; line-height: 12px; -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.125); -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.125); box-shadow: 0 1px 2px rgba(0, 0, 0, 0.125); -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; -webkit-user-select: none; -moz-user-select: none; user-select: none; -webkit-transition: all .05s linear; -moz-transition: all .05s linear; -o-transition: all .05s linear; transition: all .05s linear; padding: 5px 10px; text-align: center; text-transform: uppercase; cursor: pointer; letter-spacing: 1px; position: relative; -webkit-font-smoothing: antialiased; width: 34px; height: 34px; background-repeat: no-repeat; background-position: center; margin-left: 1px;}.esriBusinessAnalystPressedButton {box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.2);}.esriBusinessAnalystPressedButton,.esriBusinessAnalystPressedButton:hover{background-color: #DDE8F2;}.esriBusinessAnalystButtonSearchPadding {top: 22px;}.esriBusinessAnalystPinButton {float: left; margin-right: 10px; background-image: url("../../../jimu.js/css/images/draw_point.png");}.esriBusinessAnalystPolygonButton {float: left; background-size: 45px 45px; margin-right: 10px; background-image: url("../../../jimu.js/css/images/draw_polygon.png");}.esriBusinessAnalystFreehandPolygonButton {float: left; background-image: url("../../../jimu.js/css/images/draw_freehand_polygon.png");}.esriGETooltip {box-sizing: initial !important;}.esriGEPlayerToolbar.playerThemeDark {background-color: inherit !important;}.runReportButton {display: block; margin-top: 15px; width: max-content;}.jimu-btn.runReportButton.jimu-state-disabled {cursor: default;}.jimu-widget-business-analyst .tabs {font-family: "Avenir Light"; color: #000000; height: 100%;} .jimu-widget-business-analyst .tabs .tab-description {margin: 10px 0;} .jimu-widget-business-analyst .jimu-tab3\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 14px;} .jimu-widget-business-analyst .jimu-tab3 .tab-item-td.jimu-state-active {border-bottom: 3px solid #24b5cc; font-family: "Avenir Heavy"; color: #000000;} .DashboardTheme .jimu-widget-business-analyst .jimu-tab3 .tab-item-td.jimu-state-active {color: #FFFFFF;} .DashboardTheme.light .jimu-widget-business-analyst .jimu-tab3 .tab-item-td.jimu-state-active {color: #000000;} .jimu-widget-business-analyst .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 14px; margin: 20px 0 10px 0;} .jimu-widget-business-analyst .tabs .hide{display: none;} .jimu-widget-business-analyst .tabs .indent{margin-left: 20px; margin-top: 10px;} .jimu-widget-business-analyst .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;} .jimu-widget-business-analyst .tabs .clearFix {*overflow: hidden; *zoom: 1;} .jimu-widget-business-analyst .tabs .clearFix:after {display: table; content: ""; width: 0; clear: both;} .jimu-widget-business-analyst .tabs .view{height: 100%; overflow-y: auto;} .jimu-widget-business-analyst .tabs .jimu-tab3\x3e.jimu-viewstack{padding-bottom: 30px;} .claro .jimu-widget-business-analyst .dijitTextBox, .claro .esriGEReportPlayer .esriGEPlayerToolbar .dijitTextBox {height: 30px;} .claro .jimu-widget-business-analyst .ui-icon {background-image: inherit;} .business-analyst-search-suggestions-overflow {overflow: visible !important;} .claro .jimu-widget-business-analyst .arcgisSearch .searchClear {top: 2px;} .jimu-widget-business-analyst .validationErrorMessage {color: #FF0000; margin-top: 10px;} .jimu-widget-business-analyst .validationErrorMessage.hidden {display: none;} .jimu-widget-business-analyst .invalidValue {outline: 3px solid #FF0000;} .jimu-widget-business-analyst .business-analyst-run-reports-page .dijitTextBox, .esriGEReportPlayer .playerToolbar_infographicsSelectDiv .dijitTextBox {width: 20em;}',
"*now":function(t){t(['dojo/i18n!*preload*widgets/BusinessAnalyst/nls/Widget*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define(["dojo/_base/declare","dojo/dom-class","dojo/query","jimu/BaseWidget","./BAWizard"],function(t,p,l,k,g){return t([k],{name:"BusinessAnalyst",baseClass:"jimu-widget-business-analyst",reportDropDown:null,infographicDropDown:null,tradeAreaGraphics:[],selectedPoint:{tradeAreas:[]},postCreate:function(){this.inherited(arguments);this.initializeNewConfigValues();this.baWizard=(new g({appConfig:this.appConfig,map:this.map,nls:this.nls,config:this.config})).placeAt(this.wizardContainer)},startup:function(){this.baWizard.resize();
l(".jimu-widget-business-analyst").parents(".jimu-widget-frame.jimu-container")[0]&&p.add(l(".jimu-widget-business-analyst").parents(".jimu-widget-frame.jimu-container")[0],"business-analyst-search-suggestions-overflow");l(".jimu-widget-business-analyst").parents(".jimu-panel.jimu-on-screen-widget-panel")[0]&&p.add(l(".jimu-widget-business-analyst").parents(".jimu-panel.jimu-on-screen-widget-panel")[0],"business-analyst-search-suggestions-overflow")},resize:function(){this.baWizard&&this.baWizard.resize()},
onClose:function(){this.baWizard._featureUnselected()},onOpen:function(){this.baWizard.refreshPage()},initializeNewConfigValues:function(){"undefined"===typeof this.config.exportInfographicsPrintOption&&(this.config.exportInfographicsPrintOption=!0);"undefined"===typeof this.config.exportInfographicsImageOption&&(this.config.exportInfographicsImageOption=!0);"undefined"===typeof this.config.exportInfographicsPDFOption&&(this.config.exportInfographicsPDFOption=!0);"undefined"===typeof this.config.exportInfographicsDynamicHTMLOption&&
(this.config.exportInfographicsDynamicHTMLOption=!0);"undefined"===typeof this.config.firstPageText&&(this.config.firstPageText="\x3cbr\x3e\x3cdiv\x3e"+this.nls.widgetDescription+"\x3c/div\x3e\x3cbr\x3e\x3cdiv\x3e"+this.nls.selectPointOrPolygon+"\x3c/div\x3e");"undefined"===typeof this.config.searchTextBoxOption&&(this.config.searchTextBoxOption=!0);"undefined"===typeof this.config.dropPinOption&&(this.config.dropPinOption=!0);"undefined"===typeof this.config.drawPolygonOption&&(this.config.drawPolygonOption=
!0);"undefined"===typeof this.config.drawFreehandPolygonOption&&(this.config.drawFreehandPolygonOption=!0)}})});