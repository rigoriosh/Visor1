// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Screening/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dojo/domReady!".split(" "),function(x,E,K,J,w,a,c,d,f,l){return x([E,K],{templateString:d,baseClass:"jimu-widget-screening-setting",postCreate:function(){this.own(c(this.okButton,"click",J.hitch(this,this._onOKButtonClicked)));
this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new f(this.symbolParams,a.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new l({titleLabel:this.symbolChooserTitle,width:420,height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!w.contains(this.okButton,"jimu-state-disabled"))this.onOkClick()},onOkClick:function(q){return q}})})},"widgets/Screening/setting/DownloadSettings":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dojo/text!./DownloadSettings.html dojo/dom-class dojo/_base/lang dojo/on dojo/query dojo/dom-attr dojo/_base/html dojo/dom-construct dojo/string dojo/_base/Color jimu/BaseWidgetSetting jimu/dijit/CheckBox jimu/dijit/SimpleTable jimu/dijit/GpSource jimu/dijit/Popup jimu/dijit/Message jimu/dijit/ImageChooser jimu/portalUtils jimu/dijit/ColorPicker esri/request dojo/query dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array jimu/dijit/PageUtils jimu/utils dojo/DeferredList dijit/Editor dojo/sniff dijit/form/RadioButton dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dijit/ToolbarSeparator dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H,m,g,A,D,N,O,L,z,C,Q,S,p){return x([u,E],{templateString:K,baseClass:"jimu-widget-screening-download-settings",map:null,loadingIndicator:null,downloadOptions:null,_layerIndex:0,_layers:[],_extractDataTaskDownloadOptions:[],_extractDataTaskURL:"",_printTaskURL:"",_logo:"",_tableHeaderColor:null,_defaultOptions:{"A3 Portrait":{Orientation:"Portrait",SizeName:"A3"},"A3 Landscape":{Orientation:"Landscape",SizeName:"A3"},"A4 Portrait":{Orientation:"Portrait",
SizeName:"A4"},"A4 Landscape":{Orientation:"Landscape",SizeName:"A4"},"Letter ANSI A Portrait":{Orientation:"Portrait",SizeName:"Letter_ANSI_A"},"Letter ANSI A Landscape":{Orientation:"Landscape",SizeName:"Letter_ANSI_A"},"Tabloid ANSI B Portrait":{Orientation:"Portrait",SizeName:"Tabloid_ANSI_B"},"Tabloid ANSI B Landscape":{Orientation:"Landscape",SizeName:"Tabloid_ANSI_B"}},_pageSize:[],_customLayoutTable:null,_buddyTaskChoiceList:{},_customDropdownOption:[],_defaultPrintTemplateDropdownOption:[],
_printServiceChoiceList:[],_defaultPrintTemplateDropdownOptionObj:null,_clonedConfigurationCustomOptions:null,_buddyTaskEndPoint:["Get Layout Templates Info","Get Layout Templates Info Task"],_lastSelectedCustomDropdownRow:null,_isCustomOptionNoDefault:!1,_footNoteEditorObj:null,constructor:function(e){this.downloadOptions=this.loadingIndicator=this.map=null;this._layerIndex=0;this._layers=[];this._extractDataTaskDownloadOptions=[];this._logo=this._printTaskURL=this._extractDataTaskURL="";this._customLayoutTable=
this._tableHeaderColor=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._defaultPrintTemplateDropdownOption=[];this._printServiceChoiceList=[];this._lastSelectedCustomDropdownRow=this._clonedConfigurationCustomOptions=this._defaultPrintTemplateDropdownOptionObj=null;w.mixin(this,e)},postCreate:function(){this._initEditor();this._pageSize=[{value:null,label:null},{value:"MILLIMETER",label:this.nls.downloadTab.pageSizeUnits.millimeters},{value:"INCH",label:this.nls.units.inches},
{value:"POINT",label:this.nls.downloadTab.pageSizeUnits.points},{value:"CENTIMETER",label:this.nls.units.centimeters}];var e,v,h,r;this._initSyncEnableOptionTable();this._syncEnableOptionTable&&(this._layers=[],this._syncEnableOptionTable.clear());if(this.downloadOptions&&this.downloadOptions.layers){this._layers=this.downloadOptions.layers;var I=[];L.forEach(this.downloadOptions.layers,w.hitch(this,function(P){P=A({url:P.url+"?f\x3dpjson"});I.push(P)}));(new Q(I)).then(w.hitch(this,function(P){L.forEach(P,
w.hitch(this,function(y,G){y[0]?(y={version:y[1].currentVersion,capabilities:y[1].capabilities},this.downloadOptions.layers[G]&&this._setFileOptionDataInTable(this.downloadOptions.layers[G],y)):y[1].name&&"Error"===y[1].name||(y={version:this.layerInfosObj.getLayerInfoById(this.downloadOptions.layers[G].id).layerObject.version,capabilities:""},this._setFileOptionDataInTable(this.downloadOptions.layers[G],y))}))}))}this.downloadOptions&&this.downloadOptions.type?this._chooseDownloadOption(this.downloadOptions.type,
!0):this.syncEnableRadioButton.set("checked",!0);this._attachDownloadOptionEvent();this.reportSettings&&this.reportSettings.printTaskURL&&""!==this.reportSettings.printTaskURL?(this.printGPServiceTextBox.set("value",this.reportSettings.printTaskURL),this._printTaskURL=this.reportSettings.printTaskURL):(r=m.getPortal(this.appConfig.portalUrl).helperServices)&&r.printTask.url&&(this.printGPServiceTextBox.set("value",r.printTask.url),this._printTaskURL=r.printTask.url);this.reportSettings&&this.reportSettings.footnote&&
""!==this.reportSettings.footnote&&this._footNoteEditorObj.set("value",this.reportSettings.footnote);var M={portalUrl:this.appConfig.portalUrl};this.own(a(this.extractDataTaskSetButton,"click",w.hitch(this,function(){e=new b(M);h=this._onSetButtonClick(e);this._attachExtractDataTaskGPSourceEvents(e,h)})));this.own(a(this.printGPServiceSetButton,"click",w.hitch(this,function(){v=new b(M);h=this._onSetButtonClick(v);this._attachPrintReportGPSourceEvents(v,h)})));this._initImageChooser();this._tableHeaderColor=
this._createColorPicker(this.reportSettings.columnTitleColor,this.columnTitleColorPickerNode);this.reportSettings.hasOwnProperty("noDataConfiguredText")&&this.noDataTextRepresentationTextBox.set("value",this.reportSettings.noDataConfiguredText);this.reportSettings.hasOwnProperty("naTextConfiguredValue")&&this.naTextRepresentationTextBox.set("value",this.reportSettings.naTextConfiguredValue);this.reportSettings.hasOwnProperty("displaySummaryInReport")&&this.displaySummaryInReportCheckBox.setValue(this.reportSettings.displaySummaryInReport);
this.reportSettings.hasOwnProperty("hideZeroValueRow")&&this.hideAllZeroRowCheckBox.setValue(this.reportSettings.hideZeroValueRow);this.reportSettings.hasOwnProperty("hideNullValueRow")&&this.hideNullRowCheckBox.setValue(this.reportSettings.hideNullValueRow);this.reportTitleTextBox.set("value",this.reportSettings.reportTitle);this.own(a(this.addCustomOptionButton,"click",w.hitch(this,function(){J.contains(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable")||(this._isCustomOptionNoDefault&&
this._emptyDefaultDropDown(),this._addCustomOptionsInTable())})));this._clonedConfigurationCustomOptions=w.clone(this.reportSettings);this._destroyLayouts();this.loadingIndicator.show();this._fetchChoiceList()},_attachExtractDataTaskGPSourceEvents:function(e,v){this.own(a(e,"ok",w.hitch(this,function(h){h&&0<h.length&&h[0].url&&this._requestExtractDataTaskURLInfo(h[0].url,v)})));this.own(a(e,"cancel",w.hitch(this,function(){v.close()})))},getExtractDataTaskURL:function(){return this._extractDataTaskURL?
this._extractDataTaskURL:""},_attachPrintReportGPSourceEvents:function(e,v){this.own(a(e,"ok",w.hitch(this,function(h){h&&0<h.length&&h[0].url?(this.printGPServiceTextBox.set("value",h[0].url),this._printTaskURL=h[0].url,this._clonedConfigurationCustomOptions=null,this._destroyLayouts(),this.loadingIndicator.show(),this._fetchChoiceList()):(this.printGPServiceTextBox.set("value",""),this._printTaskURL="");v.close()})));this.own(a(e,"cancel",w.hitch(this,function(){v.close()})))},_destroyLayouts:function(){l.empty(this.defaultLayoutTable);
l.empty(this.customLayoutTable);l.empty(this.defaultPrintTemplateDropdown);this._customLayoutTable=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._printServiceChoiceList=[];this._defaultPrintTemplateDropdownOption=[];this._customLayoutTable&&l.destroy(this._customLayoutTable);this._defaultPrintTemplateDropdownOptionObj&&l.destroy(this._defaultPrintTemplateDropdownOptionObj.domNode);this._isCustomOptionNoDefault=!1},_initSyncEnableOptionTable:function(){this._syncEnableOptionTable=
new F({fields:[{name:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,type:"empty",width:"40%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,
"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,type:"empty","class":"esriCTTableHeader",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"}],selectable:!1});this._syncEnableOptionTable.placeAt(this.downloadOptionTable);
this._syncEnableOptionTable.startup()},_setFileOptionDataInTable:function(e,v){var h=this._syncEnableOptionTable.addRow({});h.success&&h.tr&&this.checkLayerForDownloadOptions({url:e.url,id:e.id,layerName:e.layerName,allowDownload:e.allowDownload,layerVersion:v.version,capabilities:v.capabilities},h.tr.rowIndex)},checkLayerForDownloadOptions:function(e,v){var h=this._getTableRow(v);if(h.success&&h.tr){var r={url:e.url,layerName:e.layerName,id:e.id,allowDownload:e.hasOwnProperty("allowDownload")?e.allowDownload:
!0};this._addLayerTitle(h.tr,e.layerName);this._addFileOption(h.tr,1);r.downloadingFileOption=[];r.downloadingFileOption.push("csv");1<e.capabilities.split("Sync").length&&10.4<=e.layerVersion&&(this._addFileOption(h.tr,2),r.downloadingFileOption.push("filegdb"),C.isHostedService(e.url)&&(this._addFileOption(h.tr,3),r.downloadingFileOption.push("shapefile")));this._addAllowDownloadCheckbox(h.tr,r);this._setLayerDownloadInfo(r,v);this.loadingIndicator.hide()}},_getTableRow:function(e){-1<e&&this._syncEnableOptionTable.tbody.rows[e]?
(e={tr:this._syncEnableOptionTable.tbody.rows[e],success:!0},this._removeFileOptions(e.tr)):e=this._syncEnableOptionTable.addRow({});return e},_setLayerDownloadInfo:function(e,v){-1<v?this._layers.splice(v,1,e):this._layers.push(e)},_addLayerTitle:function(e,v){if(e=c(".simple-table-cell",e)[0])e.innerHTML=v},_removeFileOptions:function(e){var v;e=c(".simple-table-cell",e);for(v=1;4>v;v++)J.remove(e[v],"esriCTAvailableDownloadOption")},_addFileOption:function(e,v){(e=c(".simple-table-cell",e)[v])&&
J.add(e,"esriCTAvailableDownloadOption")},_addAllowDownloadCheckbox:function(e,v){if(e=c(".simple-table-cell",e)[4]){l.empty(e);var h=new B({checked:v.allowDownload,"class":"esriCTAllowDownloadCheckbox"});h.placeAt(e);this.own(a(h,"change",w.hitch(this,function(){v.allowDownload=d.get(h,"checked")})))}},_attachDownloadOptionEvent:function(){var e=c("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;var v=c("input",this.downloadOptionForm);L.forEach(v,w.hitch(this,function(h){this.own(a(h,
"click",w.hitch(this,function(r){h.value!==e&&(this._chooseDownloadOption(r.currentTarget.value,!1),e=r.currentTarget.value)})))}))},_chooseDownloadOption:function(e,v){switch(e){case "syncEnable":this.syncEnableRadioButton.set("checked",!0);J.remove(this.downloadOptionTable,"esriCTHidden");J.add(this.extractDataTaskInputContainer,"esriCTHidden");v&&this._resetExtractDataTaskOption(!0);break;case "extractDataTask":this.gpServiceRadioButton.set("checked",!0);J.add(this.downloadOptionTable,"esriCTHidden");
J.remove(this.extractDataTaskInputContainer,"esriCTHidden");v&&this.downloadOptions&&this.downloadOptions.extractDataTaskURL&&this._resetExtractDataTaskOption(!1);break;case "cannotDownload":this.cannotDownloadRadioButton.set("checked",!0),J.add(this.downloadOptionTable,"esriCTHidden"),J.add(this.extractDataTaskInputContainer,"esriCTHidden"),v&&this._resetExtractDataTaskOption(!0)}},getLayers:function(){return this._layers},deleteRow:function(e){this._syncEnableOptionTable.deleteRow(this._syncEnableOptionTable.tbody.rows[e]);
this._layers.splice(e,1)},rowUp:function(e){if(-1<e&&this._syncEnableOptionTable.tbody.rows[e+1]){f.place(this._syncEnableOptionTable.tbody.rows[e],this._syncEnableOptionTable.tbody.rows[e+1],"after");this._syncEnableOptionTable.updateUI();var v=this._layers[e];var h=this._layers[e+1];this._layers.splice(e,2,h,v)}},rowDown:function(e){if(e<this._syncEnableOptionTable.tbody.rows.length&&this._syncEnableOptionTable.tbody.rows[e-1]){f.place(this._syncEnableOptionTable.tbody.rows[e],this._syncEnableOptionTable.tbody.rows[e-
1],"before");this._syncEnableOptionTable.updateUI();var v=this._layers[e];var h=this._layers[e-1];this._layers.splice(e-1,2,v,h)}},_onSetButtonClick:function(e){return new k({titleLabel:this.nls.downloadTab.setGPTaskTitle,width:830,height:560,content:e})},_requestExtractDataTaskURLInfo:function(e,v){var h=!1;this.loadingIndicator.show();A({url:e+"?f\x3dpjson"}).then(w.hitch(this,function(r){(h=this._validateExtractDataTask(r))?(this.extractDataTaskTextBox.set("value",e),this._extractDataTaskURL=e):
(this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL),this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="");v.close();this.loadingIndicator.hide()}),w.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL);this.extractDataTaskTextBox.set("value","");this._extractDataTaskURL="";this.loadingIndicator.hide();v.close()}))},_validateExtractDataTask:function(e){var v,h;var r=v=h=!1;return e&&"esriExecutionTypeAsynchronous"===e.executionType&&
(L.forEach(e.parameters,w.hitch(this,function(I){switch(I.name){case "Area_of_Interest":r=this._checkAOIParam(I);break;case "Feature_Format":v=this._checkFeatureFormatParam(I);break;case "Output_Zip_File":h=this._checkOutputParam(I)}})),r&&v&&h)?!0:!1},_checkAOIParam:function(e){return"GPFeatureRecordSetLayer"===e.dataType?e.defaultValue&&"esriGeometryPolygon"!==e.defaultValue.geometryType?!1:!0:!1},_checkFeatureFormatParam:function(e){var v=!1;this._extractDataTaskDownloadOptions=[];return"GPString"===
e.dataType&&e.choiceList&&0<e.choiceList.length?(this._extractDataTaskDownloadOptions.push("csv"),-1<e.choiceList.indexOf("File Geodatabase - GDB - .gdb")&&(this._extractDataTaskDownloadOptions.push("filegdb"),v=!0),-1<e.choiceList.indexOf("Shapefile - SHP - .shp")&&(this._extractDataTaskDownloadOptions.push("shapefile"),v=!0),v):!1},_checkOutputParam:function(e){return"GPDataFile"===e.dataType?!0:!1},_showMessage:function(e){(new t({message:e})).message=e},getDownloadingFileOptions:function(){var e=
[];var v=c("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;"syncEnable"===v?e=this._getSyncEnableDownloadingOptions(this._layers):"extractDataTask"===v&&(e=this._extractDataTaskDownloadOptions);return e},_getSyncEnableDownloadingOptions:function(e){var v=[];L.some(e,w.hitch(this,function(h){h.allowDownload&&L.some(h.downloadingFileOption,w.hitch(this,function(r){-1===v.indexOf(r)&&v.push(r)}))}));return v},getPrintReportGPServiceURL:function(){return this._printTaskURL?this._printTaskURL:
""},getReportTitle:function(){return this.reportTitleTextBox.value},getNoDataText:function(){return this.noDataTextRepresentationTextBox.value},getNaTextValue:function(){return this.naTextRepresentationTextBox.value},getTableHeaderColor:function(){var e=this._tableHeaderColor.color.toHex();return e?e:""},getFootnoteForReport:function(){return this._footNoteEditorObj.focusNode.innerHTML?this._footNoteEditorObj.focusNode.innerHTML:""},_initImageChooser:function(){this.logoChooser=new H({cropImage:!1,
showSelfImg:!1,goldenWidth:50,goldenHeight:50,displayImg:this.imageChooserPreview,format:[H.GIF,H.PNG,H.JPEG]});this.logoChooser.placeAt(this.logoChooserNode);this._createLogoPreview();J.add(this.logoChooser.domNode,"esriCTImageChooserContent")},_createLogoPreview:function(){var e=this.folderUrl+"/images/default-logo.png";if(this.reportSettings&&this.reportSettings.logo){var v=this.reportSettings.logo;-1<v.indexOf("${appPath}")?(e=this.folderUrl.slice(0,this.folderUrl.lastIndexOf("widgets")),e=q.substitute(v,
{appPath:e})):e=v}d.set(this.imageChooserPreview,"src",e)},getLogo:function(){return this.logoChooser&&this.logoChooser.imageData?this.logoChooser.getImageData():this.reportSettings&&this.reportSettings.logo?this.reportSettings.logo:"${appPath}/widgets/Screening/images/default-logo.png"},_resetExtractDataTaskOption:function(e){e?(this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="",this._extractDataTaskDownloadOptions=[]):(this.extractDataTaskTextBox.set("value",this.downloadOptions.extractDataTaskURL),
this._extractDataTaskURL=this.downloadOptions.extractDataTaskURL,this._extractDataTaskDownloadOptions=this.downloadOptions.downloadingFileOptions)},_createColorPicker:function(e,v){v=l.create("table",{cellspacing:"0",cellpadding:"0"},v);v=l.create("tr",{style:"height:30px"},v);l.create("td",{},v);v=l.create("td",{},v);v=l.create("div",{"class":"esriCTColorChooserNode"},v);v=new g(null,l.create("div",{},v));v.setColor(new n(e));return v},_addFieldsRow:function(e,v){var h=this._customLayoutTable.addRow({});
if(h.success&&h.tr){h=h.tr;var r=D(".simple-table-cell",h);var I=r[0];var M=r[1];var P=r[2];var y=r[3];r=e.Width;var G=e.Height;var R=null!==r&&""!==r&&void 0!==r||null!==G&&""!==G&&void 0!==G?e.PageUnits?e.PageUnits:null:null;this._displayLayout(I,h,e.SizeName);this._displayWidth(M,h,r,v);this._displayHeight(P,h,G,v);this._displayPageUnits(y,R,h)}},_emptyDefaultDropDown:function(){for(var e in this._defaultOptions)this._defaultOptions.hasOwnProperty(e)&&z.PageSizes[this._defaultOptions[e].SizeName]&&
this._defaultPrintTemplateDropdownOptionObj.removeOption({label:e,value:e})},_addOptionsInDefaultDropdown:function(){for(var e in this._defaultOptions)this._defaultOptions.hasOwnProperty(e)&&z.PageSizes[this._defaultOptions[e].SizeName]&&this._defaultPrintTemplateDropdownOptionObj.addOption({label:e,value:e});this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_removeCustomOptionFromDefaultDropdown:function(){L.forEach(this._customDropdownOption,w.hitch(this,function(e){this._defaultPrintTemplateDropdownOptionObj.removeOption({label:e.value,
value:e.value})}));this._defaultPrintTemplateDropdownOption=[];L.forEach(this._defaultPrintTemplateDropdownOptionObj.options,w.hitch(this,function(e){this._defaultPrintTemplateDropdownOption.push({label:e.value,value:e.value})}))},_addConfiguredCustomOptionInDefaultDropdown:function(){if(this._customLayoutTable){var e=this._customLayoutTable.getRows();L.forEach(e,w.hitch(this,function(v){var h=!1;C.has("ie")||C.has("edge")?L.forEach(this._defaultPrintTemplateDropdownOptionObj.options,w.hitch(this,
function(r){r.value===v.customOptionLayoutDropdownObj.value&&(h=!0)})):h=this._defaultPrintTemplateDropdownOptionObj.options.find(function(r){return r.value===v.customOptionLayoutDropdownObj.value});h||this._defaultPrintTemplateDropdownOptionObj.addOption({label:v.customOptionLayoutDropdownObj.value,value:v.customOptionLayoutDropdownObj.value})}))}},_displayLayout:function(e,v,h){h=new N({"class":"esriCTFieldChooserDropdown",options:w.clone(this._customDropdownOption),value:h});h.placeAt(e);this.own(a(h,
"MouseEnter",w.hitch(this,function(r){this._lastSelectedCustomDropdownRow=r.currentTarget.parentNode.parentNode})));this.own(a(h,"click",w.hitch(this,function(r){this._lastSelectedCustomDropdownRow=r.currentTarget.parentNode.parentNode})));this.own(a(h,"change",w.hitch(this,function(r){this._buddyTaskChoiceList[r]?this._lastSelectedCustomDropdownRow&&(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",this._buddyTaskChoiceList[r].pageSize[1]),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",
this._buddyTaskChoiceList[r].pageSize[0]),this._buddyTaskChoiceList[r].pageUnits?this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",this._buddyTaskChoiceList[r].pageUnits):this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value","")):(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",
""));this._removeCustomOptionFromDefaultDropdown();this._addConfiguredCustomOptionInDefaultDropdown()})));h.startup();v.customOptionLayoutDropdownObj=h},_displayWidth:function(e,v,h,r){r||isNaN(parseFloat(h))||(h=parseFloat(h));h=new O({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidWidth,value:h,required:!0});h.placeAt(e);h.startup();v.customOptionWidthTextbox=h},_displayHeight:function(e,v,h,r){r||isNaN(parseFloat(h))||(h=
parseFloat(h));h=new O({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidHeight,value:h,required:!0});h.placeAt(e);h.startup();v.customOptionHeightTextbox=h},_displayPageUnits:function(e,v,h){v=new N({"class":"esriCTFieldChooserDropdown",options:w.clone(this._pageSize),required:!0,value:v});v.placeAt(e);v.startup();h.customOptionPageUnitsDropdownObj=v},_getDistinctFieldsOptionsObj:function(e){var v=[];L.forEach(e,w.hitch(this,
function(h){v.push({label:this._entireFieldObj[h].alias||this._entireFieldObj[h].name,value:h})}));return v},_addDefaultPrintTemplateOptions:function(){this._defaultPrintTemplateDropdownOptionObj=new N({"class":"esriCTFieldChooserDropdown",options:this._defaultPrintTemplateDropdownOption});this._defaultPrintTemplateDropdownOptionObj.placeAt(this.defaultPrintTemplateDropdown);this._defaultPrintTemplateDropdownOptionObj.startup();this._clonedConfigurationCustomOptions&&""!==this._clonedConfigurationCustomOptions.defaultPrintOption&&
null!==this._clonedConfigurationCustomOptions.defaultPrintOption&&void 0!==this._clonedConfigurationCustomOptions.defaultPrintOption?this._defaultPrintTemplateDropdownOptionObj.set("value",this._clonedConfigurationCustomOptions.defaultPrintOption):this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_disableAddCustomLayoutButton:function(){J.add(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");J.add(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},
_enableAddCustomLayoutButton:function(){J.remove(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");J.remove(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},_fetchChoiceList:function(){this.loadingIndicator.show();A({url:this._printTaskURL,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(w.hitch(this,function(e){this._extractChoiceList(e);this._createCustomOptionDropdownList();0<this._customDropdownOption.length?this._checkBuddyTask(e):(this._disableAddCustomLayoutButton(),
this._addDefaultPrintTemplateOptions(),this.loadingIndicator.hide())}),w.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchChoiceList);this.loadingIndicator.hide()}))},_extractChoiceList:function(e){L.forEach(e.parameters,w.hitch(this,function(v){"Layout_Template"===v.name&&"Layout Template"===v.displayName&&(this._printServiceChoiceList=v.choiceList)}))},_checkBuddyTask:function(){A({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/")),content:{f:"json"},
handleAs:"json",callbackParamName:"callback"}).then(w.hitch(this,function(e){if(1<e.tasks.length){for(var v,h=0;h<e.tasks.length;h++)if(-1!==this._buddyTaskEndPoint.indexOf(e.tasks[h])){v=e.tasks[h];break}v?this._executeBuddyTaskSync(v):(0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):this._disableAddCustomLayoutButton(),this.loadingIndicator.hide())}else 0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):
(this._disableAddCustomLayoutButton(),this._addDefaultPrintTemplateOptions()),this.loadingIndicator.hide()}),w.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskName);this.loadingIndicator.hide()}))},_executeBuddyTaskSync:function(e){A({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/"))+"/"+e+"/execute",content:{f:"json",outSR:102100},handleAs:"json",callbackParamName:"callback"}).then(w.hitch(this,function(v){0<v.results[0].value.length?
(this._enableAddCustomLayoutButton(),L.forEach(v.results[0].value,w.hitch(this,function(h){this._buddyTaskChoiceList[h.layoutTemplate]=h})),this._displayChoiceList()):this._disableAddCustomLayoutButton();this.loadingIndicator.hide()}),w.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskDimension);this.loadingIndicator.hide()}))},_displayChoiceList:function(){this._createCustomLayoutTable();this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&
0<this._clonedConfigurationCustomOptions.customOptions.length&&this._addConfiguredCustomOptionsInTable();this._addDefaultPrintTemplateOptions()},_createCustomLayoutTable:function(){this._customLayoutTable=new F({fields:[{name:"field",title:"Layout",type:"empty",editable:"false",width:"40%"},{name:"field",title:"Width",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Height",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Page Units",type:"empty",editable:"false",width:"20%"},
{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"10%"}]});this._customLayoutTable.placeAt(this.customLayoutTable);f.setStyle(this._customLayoutTable.domNode,{height:"100%"});this._customLayoutTable.startup();this.own(a(this._customLayoutTable,"row-delete",w.hitch(this,function(){this._removeCustomOptionFromDefaultDropdown();0===this._customLayoutTable.getRows().length&&this._isCustomOptionNoDefault&&this._addOptionsInDefaultDropdown();
this._addConfiguredCustomOptionInDefaultDropdown()})))},_addConfiguredCustomOptionsInTable:function(){L.forEach(this._clonedConfigurationCustomOptions.customOptions,w.hitch(this,function(e){this._addFieldsRow(e,!0)}))},_addCustomOptionsInTable:function(){var e=this._customDropdownOption[0].value,v,h;var r=h=null;var I=this._pageSize[0].value;this._buddyTaskChoiceList[e]&&(h=this._buddyTaskChoiceList[e].pageSize[1],r=this._buddyTaskChoiceList[e].pageSize[0],this._buddyTaskChoiceList[e]&&this._buddyTaskChoiceList[e].pageUnits&&
(I=this._buddyTaskChoiceList[e].pageUnits));var M={};M[e]={Height:h,Width:r,SizeName:e,MapLayout:e,PageUnits:I};this._addFieldsRow(M[e],!1);C.has("ie")||C.has("edge")?L.forEach(this._defaultPrintTemplateDropdownOptionObj.options,w.hitch(this,function(P){P.value===e&&(v=P)})):v=this._defaultPrintTemplateDropdownOptionObj.options.find(function(P){return P.value===e});v||this._defaultPrintTemplateDropdownOptionObj.addOption({label:e,value:e,selected:!1})},_createCustomOptionDropdownList:function(){var e=
!1;L.forEach(this._printServiceChoiceList,w.hitch(this,function(h){var r=w.clone(h);if("MAP_ONLY"!==r){if(this._defaultOptions[r]){e=!0;var I=this._defaultOptions[r];this._defaultPrintTemplateDropdownOption.push({label:z.PageSizes[I.SizeName].SizeName+" "+z.Orientation[I.Orientation].Text,value:h})}this._defaultOptions[r]||this._customDropdownOption.push({value:r,label:r})}}));this._clonedConfigurationCustomOptions&&L.forEach(this._clonedConfigurationCustomOptions.customOptions,w.hitch(this,function(h){this._defaultPrintTemplateDropdownOption.push({label:h.SizeName,
value:h.SizeName})}));if(!(e||(0<this._customDropdownOption.length&&(this._isCustomOptionNoDefault=!0),this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&0<this._clonedConfigurationCustomOptions.customOptions.length)))for(var v in this._defaultOptions)this._defaultOptions.hasOwnProperty(v)&&z.PageSizes[this._defaultOptions[v].SizeName]&&this._defaultPrintTemplateDropdownOption.push({label:v,value:v})},getCustomOptions:function(){var e=[];if(this._customLayoutTable){var v=
this._customLayoutTable.getRows();L.forEach(v,w.hitch(this,function(h){e.push({SizeName:h.customOptionLayoutDropdownObj.value,Width:h.customOptionWidthTextbox.getValue(),Height:h.customOptionHeightTextbox.getValue(),MapLayout:h.customOptionLayoutDropdownObj.value,PageUnits:h.customOptionPageUnitsDropdownObj.value})}))}return e},validateCustomOptions:function(){var e=[];if(this._customLayoutTable){var v=this._customLayoutTable.getRows();L.forEach(v,w.hitch(this,function(h){h.customOptionWidthTextbox.isValid()||
e.push(q.substitute(this.nls.downloadTab.errorMessages.invalidLayoutWidth,{customLayoutOptionValue:h.customOptionLayoutDropdownObj.value}));h.customOptionHeightTextbox.isValid()||e.push(q.substitute(this.nls.downloadTab.errorMessages.invalidLayoutHeight,{customLayoutOptionValue:h.customOptionLayoutDropdownObj.value}));h.customOptionPageUnitsDropdownObj.isValid()||e.push(q.substitute(this.nls.downloadTab.errorMessages.invalidLayoutPageUnits,{customLayoutOptionValue:h.customOptionLayoutDropdownObj.value}))}))}if(0<
e.length)return e;L.forEach(v,w.hitch(this,function(h){e.push({SizeName:h.customOptionLayoutDropdownObj.value})}));(v=this._getDuplicateValue(e))&&0<v.length?(e=[],e.push(q.substitute(this.nls.downloadTab.errorMessages.duplicateCustomOption,{duplicateValueSizeName:v[0].SizeName}))):e=[];return e},_getDuplicateValue:function(e){var v=0,h=e.length;for(v;v<h;v++){var r=e[v];var I=C.has("ie")||C.has("edge")?Object.create(e):Object.assign([],e);I.splice(v,1);r=this._filterArray(I,r);if(0<r.length)break}return r},
_filterArray:function(e,v){return e.filter(function(h){return Object.keys(v).every(function(r){return h[r]===v[r]})})},getDefaultPrintOption:function(){return this._defaultPrintTemplateDropdownOptionObj.value},closeDownloadTabDropdowns:function(){this._defaultPrintTemplateDropdownOptionObj&&this._defaultPrintTemplateDropdownOptionObj.closeDropDown();if(this._customLayoutTable){var e=this._customLayoutTable.getRows();L.forEach(e,w.hitch(this,function(v){v.customOptionLayoutDropdownObj.closeDropDown();
v.customOptionPageUnitsDropdownObj.closeDropDown()}))}},_initEditor:function(){this._initEditorPluginsCSS();this._footNoteEditorObj=new S({plugins:"undo redo | cut copy paste selectAll | bold italic underline | foreColor | insertHorizontalRule removeFormat delete |".split(" "),extraPlugins:["createLink","unlink",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},"fontSize"],style:"font-family:Verdana;"},
this.footNoteEditor);f.setStyle(this._footNoteEditorObj.domNode,{width:"100%",height:"100%"});this._footNoteEditorObj.startup();8!==p("ie")&&this._footNoteEditorObj.resize({w:"100%",h:"100%"})},_initEditorPluginsCSS:function(){var e=document.getElementsByTagName("head")[0],v=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";D('link[href\x3d"'+v+'"]',e)[0]||C.loadStyleLink("editor_plugins_resources_TextColor",v);v=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";D('link[href\x3d"'+
v+'"]',e)[0]||C.loadStyleLink("editor_plugins_resources_editorPlugins",v);v=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";D('link[href\x3d"'+v+'"]',e)[0]||C.loadStyleLink("editor_plugins_resources_PasteFromWord",v)},getDisplaySummaryCheckBoxStatus:function(){return this.displaySummaryInReportCheckBox.get("checked")},getRowshavingAllZeroValueCheckBoxStatus:function(){return this.hideAllZeroRowCheckBox.get("checked")},getRowshavingAllNullValueCheckBoxStatus:function(){return this.hideNullRowCheckBox.get("checked")}})})},
"jimu/dijit/GpSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/GpChooserFromPortal jimu/dijit/_GpServiceChooserContent jimu/portalUrlUtils dijit/form/RadioButton".split(" "),function(x,E,K,J,w,a,c,d,f,l,q,n){var u=0;return x([E,K,J,f],{templateString:w,baseClass:"jimu-gp-source",declaredClass:"jimu.dijit.GpSource",nls:null,multiple:!1,
portalUrl:null,uniqueID:null,mode:null,constructor:function(){this.inherited(arguments);this.uniqueID=++u},postMixInProperties:function(){this.nls=window.jimuNls.gpSource;this.portalUrl=n.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){var B=[];this.portalRadio.checked?B=this.gpcPortal.getSelectedItems():this.urlRadio.checked&&(B=this.gpcUrl.getSelectedItems());return B},startup:function(){this._started||(this.inherited(arguments),
this.gpcPortal.startup(),this.gpcUrl.startup());this._started=!0},_initSelf:function(){this._initRadios();this._createGpChooserFromPortal();this._createGpServiceChooserContent();this._onRadioClicked("url");this.own(d(this.urlRadio,"click",a.hitch(this,function(){this._onRadioClicked("url")})));this.own(d(this.portalRadio,"click",a.hitch(this,function(){this._onRadioClicked("portal")})))},_createGpChooserFromPortal:function(){this.gpcPortal=new l({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",
height:"100%"}});this.gpcPortal.operationTip=this.nls.chooseItem;this.gpcPortal.placeAt(this.hflcContainer);this.own(d(this.gpcPortal,"next",a.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseTask;this._updateOperationTip()})));this.own(d(this.gpcPortal,"back",a.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(d(this.gpcPortal,"ok",a.hitch(this,function(B){B&&0<B.length&&this.emit("ok",B)})));
this.own(d(this.gpcPortal,"cancel",a.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createGpServiceChooserContent:function(){this.gpcUrl=new q({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.gpcUrl.operationTip=this.nls.setServiceUrl;this.gpcUrl.placeAt(this.flscContainer);this.own(d(this.gpcUrl,"ok",a.hitch(this,
function(B){B&&0<B.length&&this.emit("ok",B)})));this.own(d(this.gpcUrl,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var B="gpSourceRadios_"+this._getRandomString();this.portalRadio.name=B;c.setAttr(this.portalRadio,"id","portalRadio_"+this._getRandomString());c.setAttr(this.portalLabel,"for",this.portalRadio.id);this.urlRadio.name=B;c.setAttr(this.urlRadio,"id","urlRadio_"+this._getRandomString());c.setAttr(this.urlLabel,"for",this.urlRadio.id)},_getRandomString:function(){var B=
Math.random().toString();return B=B.slice(2,B.length)},_onRadioClicked:function(B){this.mode!==B&&(this.mode=B,"portal"===B?(this.portalRadio.set("checked",!0),this.urlRadio.set("checked",!1),c.setStyle(this.hflcContainer,"display","block"),c.setStyle(this.flscContainer,"display","none"),this.operationTip.innerHTML=this.nls.chooseItem):"url"===B&&(this.portalRadio.set("checked",!1),this.urlRadio.set("checked",!0),c.setStyle(this.hflcContainer,"display","none"),c.setStyle(this.flscContainer,"display",
"block"),this.operationTip.innerHTML=this.nls.setServiceUrl,setTimeout(a.hitch(this,function(){this.gpcUrl.focusInput()}),50)),this._updateOperationTip())},_updateOperationTip:function(){if(this.portalRadio.checked){this.operationTip.innerHTML=this.gpcPortal.operationTip;var B=this.gpcPortal.browserContainer;B.style.top=0;var F=this.operationTip.clientHeight;19<=F&&(B.style.top=F-19+"px")}else this.urlRadio.checked&&(this.operationTip.innerHTML=this.gpcUrl.operationTip)}})})},"jimu/dijit/GpChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/GpServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k){return x([E,K,J,n],{templateString:w,declaredClass:"jimu.dijit.GpChooserFromPortal",baseClass:"jimu-gp-chooser-from-portal",_serviceDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=a.mixin({},window.jimuNls.common);this.portalUrl=b.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.gpServiceBrowser.getSelectedItems()},_initSelf:function(){this.selector=
new B({portalUrl:this.portalUrl,itemTypes:["Geoprocessing Service"],onlyShowOnlineFeaturedItems:!1});this.own(f(this.selector,"item-selected",a.hitch(this,this._onItemSelected)));this.own(f(this.selector,"none-item-selected",a.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);this.selector.startup();this.gpServiceBrowser._onTreeClick=a.hitch(this,this._onBrowserClicked)},_onItemSelected:function(){c.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){c.addClass(this.btnNext,
"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceDef&&!this._serviceDef.isFulfilled()&&this._serviceDef.cancel();c.setStyle(this.btnOk,"display","none");c.setStyle(this.btnNext,"display","block");c.setStyle(this.btnBack,"display","none");c.addClass(this.btnOk,"jimu-state-disabled");c.setStyle(this.selectorContainer,"display","block");c.setStyle(this.browserContainer,"display","none");this._reset();this.emit("back")},_onBtnOkClicked:function(){var t=this.getSelectedItems();0<t.length&&
this.emit("ok",t)},_onBtnNextClicked:function(){var t=this.selector.getSelectedItem();t&&(this._reset(),c.setStyle(this.btnNext,"display","none"),c.setStyle(this.btnBack,"display","block"),c.setStyle(this.btnOk,"display","block"),c.addClass(this.btnOk,"jimu-state-disabled"),c.setStyle(this.selectorContainer,"display","none"),c.setStyle(this.browserContainer,"display","block"),this.gpServiceBrowser.setUrl(t.url||t.item).then(a.hitch(this,function(){0<this.getSelectedItems().length&&c.removeClass(this.btnOk,
"jimu-state-disabled")})),this.emit("next"))},_reset:function(){this.gpServiceBrowser.reset()},_onBrowserClicked:function(){0<this.gpServiceBrowser.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):c.addClass(this.btnOk,"jimu-state-disabled")},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H,m,g,A,D,N,O){return x([K,J,w,O,c],{templateString:a,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=m.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";l.forEach(this.itemTypes,d.hitch(this,function(L,z){this._itemTypes+=
'"'+L+'"';z!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";l.forEach(this.typeKeywords,d.hitch(this,function(L,z){this._typeKeywords+='"'+L+'"';z!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var L=this._getPortalUrl();
this.portal=t.getPortal(L);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=k.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=k.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var L={title:this.nls.myContent,content:this.mycontentTabNode},z={title:this.nls.myOrganization,content:this.organizationTabNode},
C={title:this.nls.myGroup,content:this.groupTabNode},Q={title:this.nls.publicMap,content:this.publicTabNode};b.set(this.mycontentTabNode,"display","none");b.set(this.organizationTabNode,"display","none");b.set(this.groupTabNode,"display","none");b.set(this.publicTabNode,"display","none");var S=[];this.showMyContent&&(S.push(L),b.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(S.push(z),b.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(S.push(C),b.set(this.groupTabNode,
"display","block"));this.showPublic&&(S.push(Q),b.set(this.publicTabNode,"display","block"));this.tab=new D({tabs:S},this.tabNode);this.own(F(this.tab,"tabChanged",d.hitch(this,function(p){q.setStyle(this.signinSection,"display","none");p!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){q.setStyle(this.signinSection,"display","none");var L=B(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);H.userHaveSignInPortal(this._getPortalUrl())?L.style("display","block"):(L.style("display","none"),this._isPublicTabShow||q.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var L=this._getPortalUrl();L=m.getServerByUrl(L);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var z=!1;m.isArcGIScom(L)?(z=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
L,z=this.showOnlineItems?!1:!0);z&&(this.onlinePublicRaido.set("disabled",!0),q.setStyle(this.onlinePublicRaido,"display","none"),q.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var L="esri_"+(f.locale&&f.locale.slice(0,2)||"en").toLowerCase(),z=l.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
d.hitch(this,function(Q){return Q!==L})),C="";l.forEach(z,d.hitch(this,function(Q){C+=" -owner:"+Q+" "}));z=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(z=" orgid:"+this.portal.user.orgId+" ");z=z+this._itemTypeQueryString+" AND access:public "+C+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:z});this._filterPublicPortalQuery=this._getQuery({q:z,basicQ:z});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(L){return d.mixin({start:1,num:16,f:"json"},L||{})},_getPortalUrl:function(){return m.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(F(this.publicPortalItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));this.own(F(this.publicOnlineItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));this.own(F(this.organizationItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));this.own(F(this.groupItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));
this.own(F(this.mycontentItemTable,"item-dom-clicked",d.hitch(this,this._onItemDomClicked)));this.own(F(this.publicPortalItemTable,"update",d.hitch(this,this._onItemTableUpdate)));this.own(F(this.publicOnlineItemTable,"update",d.hitch(this,this._onItemTableUpdate)));this.own(F(this.organizationItemTable,"update",d.hitch(this,this._onItemTableUpdate)));this.own(F(this.groupItemTable,"update",d.hitch(this,this._onItemTableUpdate)));this.own(F(this.mycontentItemTable,"update",d.hitch(this,this._onItemTableUpdate)));
var L=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",L),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(F(this.portalPublicRaido,"click",d.hitch(this,this._onPublicRaidoClicked)));this.own(F(this.onlinePublicRaido,"click",d.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(L){(L=L&&d.trim(L))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=L+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=L+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(F(this.groupsSelect,"change",d.hitch(this,this._onGroupsSelectChange)));var L=m.getServerByUrl(this._getPortalUrl());m.isArcGIScom(L)&&(L="ArcGIS.com");H.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(L){if(L=L&&d.trim(L)){if(this._allOrganizationQuery){var z=this._allOrganizationQuery.q;z&&(this._filterOrganizationQuery.q=L+" "+z,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(L){if(L=L&&d.trim(L)){if(this._allMyContentQuery){var z=this._allMyContentQuery.q;z&&(this._filterMyContentQuery.q=L+" "+
z,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(L){if(L=L&&d.trim(L)){if(this._allGroupQuery){var z=this._allGroupQuery.q;z&&(this._filterGroupQuery.q=L+" "+z,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var L=this._getPortalUrl();t.getPortal(L).getUser().then(d.hitch(this,function(z){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(z),this._searchMyContent(z),this._searchGroups(z))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(L){this.organizationItemTable.clear();L=" orgid:"+L.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var z=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:L});this._filterOrganizationQuery=this._getQuery({q:L});this.organizationItemTable.set("portalUrl",z);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(L){this.mycontentItemTable.clear();var z=this._getPortalUrl();L="owner:"+L.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:L});this._filterMyContentQuery=this._getQuery({q:L});this.mycontentItemTable.set("portalUrl",z);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(L){this._resetGroupsSection();q.setStyle(this.groupsSection,"display","flex");L=L.getGroups();if(0<L.length){q.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();q.empty(this.groupsSelect);for(var z=0;z<L.length;z++){var C=L[z];q.create("option",
{value:C.id,innerHTML:C.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(L.length)},_resetGroupsSection:function(){q.setStyle(this.groupsSection,"display","none");q.empty(this.groupsSelect);q.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();q.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(L){0===L?q.setStyle(this.groupsSection,
"top","15px"):q.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var L=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===L)q.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{q.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var z=this._getPortalUrl();L="group:"+L+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:L});this._filterGroupQuery=this._getQuery({q:L});
this.groupItemTable.set("portalUrl",z);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(L){var z=q.hasClass(L,"jimu-state-active");B(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");z&&q.addClass(L,"jimu-state-active");(L=this.getSelectedItem())?this.emit("item-selected",L):this.emit("none-item-selected")},getSelectedItem:function(){var L=null,z=B(".item.jimu-state-active",this.domNode);
0<z.length&&(L=d.mixin({},z[0].item));return L}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b){return x([E,K,J,a],{templateString:w,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=F.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){f.setStyle(this.domNode,"display","block")},hide:function(){f.setStyle(this.domNode,"display","none")},searchAllItems:function(k){this.showAllItemsSection();k&&(this.query=c.mixin({},k),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),B.getPortal(this.portalUrl).queryItems(this.query).then(c.hitch(this,function(t){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=t.nextStart,this._createItems(t,this.allItemTbody))}),c.hitch(this,function(t){console.error(t);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(k){this.showFilterItemsSection();k&&(this.filteredQuery=c.clone(k),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),B.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(c.hitch(this,function(t){this.domNode&&
(this.showFilterItemsSection(),k&&this.clearFilteredItemsSection(),this.filteredQuery.start=t.nextStart,this._createItems(t,this.filteredItemsTbody),this._filterItemCallback())}),c.hitch(this,function(t){console.error(t);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(f.setStyle(this.filteredItemsTableDiv,"display","block"),f.setStyle(this.searchNoneTipSection,"display","none")):(f.setStyle(this.filteredItemsTableDiv,
"display","none"),f.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){f.empty(this.allItemTbody)},clearFilteredItemsSection:function(){f.empty(this.filteredItemsTbody)},showAllItemsSection:function(){f.setStyle(this.allItemsSection,"display","block");f.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){f.setStyle(this.allItemsSection,"display","none");
f.setStyle(this.filteredItemsSection,"display","block");f.setStyle(this.filteredItemsTableDiv,"display","block");f.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(k){return u.isScrollToBottom(k)},_createItems:function(k,t){k=k.results;var H=
d.map(this.types,c.hitch(this,function(L){return L.toLowerCase()}));k=d.filter(k,c.hitch(this,function(L){L=L.type&&L.type.toLowerCase()||"";return 0<=d.indexOf(H,L)}));if(0!==k.length){var m=q("td.empty",t),g;if(0<m.length){var A=Math.min(k.length,m.length),D=k.splice(0,A);for(g=0;g<A;g++){var N=m[g];var O=this._createItem(D[g]);f.place(O,N);f.removeClass(N,"empty")}}if(0!==k.length){m=Math.ceil(k.length/2);for(g=0;g<m;g++)for(O=f.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
f.place(O,t),A=q("td",O),D=0;D<A.length;D++)N=A[D],(O=k[2*g+D])?(O=this._createItem(O),f.place(O,N)):f.addClass(N,"empty");this.emit("update")}}},_getItemCount:function(k){return q(".item",k).length},_createItem:function(k){var t=f.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
t.item=k;var H=q(".item-thumbnail",t)[0],m=q(".item-name",t)[0],g=q(".item-type-owner",t)[0],A=q(".item-date",t)[0],D=q(".item-details",t)[0],N=q(".none-thumbnail-tip",t)[0];if(!k.thumbnailUrl){var O=this._defaultThumbnail[k.type];O&&(k.thumbnailUrl=require.toUrl("jimu")+"/images/"+O)}k.thumbnailUrl?f.setStyle(H,"backgroundImage","url("+k.thumbnailUrl+")"):N.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(A=q(".item-info",t)[0],this.onCreateItemContent(k,A)):(m.innerHTML=
k.title,m.title=m.innerHTML,g.innerHTML=k.type+" by "+k.owner,g.title=g.innerHTML,H=new Date,H.setTime(k.modified),A.innerHTML=H.toLocaleString(),A.title=A.innerHTML,D.innerHTML=this.nls.moreDetails,D.href=k.detailsPageUrl||"#");return t},_onItemsTableClicked:function(k){var t=k.target||k.srcElement;k=null;f.hasClass(t,"item-thumbnail")?k=t.parentNode:f.hasClass(t,"none-thumbnail-tip")&&(k=t.parentNode.parentNode);k&&(t=f.hasClass(k,"jimu-state-active"),q(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
t?f.removeClass(k,"jimu-state-active"):f.addClass(k,"jimu-state-active"),this.emit("item-dom-clicked",k))},getSelectedItem:function(){var k=null,t=q(".item.jimu-state-active",this.domNode);0<t.length&&(k=c.mixin({},t[0].item));return k}})})},"jimu/dijit/GpServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(x,E,K,J,w){return x([E],{baseClass:"jimu-gp-service-browser",declaredClass:"jimu.dijit.GpServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=w.getGpServiceBrowserRule()},getSelectedItems:function(){var a=this.inherited(arguments);return a=J.map(a,K.hitch(this,function(c){return{name:c.name,url:c.url}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F){return x([E,K,J,w],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(b){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new f;b&&"string"===typeof b&&b.replace(/\/*$/g,"")||this._def.reject();b=b.replace(/\/*$/g,"");b=a.trim(b);var k=b.match(/^http(s?):\/\//gi);k&&0<k.length||
(b="http://"+b);if(!(0>=b.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=b))return b=this._getRootItem(),b=B.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,b):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,b):this._searchFolderServiceUrl(this._currentUrl,b),this.shelter.show(),b.then(a.hitch(this,function(t){this.domNode&&this.shelter.hide();var H=this.tree.getAllLeafTreeNodeWidgets();1===H.length&&
H[0].select();this._def.resolve(t)}),a.hitch(this,function(t){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(t)})),this._def;this._def.reject()},_getItem:function(b){return this.rule.getItem(b)},_getSubItemUrls:function(b){return this.rule.getSubItemUrls(b)},_getSubItems:function(b){var k=new f;this._getSubItemUrls(b).then(a.hitch(this,function(t){t=d.map(t,a.hitch(this,function(H){return this._getItem(H)}));l(t).then(a.hitch(this,function(H){H=d.filter(H,a.hitch(this,
function(m){return m&&"object"===typeof m}));k.resolve(H)}),a.hitch(this,function(H){k.reject(H)}))}),a.hitch(this,function(t){k.reject(t)}));return k},_selectFirstLeafTreeNodeWidget:function(){var b=this.tree.getAllLeafTreeNodeWidgets();1===b.length&&b[0].select()},isLeafItem:function(b){return 0<=this.rule.leafTypes.indexOf(b.type)},isServiceTypeSupported:function(b){return this.rule.isServiceTypeSupported(b)},_getStringEndWith:function(b,k){var t="",H=b.indexOf(k);0<=H&&(t=b.slice(0,H+k.length));
return t},_isUrlContainsServiceType:function(b){return this.rule.isUrlContainsServiceType(b)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(b){var k="";b=b.split("/");return k=b[b.length-1]},_searchBaseServiceUrl:function(b,k){var t=new f;this._getRestInfo(b).then(a.hitch(this,function(H){if(this.domNode){var m=[];d.map(H.folders,a.hitch(this,function(g){var A={name:g,type:"folder",url:b+"/"+g,parent:k.id};this._addItem(A);
var D=new f;this._doSearchFolderServiceUrl(A.url,A.id).then(a.hitch(this,function(N){0<N.length?d.forEach(N,a.hitch(this,function(O){O.parent=A.id;this._addItem(O)})):this._removeItem(A.id);D.resolve()}),a.hitch(this,function(N){D.reject(N)}));m.push(D);return D}));d.forEach(H.services,a.hitch(this,function(g){if(this.isServiceTypeSupported(g.type)){g=b+"/"+g.name+"/"+g.type;var A=new f;this.rule.getItem(g).then(a.hitch(this,function(D){D&&(D.parent=k.id,this._addItem(D));A.resolve()}),a.hitch(this,
function(D){console.error(D);A.reject(D)}));m.push(A)}}));l(m).then(a.hitch(this,function(){this.domNode&&t.resolve()}),a.hitch(this,function(g){console.error(g);this.domNode&&t.reject(g)}))}}),a.hitch(this,function(H){console.error(H);this.domNode&&t.reject({errorCode:"NETWORK_ERROR",error:H})}));return t},_searchFolderServiceUrl:function(b,k){var t=new f;this._doSearchFolderServiceUrl(b,k).then(a.hitch(this,function(H){this.domNode&&(d.forEach(H,a.hitch(this,function(m){m.parent=k.id;this._addItem(m)})),
t.resolve())}),a.hitch(this,function(H){console.error(H);this.domNode&&t.reject({errorCode:"NETWORK_ERROR",error:H})}));return t},_doSearchFolderServiceUrl:function(b){var k=new f,t=this._getBaseServiceUrl();this._getRestInfo(b).then(a.hitch(this,function(H){H=H.services;var m=[];H&&0<H.length&&d.forEach(H,a.hitch(this,function(g){this.isServiceTypeSupported(g.type)&&(g=this.rule.getItem(t+"/"+g.name+"/"+g.type),m.push(g))}));l(m).then(a.hitch(this,function(g){g=d.filter(g,a.hitch(this,function(A){return A}));
k.resolve(g)}),a.hitch(this,function(g){console.error(g);k.reject(g)}))}),a.hitch(this,function(H){console.error(H);k.reject(H)}));return k},_searchServiceUrl:function(b,k){var t=new f;this._getSubItems(b).then(a.hitch(this,function(H){H&&0<H.length?(d.forEach(H,a.hitch(this,function(m){m.parent=k.id;this._addItem(m)})),t.resolve()):this._getItem(b).then(a.hitch(this,function(m){m&&(m.parent=k.id,this._addItem(m));t.resolve()}),a.hitch(this,function(m){t.reject(m)}))}),a.hitch(this,function(H){t.reject(H)}));
return t},_getRestInfo:function(b){var k=new f;this.rule.getRestInfo(b).then(a.hitch(this,function(t){this.domNode&&k.resolve(t)}),a.hitch(this,function(t){this.domNode&&k.reject(t)}));return k},_clear:function(){var b=this._store.query({parent:"root"});d.forEach(b,a.hitch(this,function(k){k&&"root"!==k.id&&this._store.remove(k.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(b){this._id++;b.id=this._id.toString();this._store.add(b);return b},_removeItem:function(b){this._store.remove(b)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var b=this._getRootItem();b=new q({data:[b],getChildren:function(k){return this.query({parent:k.id})}});this._store=new n(b);b=new u({store:this._store,query:{id:"root"},mayHaveChildren:a.hitch(this,this._mayHaveChildren)});this.tree=new F({multiple:this.multiple,model:b,showRoot:!1,style:{width:"100%"},isLeafItem:a.hitch(this,this.isLeafItem),onOpen:a.hitch(this,function(k,t){this._onTreeOpen(k,t);
this.emit("tree-open",k,t)}),onClick:a.hitch(this,function(k,t,H){this._onTreeClick(k,t,H);this.emit("tree-click",k,t,H)}),getIconStyle:a.hitch(this,function(k,t){var H=null;if(!k)return null;var m={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},g=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),A=this._getIconImageName(k,t);A||("folder"===k.type?A=t?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(k.type)&&
(A=t?"folder_open_default.png":"folder_close_default.png"));A&&(m.backgroundImage="url("+g+"/css/images/"+A+")",H=m);return H})});c.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(b,k){var t="";"function"===typeof this.rule.getIconImageName&&(t=this.rule.getIconImageName(b,k));return t},_mayHaveChildren:function(b){return"root"===b.type?!0:!this.isLeafItem(b)},_onTreeOpen:function(b,k){"root"===b.id||0<this._store.query({parent:b.id}).length||
b.checking||b.checked||(b.checking=!0,this._getSubItems(b.url).then(a.hitch(this,function(t){d.forEach(t,a.hitch(this,function(H){H.parent=b.id;this._addItem(H)}));b.checking=!1;b.checked=!0}),a.hitch(this,function(t){console.error(t);b.checking=!1;b.checked=!0})))},_onTreeClick:function(b,k,t){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),
function(x,E,K,J,w,a,c){return K("dijit.tree.ObjectStoreModel",c,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(d){w.mixin(this,d);this.childrenCache={}},getRoot:function(d,f){if(this.root)d(this.root);else{var l=this.store.query(this.query);l.then&&this.own(l);a(l,w.hitch(this,function(q){if(1!=q.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+q.length+" items, but must return exactly one");this.root=q[0];d(this.root);l.observe&&l.observe(w.hitch(this,
function(n){this.onChange(n)}),!0)}),f)}},mayHaveChildren:function(){return!0},getChildren:function(d,f,l){var q=this.store.getIdentity(d);if(this.childrenCache[q])a(this.childrenCache[q],f,l);else{var n=this.childrenCache[q]=this.store.getChildren(d);n.then&&this.own(n);n.observe&&this.own(n.observe(w.hitch(this,function(u,B,F){this.onChange(u);B!=F&&a(n,w.hitch(this,"onChildrenChange",d))}),!0));a(n,f,l)}},isItem:function(){return!0},getIdentity:function(d){return this.store.getIdentity(d)},getLabel:function(d){return d[this.labelAttr]},
newItem:function(d,f,l,q){return this.store.put(d,{parent:f,before:q})},pasteItem:function(d,f,l,q,n,u){var B=new J;if(f===l&&!q&&!u)return B.resolve(!0),B;f&&!q?this.getChildren(f,w.hitch(this,function(F){F=[].concat(F);var b=x.indexOf(F,d);F.splice(b,1);this.onChildrenChange(f,F);B.resolve(this.store.put(d,{overwrite:!0,parent:l,oldParent:f,before:u,isCopy:!1}))})):B.resolve(this.store.put(d,{overwrite:!0,parent:l,oldParent:f,before:u,isCopy:!0}));return B},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b){var k=x([F._TreeNode,u],{templateString:J,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);
a.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=a.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=a.toDom('\x3cinput type\x3d"checkbox" /\x3e');a.addClass(this.checkNode,"jimu-tree-check-node");a.place(this.checkNode,this.contentNode,"first");this.own(q(this.checkNode,"click",w.hitch(this,this._onClick)));this.own(q(this.rowNode,"keydown",w.hitch(this,function(t,H){H.target=t;H.keyCode!==n.ENTER&&H.keyCode!==
n.SPACE||this._onClick(H)},this.checkNode)));this.isLeaf?this.groupId?a.setStyle(this.checkNode,"display","none"):a.setStyle(this.checkNode,"display","inline"):a.setStyle(this.checkNode,"display","none");this.isLeaf?a.addClass(this.domNode,"jimu-tree-leaf-node"):a.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,a.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,a.removeClass(this.domNode,
"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(t){(t.target||t.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,t):this.tree._onClick(this,t)},_onChange:function(){this.isLeaf&&setTimeout(w.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return x([F,
u],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+b.getRandomString()},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree");this.own(l.before(this,"onClick",w.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&a.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;a.setAttr(this.domNode,"tabindex",0)},removeItem:function(t){this.model.store.remove(t)},
getAllItems:function(){var t=this.getAllTreeNodeWidgets();return c.map(t,w.hitch(this,function(H){var m=H.item;m.selected=H.checkNode.checked;return m}))},getSelectedItems:function(){var t=this.getAllTreeNodeWidgets();t=c.filter(t,w.hitch(this,function(H){return H.checkNode.checked}));return c.map(t,w.hitch(this,function(H){return H.item}))},getFilteredItems:function(t){var H=this.getAllTreeNodeWidgets();H=c.map(H,w.hitch(this,function(m){var g=m.item;g.selected=m.checkNode.checked;return g}));return c.filter(H,
w.hitch(this,function(m){return t(m)}))},getTreeNodeByItemId:function(t){for(var H=this._getAllTreeNodeDoms(),m=0;m<H.length;m++){var g=B.byNode(H[m]);if(g.item.id.toString()===t.toString())return g}return null},selectItem:function(t){(t=this.getTreeNodeByItemId(t))&&t.isLeaf&&this.selectNodeWidget(t)},unselectItem:function(t){(t=this.getTreeNodeByItemId(t))&&t.isLeaf&&t.unselect()},getAllLeafTreeNodeWidgets:function(){var t=this.getAllTreeNodeWidgets();return c.filter(t,w.hitch(this,function(H){return H.isLeaf}))},
getAllTreeNodeWidgets:function(){var t=this._getAllTreeNodeDoms();return c.map(t,w.hitch(this,function(H){return B.byNode(H)}))},isLeafItem:function(t){return t&&t.isLeaf},_getAllTreeNodeDoms:function(){return f(".dijitTreeNode",this.domNode)},_createTreeNode:function(t){t.isLeaf=this.isLeafItem(t.item);this.multiple||(t.groupId=this.uniqueId);return new k(t)},_onTreeNodeSelect:function(t){this.emit("item-select",{item:t.item,treeNode:t})},_onTreeNodeUnselect:function(t){this.emit("item-unselect",
{item:t.item,treeNode:t})},selectNodeWidget:function(t){this.multiple||this.unselectAllLeafNodeWidgets();t.select()},_jimuBeforeClick:function(t,H,m){H.isLeaf&&(a.hasClass(m.target||m.srcElement,"jimu-tree-check-node")||(this.multiple?H.toggleSelect():this.selectNodeWidget(H)));return arguments},_onCheckNodeClick:function(t,H,m){!this.multiple&&H&&this.unselectAllLeafNodeWidgets();d.stop(m);this.focusNode(t);setTimeout(w.hitch(this,function(){H?this.selectNodeWidget(t):t.unselect();this.onClick(t.item,
t,m)}),0)},unselectAllLeafNodeWidgets:function(){var t=this.getAllLeafTreeNodeWidgets();c.forEach(t,w.hitch(this,function(H){H.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H,m,g,A,D,N,O,L,z,C,Q,S,p,e,v,h,r){function I(y){return b.delegate(y.promise||y,{addCallback:function(G){this.then(G)},addErrback:function(G){this.otherwise(G)}})}var M=J("dijit._TreeNode",[O,L,z,C,Q],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(y){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=y;this._set("label",y);u("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:p,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(y){var G=Math.max(y,0)*this.tree._nodePixelIndent+"px";l.set(this.domNode,
"backgroundPosition",G+" 0px");l.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",G);x.forEach(this.getChildren(),function(R){R.set("indent",y+1)});this._set("indent",y)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(y){var G=this.tree,R=G.model;G._v10Compat&&y===R.root&&(y=null);this._applyClassAndStyle(y,"icon","Icon");this._applyClassAndStyle(y,"label","Label");this._applyClassAndStyle(y,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(y,G,R){var T="_"+G+"Class";G+="Node";var U=this[T];this[T]=this.tree["get"+R+"Class"](y,this.isExpanded);d.replace(this[G],this[T]||"",U||"");l.set(this[G],this.tree["get"+R+"Style"](y,this.isExpanded)||{})},_updateLayout:function(){var y=this.getParent();y=!y||!y.rowNode||"none"==y.rowNode.style.display;d.toggle(this.domNode,"dijitTreeIsRoot",y);d.toggle(this.domNode,"dijitTreeIsLast",!y&&!this.getNextSibling())},_setExpando:function(y){var G=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];y=y?0:this.isExpandable?this.isExpanded?1:2:3;d.replace(this.expandoNode,G[y],G);this.expandoNodeText.innerHTML=["*","-","+","*"][y]},expand:function(){if(this._expandDeferred)return I(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");d.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var y=n.wipeIn({node:this.containerNode,duration:N.defaultDuration}),G=this._expandDeferred=new w(function(){y.stop()});E.after(y,"onEnd",function(){G.resolve(!0)},!0);y.play();return I(G)},collapse:function(){if(this._collapseDeferred)return I(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");d.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var y=n.wipeOut({node:this.containerNode,duration:N.defaultDuration}),G=this._collapseDeferred=new w(function(){y.stop()});E.after(y,"onEnd",
function(){G.resolve(!0)},!0);y.play();return I(G)},indent:0,setChildItems:function(y){var G=this.tree,R=G.model,T=[],U=G.focusedChild,Y=this.getChildren();x.forEach(Y,function(V){z.prototype.removeChild.call(this,V)},this);this.defer(function(){x.forEach(Y,function(V){if(!V._destroyed&&!V.getParent()){G.dndController.removeTreeNode(V);(function da(W){var aa=R.getIdentity(W.item),ca=G._itemNodesMap[aa];1==ca.length?delete G._itemNodesMap[aa]:(aa=x.indexOf(ca,W),-1!=aa&&ca.splice(aa,1));x.forEach(W.getChildren(),
da)})(V);if(G.persist){var Z=x.map(V.getTreePath(),function(W){return G.model.getIdentity(W)}).join("/"),X;for(X in G._openedNodes)X.substr(0,Z.length)==Z&&delete G._openedNodes[X];G._saveExpandedNodes()}G.lastFocusedChild&&!c.isDescendant(G.lastFocusedChild.domNode,G.domNode)&&delete G.lastFocusedChild;U&&!c.isDescendant(U.domNode,G.domNode)&&G.focus();V.destroyRecursive()}})});this.state="Loaded";y&&0<y.length?(this.isExpandable=!0,x.forEach(y,function(V){var Z=R.getIdentity(V),X=G._itemNodesMap[Z];
if(X)for(var ba=0;ba<X.length;ba++)if(X[ba]&&!X[ba].getParent()){var W=X[ba];W.set("indent",this.indent+1);break}W||(W=this.tree._createTreeNode({item:V,tree:G,isExpandable:R.mayHaveChildren(V),label:G.getLabel(V),labelType:G.model&&G.model.labelType||"text",tooltip:G.getTooltip(V),ownerDocument:G.ownerDocument,dir:G.dir,lang:G.lang,textDir:G.textDir,indent:this.indent+1}),X?X.push(W):G._itemNodesMap[Z]=[W]);this.addChild(W);(this.tree.autoExpand||this.tree._state(W))&&T.push(G._expandNode(W))},this),
x.forEach(this.getChildren(),function(V){V._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);y=a(T);this.tree._startPaint(y);return I(y)},getTreePath:function(){for(var y=this,G=[];y&&y!==this.tree.rootNode;)G.unshift(y.item),y=y.getParent();G.unshift(this.tree.rootNode.item);return G},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(y){this.inherited(arguments);var G=this.getChildren();0==G.length&&
(this.isExpandable=!1,this.collapse());x.forEach(G,function(R){R._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(y){this.labelNode.setAttribute("aria-selected",y?"true":"false");d.toggle(this.rowNode,"dijitTreeRowSelected",y)},focus:function(){A.focus(this.focusNode)}});u("dojo-bidi")&&M.extend({_setTextDirAttr:function(y){!y||this.textDir==y&&this._created||(this._set("textDir",y),this.applyTextDir(this.labelNode),x.forEach(this.getChildren(),
function(G){G.set("textDir",y)},this))}});var P=J("dijit.Tree",[O,S,L,Q],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:e,persist:!1,autoExpand:!1,dndController:r,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(y,G){t.publish(this.id,b.mixin({tree:this,event:y},G||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new w;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var y=
this;this.own(k(this.containerNode,k.selector(".dijitTreeNode",H.enter),function(T){y._onNodeMouseEnter(D.byNode(this),T)}),k(this.containerNode,k.selector(".dijitTreeNode",H.leave),function(T){y._onNodeMouseLeave(D.byNode(this),T)}),k(this.containerNode,k.selector(".dijitTreeRow",g.press),function(T){y._onNodePress(D.getEnclosingWidget(this),T)}),k(this.containerNode,k.selector(".dijitTreeRow",g),function(T){y._onClick(D.getEnclosingWidget(this),T)}),k(this.containerNode,k.selector(".dijitTreeRow",
"dblclick"),function(T){y._onDblClick(D.getEnclosingWidget(this),T)}));this.model||this._store2model();this.own(E.after(this.model,"onChange",b.hitch(this,"_onItemChange"),!0),E.after(this.model,"onChildrenChange",b.hitch(this,"_onItemChildrenChange"),!0),E.after(this.model,"onDelete",b.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){b.isString(this.dndController)&&(this.dndController=b.getObject(this.dndController));for(var G={},R=0;R<this.dndParams.length;R++)this[this.dndParams[R]]&&
(G[this.dndParams[R]]=this[this.dndParams[R]]);this.dndController=new this.dndController(this,G)}this._load();this.onLoadDeferred=I(this.pendingCommandsPromise);this.onLoadDeferred.then(b.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;B.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var y={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(y.mayHaveChildren=
b.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(y.getChildren=b.hitch(this,function(G,R,T){this.getItemChildren(this._v10Compat&&G===this.model.root?null:G,R,T)}));this.model=new h(y);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(b.hitch(this,function(y){var G=this.rootNode=this.tree._createTreeNode({item:y,tree:this,isExpandable:!0,label:this.label||this.getLabel(y),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(G.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(G.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(G.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),G.labelNode.setAttribute("role","presentation"),G.labelNode.removeAttribute("aria-selected"),G.containerNode.setAttribute("role","tree"),G.containerNode.setAttribute("aria-expanded","true"),G.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(G.domNode);y=this.model.getIdentity(y);this._itemNodesMap[y]?this._itemNodesMap[y].push(G):this._itemNodesMap[y]=[G];G._updateLayout();
this._expandNode(G).then(b.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),b.hitch(this,function(y){console.error(this,": error loading root: ",y)}))},getNodesByItem:function(y){if(!y)return[];y=b.isString(y)?y:this.model.getIdentity(y);return[].concat(this._itemNodesMap[y])},_setSelectedItemAttr:function(y){this.set("selectedItems",[y])},_setSelectedItemsAttr:function(y){var G=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(b.hitch(this,function(){var R=x.map(y,function(U){return!U||b.isString(U)?U:G.model.getIdentity(U)}),T=[];x.forEach(R,function(U){T=T.concat(G._itemNodesMap[U]||[])});this.set("selectedNodes",T)}))},_setPathAttr:function(y){return y.length?I(this.set("paths",[y]).then(function(G){return G[0]})):I(this.set("paths",[]).then(function(G){return G[0]}))},_setPathsAttr:function(y){function G(T,U){var Y=T.shift(),V=x.filter(U,function(Z){return Z.getIdentity()==Y})[0];
if(V)return T.length?R._expandNode(V).then(function(){return G(T,V.getChildren())}):V;throw new P.PathError("Could not expand path at "+Y);}var R=this;return I(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return a(x.map(y,function(T){T=x.map(T,function(U){return U&&b.isObject(U)?R.model.getIdentity(U):U});if(T.length)return G(T,[R.rootNode]);throw new P.PathError("Empty path");}))}).then(function(T){R.set("selectedNodes",T);return R.paths}))},_setSelectedNodeAttr:function(y){this.set("selectedNodes",
[y])},_setSelectedNodesAttr:function(y){this.dndController.setSelection(y)},expandAll:function(){function y(R){return G._expandNode(R).then(function(){var T=x.filter(R.getChildren()||[],function(U){return U.isExpandable});return a(x.map(T,y))})}var G=this;return I(y(this.rootNode))},collapseAll:function(){function y(R){var T=x.filter(R.getChildren()||[],function(U){return U.isExpandable});T=a(x.map(T,y));return!R.isExpanded||R==G.rootNode&&!G.showRoot?T:T.then(function(){return G._collapseNode(R)})}
var G=this;return I(y(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(y){return this.model.getLabel(y)},getIconClass:function(y,G){return!y||this.model.mayHaveChildren(y)?G?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(y,G){(y=this._getNext(G))&&y.isTreeNode&&this.focusNode(y)},
_onUpArrow:function(y,G){if(y=G.getPreviousSibling())for(G=y;G.isExpandable&&G.isExpanded&&G.hasChildren();)G=G.getChildren(),G=G[G.length-1];else if(y=G.getParent(),this.showRoot||y!==this.rootNode)G=y;G&&G.isTreeNode&&this.focusNode(G)},_onRightArrow:function(y,G){G.isExpandable&&!G.isExpanded?this._expandNode(G):G.hasChildren()&&(G=G.getChildren()[0])&&G.isTreeNode&&this.focusNode(G)},_onLeftArrow:function(y,G){G.isExpandable&&G.isExpanded?this._collapseNode(G):(y=G.getParent())&&y.isTreeNode&&
(this.showRoot||y!==this.rootNode)&&this.focusNode(y)},focusLastChild:function(){var y=this._getLast();y&&y.isTreeNode&&this.focusNode(y)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var y=this.rootNode;y.isExpanded;){var G=y.getChildren();if(!G.length)break;y=G[G.length-1]}return y},_getNext:function(y){if(y.isExpandable&&y.isExpanded&&y.hasChildren())return y.getChildren()[0];for(;y&&y.isTreeNode;){var G=y.getNextSibling();if(G)return G;
y=y.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(y,G){return c.isDescendant(y,G.expandoNode)||c.isDescendant(y,G.expandoNodeText)},_onNodePress:function(y,G){this.focusNode(y)},__click:function(y,G,R,T){var U=this.isExpandoNode(G.target,y);y.isExpandable&&(R||U)?this._onExpandoClick({node:y}):(this._publish("execute",{item:y.item,node:y,evt:G}),this[T](y.item,y,G),this.focusNode(y));G.stopPropagation();G.preventDefault()},_onClick:function(y,G){this.__click(y,G,this.openOnClick,
"onClick")},_onDblClick:function(y,G){this.__click(y,G,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(y){y=y.node;this.focusNode(y);y.isExpanded?this._collapseNode(y):this._expandNode(y)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(y){B.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(y)},_getRootOrFirstNode:function(){B.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(y){y._expandNodeDeferred&&delete y._expandNodeDeferred;if("Loading"!=y.state&&y.isExpanded){var G=y.collapse();this.onClose(y.item,y);this._state(y,!1);this._startPaint(G);return G}},_expandNode:function(y){if(y._expandNodeDeferred)return y._expandNodeDeferred;var G=this.model,R=y.item,T=this;y._loadDeferred||(y.markProcessing(),y._loadDeferred=new w,G.getChildren(R,function(U){y.unmarkProcessing();
y.setChildItems(U).then(function(){y._loadDeferred.resolve(U)})},function(U){console.error(T,": error loading "+y.label+" children: ",U);y._loadDeferred.reject(U)}));G=y._loadDeferred.then(b.hitch(this,function(){var U=y.expand();this.onOpen(y.item,y);this._state(y,!0);return U}));this._startPaint(G);return G},focusNode:function(y){for(var G=[],R=this.domNode;R&&R.tagName&&"IFRAME"!==R.tagName.toUpperCase();R=R.parentNode)G.push({domNode:R.contentWindow||R,scrollLeft:R.scrollLeft||0,scrollTop:R.scrollTop||
0});this.focusChild(y);this.defer(function(){for(var T=0,U=G.length;T<U;T++)G[T].domNode.scrollLeft=G[T].scrollLeft,G[T].domNode.scrollTop=G[T].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(y){var G=this.model.getIdentity(y);if(G=this._itemNodesMap[G]){var R=this.getLabel(y),T=this.getTooltip(y);x.forEach(G,function(U){U.set({item:y,label:R,tooltip:T});U._updateItemClasses(y)})}},_onItemChildrenChange:function(y,G){y=this.model.getIdentity(y);
(y=this._itemNodesMap[y])&&x.forEach(y,function(R){R.setChildItems(G)})},_onItemDelete:function(y){y=this.model.getIdentity(y);var G=this._itemNodesMap[y];G&&(x.forEach(G,function(R){this.dndController.removeTreeNode(R);var T=R.getParent();T&&T.removeChild(R);this.lastFocusedChild&&!c.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!c.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();R.destroyRecursive()},this),delete this._itemNodesMap[y])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var y=K(this.cookieName);y&&x.forEach(y.split(","),function(G){this._openedNodes[G]=!0},this)}},_state:function(y,G){if(!this.persist)return!1;var R=x.map(y.getTreePath(),function(T){return this.model.getIdentity(T)},this).join("/");if(1===arguments.length)return this._openedNodes[R];G?this._openedNodes[R]=!0:delete this._openedNodes[R];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var y=
[],G;for(G in this._openedNodes)y.push(G);K(this.cookieName,y.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!b.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(y){y&&f.setMarginBox(this.domNode,y);this._nodePixelIndent=f.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(b.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(y){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var G=b.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
m(y,G,G)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(y){return new M(y)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});u("dojo-bidi")&&P.extend({_setTextDirAttr:function(y){y&&this.textDir!=y&&(this._set("textDir",
y),this.rootNode.set("textDir",y))}});P.PathError=q("TreePathError");P._TreeNode=M;return P})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(x,E,K,J){return K("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(w){J.mixin(this,w);this.connects=[];w=this.store;if(!w.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
w.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([E.after(w,"onNew",J.hitch(this,"onNewItem"),!0),E.after(w,"onDelete",J.hitch(this,"onDeleteItem"),!0),E.after(w,"onSet",J.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var w;w=this.connects.pop();)w.remove()},getRoot:function(w,a){this.root?w(this.root):this.store.fetch({query:this.query,onComplete:J.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+c.length+
" items, but must return exactly one");this.root=c[0];w(this.root)}),onError:a})},mayHaveChildren:function(w){return x.some(this.childrenAttrs,function(a){return this.store.hasAttribute(w,a)},this)},getChildren:function(w,a,c){var d=this.store;if(d.isItemLoaded(w)){for(var f=[],l=0;l<this.childrenAttrs.length;l++){var q=d.getValues(w,this.childrenAttrs[l]);f=f.concat(q)}var n=0;this.deferItemLoadingUntilExpand||x.forEach(f,function(B){d.isItemLoaded(B)||n++});0==n?a(f):x.forEach(f,function(B,F){d.isItemLoaded(B)||
d.loadItem({item:B,onItem:function(b){f[F]=b;0==--n&&a(f)},onError:c})})}else{var u=J.hitch(this,arguments.callee);d.loadItem({item:w,onItem:function(B){u(B,a,c)},onError:c})}},isItem:function(w){return this.store.isItem(w)},fetchItemByIdentity:function(w){this.store.fetchItemByIdentity(w)},getIdentity:function(w){return this.store.getIdentity(w)},getLabel:function(w){return this.labelAttr?this.store.getValue(w,this.labelAttr):this.store.getLabel(w)},newItem:function(w,a,c){var d={parent:a,attribute:this.childrenAttrs[0]},
f;this.newItemIdAttr&&w[this.newItemIdAttr]?this.fetchItemByIdentity({identity:w[this.newItemIdAttr],scope:this,onItem:function(l){l?this.pasteItem(l,null,a,!0,c):(f=this.store.newItem(w,d))&&void 0!=c&&this.pasteItem(f,a,a,!1,c)}}):(f=this.store.newItem(w,d))&&void 0!=c&&this.pasteItem(f,a,a,!1,c)},pasteItem:function(w,a,c,d,f){var l=this.store,q=this.childrenAttrs[0];a&&x.forEach(this.childrenAttrs,function(u){if(l.containsValue(a,u,w)){if(!d){var B=x.filter(l.getValues(a,u),function(F){return F!=
w});l.setValues(a,u,B)}q=u}});if(c)if("number"==typeof f){var n=l.getValues(c,q).slice();n.splice(f,0,w);l.setValues(c,q,n)}else l.setValues(c,q,l.getValues(c,q).concat(w))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(w,a){a&&this.getChildren(a.item,J.hitch(this,function(c){this.onChildrenChange(a.item,c)}))},onDeleteItem:function(w){this.onDelete(w)},onSetItem:function(w,a){if(-1!=x.indexOf(this.childrenAttrs,a))this.getChildren(w,J.hitch(this,function(c){this.onChildrenChange(w,
c)}));else this.onChange(w)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(x,E,K,J,w){return E("dijit.tree.ForestStoreModel",w,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,c,d){a===
this.root?this.root.children?c(this.root.children):this.store.fetch({query:this.query,onComplete:J.hitch(this,function(f){this.root.children=f;c(f)}),onError:d}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var c=a.scope||K.global;a.onItem&&a.onItem.call(c,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===
this.root?this.root.label:this.inherited(arguments)},newItem:function(a,c,d){return c===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,c,d,f,l){if(c===this.root&&!f)this.onLeaveRoot(a);this.inherited(arguments,[a,c===this.root?null:c,d===this.root?null:d,f,l]);if(d===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,": item ",
a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:J.hitch(this,function(c){this.root.children=c;if(a.length!=c.length||x.some(a,function(d,f){return c[f]!=d}))this.onChildrenChange(this.root,c)})})},onNewItem:function(a,c){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){-1!=x.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,c,d,f){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(x,E,K,J,w,a,c,d,f,l,q){return E("dijit.tree._dndSelector",q,{constructor:function(){this.selection={};this.anchor=null;this.events.push(d(this.tree.domNode,f.press,J.hitch(this,"onMouseDown")),d(this.tree.domNode,f.release,J.hitch(this,"onMouseUp")),d(this.tree.domNode,f.move,J.hitch(this,
"onMouseMove")),d(this.tree.domNode,l.press,J.hitch(this,"onClickPress")),d(this.tree.domNode,l.release,J.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var n=[],u=this.selection,B;for(B in u)n.push(u[B]);return n},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(n,u){this.setSelection(this.getSelectedTreeNodes().concat([n]));u&&(this.anchor=n);return n},removeTreeNode:function(n){var u=
x.filter(this.getSelectedTreeNodes(),function(B){return!a.isDescendant(B.domNode,n.domNode)});this.setSelection(u);return n},isTreeNodeSelected:function(n){return n.id&&!!this.selection[n.id]},setSelection:function(n){var u=this.getSelectedTreeNodes();x.forEach(this._setDifference(u,n),J.hitch(this,function(B){B.setSelected(!1);this.anchor==B&&delete this.anchor;delete this.selection[B.id]}));x.forEach(this._setDifference(n,u),J.hitch(this,function(B){B.setSelected(!0);this.selection[B.id]=B}));this._updateSelectionProperties()},
_setDifference:function(n,u){x.forEach(u,function(B){B.__exclude__=!0});n=x.filter(n,function(B){return!B.__exclude__});x.forEach(u,function(B){delete B.__exclude__});return n},_updateSelectionProperties:function(){var n=this.getSelectedTreeNodes(),u=[],B=[];x.forEach(n,function(F){var b=F.getTreePath();B.push(F);u.push(b)},this);n=x.map(B,function(F){return F.item});this.tree._set("paths",u);this.tree._set("path",u[0]||[]);this.tree._set("selectedNodes",B);this.tree._set("selectedNode",B[0]||null);
this.tree._set("selectedItems",n);this.tree._set("selectedItem",n[0]||null)},onClickPress:function(n){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(n.target,this.current))){"mousedown"==n.type&&c.isLeft(n)&&n.preventDefault();var u="keydown"==n.type?this.tree.focusedChild:this.current;if(u){var B=w.getCopyKeyState(n),F=u.id;this.singular||n.shiftKey||!this.selection[F]?(this._doDeselect=!1,this.userSelect(u,B,n.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(n){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==n.type?this.tree.focusedChild:this.current,w.getCopyKeyState(n),n.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(n,u){if(n===u)return 0;if("sourceIndex"in document.documentElement)return n.sourceIndex-u.sourceIndex;if("compareDocumentPosition"in document.documentElement)return n.compareDocumentPosition(u)&2?1:-1;if(document.createRange){var B=doc.createRange();B.setStartBefore(n);
n=doc.createRange();n.setStartBefore(u);return B.compareBoundaryPoints(B.END_TO_END,n)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(n,u,B){if(this.singular)this.anchor==n&&u?this.selectNone():(this.setSelection([n]),this.anchor=n);else if(B&&this.anchor){u=this._compareNodes(this.anchor.rowNode,n.rowNode);B=this.anchor;0>u?u=B:(u=n,n=B);for(B=[];u!=n;)B.push(u),u=this.tree._getNext(u);B.push(n);this.setSelection(B)}else this.selection[n.id]&&
u?this.removeTreeNode(n):u?this.addTreeNode(n,!0):(this.setSelection([n]),this.anchor=n)},getItem:function(n){return{data:this.selection[n],type:["treeNode"]}},forInSelectedItems:function(n,u){u=u||K.global;for(var B in this.selection)n.call(u,this.getItem(B),B,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(x,E,K,J,w,a){return E("dijit.tree._dndContainer",null,{constructor:function(c,d){this.tree=
c;this.node=c.domNode;J.mixin(this,d);this.containerState="";K.add(this.node,"dojoDndContainer");this.events=[w(this.node,a.enter,J.hitch(this,"onOverEvent")),w(this.node,a.leave,J.hitch(this,"onOutEvent")),x.after(this.tree,"_onNodeMouseEnter",J.hitch(this,"onMouseOver"),!0),x.after(this.tree,"_onNodeMouseLeave",J.hitch(this,"onMouseOut"),!0),w(this.node,"dragstart, selectstart",function(f){f.preventDefault()})]},destroy:function(){for(var c;c=this.events.pop();)c.remove();this.node=this.parent=
null},onMouseOver:function(c){this.current=c},onMouseOut:function(){this.current=null},_changeState:function(c,d){var f="dojoDnd"+c;c=c.toLowerCase()+"State";K.replace(this.node,f+d,f+this[c]);this[c]=d},_addItemClass:function(c,d){K.add(c,"dojoDndItem"+d)},_removeItemClass:function(c,d){K.remove(c,"dojoDndItem"+d)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/Deferred","jimu/utils","jimu/ServiceBrowserRule"],function(x,E,K,J,w){var a={combineRules:function(c){var d=new w;E.forEach(c,function(f){E.forEach(f.leafTypes,function(l){0>d.leafTypes.indexOf(l)&&d.leafTypes.push(l)});E.forEach(f.serviceTypes,function(l){0>d.serviceTypes.indexOf(l)&&d.serviceTypes.push(l)})});d.getMatchedRule=function(f){var l=null;E.some(c,function(q){return q.isUrlContainsServiceType(f)?(l=q,!0):!1});return l};d.getItem=function(f){var l=null;return l=
(l=d.getMatchedRule(f))?l.getItem(f):d.defaultGetItem(f)};d.getSubItemUrls=function(f){var l=null;return l=(l=d.getMatchedRule(f))?l.getSubItemUrls(f):d.defaultGetSubItemUrls(f)};d.getIconImageName=function(f,l){var q="";if(f.url){var n=d.getMatchedRule(f.url);n&&"function"===typeof n.getIconImageName&&(q=n.getIconImageName(f,l))}return q};return d},getFeaturelayerServiceBrowserRule:function(c,d,f){c=x.clone(c);var l=["point","polyline","polygon"];x.isArrayLike(c)&&0<c.length?(c=E.filter(c,function(q){return 0<=
l.indexOf(q)}),0===c.length&&(c=l)):c=l;return a._getFeaturelayerServiceBrowserRule(c,d,f)},_getFeaturelayerServiceBrowserRule:function(c,d,f){return new w({types:c,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(l){var q=new K;this.isUrlEndWithServiceType(l,this.serviceTypes)?q=this.defaultGetItem(l):this.getRestInfo(l).then(x.hitch(this,function(n){n=this._getItemByLayerDefinition(l,
n);q.resolve(n)}),x.hitch(this,function(n){q.reject(n)}));return q},getSubItemUrls:function(l){var q=new K;return q=this.isUrlEndWithServiceType(l)?this._getSubUrlsByServiceUrl(l):this._getSubUrlsByGroupUrl(l)},getIconImageName:function(l,q){var n="";"MapServer"===l.type||"FeatureServer"===l.type?n=q?"mapserver_open.png":"mapserver_close.png":l.type===this._groupLayerType?n=q?"group_layer2.png":"group_layer1.png":l.type===this._featureLayerType?(l=J.getTypeByGeometryType(l.definition&&l.definition.geometryType),
"point"===l?n="point_layer1.png":"polyline"===l?n="line_layer1.png":"polygon"===l&&(n="polygon_layer1.png")):l.type===this._tableType?n="table.png":"root"===l.type&&this._currentUrl&&E.some(this.serviceTypes,x.hitch(this,function(u){return J.isStringEndWith(this._currentUrl,"/"+u)}))&&(n=q?"mapserver_open.png":"mapserver_close.png");return n},_getSubUrlsByServiceUrl:function(l){var q=new K;this.getRestInfo(l).then(x.hitch(this,function(n){var u=[];E.forEach(n.layers,x.hitch(this,function(B){0<=B.parentLayerId||
u.push(l+"/"+B.id)}));f&&E.forEach(n.tables,x.hitch(this,function(B){0<=B.parentLayerId||u.push(l+"/"+B.id)}));q.resolve(u)}),x.hitch(this,function(n){q.reject(n)}));return q},_getSubUrlsByGroupUrl:function(l){var q=new K;this.getRestInfo(l).then(x.hitch(this,function(n){var u=[];if(n.type===this._groupLayerType){var B=this._getServiceUrlByLayerUrl(l);u=E.map(n.subLayers||[],x.hitch(this,function(F){return B+"/"+F.id}))}q.resolve(u)}),x.hitch(this,function(n){q.reject(n)}));return q},_getItemByLayerDefinition:function(l,
q){var n=null,u=q.type;if(u===this._groupLayerType)n={name:q.name,type:u,url:l,definition:q};else if(u===this._featureLayerType||u===this._tableType){var B=!1;u===this._featureLayerType?B=this._validateEsriGeometryType(q.geometryType):u===this._tableType&&(B=!0);B&&(B=!1,(B=d?J.isFeaturelayerUrlSupportQuery(l,q.capabilities):!0)&&(n={name:q.name,type:u,url:l,definition:q}))}return n},_validateEsriGeometryType:function(l){l=J.getTypeByGeometryType(l);return 0<=this.types.indexOf(l)},_getServiceUrlByLayerUrl:function(l){for(var q=
"",n=0;n<this.serviceTypes.length;n++){var u=this.serviceTypes[n].toLowerCase(),B=l.toLowerCase().lastIndexOf("/"+u+"/");if(0<=B){q=l.slice(0,B+u.length+1);break}}return q}})},getGeocodeServiceBrowserRule:function(){return new w({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new w({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(c){var d=new K;this.isUrlEndWithServiceType(c)?d=this.defaultGetItem(c):this.getRestInfo(c).then(x.hitch(this,
function(f){d.resolve({name:f.displayName||f.name,type:"GPTask",url:c,definition:f})}),x.hitch(this,function(f){d.reject(f)}));return d},getSubItemUrls:function(c){var d=new K;this.isUrlEndWithServiceType(c)?this.getRestInfo(c).then(x.hitch(this,function(f){f=E.map(f.tasks||[],x.hitch(this,function(l){return c+"/"+l}));d.resolve(f)}),x.hitch(this,function(f){d.reject(f)})):d.resolve([]);return d},getIconImageName:function(c,d){d="";"GPServer"===c.type?d="toolbox.png":"GPTask"===c.type&&(d="tool.png");
return d}})},getImageServiceBrowserRule:function(c){return new w({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(d){var f=new K;this.isUrlEndWithServiceType(d)?this.defaultGetItem(d).then(x.hitch(this,function(l){c?J.isImageServiceSupportQuery(l.definition.capabilities)?f.resolve(l):f.resolve(null):f.resolve(l)}),x.hitch(this,function(l){f.reject(l)})):f.resolve(null);return f},getIconImageName:function(d,f){f="";"ImageServer"===d.type&&(f="image_layer.png");return f}})},
getQueryableServiceBrowserRule:function(){var c=a.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),d=a.getImageServiceBrowserRule(!0);return a.combineRules([c,d])}};return a})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(x,E,K,J,w,a,c){return x([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(d){E.mixin(this,d);E.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);E.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(d){return this.defaultGetItem(d)},getSubItemUrls:function(d){return this.defaultGetSubItemUrls(d)},getIconImageName:function(d,f){return""},defaultGetItem:function(d){var f=new J;d=d.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(d)){var l=d.split("/"),q=l[l.length-1],n=l[l.length-2];this.getRestInfo(d).then(E.hitch(this,function(u){f.resolve({name:n,type:q,url:d,definition:u})}),E.hitch(this,function(u){console.error(u);
f.reject({errorCode:"NETWORK_ERROR",error:u})}))}else f.resolve(null);return f},defaultGetSubItemUrls:function(d){d=new J;d.resolve([]);return d},getRestInfo:function(d){var f=new J;d=d.replace(/\/*$/g,"");var l=this._restInfoCache[d];if(l)f.resolve(l);else{l={url:d,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4};var q=c.findCredential(d);q&&q.token&&(l.content.token=q.token);a(l).then(E.hitch(this,function(n){this._restInfoCache[d]=n;f.resolve(n)}),function(n){f.reject(n)})}return f},
isServiceTypeSupported:function(d){d=d.toLowerCase();return K.some(this.serviceTypes,E.hitch(this,function(f){return f.toLowerCase()===d}))},isUrlEndWithServiceType:function(d){return K.some(this.serviceTypes,E.hitch(this,function(f){return w.isStringEndWith(d,"/"+f)}))},isUrlContainsServiceType:function(d){d=d.toLowerCase();return K.some(this.serviceTypes,E.hitch(this,function(f){f=f.toLowerCase();return 0<=d.indexOf("/"+f)}))}})})},"jimu/dijit/_GpServiceChooserContent":function(){define(["dojo/_base/declare",
"./_BasicServiceChooserContent","./GpServiceBrowser"],function(x,E,K){return x([E],{baseClass:"jimu-gp-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/myservice/GpServer","http://sampleserver6.arcgisonline.com/arcgis/rest/services/Elevation/ESRI_Elevation_World/GPServer/Viewshed"],_createServiceBrowser:function(J){return new K(J)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F){return x([E,K,J,a],{templateString:w,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=l.mixin({},window.jimuNls.common);this.nls=l.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
d.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(b){var k=new c;(this.url=b)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),k=this._onBtnValidateClick()):k.reject();return k},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?f.forEach(this._examples,l.hitch(this,function(k){d.create("div",{innerHTML:k,
"class":"example-url"},this.exampleTd)})):d.setStyle(this.exampleTr,"display","none");var b={multiple:this.multiple,_onTreeClick:l.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(b);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(n.after(this.urlInput,"validator",l.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(q(this.serviceBrowser,"error",l.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(b){},_validateUrl:function(b){b=b.replace(/\/*$/g,"");if((b=b.match(/\/rest\/services\/*(.*)/gi))&&0<b.length)if(b=b[0].replace(/\/rest\/services\/*/,"")){var k=b.split("/");if(1===k.length)return!0;if(2===k.length)return this.serviceBrowser.isServiceTypeSupported(k[1]);if(3<=k.length)return b=this.serviceBrowser.isServiceTypeSupported(k[1]),k=this.serviceBrowser.isServiceTypeSupported(k[2]),b||k}else return!0;else return!1},_afterUrlValidate:function(b){b&&
(b=this.urlInput.get("value"),b=this._validateUrl(b));b?d.removeClass(this.btnValidate,"jimu-state-disabled"):d.addClass(this.btnValidate,"jimu-state-disabled");return b},_onServiceBrowserError:function(b){this._showErrorMessage(b)},_showErrorMessage:function(b){b&&"string"===typeof b?(this.errorNode.innerHTML=b,d.addClass(this.errorSection,"visible")):d.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";d.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var b=new c;if(this.urlInput.validate()){var k=this.urlInput.get("value");this.serviceBrowser.setUrl(k).then(l.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.resolve()}),l.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.reject()}));this.emit("validate-click")}else b.reject();return b},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?d.removeClass(this.btnOk,"jimu-state-disabled"):
d.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var b=this.getSelectedItems();0<b.length&&this.emit("ok",b)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/PageUtils":function(){define([],function(){var x={};x.Orientation={Landscape:{Type:"Landscape",Text:window.jimuNls.report.landscape},Portrait:{Type:"Portrait",Text:window.jimuNls.report.portrait}};x.PageSizes={A0:{Height:46.8,Width:33.1,SizeName:window.jimuNls.report.a0,
MapLayout:"MAP_ONLY"},A1:{Height:33.1,Width:23.4,SizeName:window.jimuNls.report.a1,MapLayout:"MAP_ONLY"},A2:{Height:23.4,Width:16.5,SizeName:window.jimuNls.report.a2,MapLayout:"MAP_ONLY"},A3:{Height:16.5,Width:11.7,SizeName:window.jimuNls.report.a3,MapLayout:"A3"},A4:{Height:11.7,Width:8.3,SizeName:window.jimuNls.report.a4,MapLayout:"A4"},A5:{Height:8.3,Width:5.8,SizeName:window.jimuNls.report.a5,MapLayout:"MAP_ONLY"},Letter_ANSI_A:{Height:11,Width:8.5,SizeName:window.jimuNls.report.letter+" "+window.jimuNls.report.ansi_a,
MapLayout:"Letter ANSI A"},Tabloid_ANSI_B:{Height:17,Width:11,SizeName:window.jimuNls.report.tabloid+" "+window.jimuNls.report.ansi_b,MapLayout:"Tabloid ANSI B"},ANSI_C:{Height:22,Width:17,SizeName:window.jimuNls.report.ansi_c,MapLayout:"MAP_ONLY"},ANSI_D:{Height:34,Width:22,SizeName:window.jimuNls.report.ansi_d,MapLayout:"MAP_ONLY"},ANSI_E:{Height:44,Width:34,SizeName:window.jimuNls.report.ansi_e,MapLayout:"MAP_ONLY"},Legal:{Height:14,Width:8.5,SizeName:window.jimuNls.report.legal,MapLayout:"MAP_ONLY"},
Custom:window.jimuNls.common.custom};x.getPageSizeInPixels=function(E,K){return{Height:E.Height*K,Width:E.Width*K}};return x})},"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H,m,g,A,D,N,O){function L(C){return new m({command:C.name})}function z(C){return new m({buttonClass:H,command:C.name})}K=K("dijit.Editor",N,{plugins:null,extraPlugins:null,constructor:function(){q.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",g]);this._plugins=
[];this._editInterval=1E3*this.editActionInterval;if(n("ie")||n("trident")||n("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new J;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);q.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=w.getLocalization("dijit._editor",
"commands",this.lang);n("webkit")&&f.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new b({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));E.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);c.add(this.iframe.parentNode,"dijitEditorIFrameContainer");c.add(this.iframe,"dijitEditorIFrame");a.set(this.iframe,"allowTransparency",
!0);this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){E.forEach(this._plugins,function(C){C&&C.destroy&&C.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(C,Q){var S=q.isString(C)?{name:C}:q.isFunction(C)?{ctor:C}:C;if(!S.setEditor){var p={args:S,plugin:null,editor:this};S.name&&(m.registry[S.name]?p.plugin=m.registry[S.name](S):B.publish(O._scopeName+".Editor.getPlugin",p));if(!p.plugin)try{var e=
S.ctor||q.getObject(S.name)||x(S.name);e&&(p.plugin=new e(S))}catch(v){throw Error(this.id+": cannot find plugin ["+S.name+"]");}if(!p.plugin)throw Error(this.id+": cannot find plugin ["+S.name+"]");C=p.plugin}1<arguments.length?this._plugins[Q]=C:this._plugins.push(C);C.setEditor(this);q.isFunction(C.setToolbar)&&C.setToolbar(this.toolbar)},resize:function(C){C&&t.prototype.resize.apply(this,arguments)},layout:function(){var C=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+d.getPadBorderExtents(this.iframe.parentNode).h+
d.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=C+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(C){var Q,S=this.document.body,p=S.clientWidth,e=S.clientHeight,v=S.clientLeft,h=S.offsetWidth,r=S.offsetHeight,I=S.offsetLeft;/^rtl$/i.test(S.dir||"")?p<h&&C.x>p&&C.x<h&&(Q=!0):C.x<v&&C.x>I&&(Q=!0);Q||e<r&&C.y>e&&C.y<r&&(Q=!0);Q||(delete this._cursorToStart,delete this._savedSelection,"BODY"==C.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(C){this.customUndo&&this.endEditing(!0);"BODY"!=C.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(C){this._inEditing||(this._inEditing=!0,this._beginEditing(C));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(C){if(!this.customUndo||
"undo"!=C&&"redo"!=C){this.customUndo&&(this.endEditing(),this._beginEditing());var Q=this.inherited(arguments);this.customUndo&&this._endEditing();return Q}return this[C]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(C){try{var Q=this.document.execCommand(C,!1,null);if(n("webkit")&&!Q)throw{};}catch(S){Q=u.substitute,alert(Q(this.commands.systemShortcut,
[this.commands[C],Q(this.commands[n("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[C]])])),Q=!1}return Q},queryCommandEnabled:function(C){return!this.customUndo||"undo"!=C&&"redo"!=C?this.inherited(arguments):"undo"==C?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(C){var Q=C.mark,S=C.mark;C=C.isCollapsed;var p;if(S)if(9>n("ie")||9===n("ie")&&n("quirks"))if(q.isArray(S))Q=[],E.forEach(S,function(h){Q.push(D.getNode(h,this.editNode))},this),this.selection.moveToBookmark({mark:Q,
isCollapsed:C});else{if(S.startContainer&&S.endContainer&&(p=D.getSelection(this.window))&&p.removeAllRanges){p.removeAllRanges();C=D.create(this.window);var e=D.getNode(S.startContainer,this.editNode);var v=D.getNode(S.endContainer,this.editNode);e&&v&&(C.setStart(e,S.startOffset),C.setEnd(v,S.endOffset),p.addRange(C))}}else(p=D.getSelection(this.window))&&p.removeAllRanges&&(p.removeAllRanges(),C=D.create(this.window),e=D.getNode(S.startContainer,this.editNode),v=D.getNode(S.endContainer,this.editNode),
e&&v&&(C.setStart(e,S.startOffset),C.setEnd(v,S.endOffset),p.addRange(C)))},_changeToStep:function(C,Q){this.setValue(Q.text);(C=Q.bookmark)&&this._moveToBookmark(C)},undo:function(){var C=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var Q=this._steps.pop();Q&&0<this._steps.length&&(this.focus(),this._changeToStep(Q,this._steps[this._steps.length-1]),this._undoedSteps.push(Q),this.onDisplayChanged(),delete this._undoRedoActive,C=!0);delete this._undoRedoActive}return C},
redo:function(){var C=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var Q=this._undoedSteps.pop();Q&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],Q),this._steps.push(Q),this.onDisplayChanged(),C=!0);delete this._undoRedoActive}return C},endEditing:function(C){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(C),this._inEditing=!1)},_getBookmark:function(){var C=this.selection.getBookmark(),
Q=[];if(C&&C.mark){var S=C.mark;if(9>n("ie")||9===n("ie")&&n("quirks")){var p=D.getSelection(this.window);if(q.isArray(S))E.forEach(C.mark,function(v){Q.push(D.getIndex(v,this.editNode).o)},this),C.mark=Q;else if(p){var e;p.rangeCount&&(e=p.getRangeAt(0));C.mark=e?e.cloneRange():this.selection.getBookmark()}}try{C.mark&&C.mark.startContainer&&(Q=D.getIndex(C.mark.startContainer,this.editNode).o,C.mark={startContainer:Q,startOffset:C.mark.startOffset,endContainer:C.mark.endContainer===C.mark.startContainer?
Q:D.getIndex(C.mark.endContainer,this.editNode).o,endOffset:C.mark.endOffset})}catch(v){C.mark=null}}return C},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:A.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var C=A.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:C,bookmark:this._getBookmark()})},onKeyDown:function(C){n("ie")||this.iframe||C.keyCode!=l.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var Q=
C.keyCode;if(C.ctrlKey&&!C.shiftKey&&!C.altKey){if(90==Q||122==Q){C.stopPropagation();C.preventDefault();this.undo();return}if(89==Q||121==Q){C.stopPropagation();C.preventDefault();this.redo();return}}this.inherited(arguments);switch(Q){case l.ENTER:case l.BACKSPACE:case l.DELETE:this.beginEditing();break;case 88:case 86:if(C.ctrlKey&&!C.altKey&&!C.metaKey){this.endEditing();88==C.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!C.ctrlKey&&!C.altKey&&
!C.metaKey&&(C.keyCode<l.F1||C.keyCode>l.F15)){this.beginEditing();break}case l.ALT:this.endEditing();break;case l.UP_ARROW:case l.DOWN_ARROW:case l.LEFT_ARROW:case l.RIGHT_ARROW:case l.HOME:case l.END:case l.PAGE_UP:case l.PAGE_DOWN:this.endEditing(!0);case l.CTRL:case l.SHIFT:case l.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(C){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(C){this.customUndo?this.isClosed?this.setValue(C):(this.beginEditing(),C||(C="\x26#160;"),this.setValue(C),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(C){this.setValueDeferred.then(q.hitch(this,function(){!this.disabled&&C||!this._buttonEnabledPlugins&&C?
E.forEach(this._plugins,function(Q){Q.set("disabled",!0)}):this.disabled&&!C&&E.forEach(this._plugins,function(Q){Q.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&(f.set(this.document.body,"color",f.get(this.iframe,"color")),f.set(this.document.body,"background-color",f.get(this.iframe,"background-color")))}catch(C){}}});q.mixin(m.registry,{undo:L,redo:L,cut:L,copy:L,paste:L,insertOrderedList:L,insertUnorderedList:L,
indent:L,outdent:L,justifyCenter:L,justifyFull:L,justifyLeft:L,justifyRight:L,"delete":L,selectAll:L,removeFormat:L,unlink:L,insertHorizontalRule:L,bold:z,italic:z,underline:z,strikethrough:z,subscript:z,superscript:z,"|":function(){return new m({setEditor:function(C){this.editor=C;this.button=new k({ownerDocument:C.ownerDocument})}})}});return K})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(x,E,K,J,w,a,c,d){K("dijit-legacy-requires")&&w(0,function(){x(["dijit/ToolbarSeparator"])});return E("dijit.Toolbar",[a,d,c],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(x,E,K,J){return x("dijit.ToolbarSeparator",[K,J],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);E.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(x,E,K,J,w){E=E("dijit._editor._Plugin",J,{constructor:function(a){this.params=
a||{};K.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:w,disabled:!1,getLabel:function(a){return this.editor.commands[a]},_initButton:function(){if(this.command.length){var a=this.getLabel(this.command),c=this.editor,d=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(a=K.mixin({label:a,ownerDocument:c.ownerDocument,dir:c.dir,
lang:c.lang,showLabel:!1,iconClass:d,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete a.name,this.button=new this.buttonClass(a))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(a,c,d){this.own(x.connect(a,c,this,d))},updateState:function(){var a=this.editor,c=this.command;if(a&&a.isLoaded&&c.length){var d=this.get("disabled");if(this.button)try{var f=
a._implCommand(c);var l=!d&&(this[f]?this[f](c):a.queryCommandEnabled(c));this.enabled!==l&&(this.enabled=l,this.button.set("disabled",!l));if(l&&"boolean"==typeof this.button.checked){var q=a.queryCommandState(c);this.checked!==q&&(this.checked=q,this.button.set("checked",a.queryCommandState(c)))}}catch(n){console.log(n)}}},setEditor:function(a){this.editor=a;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",K.hitch(this.editor,
"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",K.hitch(this,"updateState")))},setToolbar:function(a){this.button&&a.addChild(this.button)},set:function(a,c){if("object"===typeof a){for(var d in a)this.set(d,a[d]);return this}d=this._getAttrNames(a);if(this[d.s])var f=this[d.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(a,c);return f||this},get:function(a){var c=this._getAttrNames(a);
return this[c.g]?this[c.g]():this[a]},_setDisabledAttr:function(a){this._set("disabled",a);this.updateState()},_getAttrNames:function(a){var c=this._attrPairNames;if(c[a])return c[a];var d=a.charAt(0).toUpperCase()+a.substr(1);return c[a]={s:"_set"+d+"Attr",g:"_get"+d+"Attr"}},_set:function(a,c){this[a]=c}});E.registry={};return E})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q){return x("dijit._editor.plugins.EnterKeyHandling",f,{blockNodeForEnter:"BR",constructor:function(n){n&&("blockNodeForEnter"in n&&(n.blockNodeForEnter=n.blockNodeForEnter.toUpperCase()),J.mixin(this,n))},setEditor:function(n){if(this.editor!==n)if(this.editor=n,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,n.onLoadDeferred.then(J.hitch(this,function(B){this.own(w(n.document,"keydown",J.hitch(this,function(F){if(F.keyCode==K.ENTER){var b=J.mixin({},F);b.shiftKey=
!0;this.handleEnterKey(b)||(F.stopPropagation(),F.preventDefault())}})));9<=a("ie")&&10>=a("ie")&&this.own(w(n.document,"paste",J.hitch(this,function(F){setTimeout(J.hitch(this,function(){var b=this.editor.document.selection.createRange();b.move("character",-1);b.select();b.move("character",1);b.select()}),0)})));return B}));else if(this.blockNodeForEnter){var u=J.hitch(this,"handleEnterKey");n.addKeyHandler(13,0,0,u);n.addKeyHandler(13,0,1,u);this.own(this.editor.on("KeyPressed",J.hitch(this,"onKeyPressed")))}},
onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var n=this.editor.selection.getAncestorElement("LI");if(n){a("mozilla")&&"LI"==n.parentNode.parentNode.nodeName&&(n=n.parentNode.parentNode);var u=n.firstChild;!u||1!=u.nodeType||"UL"!=u.nodeName&&"OL"!=u.nodeName||(n.insertBefore(u.ownerDocument.createTextNode("\u00a0"),u),u=q.create(this.editor.window),u.setStart(n.firstChild,0),n=q.getSelection(this.editor.window,!0),n.removeAllRanges(),n.addRange(u))}else l.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter),(n=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(n.innerHTML=this.bogusHtmlContent,9>=a("ie")&&(n=this.editor.document.selection.createRange(),n.move("character",-1),n.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",
blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(n){var u,B=this.editor.document,F;if(n.shiftKey){n=this.editor.selection.getParentElement();if(u=q.getAncestor(n,this.blockNodes)){if("LI"==u.tagName)return!0;n=q.getSelection(this.editor.window);var b=n.getRangeAt(0);b.collapsed||(b.deleteContents(),n=q.getSelection(this.editor.window),b=n.getRangeAt(0));if(q.atBeginningOfContainer(u,b.startContainer,b.startOffset)){var k=B.createElement("br");b=q.create(this.editor.window);u.insertBefore(k,
u.firstChild);b.setStartAfter(k);n.removeAllRanges();n.addRange(b)}else if(q.atEndOfContainer(u,b.startContainer,b.startOffset))b=q.create(this.editor.window),k=B.createElement("br"),u.appendChild(k),u.appendChild(B.createTextNode("\u00a0")),b.setStart(u.lastChild,0),n.removeAllRanges(),n.addRange(b);else{if((F=b.startContainer)&&3==F.nodeType){var t=F.nodeValue;var H=B.createTextNode(t.substring(0,b.startOffset));var m=B.createTextNode(t.substring(b.startOffset));u=B.createElement("br");""==m.nodeValue&&
a("webkit")&&(m=B.createTextNode("\u00a0"));E.place(H,F,"after");E.place(u,H,"after");E.place(m,u,"after");E.destroy(F);b=q.create(this.editor.window);b.setStart(m,0);n.removeAllRanges();n.addRange(b);return!1}return!0}}else n=q.getSelection(this.editor.window),n.rangeCount?(b=n.getRangeAt(0))&&b.startContainer&&(b.collapsed||(b.deleteContents(),n=q.getSelection(this.editor.window),b=n.getRangeAt(0)),(F=b.startContainer)&&3==F.nodeType?(u=b.startOffset,F.length<u&&(m=this._adjustNodeAndOffset(F,u),
F=m.node,u=m.offset),t=F.nodeValue,H=B.createTextNode(t.substring(0,u)),m=B.createTextNode(t.substring(u)),u=B.createElement("br"),m.length||(m=B.createTextNode("\u00a0")),H.length?E.place(H,F,"after"):H=F,E.place(u,H,"after"),E.place(m,u,"after"),E.destroy(F)):(0<=b.startOffset&&(k=F.childNodes[b.startOffset]),u=B.createElement("br"),m=B.createTextNode("\u00a0"),k?(E.place(u,k,"before"),E.place(m,u,"after")):(F.appendChild(u),F.appendChild(m))),b=q.create(this.editor.window),b.setStart(m,0),b.setEnd(m,
m.length),n.removeAllRanges(),n.addRange(b),this.editor.selection.collapse(!0)):l.prototype.execCommand.call(this.editor,"inserthtml","\x3cbr\x3e");return!1}var g=!0;n=q.getSelection(this.editor.window);b=n.getRangeAt(0);b.collapsed||(b.deleteContents(),n=q.getSelection(this.editor.window),b=n.getRangeAt(0));k=q.getBlockAncestor(b.endContainer,null,this.editor.editNode);var A=k.blockNode;if(this._checkListLater=A&&("LI"==A.nodeName||"LI"==A.parentNode.nodeName))return a("mozilla")&&(this._pressedEnterInBlock=
A),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(A.innerHTML)&&(A.innerHTML="",a("webkit")&&(b=q.create(this.editor.window),b.setStart(A,0),n.removeAllRanges(),n.addRange(b)),this._checkListLater=!1),!0;if(!k.blockNode||k.blockNode===this.editor.editNode){try{l.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(D){}k={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),
blockContainer:this.editor.editNode};if(k.blockNode){if(k.blockNode!=this.editor.editNode&&!(k.blockNode.textContent||k.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(k.blockNode),!1}else k.blockNode=this.editor.editNode;n=q.getSelection(this.editor.window);b=n.getRangeAt(0)}A=B.createElement(this.blockNodeForEnter);A.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(k.blockNode);m=b.endOffset;g=b.endContainer;g.length<m&&(m=this._adjustNodeAndOffset(g,m),g=
m.node,m=m.offset);if(q.atEndOfContainer(k.blockNode,g,m))k.blockNode===k.blockContainer?k.blockNode.appendChild(A):E.place(A,k.blockNode,"after"),g=!1,b=q.create(this.editor.window),b.setStart(A,0),n.removeAllRanges(),n.addRange(b),this.editor.height&&d.scrollIntoView(A);else if(q.atBeginningOfContainer(k.blockNode,b.startContainer,b.startOffset))E.place(A,k.blockNode,k.blockNode===k.blockContainer?"first":"before"),A.nextSibling&&this.editor.height&&(b=q.create(this.editor.window),b.setStart(A.nextSibling,
0),n.removeAllRanges(),n.addRange(b),d.scrollIntoView(A.nextSibling)),g=!1;else{k.blockNode===k.blockContainer?k.blockNode.appendChild(A):E.place(A,k.blockNode,"after");g=!1;k.blockNode.style&&A.style&&k.blockNode.style.cssText&&(A.style.cssText=k.blockNode.style.cssText);if((F=b.startContainer)&&3==F.nodeType){m=b.endOffset;F.length<m&&(m=this._adjustNodeAndOffset(F,m),F=m.node,m=m.offset);t=F.nodeValue;H=B.createTextNode(t.substring(0,m));m=B.createTextNode(t.substring(m,t.length));E.place(H,F,
"before");E.place(m,F,"after");E.destroy(F);for(b=H.parentNode;b!==k.blockNode;){t=B.createElement(b.tagName);b.style&&t.style&&b.style.cssText&&(t.style.cssText=b.style.cssText);"FONT"===b.tagName&&(b.color&&(t.color=b.color),b.face&&(t.face=b.face),b.size&&(t.size=b.size));for(;m;)F=m.nextSibling,t.appendChild(m),m=F;E.place(t,b,"after");H=b;m=t;b=b.parentNode}if(1==m.nodeType||3==m.nodeType&&m.nodeValue)A.innerHTML="";for(H=m;m;)F=m.nextSibling,A.appendChild(m),m=F}b=q.create(this.editor.window);
B=H;if("BR"!==this.blockNodeForEnter){for(;B;)u=B,B=F=B.firstChild;u&&u.parentNode?(A=u.parentNode,b.setStart(A,0),n.removeAllRanges(),n.addRange(b),this.editor.height&&d.scrollIntoView(A),a("mozilla")&&(this._pressedEnterInBlock=k.blockNode)):g=!0}else b.setStart(A,0),n.removeAllRanges(),n.addRange(b),this.editor.height&&d.scrollIntoView(A),a("mozilla")&&(this._pressedEnterInBlock=k.blockNode)}return g},_adjustNodeAndOffset:function(n,u){for(;n.length<u&&n.nextSibling&&3==n.nextSibling.nodeType;)u-=
n.length,n=n.nextSibling;return{node:n,offset:u}},removeTrailingBr:function(n){if(n=/P|DIV|LI/i.test(n.tagName)?n:this.editor.selection.getParentOfType(n,["P","DIV","LI"]))n.lastChild&&(1<n.childNodes.length&&3==n.lastChild.nodeType&&/^[\s\xAD]*$/.test(n.lastChild.nodeValue)||"BR"==n.lastChild.tagName)&&E.destroy(n.lastChild),n.childNodes.length||(n.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H,m,g,A,D,N,O,L,z,C,Q){var S=K("dijit._editor.RichText",[D,N],{constructor:function(p){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};p&&u.isString(p.value)&&(this.value=p.value);this.onLoadDeferred=new J},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[u.trim,u.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);k("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));k("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(k("ie")||k("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[u.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[u.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);H.publish(Q._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var p=u.hitch(this,function(h,r){return function(){return!this.execCommand(h,r)}}),e={b:p("bold"),i:p("italic"),u:p("underline"),a:p("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:p("formatblock",
"h1"),2:p("formatblock","h2"),3:p("formatblock","h3"),4:p("formatblock","h4"),"\\":p("insertunorderedlist")};k("ie")||(e.Z=p("redo"));for(var v in e)this.addKeyHandler(v,!0,!1,e[v])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(S._editorCommandsLocalized)this._local2NativeFormatNames=S._local2NativeFormatNames,this._native2LocalFormatNames=S._native2LocalFormatNames;else{S._editorCommandsLocalized=!0;S._local2NativeFormatNames={};
S._native2LocalFormatNames={};this._local2NativeFormatNames=S._local2NativeFormatNames;this._native2LocalFormatNames=S._native2LocalFormatNames;for(var p="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),e="",v,h=0;v=p[h++];)e="l"!==v.charAt(1)?e+("\x3c"+v+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+v+"\x3e\x3cbr/\x3e"):e+("\x3c"+v+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+v+"\x3e\x3cbr/\x3e");var r=d.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:e});this.ownerDocumentBody.appendChild(r);
p=u.hitch(this,function(){for(var I=r.firstChild;I;)try{this.selection.selectElement(I.firstChild);var M=I.tagName.toLowerCase();this._local2NativeFormatNames[M]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[M]]=M;I=I.nextSibling.nextSibling}catch(P){}d.destroy(r)});this.defer(p)}},open:function(p){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new J;this.isClosed||this.close();H.publish(Q._scopeName+"._editor.RichText::open",
this);1===arguments.length&&p.nodeName&&(this.domNode=p);var e=this.domNode;if(u.isString(this.value)){var v=this.value;e.innerHTML=""}else if(e.nodeName&&"textarea"==e.nodeName.toLowerCase()){var h=this.textarea=e;this.name=h.name;v=h.value;e=this.domNode=this.ownerDocument.createElement("div");e.setAttribute("widgetId",this.id);h.removeAttribute("widgetId");e.cssText=h.cssText;e.className+=" "+h.className;d.place(e,h,"before");var r=u.hitch(this,function(){l.set(h,{display:"block",position:"absolute",
top:"-1000px"});if(k("ie")){var y=h.style;this.__overflow=y.overflow;y.overflow="hidden"}});k("ie")?this.defer(r,10):r();if(h.form){var I=h.value;this.reset=function(){this.getValue()!==I&&this.replaceValue(I)};B(h.form,"submit",u.hitch(this,function(){a.set(h,"disabled",this.disabled);h.value=this.getValue()}))}}else v=z.getChildrenHtml(e),e.innerHTML="";this.value=v;e.nodeName&&"LI"===e.nodeName&&(e.innerHTML=" \x3cbr\x3e");this.header=e.ownerDocument.createElement("div");e.appendChild(this.header);
this.editingArea=e.ownerDocument.createElement("div");e.appendChild(this.editingArea);this.footer=e.ownerDocument.createElement("div");e.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!E.useXDomain||E.allowXdRichTextSave)){if((v=w.byId(Q._scopeName+"._editor.RichText.value"))&&""!==v.value){r=v.value.split(this._SEPARATOR);for(var M=0,P;P=r[M++];)if(P=P.split(this._NAME_CONTENT_SEP),P[0]===this.name){this.value=P[1];r=r.splice(M,1);v.value=r.join(this._SEPARATOR);
break}}S._globalSaveHandler||(S._globalSaveHandler={},m.addOnUnload(function(){for(var y in S._globalSaveHandler){var G=S._globalSaveHandler[y];u.isFunction(G)&&G()}}));S._globalSaveHandler[this.id]=u.hitch(this,"_saveContent")}this.isClosed=!1;v=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");v.id=this.id+"_iframe";v.style.border="none";v.style.width="100%";this._layoutMode?v.style.height="100%":7<=k("ie")?(this.height&&(v.style.height=this.height),this.minHeight&&(v.style.minHeight=
this.minHeight)):v.style.height=this.height?this.height:this.minHeight;v.frameBorder=0;v._loadFunc=u.hitch(this,function(y){this.window=y;this.document=y.document;this.selection=new O.SelectionManager(y);k("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});r=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");r=11>k("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+r+"');document.close()":"javascript: '"+
r+"'";this.editingArea.appendChild(v);v.src=r;"LI"===e.nodeName&&(e.lastChild.style.marginTop="-1.2em");c.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var p=l.getComputedStyle(this.domNode);if(this["aria-label"])var e=this["aria-label"];else{var v=F('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||w.byId(this["aria-labelledby"],this.ownerDocument);v&&(e=v.textContent||v.innerHTML||"")}v="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(e?" aria-label\x3d'"+t.escape(e)+"'":"")+"\x3e\x3c/div\x3e";var h=[p.fontWeight,p.fontSize,p.fontFamily].join(" "),r=p.lineHeight;r=0<=r.indexOf("px")?parseFloat(r)/parseFloat(p.fontSize):0<=r.indexOf("em")?parseFloat(r):"normal";var I="",M=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(P){P=P.replace(/^;/ig,"")+";";var y=P.split(":")[0];if(y){y=u.trim(y);y=y.toLowerCase();var G,R="";for(G=0;G<y.length;G++){var T=y.charAt(G);switch(T){case "-":G++,T=y.charAt(G).toUpperCase();default:R+=
T}}l.set(M.domNode,R,"")}I+=P+";"});this.iframe.setAttribute("title",e);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||q.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",e?"\x3ctitle\x3e"+t.escape(e)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",h,";\n",this.height||k("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",r,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",k("ie")||k("trident")||k("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",e?" aria-label\x3d'"+t.escape(e)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+I+"'\x3e",v,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var p=[];this.styleSheets&&(p=this.styleSheets.split(";"),this.styleSheets=
"");p=p.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var e="",v=0,h,r=A.get(this.ownerDocument);h=p[v++];)h=(new g(r.location,h)).toString(),this.editingAreaStyleSheets.push(h),e+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+h+'"/\x3e';return e},addStyleSheet:function(p){var e=p.toString(),v=A.get(this.ownerDocument);if("."===e.charAt(0)||"/"!==e.charAt(0)&&!p.host)e=(new g(v.location,e)).toString();-1<x.indexOf(this.editingAreaStyleSheets,e)||(this.editingAreaStyleSheets.push(e),
this.onLoadDeferred.then(u.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(e);else{var h=this.document.getElementsByTagName("head")[0],r=this.document.createElement("link");r.rel="stylesheet";r.type="text/css";r.href=e;h.appendChild(r)}})))},removeStyleSheet:function(p){var e=p.toString(),v=A.get(this.ownerDocument);if("."===e.charAt(0)||"/"!==e.charAt(0)&&!p.host)e=(new g(v.location,e)).toString();p=x.indexOf(this.editingAreaStyleSheets,e);-1!==p&&(delete this.editingAreaStyleSheets[p],
F('link[href\x3d"'+e+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(p){p=!!p;this._set("disabled",p);if(this.isLoaded){var e=k("ie")&&(this.isLoaded||!this.focusOnLoad);e&&(this.editNode.unselectable="on");this.editNode.contentEditable=!p;this.editNode.tabIndex=p?"-1":this.tabIndex;e&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(k("mozilla")&&!p&&this._mozSettingProps){p=this._mozSettingProps;for(var v in p)if(p.hasOwnProperty(v))try{this.document.execCommand(v,
!1,p[v])}catch(h){}}this._disabledOK=!0}},onLoad:function(p){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=C.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var e=this;this.beforeIframeNode=d.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=d.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){e.editNode.focus()};this.focusNode=
this.editNode;var v=this.events.concat(this.captureEvents),h=this.iframe?this.document:this.editNode;this.own.apply(this,x.map(v,function(r){var I=r.toLowerCase().replace(/^on/,"");return B(h,I,u.hitch(this,r))},this));this.own(B(h,"mouseup",u.hitch(this,"onClick")));k("ie")&&(this.own(B(this.document,"mousedown",u.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);k("webkit")&&(this._webkitListener=this.own(B(this.document,"mouseup",u.hitch(this,"onDisplayChanged")))[0],this.own(B(this.document,
"mousedown",u.hitch(this,function(r){r=r.target;!r||r!==this.document.body&&r!==this.document||this.defer("placeCursorAtEnd")}))));if(k("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(r){}this.isLoaded=!0;this.set("disabled",this.disabled);v=u.hitch(this,function(){this.setValue(p);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&b(u.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(v):v()},onKeyDown:function(p){if(p.keyCode===n.SHIFT||p.keyCode===n.ALT||p.keyCode===n.META||p.keyCode===n.CTRL)return!0;p.keyCode===n.TAB&&this.isTabIndent&&(p.stopPropagation(),p.preventDefault(),this.queryCommandEnabled(p.shiftKey?"outdent":"indent")&&this.execCommand(p.shiftKey?"outdent":"indent"));if(p.keyCode==n.TAB&&!this.isTabIndent&&!p.ctrlKey&&!p.altKey)return p.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>k("ie")&&p.keyCode===n.BACKSPACE&&"Control"===this.document.selection.type&&(p.stopPropagation(),p.preventDefault(),this.execCommand("delete"));k("ff")&&(p.keyCode===n.PAGE_UP||p.keyCode===n.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&p.preventDefault();var e=this._keyHandlers[p.keyCode],v=arguments;e&&!p.altKey&&x.some(e,function(h){if(!(h.shift^p.shiftKey||h.ctrl^(p.ctrlKey||p.metaKey)))return h.handler.apply(this,v)||p.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(p){q.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",p)},_setValueAttr:function(p){this.setValue(p)},_setDisableSpellCheckAttr:function(p){this.document?a.set(this.document.body,"spellcheck",!p):this.onLoadDeferred.then(u.hitch(this,function(){a.set(this.document.body,"spellcheck",!p)}));this._set("disableSpellCheck",p)},addKeyHandler:function(p,e,v,h){"string"==
typeof p&&(p=p.toUpperCase().charCodeAt(0));u.isArray(this._keyHandlers[p])||(this._keyHandlers[p]=[]);this._keyHandlers[p].push({shift:v||!1,ctrl:e||!1,handler:h})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(p){this.onDisplayChanged(p)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(p){(k("ie")||k("trident"))&&this.defer(function(){C.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var e=this.getValue(!0);if(e!==this.value)this.onChange(e);
this._set("value",e)},_onFocus:function(p){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!k("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>k("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(p,e){p=p.toLowerCase();"formatblock"===p?k("safari")&&void 0===e&&(p="heading"):"hilitecolor"!==p||k("mozilla")||(p="backcolor");return p},_implCommand:function(p){return"_"+this._normalizeCommand(p)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(p){var e=this._qcaCache[p];return void 0!==e?e:this._qcaCache[p]=this._queryCommandAvailable(p)},_queryCommandAvailable:function(p){switch(p.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return k("ie")||k("trident")||k("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!k("webkit");default:return!1}},execCommand:function(p,e){this.focused&&this.focus();p=this._normalizeCommand(p,e);if(void 0!==e){if("heading"===p)throw Error("unimplemented");"formatblock"===
p&&(k("ie")||k("trident"))&&(e="\x3c"+e+"\x3e")}var v="_"+p+"Impl";if(this[v])var h=this[v](e);else if((e=1<arguments.length?e:null)||"createlink"!==p)h=this.document.execCommand(p,!1,e);this.onDisplayChanged();return h},queryCommandEnabled:function(p){if(this.disabled||!this._disabledOK)return!1;p=this._normalizeCommand(p);var e=this._implCommand(p);return this[e]?this[e](p):this._browserQueryCommandEnabled(p)},queryCommandState:function(p){if(this.disabled||!this._disabledOK)return!1;p=this._normalizeCommand(p);
try{return this.document.queryCommandState(p)}catch(e){return!1}},queryCommandValue:function(p){if(this.disabled||!this._disabledOK)return!1;p=this._normalizeCommand(p);if(k("ie")&&"formatblock"===p)p=this._native2LocalFormatNames[this.document.queryCommandValue(p)];else if(k("mozilla")&&"hilitecolor"===p){try{var e=this.document.queryCommandValue("styleWithCSS")}catch(v){e=!1}this.document.execCommand("styleWithCSS",!1,!0);p=this.document.queryCommandValue(p);this.document.execCommand("styleWithCSS",
!1,e)}else p=this.document.queryCommandValue(p);return p},_sCall:function(p,e){return this.selection[p].apply(this.selection,e)},placeCursorAtStart:function(){this.focus();var p=!1;if(k("mozilla"))for(var e=this.editNode.firstChild;e;){if(3===e.nodeType){if(0<e.nodeValue.replace(/^\s+|\s+$/g,"").length){p=!0;this.selection.selectElement(e);break}}else if(1===e.nodeType){p=!0;var v=e.tagName?e.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(v)?this.selection.selectElement(e):
this.selection.selectElementChildren(e);break}e=e.nextSibling}else p=!0,this.selection.selectElementChildren(this.editNode);p&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var p=!1;if(k("mozilla"))for(var e=this.editNode.lastChild;e;){if(3===e.nodeType){if(0<e.nodeValue.replace(/^\s+|\s+$/g,"").length){p=!0;this.selection.selectElement(e);break}}else if(1===e.nodeType){p=!0;this.selection.selectElement(e.lastChild||e);break}e=e.previousSibling}else p=!0,this.selection.selectElementChildren(this.editNode);
p&&this.selection.collapse(!1)},getValue:function(p){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,p):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(p){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){p=this._preFilterContent(p);var e=this.isClosed?this.domNode:this.editNode;e.innerHTML=p;this._preDomFilterContent(e)}else this.textarea.value=p;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(u.hitch(this,function(){this.setValue(p)}))},replaceValue:function(p){this.isClosed?this.setValue(p):this.window&&this.window.getSelection&&!k("mozilla")?this.setValue(p):this.window&&this.window.getSelection?(p=this._preFilterContent(p),this.execCommand("selectall"),this.execCommand("inserthtml",p),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(p);this._set("value",this.getValue(!0))},_preFilterContent:function(p){var e=
p;x.forEach(this.contentPreFilters,function(v){v&&(e=v(e))});return e},_preDomFilterContent:function(p){p=p||this.editNode;x.forEach(this.contentDomPreFilters,function(e){e&&u.isFunction(e)&&e(p)},this)},_postFilterContent:function(p,e){if(u.isString(p))var v=p;else p=p||this.editNode,this.contentDomPostFilters.length&&(e&&(p=u.clone(p)),x.forEach(this.contentDomPostFilters,function(h){p=h(p)})),v=z.getChildrenHtml(p);u.trim(v.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(v="");x.forEach(this.contentPostFilters,
function(h){v=h(v)});return v},_saveContent:function(){var p=w.byId(Q._scopeName+"._editor.RichText.value");p&&(p.value&&(p.value+=this._SEPARATOR),p.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(p,e){p=p.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");e||(p=p.replace(/'/gm,"\x26#39;"));return p},getNodeHtml:function(p){q.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return z.getNodeHtml(p)},getNodeChildrenHtml:function(p){q.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return z.getChildrenHtml(p)},close:function(p){if(!this.isClosed){arguments.length||(p=!0);p&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);k("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var e=this.textarea.style;e.position="";e.left=e.top="";k("ie")&&(e.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;d.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;c.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);S._globalSaveHandler&&delete S._globalSaveHandler[this.id]},_removeMozBogus:function(p){return p.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(p){p=p.replace(/\sclass="webkit-block-placeholder"/gi,"");p=p.replace(/\sclass="apple-style-span"/gi,
"");return p=p.replace(/<meta charset="utf-8" \/>/gi,"")},_normalizeFontStyle:function(p){return p.replace(/<(\/)?strong([ >])/gi,"\x3c$1b$2").replace(/<(\/)?em([ >])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(p){return p.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(p){if(!p)return!1;
if(k("ie")||k("trident")||k("edge"))return this.focused&&!this.disabled;var e=9>k("ie")?this.document.selection.createRange():this.document;try{return e.queryCommandEnabled(p)}catch(v){return!1}},_createlinkEnabledImpl:function(){var p=!0;return p=k("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var p=!0;return p=k("mozilla")||k("webkit")||k("ie")||k("trident")||k("edge")?
this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var p=!0;return p=k("mozilla")||k("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var p=!0;k("webkit")?((p=this.window.getSelection())&&(p=p.toString()),p=!!p):p=this._browserQueryCommandEnabled("cut");return p},_copyEnabledImpl:function(){var p=!0;k("webkit")?((p=this.window.getSelection())&&(p=p.toString()),p=!!p):p=this._browserQueryCommandEnabled("copy");
return p},_pasteEnabledImpl:function(){var p=!0;return k("webkit")?!0:p=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(p){return k("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,p)},_unlinkImpl:function(p){return this.queryCommandEnabled("unlink")&&(k("mozilla")||k("webkit"))?(p=this.selection.getAncestorElement("a"),this.selection.selectElement(p),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",
!1,p)},_hilitecolorImpl:function(p){if(!this._handleTextColorOrProperties("hilitecolor",p))if(k("mozilla")){this.document.execCommand("styleWithCSS",!1,!0);console.log("Executing color command.");var e=this.document.execCommand("hilitecolor",!1,p);this.document.execCommand("styleWithCSS",!1,!1)}else e=this.document.execCommand("hilitecolor",!1,p);return e},_backcolorImpl:function(p){k("ie")&&(p=p?p:null);var e=this._handleTextColorOrProperties("backcolor",p);e||(e=this.document.execCommand("backcolor",
!1,p));return e},_forecolorImpl:function(p){k("ie")&&(p=p?p:null);var e=!1;(e=this._handleTextColorOrProperties("forecolor",p))||(e=this.document.execCommand("forecolor",!1,p));return e},_inserthtmlImpl:function(p){p=this._preFilterContent(p);var e=!0;if(9>k("ie")){var v=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var h=v.item(0);v.length;)v.remove(v.item(0));h.outerHTML=p}else v.pasteHTML(p);v.select()}else if(8>k("trident")){var r=L.getSelection(this.window);
if(r&&r.rangeCount&&r.getRangeAt){v=r.getRangeAt(0);v.deleteContents();var I=d.create("div");I.innerHTML=p;for(h=this.document.createDocumentFragment();p=I.firstChild;)var M=h.appendChild(p);v.insertNode(h);M&&(v=v.cloneRange(),v.setStartAfter(M),v.collapse(!1),r.removeAllRanges(),r.addRange(v))}}else k("mozilla")&&!p.length?this.selection.remove():e=this.document.execCommand("inserthtml",!1,p);return e},_boldImpl:function(p){var e=!1;if(k("ie")||k("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("bold");
e||(e=this.document.execCommand("bold",!1,p));return e},_italicImpl:function(p){var e=!1;if(k("ie")||k("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("italic");e||(e=this.document.execCommand("italic",!1,p));return e},_underlineImpl:function(p){var e=!1;if(k("ie")||k("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("underline");e||(e=this.document.execCommand("underline",!1,p));return e},_strikethroughImpl:function(p){var e=!1;if(k("ie")||k("trident"))this._adaptIESelection(),
e=this._adaptIEFormatAreaAndExec("strikethrough");e||(e=this.document.execCommand("strikethrough",!1,p));return e},_superscriptImpl:function(p){var e=!1;if(k("ie")||k("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("superscript");e||(e=this.document.execCommand("superscript",!1,p));return e},_subscriptImpl:function(p){var e=!1;if(k("ie")||k("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("subscript");e||(e=this.document.execCommand("subscript",!1,p));return e},
_fontnameImpl:function(p){if(k("ie")||k("trident"))var e=this._handleTextColorOrProperties("fontname",p);e||(e=this.document.execCommand("fontname",!1,p));return e},_fontsizeImpl:function(p){if(k("ie")||k("trident"))var e=this._handleTextColorOrProperties("fontsize",p);e||(e=this.document.execCommand("fontsize",!1,p));return e},_insertorderedlistImpl:function(p){var e=!1;if(k("ie")||k("trident")||k("edge"))e=this._adaptIEList("insertorderedlist",p);e||(e=this.document.execCommand("insertorderedlist",
!1,p));return e},_insertunorderedlistImpl:function(p){var e=!1;if(k("ie")||k("trident")||k("edge"))e=this._adaptIEList("insertunorderedlist",p);e||(e=this.document.execCommand("insertunorderedlist",!1,p));return e},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(p){var e=0;if(p&&p.childNodes){var v;for(v=0;v<p.childNodes.length;v++){var h=f.position(p.childNodes[v]);
e+=h.h}}return e},_isNodeEmpty:function(p,e){return 1===p.nodeType?0<p.childNodes.length?this._isNodeEmpty(p.childNodes[0],e):!0:3===p.nodeType?""===p.nodeValue.substring(e):!1},_removeStartingRangeFromRange:function(p,e){if(p.nextSibling)e.setStart(p.nextSibling,0);else{for(p=p.parentNode;p&&null==p.nextSibling;)p=p.parentNode;p&&e.setStart(p.nextSibling,0)}return e},_adaptIESelection:function(){var p=L.getSelection(this.window);if(p&&p.rangeCount&&!p.isCollapsed){for(var e=p.getRangeAt(0),v=e.startContainer,
h=e.startOffset;3===v.nodeType&&h>=v.length&&v.nextSibling;)h-=v.length,v=v.nextSibling;for(var r=null;this._isNodeEmpty(v,h)&&v!==r;)r=v,e=this._removeStartingRangeFromRange(v,e),v=e.startContainer,h=0;p.removeAllRanges();p.addRange(e)}},_adaptIEFormatAreaAndExec:function(p){var e=L.getSelection(this.window),v=this.document,h;if(p&&e&&e.isCollapsed){if(this.queryCommandValue(p)){p=this._tagNamesForCommand(p);var r=e.getRangeAt(0);var I=r.startContainer;if(3===I.nodeType){var M=r.endOffset;I.length<
M&&(M=this._adjustNodeAndOffset(P,M),I=M.node,M=M.offset)}for(;I&&I!==this.editNode;){var P=I.tagName?I.tagName.toLowerCase():"";if(-1<x.indexOf(p,P)){var y=I;break}I=I.parentNode}if(y&&(P=r.startContainer,p=v.createElement(y.tagName),d.place(p,y,"after"),P&&3===P.nodeType)){M=r.endOffset;P.length<M&&(M=this._adjustNodeAndOffset(P,M),P=M.node,M=M.offset);I=P.nodeValue;r=v.createTextNode(I.substring(0,M));var G=I.substring(M,I.length);G&&(h=v.createTextNode(G));d.place(r,P,"before");if(h){var R=v.createElement("span");
R.className="ieFormatBreakerSpan";d.place(R,P,"after");d.place(h,R,"after");h=R}d.destroy(P);M=r.parentNode;for(P=[];M!==y;){I=M.tagName;r={tagName:I};P.push(r);I=v.createElement(I);M.style&&I.style&&M.style.cssText&&(I.style.cssText=M.style.cssText,r.cssText=M.style.cssText);"FONT"===M.tagName&&(M.color&&(I.color=M.color,r.color=M.color),M.face&&(I.face=M.face,r.face=M.face),M.size&&(I.size=M.size,r.size=M.size));M.className&&(I.className=M.className,r.className=M.className);if(h)for(;h;)r=h.nextSibling,
I.appendChild(h),h=r;I.tagName==M.tagName?(R=v.createElement("span"),R.className="ieFormatBreakerSpan",d.place(R,M,"after"),d.place(I,R,"after")):d.place(I,M,"after");r=M;h=I;M=M.parentNode}if(h){if(1===h.nodeType||3===h.nodeType&&h.nodeValue)p.innerHTML="";for(;h;)r=h.nextSibling,p.appendChild(h),h=r}if(P.length){r=P.pop();h=v.createElement(r.tagName);r.cssText&&h.style&&(h.style.cssText=r.cssText);r.className&&(h.className=r.className);"FONT"===r.tagName&&(r.color&&(h.color=r.color),r.face&&(h.face=
r.face),r.size&&(h.size=r.size));for(d.place(h,p,"before");P.length;)r=P.pop(),y=v.createElement(r.tagName),r.cssText&&y.style&&(y.style.cssText=r.cssText),r.className&&(y.className=r.className),"FONT"===r.tagName&&(r.color&&(y.color=r.color),r.face&&(y.face=r.face),r.size&&(y.size=r.size)),h.appendChild(y),h=y;y=v.createTextNode(".");R.appendChild(y);h.appendChild(y)}else R=v.createElement("span"),R.className="ieFormatBreakerSpan",y=v.createTextNode("."),R.appendChild(y),d.place(R,p,"before");h=
L.create(this.window);h.setStart(y,0);h.setEnd(y,y.length);e.removeAllRanges();e.addRange(h);this.selection.collapse(!1);y.parentNode.innerHTML="";p.firstChild||d.destroy(p);return!0}return!1}r=e.getRangeAt(0);if((P=r.startContainer)&&3===P.nodeType)return M=r.startOffset,P.length<M&&(M=this._adjustNodeAndOffset(P,M),P=M.node,M=M.offset),I=P.nodeValue,r=v.createTextNode(I.substring(0,M)),G=I.substring(M),""!==G&&(h=v.createTextNode(I.substring(M))),R=v.createElement("span"),y=v.createTextNode("."),
R.appendChild(y),r.length?d.place(r,P,"after"):r=P,d.place(R,r,"after"),h&&d.place(h,R,"after"),d.destroy(P),h=L.create(this.window),h.setStart(y,0),h.setEnd(y,y.length),e.removeAllRanges(),e.addRange(h),v.execCommand(p),d.place(R.firstChild,R,"before"),d.destroy(R),h.setStart(y,0),h.setEnd(y,y.length),e.removeAllRanges(),e.addRange(h),this.selection.collapse(!1),y.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(p){var e=L.getSelection(this.window);if(e.isCollapsed&&e.rangeCount&&
!this.queryCommandValue(p)){var v=e.getRangeAt(0),h=v.startContainer;if(h&&3==h.nodeType&&!v.startOffset)return v="ul","insertorderedlist"===p&&(v="ol"),p=this.document.createElement(v),v=d.create("li",null,p),d.place(p,h,"before"),v.appendChild(h),d.create("br",null,p,"after"),p=L.create(this.window),p.setStart(h,0),p.setEnd(h,h.length),e.removeAllRanges(),e.addRange(p),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(p,e){var v=L.getSelection(this.window),h=this.document,
r,I;e=e||null;if(p&&v&&v.isCollapsed&&v.rangeCount){var M=v.getRangeAt(0);if((r=M.startContainer)&&3===r.nodeType){var P=M.startOffset;r.length<P&&(M=this._adjustNodeAndOffset(r,P),r=M.node,P=M.offset);var y=r.nodeValue;M=h.createTextNode(y.substring(0,P));""!==y.substring(P)&&(I=h.createTextNode(y.substring(P)));y=h.createElement("span");P=h.createTextNode(".");y.appendChild(P);h=h.createElement("span");y.appendChild(h);M.length?d.place(M,r,"after"):M=r;d.place(y,M,"after");I&&d.place(I,y,"after");
d.destroy(r);r=L.create(this.window);r.setStart(P,0);r.setEnd(P,P.length);v.removeAllRanges();v.addRange(r);if(k("webkit")){v="color";if("hilitecolor"===p||"backcolor"===p)v="backgroundColor";l.set(y,v,e);this.selection.remove();d.destroy(h);y.innerHTML="\x26#160;";this.selection.selectElement(y);this.focus()}else this.execCommand(p,e),d.place(y.firstChild,y,"before"),d.destroy(y),r.setStart(P,0),r.setEnd(P,P.length),v.removeAllRanges(),v.addRange(r),this.selection.collapse(!1),P.parentNode.removeChild(P);
return!0}}return!1},_adjustNodeAndOffset:function(p,e){for(;p.length<e&&p.nextSibling&&3===p.nextSibling.nodeType;)e-=p.length,p=p.nextSibling;return{node:p,offset:e}},_tagNamesForCommand:function(p){return"bold"===p?["b","strong"]:"italic"===p?["i","em"]:"strikethrough"===p?["s","strike"]:"superscript"===p?["sup"]:"subscript"===p?["sub"]:"underline"===p?["u"]:[]},_stripBreakerNodes:function(p){if(this.isLoaded)return F(".ieFormatBreakerSpan",p).forEach(function(e){for(;e.firstChild;)d.place(e.firstChild,
e,"before");d.destroy(e)}),p},_stripTrailingEmptyNodes:function(p){function e(v){return/^(p|div|br)$/i.test(v.nodeName)&&0==v.children.length&&/^[\s\xA0]*$/.test(v.textContent||v.innerText||"")||3===v.nodeType&&/^[\s\xA0]*$/.test(v.nodeValue)}for(;p.lastChild&&e(p.lastChild);)d.destroy(p.lastChild);return p},_setTextDirAttr:function(p){this._set("textDir",p);this.onLoadDeferred.then(u.hitch(this,function(){this.editNode.dir=p}))}});return S})},"dijit/_editor/range":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang"],function(x,E,K){var J={getIndex:function(c,d){for(var f=[],l=[],q=c,n,u;c!=d;){var B=0;for(n=c.parentNode;u=n.childNodes[B++];)if(u===c){--B;break}f.unshift(B);l.unshift(B-n.childNodes.length);c=n}if(0<f.length&&3==q.nodeType){for(u=q.previousSibling;u&&3==u.nodeType;)f[f.length-1]--,u=u.previousSibling;for(u=q.nextSibling;u&&3==u.nodeType;)l[l.length-1]++,u=u.nextSibling}return{o:f,r:l}},getNode:function(c,d){if(!K.isArray(c)||0==c.length)return d;var f=d;
x.every(c,function(l){if(0<=l&&l<f.childNodes.length)f=f.childNodes[l];else return f=null,!1;return!0});return f},getCommonAncestor:function(c,d,f){f=f||c.ownerDocument.body;var l=function(u){for(var B=[];u;)if(B.unshift(u),u!==f)u=u.parentNode;else break;return B};c=l(c);d=l(d);l=Math.min(c.length,d.length);for(var q=c[0],n=1;n<l;n++)if(c[n]===d[n])q=c[n];else break;return q},getAncestor:function(c,d,f){for(f=f||c.ownerDocument.body;c&&c!==f;){var l=c.nodeName.toUpperCase();if(d.test(l))return c;
c=c.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(c,d,f){f=f||c.ownerDocument.body;d=d||J.BlockTagNames;for(var l=null,q;c&&c!==f;){var n=c.nodeName.toUpperCase();!l&&d.test(n)&&(l=c);!q&&/^(?:BODY|TD|TH|CAPTION)$/.test(n)&&(q=c);c=c.parentNode}return{blockNode:l,blockContainer:q||c.ownerDocument.body}},atBeginningOfContainer:function(c,d,f){var l=!1,q=0==f;q||3!=d.nodeType||/^[\s\xA0]+$/.test(d.nodeValue.substr(0,f))&&(q=
!0);if(q)for(l=!0;d&&d!==c;){if(d.previousSibling){l=!1;break}d=d.parentNode}return l},atEndOfContainer:function(c,d,f){var l=!1,q=f==(d.length||d.childNodes.length);q||3!=d.nodeType||/^[\s\xA0]+$/.test(d.nodeValue.substr(f))&&(q=!0);if(q)for(l=!0;d&&d!==c;){if(d.nextSibling){l=!1;break}d=d.parentNode}return l},adjacentNoneTextNode:function(c,d){var f=c;c=0-c.length||0;for(d=d?"nextSibling":"previousSibling";f&&3==f.nodeType;)c+=f.length,f=f[d];return[f,c]},create:function(c){c=c||window;return c.getSelection?
c.document.createRange():new a},getSelection:function(c,d){if(c.getSelection)return c.getSelection();c=new w.selection(c);d||c._getCurrentSelection();return c}};if(!window.getSelection)var w=J.ie={cachedSelection:{},selection:function(c){this._ranges=[];this.addRange=function(d,f){this._ranges.push(d);f||d._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(d){return this._ranges[d]};this._getCurrentSelection=function(){this.removeAllRanges();
var d=c.document.selection.createRange();d="CONTROL"==c.document.selection.type.toUpperCase()?new a(w.decomposeControlRange(d)):new a(w.decomposeTextRange(d));this.addRange(d,!0),this.isCollapsed=d.collapsed}},decomposeControlRange:function(c){var d=c.item(0),f=c.item(c.length-1);c=d.parentNode;var l=f.parentNode;d=J.getIndex(d,c).o[0];f=J.getIndex(f,l).o[0]+1;return[c,d,l,f]},getEndPoint:function(c,d){var f=c.duplicate();f.collapse(!d);var l="EndTo"+(d?"End":"Start"),q=f.parentElement(),n;if(0<q.childNodes.length)x.every(q.childNodes,
function(F,b){if(3!=F.nodeType)if(f.moveToElementText(F),0<f.compareEndPoints(l,c))if(n&&3==n.nodeType){u=n;var k=!0}else return u=q,B=b,!1;else{if(b==q.childNodes.length-1)return u=q,B=q.childNodes.length,!1}else b==q.childNodes.length-1&&(u=F,k=!0);if(k&&u)return u=(F=J.adjacentNoneTextNode(u)[0])?F.nextSibling:q.firstChild,b=J.adjacentNoneTextNode(u),F=b[0],b=b[1],F?(f.moveToElementText(F),f.collapse(!1)):f.moveToElementText(q),f.setEndPoint(l,c),B=f.text.length-b,!1;n=F;return!0});else{var u=
q;var B=0}d||1!=u.nodeType||B!=u.childNodes.length||(d=u.nextSibling)&&3==d.nodeType&&(u=d,B=0);return[u,B]},setEndPoint:function(c,d,f){c=c.duplicate();var l;if(3!=d.nodeType)if(0<f){if(l=d.childNodes[f-1])if(3==l.nodeType)d=l,f=l.length;else if(l.nextSibling&&3==l.nextSibling.nodeType)d=l.nextSibling,f=0;else{c.moveToElementText(l.nextSibling?l:d);var q=l.parentNode;l=q.insertBefore(l.ownerDocument.createTextNode(" "),l.nextSibling);c.collapse(!1);q.removeChild(l)}}else c.moveToElementText(d),c.collapse(!0);
3==d.nodeType&&(l=J.adjacentNoneTextNode(d),q=l[0],l=l[1],q?(c.moveToElementText(q),c.collapse(!1),"inherit"!=q.contentEditable&&l++):(c.moveToElementText(d.parentNode),c.collapse(!0),c.move("character",1),c.move("character",-1)),f+=l,0<f&&c.move("character",f)!=f&&console.error("Error when moving!"));return c},decomposeTextRange:function(c){var d=w.getEndPoint(c),f=d[0],l=d[1],q=d[0];d=d[1];c.htmlText.length&&(c.htmlText==c.text?d=l+c.text.length:(d=w.getEndPoint(c,!0),q=d[0],d=d[1]));return[f,l,
q,d]},setRange:function(c,d,f,l,q,n){d=w.setEndPoint(c,d,f);c.setEndPoint("StartToStart",d);if(!n)var u=w.setEndPoint(c,l,q);c.setEndPoint("EndToEnd",u||d);return c}},a=J.W3CRange=E(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=
this.startContainer!==this.endContainer?J.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(c,d){d=parseInt(d);if(this.startContainer!==c||this.startOffset!=d)delete this._cachedBookmark,this.startContainer=c,this.startOffset=d,this.endContainer?this._updateInternal():this.setEnd(c,d)},setEnd:function(c,d){d=parseInt(d);if(this.endContainer!==c||this.endOffset!=d)delete this._cachedBookmark,
this.endContainer=c,this.endOffset=d,this.startContainer?this._updateInternal():this.setStart(c,d)},setStartAfter:function(c,d){this._setPoint("setStart",c,d,1)},setStartBefore:function(c,d){this._setPoint("setStart",c,d,0)},setEndAfter:function(c,d){this._setPoint("setEnd",c,d,1)},setEndBefore:function(c,d){this._setPoint("setEnd",c,d,0)},_setPoint:function(c,d,f,l){f=J.getIndex(d,d.parentNode).o;this[c](d.parentNode,f.pop()+l)},_getIERange:function(){var c=(this._body||this.endContainer.ownerDocument.body).createTextRange();
w.setRange(c,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return c},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var c=this.startContainer,d=this._getIERange();3!==c.nodeType||this.startOffset||this.setStartBefore(c);d.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var c=new a([this.startContainer,
this.startOffset,this.endContainer,this.endOffset]);c._body=this._body;return c},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});K.setObject("dijit.range",J);return J})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(x,E,K){var J={};E.setObject("dijit._editor.html",J);var w=J.escapeXml=function(a,c){a=a.replace(/&/gm,"\x26amp;").replace(/</gm,
"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");c||(a=a.replace(/'/gm,"\x26#39;"));return a};J.getNodeHtml=function(a){var c=[];J.getNodeHtmlHelper(a,c);return c.join("")};J.getNodeHtmlHelper=function(a,c){switch(a.nodeType){case 1:var d=a.nodeName.toLowerCase();if(!d||"/"==d.charAt(0))return"";c.push("\x3c",d);var f=[],l={},q;if(K("dom-attributes-explicit")||K("dom-attributes-specified-flag"))for(var n=0;q=a.attributes[n++];){var u=q.name;"_dj"===u.substr(0,3)||K("dom-attributes-specified-flag")&&
!q.specified||u in l||(q=q.value,("src"==u||"href"==u)&&a.getAttribute("_djrealurl")&&(q=a.getAttribute("_djrealurl")),8===K("ie")&&"style"===u&&(q=q.replace("HEIGHT:","height:").replace("WIDTH:","width:")),f.push([u,q]),l[u]=q)}else{var B=(/^input$|^img$/i.test(a.nodeName)?a:a.cloneNode(!1)).outerHTML;l=B.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);B=B.substr(0,B.indexOf("\x3e"));x.forEach(l,function(F){if(F){var b=F.indexOf("\x3d");if(0<b&&(F=F.substring(0,b),"_dj"!=F.substr(0,3)))if("src"!=F&&"href"!=
F||!a.getAttribute("_djrealurl")){switch(F){case "style":var k=a.style.cssText.toLowerCase();break;case "class":k=a.className;break;case "width":if("img"===d){(b=/width=(\S+)/i.exec(B))&&(k=b[1]);break}case "height":if("img"===d){(b=/height=(\S+)/i.exec(B))&&(k=b[1]);break}default:k=a.getAttribute(F)}null!=k&&f.push([F,k.toString()])}else f.push([F,a.getAttribute("_djrealurl")])}},this)}f.sort(function(F,b){return F[0]<b[0]?-1:F[0]==b[0]?0:1});for(l=0;q=f[l++];)c.push(" ",q[0],'\x3d"',"string"===
typeof q[1]?w(q[1],!0):q[1],'"');switch(d){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":c.push(" /\x3e");break;case "script":c.push("\x3e",a.innerHTML,"\x3c/",d,"\x3e");break;default:c.push("\x3e"),a.hasChildNodes()&&J.getChildrenHtmlHelper(a,c),c.push("\x3c/",d,"\x3e")}break;case 4:case 3:c.push(w(a.nodeValue,!0));break;case 8:c.push("\x3c!--",w(a.nodeValue,!0),"--\x3e");break;default:c.push("\x3c!-- Element not recognized - Type: ",a.nodeType," Name: ",
a.nodeName,"--\x3e")}};J.getChildrenHtml=function(a){var c=[];J.getChildrenHtmlHelper(a,c);return c.join("")};J.getChildrenHtmlHelper=function(a,c){if(a)for(var d=a.childNodes||a,f=!K("ie")||d!==a,l,q=0;l=d[q++];)f&&l.parentNode!=a||J.getNodeHtmlHelper(l,c)};return J})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u){var B=K("dijit._editor.plugins.LinkDialog",q,{allowUnsafeHtml:!1,linkFilter:[[/</g,"\x26lt;"]],buttonClass:n,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=a.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(b){x("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),a.hitch(this,function(k,t,H){var m=this;this.tag="insertImage"==this.command?"img":"a";k=a.delegate(k.getLocalization("dijit","common",this.lang),k.getLocalization("dijit._editor",
"LinkDialog",this.lang));var g=this.dropDown=this.button.dropDown=new t({title:k[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:a.hitch(this,"setValue"),onOpen:function(){m._onOpenDialog();t.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(a.hitch(m,"_onCloseDialog"),0)}});k.urlRegExp=this.urlRegExp;k.id=H.getUniqueId(this.editor.id);this._uniqueId=k.id;this._setContent(g.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
l.substitute(this.linkDialogTemplate,k));g.startup();this._urlInput=H.byId(this._uniqueId+"_urlInput");this._textInput=H.byId(this._uniqueId+"_textInput");this._setButton=H.byId(this._uniqueId+"_setButton");this.own(H.byId(this._uniqueId+"_cancelButton").on("click",a.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",a.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",a.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=a.hitch(this,function(){var A=this._urlInput.get("value");return this._urlRegExp.test(A)||this._emailRegExp.test(A)});this.own(c(g.domNode,"keydown",a.hitch(this,a.hitch(this,function(A){!A||A.keyCode!=w.ENTER||A.shiftKey||A.metaKey||A.ctrlKey||A.altKey||this._setButton.get("disabled")||(g.onExecute(),g.execute(g.get("value")))}))));b()}))},_checkAndFixInput:function(){var b=this,k=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var t=k,H=!1,m=!1;t&&1<t.length&&(t=a.trim(t),0!==t.indexOf("mailto:")&&(0<t.indexOf("/")?-1===t.indexOf("://")&&"/"!==t.charAt(0)&&t.indexOf("./")&&0!==t.indexOf("../")&&b._hostRxp.test(t)&&(H=!0):b._userAtRxp.test(t)&&(m=!0)));H&&b._urlInput.set("value","http://"+t);m&&b._urlInput.set("value","mailto:"+t);b._setButton.set("disabled",!b._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(a.hitch(this,
function(){this.own(c(this.editor.editNode,"mouseup",a.hitch(this,"_onMouseUp")));this.own(c(this.editor.editNode,"dblclick",a.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(b){this.dropDown.set({parserScope:"dojo",content:b})},_checkValues:function(b){b&&b.urlInput&&(b.urlInput=b.urlInput.replace(/"/g,"\x26quot;"));!this.allowUnsafeHtml&&b&&b.textInput&&("function"===typeof this.linkFilter?b.textInput=this.linkFilter(b.textInput):
E.forEach(this.linkFilter,function(k){b.textInput=b.textInput.replace(k[0],k[1])}));return b},_createlinkEnabledImpl:function(){return!0},setValue:function(b){this._onCloseDialog();if(9>d("ie")){var k=u.getSelection(this.editor.window).getRangeAt(0).endContainer;3===k.nodeType&&(k=k.parentNode);k&&k.nodeName&&k.nodeName.toLowerCase()!==this.tag&&(k=this.editor.selection.getSelectedElement(this.tag));k&&k.nodeName&&k.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(k),
this.editor.execCommand("unlink"))}b=this._checkValues(b);this.editor.execCommand("inserthtml",l.substitute(this.htmlTemplate,b));f("a",this.editor.document).forEach(function(t){t.innerHTML||J.has(t,"name")||t.parentNode.removeChild(t)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(b){if(b&&b.tagName.toLowerCase()===this.tag){var k=b.getAttribute("_djrealurl")||b.getAttribute("href");var t=b.getAttribute("target")||"_self";var H=b.textContent||
b.innerText;this.editor.selection.selectElement(b,!0)}else H=this.editor.selection.getSelectedText();return{urlInput:k||"",textInput:H||"",targetSelect:t||""}},_onOpenDialog:function(){if(d("ie")){var b=u.getSelection(this.editor.window);if(b.rangeCount){var k=b.getRangeAt(0);var t=k.endContainer;3===t.nodeType&&(t=t.parentNode);t&&t.nodeName&&t.nodeName.toLowerCase()!==this.tag&&(t=this.editor.selection.getSelectedElement(this.tag));if(!t||t.nodeName&&t.nodeName.toLowerCase()!==this.tag)(b=this.editor.selection.getAncestorElement(this.tag))&&
b.nodeName&&b.nodeName.toLowerCase()==this.tag?(t=b,this.editor.selection.selectElement(t)):k.startContainer===k.endContainer&&(b=k.startContainer.firstChild)&&b.nodeName&&b.nodeName.toLowerCase()==this.tag&&(t=b,this.editor.selection.selectElement(t))}}else t=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(t))},_onDblClick:function(b){if(b&&b.target&&(b=b.target,(b.tagName?b.tagName.toLowerCase():
"")===this.tag&&J.get(b,"href"))){var k=this.editor;this.editor.selection.selectElement(b);k.onDisplayChanged();k._updateTimer&&(k._updateTimer.remove(),delete k._updateTimer);k.onNormalizedDisplayChanged();var t=this.button;setTimeout(function(){t.set("disabled",!1);t.loadAndOpenDropDown().then(function(){t.dropDown.focus&&t.dropDown.focus()})},10)}},_onMouseUp:function(){if(d("ff")){var b=this.editor.selection.getAncestorElement(this.tag);if(b){var k=u.getSelection(this.editor.window).getRangeAt(0);
if(k.collapsed&&b.childNodes.length){var t=k.cloneRange();t.selectNodeContents(b.childNodes[b.childNodes.length-1]);t.setStart(b.childNodes[0],0);1!==k.compareBoundaryPoints(t.START_TO_START,t)?k.setStartBefore(b):-1!==k.compareBoundaryPoints(t.END_TO_START,t)&&k.setStartAfter(b)}}}}}),F=K("dijit._editor.plugins.ImgLinkDialog",[B],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(b){if(b&&b.tagName.toLowerCase()===this.tag){var k=b.getAttribute("_djrealurl")||b.getAttribute("src");var t=b.getAttribute("alt");this.editor.selection.selectElement(b,!0)}else t=this.editor.selection.getSelectedText();return{urlInput:k||"",textInput:t||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);
this.editor.onLoadDeferred.then(a.hitch(this,function(){this.own(c(this.editor.editNode,"mousedown",a.hitch(this,"_selectTag")))}))},_selectTag:function(b){b&&b.target&&(b=b.target,(b.tagName?b.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(b))},_checkValues:function(b){b&&b.urlInput&&(b.urlInput=b.urlInput.replace(/"/g,"\x26quot;"));b&&b.textInput&&(b.textInput=b.textInput.replace(/"/g,"\x26quot;"));return b},_onDblClick:function(b){if(b&&b.target&&(b=b.target,(b.tagName?
b.tagName.toLowerCase():"")===this.tag&&J.get(b,"src"))){var k=this.editor;this.editor.selection.selectElement(b);k.onDisplayChanged();k._updateTimer&&(k._updateTimer.remove(),delete k._updateTimer);k.onNormalizedDisplayChanged();var t=this.button;setTimeout(function(){t.set("disabled",!1);t.loadAndOpenDropDown().then(function(){t.dropDown.focus&&t.dropDown.focus()})},10)}}});q.registry.createLink=function(b){var k={command:"createLink",allowUnsafeHtml:"allowUnsafeHtml"in b?b.allowUnsafeHtml:!1};
"linkFilter"in b&&(k.linkFilter=b.linkFilter);return new B(k)};q.registry.insertImage=function(){return new F({command:"insertImage"})};B.ImgLinkDialog=F;return B})},"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t){var H=K("dijit._editor.plugins.ViewSource",F,{stripScripts:!0,stripComments:!0,stripIFrames:!0,stripEventHandlers:!0,readOnly:!1,_fsPlugin:null,toggle:function(){n("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var m=d.getLocalization("dijit._editor","commands"),g=this.editor;this.button=new b({label:m.viewSource,ownerDocument:g.ownerDocument,dir:g.dir,lang:g.lang,showLabel:!1,iconClass:this.iconClassPrefix+
" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:l.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(m){this.editor=m;this._initButton();this.removeValueFilterHandles();this._setValueFilterHandle=E.before(this.editor,"setValue",l.hitch(this,function(g){return[this._filter(g)]}));this._getValueFilterHandle=E.after(this.editor,"getValue",l.hitch(this,function(g){return this._filter(g)}));this.editor.addKeyHandler(f.F12,!0,!0,l.hitch(this,function(g){this.button.focus();
this.toggle();g.stopPropagation();g.preventDefault();setTimeout(l.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(m){var g=this.editor,A=g._plugins;this._sourceShown=m;var D=this;try{this.sourceArea||this._createSourceView();if(m)g._sourceQueryCommandEnabled=g.queryCommandEnabled,g.queryCommandEnabled=function(O){return"viewsource"===O.toLowerCase()},this.editor.onDisplayChanged(),x.forEach(A,function(O){!O||O instanceof H||!O.isInstanceOf(F)||O.set("disabled",
!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return D.sourceArea}),this.sourceArea.value=g.get("value"),this.sourceArea.style.height=g.iframe.style.height,this.sourceArea.style.width=g.iframe.style.width,g.iframe.parentNode.style.position="relative",c.set(g.iframe,{position:"absolute",top:0,visibility:"hidden"}),c.set(this.sourceArea,{display:"block"}),this._resizeHandle=q(window,"resize",l.hitch(this,function(){var O=u.getBox(g.ownerDocument);"_prevW"in this&&"_prevH"in this&&
O.w===this._prevW&&O.h===this._prevH||(this._prevW=O.w,this._prevH=O.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(l.hitch(this,function(){delete this._resizer;this._resize()}),10))})),setTimeout(l.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=l.hitch(this,function(){var O=this.sourceArea.value;return O=this._filter(O)}),this._setListener=E.after(this.editor,
"setValue",l.hitch(this,function(O){this.sourceArea.value=O||""}),!0);else{if(!g._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);g.queryCommandEnabled=g._sourceQueryCommandEnabled;if(!this._readOnly){var N=this.sourceArea.value;g.beginEditing();g.set("value",N);g.endEditing()}x.forEach(A,function(O){O&&
O.isInstanceOf(F)&&O.set("disabled",!1)});c.set(this.sourceArea,"display","none");c.set(g.iframe,{position:"relative",visibility:"visible"});delete g._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(l.hitch(this,function(){var O=g.domNode.parentNode;O&&(O=t.getEnclosingWidget(O))&&O.resize&&O.resize();g.resize()}),300)}catch(O){console.log(O)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var m=this.editor,g=m.getHeaderHeight(),A=
m.getFooterHeight(),D=a.position(m.domNode),N=a.getPadBorderExtents(m.iframe.parentNode),O=a.getMarginExtents(m.iframe.parentNode),L=a.getPadBorderExtents(m.domNode),z=D.w-L.w;D=D.h-(g+L.h+A);this._fsPlugin&&this._fsPlugin.isFullscreen&&(m=u.getBox(m.ownerDocument),z=m.w-L.w,D=m.h-(g+L.h+A));a.setMarginBox(this.sourceArea,{w:Math.round(z-(N.w+O.w)),h:Math.round(D-(N.h+O.h))})},_createSourceView:function(){var m=this.editor,g=m._plugins;this.sourceArea=w.create("textarea");this.readOnly&&(J.set(this.sourceArea,
"readOnly",!0),this._readOnly=!0);c.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});J.set(this.sourceArea,"aria-label",this.editor.id);w.place(this.sourceArea,m.iframe,"before");n("ie")&&m.iframe.parentNode.lastChild!==m.iframe&&c.set(m.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});m._viewsource_oldFocus=m.focus;var A=this;m.focus=function(){if(A._sourceShown)A.setSourceAreaCaret();else try{this._vsFocused?
(delete this._vsFocused,B.focus(m.editNode)):m._viewsource_oldFocus()}catch(O){console.log("ViewSource focus code error: "+O)}};var D,N;for(D=0;D<g.length;D++)if((N=g[D])&&("dijit._editor.plugins.FullScreen"===N.declaredClass||N.declaredClass===k._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=N;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return A._sourceShown?A.sourceArea:this._viewsource_getAltViewNode()});
this.own(q(this.sourceArea,"keydown",l.hitch(this,function(O){this._sourceShown&&O.keyCode==f.F12&&O.ctrlKey&&O.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(l.hitch(this,function(){m.focus()}),100),O.stopPropagation(),O.preventDefault())})))},_stripScripts:function(m){m&&(m=m.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,""),m=m.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),m=m.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return m},_stripComments:function(m){m&&
(m=m.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return m},_stripIFrames:function(m){m&&(m=m.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return m},_stripEventHandlers:function(m){if(m){var g=m.match(/<[a-z]+?\b(.*?on.*?(['"]).*?\2.*?)+>/gim);if(g)for(var A=0,D=g.length;A<D;A++){var N=g[A],O=N.replace(/\s+on[a-z]*\s*=\s*(['"])(.*?)\1/igm,"");m=m.replace(N,O)}}return m},_filter:function(m){m&&(this.stripScripts&&(m=this._stripScripts(m)),this.stripComments&&(m=this._stripComments(m)),
this.stripIFrames&&(m=this._stripIFrames(m)),this.stripEventHandlers&&(m=this._stripEventHandlers(m)));return m},removeValueFilterHandles:function(){this._setValueFilterHandle&&(this._setValueFilterHandle.remove(),delete this._setValueFilterHandle);this._getValueFilterHandle&&(this._getValueFilterHandle.remove(),delete this._getValueFilterHandle)},setSourceAreaCaret:function(){var m=this.sourceArea;B.focus(m);this._sourceShown&&!this.readOnly&&(m.setSelectionRange?m.setSelectionRange(0,0):this.sourceArea.createTextRange&&
(m=m.createTextRange(),m.collapse(!0),m.moveStart("character",-99999),m.moveStart("character",0),m.moveEnd("character",0),m.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.removeValueFilterHandles();this.inherited(arguments)}});F.registry.viewSource=F.registry.viewsource=function(m){return new H({readOnly:"readOnly"in
m?m.readOnly:!1,stripComments:"stripComments"in m?m.stripComments:!0,stripScripts:"stripScripts"in m?m.stripScripts:!0,stripIFrames:"stripIFrames"in m?m.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in m?m.stripEventHandlers:!0})};return H})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F){x=K("dijit._editor.plugins._FontDropDown",[l,q,n],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:x,postMixInProperties:function(){this.inherited(arguments);this.strings=w.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=f.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new d({idProperty:"value",data:E.map(this.values,function(m){var g=this.strings[m]||m;return{label:this.getLabel(m,g),name:g,value:m}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(m,g){g=!1!==g;this.select.set("value",0>E.indexOf(this.values,m)?"":m,g);g||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(m){this._set("disabled",m);this.select.set("disabled",m)}});var b=K("dijit._editor.plugins._FontNameDropDown",x,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(m,g){return this.plainText?g:"\x3cdiv style\x3d'font-family: "+m+"'\x3e"+g+"\x3c/div\x3e"},_normalizeFontName:function(m){var g=this.values;if(!m||!g)return m;var A=m.split(",");if(1<A.length)for(var D=0,N=A.length;D<N;D++){var O=c.trim(A[D]);if(-1<E.indexOf(g,O))return O}return m},_setValueAttr:function(m,g){g=!1!==
g;m=this._normalizeFontName(m);this.generic&&(m={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[m]||m);this.inherited(arguments,[m,g])}}),k=K("dijit._editor.plugins._FontSizeDropDown",x,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(m,
g){return this.plainText?g:"\x3cfont size\x3d"+m+"'\x3e"+g+"\x3c/font\x3e"},_setValueAttr:function(m,g){g=!1!==g;m.indexOf&&-1!=m.indexOf("px")&&(m={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(m,10)]||m);this.inherited(arguments,[m,g])}}),t=K("dijit._editor.plugins._FormatBlockDropDown",x,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(m,g){return this.plainText||
"noFormat"==m?g:"\x3c"+m+"\x3e"+g+"\x3c/"+m+"\x3e"},_execCommand:function(m,g,A){if("noFormat"===A){var D;if((g=F.getSelection(m.window))&&0<g.rangeCount&&(A=g.getRangeAt(0),A)){g=A.startContainer;for(D=A.endContainer;g&&g!==m.editNode&&g!==m.document.body&&1!==g.nodeType;)g=g.parentNode;for(;D&&D!==m.editNode&&D!==m.document.body&&1!==D.nodeType;)D=D.parentNode;var N=a.hitch(this,function(C,Q){if(C.childNodes&&C.childNodes.length){var S;for(S=0;S<C.childNodes.length;S++){var p=C.childNodes[S];if(1==
p.nodeType&&m.selection.inSelection(p)){var e=p.tagName?p.tagName.toLowerCase():"";-1!==E.indexOf(this.values,e)&&Q.push(p);N(p,Q)}}}});A=a.hitch(this,function(C){if(C&&C.length){for(m.beginEditing();C.length;)this._removeFormat(m,C.pop());m.endEditing()}});var O=[];if(g==D){for(D=g;D&&D!==m.editNode&&D!==m.document.body;){if(1==D.nodeType){var L=D.tagName?D.tagName.toLowerCase():"";if(-1!==E.indexOf(this.values,L)){var z=D;break}}D=D.parentNode}N(g,O);z&&(O=[z].concat(O))}else for(D=g;m.selection.inSelection(D);)1==
D.nodeType&&(L=D.tagName?D.tagName.toLowerCase():"",-1!==E.indexOf(this.values,L)&&O.push(D),N(D,O)),D=D.nextSibling;A(O);m.onDisplayChanged()}}else m.execCommand(g,A)},_removeFormat:function(m,g){if(m.customUndo){for(;g.firstChild;)J.place(g.firstChild,g,"before");g.parentNode.removeChild(g)}else{m.selection.selectElementChildren(g);var A=m.selection.getSelectedHtml();m.selection.selectElement(g);m.execCommand("inserthtml",A||"")}}}),H=K("dijit._editor.plugins.FontChoice",B,{useDefaultCommand:!1,
_initButton:function(){var m={fontName:b,fontSize:k,formatBlock:t}[this.command],g=this.params;this.params.custom&&(g.values=this.params.custom);var A=this.editor;this.button=new m(a.delegate({dir:A.dir,lang:A.lang},g));this.own(this.button.select.on("change",a.hitch(this,function(D){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=D.indexOf(" ")&&(D="'"+D+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,D):this.editor.execCommand(this.command,
D)})))},updateState:function(){var m=this.editor,g=this.command;if(m&&m.isLoaded&&g.length&&this.button){var A=this.get("disabled");this.button.set("disabled",A);if(!A){try{var D=m.queryCommandValue(g)||""}catch(O){D=""}(A=a.isString(D)&&(D.match(/'([^']*)'/)||D.match(/"([^"]*)"/)))&&(D=A[1]);"fontSize"!==g||D||(D=3);if("formatBlock"===g)if(D&&"p"!=D)0>E.indexOf(this.button.values,D)&&(D="noFormat");else{D=null;if((g=F.getSelection(this.editor.window))&&0<g.rangeCount&&(g=g.getRangeAt(0)))var N=g.endContainer;
for(;N&&N!==m.editNode&&N!==m.document;){if((g=N.tagName?N.tagName.toLowerCase():"")&&-1<E.indexOf(this.button.values,g)){D=g;break}N=N.parentNode}D||(D="noFormat")}D!==this.button.get("value")&&this.button.set("value",D,!1)}}}});E.forEach(["fontName","fontSize","formatBlock"],function(m){B.registry[m]=function(g){return new H({command:m,plainText:g.plainText})}});H._FontDropDown=x;H._FontNameDropDown=b;H._FontSizeDropDown=k;H._FormatBlockDropDown=t;return H})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),
function(x,E,K,J){var w=x.declare("dojox.editor.plugins.Preview",J,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=x.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new E.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:x.hitch(this,"_preview")})},setEditor:function(a){this.editor=a;this._initButton()},
updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var a=this.editor.get("value"),c="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",d;if(this.stylesheets)for(d=0;d<this.stylesheets.length;d++)c+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[d]+"'\x3e\n";this.styles&&(c+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");a="\x3chtml\x3e\n\t\x3chead\x3e\n"+c+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+
a+"\n\t\x3c/body\x3e\n\x3c/html\x3e";var f=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");f.document.open();f.document.write(a);f.document.close()}catch(l){console.warn(l)}}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"preview"!==a.args.name.toLowerCase()||(a.plugin=new w({styles:"styles"in a.args?a.args.styles:"",stylesheets:"stylesheets"in a.args?a.args.stylesheets:null}))});return w})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(x,E,K,J,w,a){var c=K("dijit._editor.plugins.TextColor",w,{buttonClass:a,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var d=this;this.button.loadDropDown=function(f){function l(q){d.button.dropDown=new q({dir:d.editor.dir,ownerDocument:d.editor.ownerDocument,value:d.value,onChange:function(n){d.editor.execCommand(d.command,n)},onExecute:function(){d.editor.execCommand(d.command,this.get("value"))}});f()}"string"==
typeof d.colorPicker?x([d.colorPicker],l):l(d.colorPicker)}},updateState:function(){var d=this.editor,f=this.command;if(d&&d.isLoaded&&f.length){if(this.button){var l=this.get("disabled");this.button.set("disabled",l);if(l)return;try{var q=d.queryCommandValue(f)||""}catch(n){q=""}}""==q&&(q="#000000");"transparent"==q&&(q="#ffffff");"string"==typeof q?-1<q.indexOf("rgb")&&(q=E.fromRgb(q).toHex()):(q=((q&255)<<16|q&65280|(q&16711680)>>>16).toString(16),q="#000000".slice(0,7-q.length)+q);this.value=
q;(d=this.button.dropDown)&&d.get&&q!==d.get("value")&&d.set("value",q,!1)}}});w.registry.foreColor=function(d){return new c(d)};w.registry.hiliteColor=function(d){return new c(d)};return c})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(x,E,K,J,w,a,c){var d=c("dojox.editor.plugins.ToolbarLineBreak",[J,w],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",
postCreate:function(){x.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(f){if(!f.plugin){var l=f.args.name.toLowerCase();if("||"===l||"toolbarlinebreak"===l)f.plugin=new a({button:new d,setEditor:function(q){this.editor=q}})}});return d})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F){x.experimental("dojox.editor.plugins.FindReplace");var b=x.declare("dojox.editor.plugins._FindReplaceCloseBox",[a,c,f],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=E.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),k=x.declare("dojox.editor.plugins._FindReplaceTextBox",[a,c,f],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=E.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");x.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(g){this.value=g;this.textBox.set("value",g)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(g){this.disabled=g;this.textBox.set("disabled",
g)},onChange:function(g){this.value=g},_onKeyPress:function(g){var A=0,D=0;!g.target||g.ctrlKey||g.altKey||g.shiftKey||(g.keyCode==x.keys.LEFT_ARROW?(A=g.target.selectionStart,D=g.target.selectionEnd,A<D&&(E.selectInputText(g.target,A,A),x.stopEvent(g))):g.keyCode==x.keys.RIGHT_ARROW&&(A=g.target.selectionStart,D=g.target.selectionEnd,A<D&&(E.selectInputText(g.target,D,D),x.stopEvent(g))))}}),t=x.declare("dojox.editor.plugins._FindReplaceCheckBox",[a,c,f],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=E.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(g){this.checkBox.set("value",g)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(g){this.disabled=g;this.checkBox.set("disabled",g)}}),H=x.declare("dojox.editor.plugins._FindReplaceToolbar",q,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");x.addClass(this.domNode,"dijitToolbar")},addChild:function(g,A){E._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(g){g.stopPropagation()}}),m=x.declare("dojox.editor.plugins.FindReplace",[F],{buttonClass:E.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=x.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new E.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:x.hitch(this,
"_toggleFindReplace")});x.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",x.hitch(this,function(g,A){"disabled"===g&&this._toggleFindReplace(!A&&this._displayed,!0,!0)}))},setEditor:function(g){this.editor=g;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(g,A,D){var N=x.marginBox(this.editor.domNode);g&&!x.isOpera?(x.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),A||(this._displayed=
!0)):(x.style(this._frToolbar.domNode,"display","none"),A||(this._displayed=!1),D||this.editor.focus());this.editor.resize({h:N.h})},_populateFindField:function(){var g=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(g&&this._findField.textBox.set("value",g),this._findField.textBox.focus(),E.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(g){this.inherited(arguments);if(!x.isOpera){var A=this._frToolbar=new H;x.style(A.domNode,"display",
"none");x.place(A.domNode,g.domNode,"after");A.startup();this._closeBox=new b;A.addChild(this._closeBox);this._findField=new k({label:this._strings.findLabel,tooltip:this._strings.findTooltip});A.addChild(this._findField);this._replaceField=new k({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});A.addChild(this._replaceField);A.addChild(new K.editor.plugins.ToolbarLineBreak);this._findButton=new E.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;A.addChild(this._findButton);this._replaceButton=new E.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;A.addChild(this._replaceButton);this._replaceAllButton=new E.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;A.addChild(this._replaceAllButton);this._caseSensitive=new t({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});A.addChild(this._caseSensitive);this._backwards=new t({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});A.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new E.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(g){g.keyCode==x.keys.ENTER&&(this._find(),x.stopEvent(g))},_onReplaceKeyDown:function(g){g.keyCode==x.keys.ENTER&&(this._replace()||this._replace(),x.stopEvent(g))},_find:function(g){var A=this._findField.get("value")||"";if(A){var D=this._caseSensitive.get("value"),
N=this._backwards.get("value");A=this._findText(A,D,N);!A&&g&&(this._promDialog.set("content",x.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),E.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(x.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;E.popup.close(this._promDialog)}),3E3),setTimeout(x.hitch(this,function(){this.editor.focus()}),0));return A}return!1},_replace:function(g){var A=
!1,D=this.editor;D.focus();var N=this._findField.get("value")||"",O=this._replaceField.get("value")||"";if(N){var L=this._caseSensitive.get("value"),z=this._backwards.get("value"),C=D._sCall("getSelectedText",[null]);x.isMoz&&(N=x.trim(N),C=x.trim(C));N=this._filterRegexp(N,!L);C&&N.test(C)&&(D.execCommand("inserthtml",O),A=!0,z&&(this._findText(O,L,z),D._sCall("collapse",[!0])));!this._find(!1)&&g&&(this._promDialog.set("content",x.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
E.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(x.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;E.popup.close(this._promDialog)}),3E3),setTimeout(x.hitch(this,function(){this.editor.focus()}),0));return A}return null},_replaceAll:function(g){var A=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&A++;var D=x.hitch(this,function(){this._replace(!1)?
(A++,setTimeout(D,10)):g&&(this._promDialog.set("content",x.string.substitute(this._strings.replaceDialogText,{0:""+A})),E.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(x.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;E.popup.close(this._promDialog)}),3E3),setTimeout(x.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});D()},_findText:function(g,A,
D){var N=this.editor,O=N.window,L=!1;if(g)if(O.find)L=O.find(g,A,D,!1,!1,!1,!1);else{var z=N.document;if(z.selection||O.getSelection)if(this.editor.focus(),N=z.body.createTextRange(),L=N.duplicate(),O.getSelection().getRangeAt(0),(z=z.selection?z.selection.createRange():null)?D?N.setEndPoint("EndToStart",z):N.setEndPoint("StartToEnd",z):this._bookmark&&(O=O.getSelection().toString(),N.moveToBookmark(this._bookmark),N.text!=O?(N=L.duplicate(),this._bookmark=null):(D?L.setEndPoint("EndToStart",N):L.setEndPoint("StartToEnd",
N),N=L.duplicate())),A=A?4:0,D&&(A|=1),L=N.findText(g,N.text.length,A))N.select(),this._bookmark=N.getBookmark()}return L},_filterRegexp:function(g,A){for(var D="",N=null,O=0;O<g.length;O++)switch(N=g.charAt(O),N){case "\\":D+=N;O++;D+=g.charAt(O);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":D+="\\";default:D+=N}D="^"+D+"$";return A?new RegExp(D,"mi"):new RegExp(D,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,E.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});m._FindReplaceCloseBox=b;m._FindReplaceTextBox=k;m._FindReplaceCheckBox=t;m._FindReplaceToolbar=H;x.subscribe(E._scopeName+".Editor.getPlugin",null,function(g){g.plugin||"findreplace"!==
g.args.name.toLowerCase()||(g.plugin=new m({}))});return m})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(x,E,K,J){var w=x.declare("dojox.editor.plugins.PasteFromWord",
J,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var a=x.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");x.mixin(a,x.i18n.getLocalization("dijit","common"));x.mixin(a,x.i18n.getLocalization("dijit._editor","commands"));this.button=new E.form.Button({label:a.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:x.hitch(this,"_openDialog")});this._uId=E.getUniqueId(this.editor.id);a.uId=this._uId;a.width=this.width||"400px";a.height=this.height||"300px";this._dialog=(new E.Dialog({title:a.pasteFromWord})).placeAt(x.body());this._dialog.set("content",x.string.substitute(this._template,a));x.style(x.byId(this._uId+"_rte"),"opacity",.001);this.connect(E.byId(this._uId+"_paste"),"onClick","_paste");this.connect(E.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(x.hitch(this,function(){this._rte=new E._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(x.hitch(this,function(){x.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var a=K.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var c;for(c=0;c<this._filters.length;c++){var d=this._filters[c];a=a.replace(d.regexp,d.handler)}a=K.html.format.prettyPrint(a);this.editor.focus();this.editor.execCommand("inserthtml",a)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"pastefromword"!==a.args.name.toLowerCase()||(a.plugin=new w({width:"width"in a.args?a.args.width:"400px",height:"height"in a.args?a.args.width:"300px"}))});return w})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(x,E,K,J,w){var a=x.getObject("dojox.html.format",!0);a.prettyPrint=
function(c,d,f,l,q){var n=[],u=0,B=[],F="\t",b="",k=[],t,H=/[=]([^"']+?)(\s|>)/g,m=/style=("[^"]*"|'[^']*'|\S*)/gi,g=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(d&&0<d&&10>d)for(F="",t=0;t<d;t++)F+=" ";d=J.doc.createElement("div");d.innerHTML=c;var A=E.encode,D=E.decode,N=d.ownerDocument.createElement("div"),O=function(e){e=e.cloneNode(!1);N.appendChild(e);e=N.innerHTML;N.innerHTML="";return e},L=function(){var e;for(e=0;e<u;e++)n.push(F)},z=function(){n.push("\n")},C=function(e){var v;e=e.split("\n");for(v=
0;v<e.length;v++)e[v]=x.trim(e[v]);e=e.join(" ");e=x.trim(e);if(""!==e){var h=[];if(f&&0<f){var r="";for(v=0;v<u;v++)r+=F;v=r.length;r=f;for(f>v&&(r-=v);e;)if(e.length>f){for(v=r;0<v&&" "!==e.charAt(v);v--);if(!v)for(v=r;v<e.length&&" "!==e.charAt(v);v++);var I=e.substring(0,v);I=x.trim(I);e=x.trim(e.substring(v==e.length?e.length:v+1,e.length));if(I){var M="";for(v=0;v<u;v++)M+=F;I=M+I+"\n"}h.push(I)}else{M="";for(v=0;v<u;v++)M+=F;e=M+e+"\n";h.push(e);e=null}return h.join("")}M="";for(v=0;v<u;v++)M+=
F;return M+e+"\n"}return""},Q=function(e){if(e){var v=e;v&&(v=v.replace(/&quot;/gi,'"'),v=v.replace(/&gt;/gi,"\x3e"),v=v.replace(/&lt;/gi,"\x3c"),v=v.replace(/&amp;/gi,"\x26"));var h;e=0;var r=v.split("\n"),I=[];for(v=0;v<r.length;v++){var M=r[v],P=-1<M.indexOf("\n");if(M=x.trim(M)){P=e;for(h=0;h<M.length;h++){var y=M.charAt(h);"{"===y?e++:"}"===y&&(e--,P=e)}y="";for(h=0;h<u+P;h++)y+=F;I.push(y+M+"\n")}else P&&0===v&&I.push("\n")}e=I.join("")}return e},S=function(e){var v=e.nodeName.toLowerCase(),
h=x.trim(O(e));e=h.substring(0,h.indexOf("\x3e")+1);e=e.replace(H,'\x3d"$1"$2');e=e.replace(m,function(I){var M=I.substring(0,6);I=I.substring(6,I.length);var P=I.charAt(0);I=x.trim(I.substring(1,I.length-1));I=I.split(";");var y=[];K.forEach(I,function(R){if(R=x.trim(R))R=R.substring(0,R.indexOf(":")).toLowerCase()+R.substring(R.indexOf(":"),R.length),y.push(R)});y=y.sort();I=y.join("; ");var G=x.trim(I);return G&&";"!==G?M+P+(I+";")+P:""});var r=[];e=e.replace(g,function(I){r.push(x.trim(I));return""});
r=r.sort();e="\x3c"+v;r.length&&(e+=" "+r.join(" "));-1!=h.indexOf("\x3c/")?(B.push(v),e+="\x3e"):(e=q?e+" /\x3e":e+"\x3e",B.push(!1));a:switch(v){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":v=!0;break a;default:v=!1}k.push(v);b&&!v&&(n.push(C(b)),b="");v?b+=e:(L(),n.push(e),z(),u++)},p=function(e){var v=e.childNodes;if(v){var h;for(h=0;h<v.length;h++){var r=v[h];if(1===
r.nodeType){var I=x.trim(r.tagName.toLowerCase());w("ie")&&r.parentNode!=e||I&&"/"===I.charAt(0)||(S(r),"script"===I?n.push(Q(r.innerHTML)):"pre"===I?(r=r.innerHTML,w("mozilla")&&(r=r.replace("\x3cbr\x3e","\n"),r=r.replace("\x3cpre\x3e",""),r=r.replace("\x3c/pre\x3e","")),"\n"!==r.charAt(r.length-1)&&(r+="\n"),n.push(r)):p(r),r=k.pop(),b&&!r&&(n.push(C(b)),b=""),(I=B.pop())?(I="\x3c/"+I+"\x3e",r?b+=I:(u--,L(),n.push(I),z())):u--)}else 3===r.nodeType||4===r.nodeType?b+=A(r.nodeValue,l):8===r.nodeType&&
(r=D(r.nodeValue,l),L(),n.push("\x3c!--"),z(),u++,n.push(C(r)),u--,L(),n.push("--\x3e"),z())}}};p(d);b&&(n.push(C(b)),b="");return n.join("")};return a})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(x,E,K,J){var w=x.declare("dojox.editor.plugins.InsertAnchor",J,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var a=this,c=x.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),d=this.dropDown=new E.TooltipDialog({title:c.title,execute:x.hitch(this,"setValue"),onOpen:function(){a._onOpenDialog();E.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(x.hitch(a,"_onCloseDialog"),0)}});this.button=new E.form.DropDownButton({label:c.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});c.id=E.getUniqueId(this.editor.id);this._uniqueId=c.id;this.dropDown.set("content",d.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+x.string.substitute(this._template,c));d.startup();this._anchorInput=E.byId(this._uniqueId+"_anchorInput");this._textInput=E.byId(this._uniqueId+"_textInput");this._setButton=E.byId(this._uniqueId+"_setButton");this.connect(E.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(x.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(x.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_checkInput:function(){var a=!0;this._anchorInput.isValid()&&
(a=!1);this._setButton.set("disabled",a)},_setup:function(){this.editor.onLoadDeferred.addCallback(x.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(x.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var a=x.moduleUrl(K._scopeName,"editor/plugins/resources").toString();if(!a.match(/^https?:\/\//i)&&!a.match(/^file:\/\//i)){var c="/"===a.charAt(0)?x.doc.location.protocol+"//"+x.doc.location.host:this._calcBaseUrl(x.global.location.href);
"/"!==c[c.length-1]&&"/"!==a.charAt(0)&&(c+="/");a=c+a}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,a)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var a=this.editor.document,c=this.getAnchorStyle();if(x.isIE)a.createStyleSheet("").cssText=
c;else{var d=a.createElement("style");d.appendChild(a.createTextNode(c));a.getElementsByTagName("head")[0].appendChild(d)}}catch(f){}},_calcBaseUrl:function(a){var c=null;null!==a&&(c=a.indexOf("?"),-1!=c&&(a=a.substring(0,c)),c=a.lastIndexOf("/"),c=0<c&&c<a.length?a.substring(0,c):a);return c},_checkValues:function(a){a&&(a.anchorInput&&(a.anchorInput=a.anchorInput.replace(/"/g,"\x26quot;")),a.textInput||(a.textInput="\x26nbsp;"));return a},setValue:function(a){this._onCloseDialog();if(!this.editor.window.getSelection){var c=
E.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===c.nodeType&&(c=c.parentNode);c&&c.nodeName&&"a"!==c.nodeName.toLowerCase()&&(c=this.editor._sCall("getSelectedElement",["a"]));c&&c.nodeName&&"a"===c.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[c]),this.editor.execCommand("unlink"))}a=this._checkValues(a);this.editor.execCommand("inserthtml",x.string.substitute(this.htmlTemplate,a))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(a){if(a&&"a"===a.tagName.toLowerCase()&&x.attr(a,"name")){var c=x.attr(a,"name");var d=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,!0])}else d=this.editor._sCall("getSelectedText");return{anchorInput:c||"",textInput:d||""}},_onOpenDialog:function(){if(this.editor.window.getSelection)var a=this.editor._sCall("getAncestorElement",["a"]);else a=E.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===a.nodeType&&(a=a.parentNode),a&&a.nodeName&&
"a"!==a.nodeName.toLowerCase()&&(a=this.editor._sCall("getSelectedElement",["a"]));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(a))},_onDblClick:function(a){a&&a.target&&(a=a.target,"a"===(a.tagName?a.tagName.toLowerCase():"")&&x.attr(a,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[a]),setTimeout(x.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(a){x.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(a){a&&x.query("a[name]:not([href])",a).removeClass("dijitEditorPluginInsertAnchorStyle");return a}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var c=a.args.name;c&&(c=c.toLowerCase());"insertanchor"===c&&(a.plugin=new w)}});return w})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(x,E,K,J){var w=x.declare("dojox.editor.plugins.Blockquote",J,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=x.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new E.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:x.hitch(this,"_toggleQuote")})},setEditor:function(a){this.editor=a;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");a.customUndo=!0},_toggleQuote:function(a){try{var c=this.editor;c.focus();var d=this.button.get("checked"),f=E.range.getSelection(c.window),l,q,n,u;f&&0<f.rangeCount&&(l=f.getRangeAt(0));if(l){c.beginEditing();if(d)if(l.startContainer===l.endContainer){if(this._isRootInline(l.startContainer)){for(n=l.startContainer;n&&n.parentNode!==c.editNode;)n=n.parentNode;for(;n&&n.previousSibling&&(this._isTextElement(n)||1===n.nodeType&&this._isInlineFormat(this._getTagName(n)));)n=
n.previousSibling;n&&1===n.nodeType&&!this._isInlineFormat(this._getTagName(n))&&(n=n.nextSibling);if(n){var B=c.document.createElement("blockquote");x.place(B,n,"after");B.appendChild(n);for(u=B.nextSibling;u&&(this._isTextElement(u)||1===u.nodeType&&this._isInlineFormat(this._getTagName(u)));)B.appendChild(u),u=B.nextSibling}}else{for(var F=l.startContainer;(this._isTextElement(F)||this._isInlineFormat(this._getTagName(F))||"li"===this._getTagName(F))&&F!==c.editNode&&F!==c.document.body;)F=F.parentNode;
F!==c.editNode&&F!==F.ownerDocument.documentElement&&(B=c.document.createElement("blockquote"),x.place(B,F,"after"),B.appendChild(F))}B&&(c._sCall("selectElementChildren",[B]),c._sCall("collapse",[!0]))}else{var b;n=l.startContainer;for(u=l.endContainer;n&&this._isTextElement(n)&&n.parentNode!==c.editNode;)n=n.parentNode;for(b=n;b.nextSibling&&c._sCall("inSelection",[b]);)b=b.nextSibling;u=b;if(u===c.editNode||u===c.document.body){B=c.document.createElement("blockquote");x.place(B,n,"after");var k=
this._getTagName(n);if(this._isTextElement(n)||this._isInlineFormat(k))for(c=n;c&&(this._isTextElement(c)||1===c.nodeType&&this._isInlineFormat(this._getTagName(c)));)B.appendChild(c),c=B.nextSibling;else B.appendChild(n);return}u=u.nextSibling;for(b=n;b&&b!==u;){if(1===b.nodeType){if(k=this._getTagName(b),"br"!==k){if(!window.getSelection&&"p"===k&&this._isEmpty(b)){b=b.nextSibling;continue}this._isInlineFormat(k)?B||(B=c.document.createElement("blockquote"),x.place(B,b,"after")):(B&&this._isEmpty(B)&&
B.parentNode.removeChild(B),B=c.document.createElement("blockquote"),x.place(B,b,"after"));B.appendChild(b);b=B}}else this._isTextElement(b)&&(B||(B=c.document.createElement("blockquote"),x.place(B,b,"after")),B.appendChild(b),b=B);b=b.nextSibling}B&&(this._isEmpty(B)?B.parentNode.removeChild(B):(c._sCall("selectElementChildren",[B]),c._sCall("collapse",[!0])),B=null)}else if(B=!1,l.startContainer===l.endContainer){for(q=l.endContainer;q&&q!==c.editNode&&q!==c.document.body;){if("blockquote"===(q.tagName?
q.tagName.toLowerCase():"")){B=!0;break}q=q.parentNode}if(B){for(var t;q.firstChild;)t=q.firstChild,x.place(t,q,"before");q.parentNode.removeChild(q);t&&(c._sCall("selectElementChildren",[t]),c._sCall("collapse",[!0]))}}else{n=l.startContainer;for(u=l.endContainer;n&&this._isTextElement(n)&&n.parentNode!==c.editNode;)n=n.parentNode;for(l=[];n&&n.nextSibling&&c._sCall("inSelection",[n]);)n.parentNode&&"blockquote"===this._getTagName(n.parentNode)&&(n=n.parentNode),l.push(n),n=n.nextSibling;for(var H=
this._findBlockQuotes(l);H.length;){var m=H.pop();if(m.parentNode){for(;m.firstChild;)x.place(m.firstChild,m,"before");m.parentNode.removeChild(m)}}}c.endEditing()}c.onNormalizedDisplayChanged()}catch(g){}},updateState:function(){var a=this.editor,c=this.get("disabled");if(a&&a.isLoaded&&this.button&&(this.button.set("disabled",c),!c)){c=!1;var d=E.range.getSelection(a.window);if(d&&0<d.rangeCount&&(d=d.getRangeAt(0)))var f=d.endContainer;for(;f&&f!==a.editNode&&f!==a.document;){if("blockquote"===
(f.tagName?f.tagName.toLowerCase():"")){c=!0;break}f=f.parentNode}this.button.set("checked",c)}},_findBlockQuotes:function(a){var c=[];if(a){var d;for(d=0;d<a.length;d++){var f=a[d];1===f.nodeType&&("blockquote"===this._getTagName(f)&&c.push(f),f.childNodes&&0<f.childNodes.length&&(c=c.concat(this._findBlockQuotes(f.childNodes))))}}return c},_getTagName:function(a){var c="";a&&1===a.nodeType&&(c=a.tagName?a.tagName.toLowerCase():"");return c},_isRootInline:function(a){var c=this.editor;if(this._isTextElement(a)&&
a.parentNode===c.editNode||1===a.nodeType&&this._isInlineFormat(a)&&a.parentNode===c.editNode)return!0;if(this._isTextElement(a)&&this._isInlineFormat(this._getTagName(a.parentNode))){for(a=a.parentNode;a&&a!==c.editNode&&this._isInlineFormat(this._getTagName(a));)a=a.parentNode;if(a===c.editNode)return!0}return!1},_isTextElement:function(a){return a&&3===a.nodeType||4===a.nodeType?!0:!1},_isEmpty:function(a){if(a.childNodes){var c=!0,d;for(d=0;d<a.childNodes.length;d++){var f=a.childNodes[d];if(1===
f.nodeType){if("p"!==this._getTagName(f)||x.trim(f.innerHTML)){c=!1;break}}else if(this._isTextElement(f)){if((f=x.trim(f.nodeValue))&&"\x26nbsp;"!==f&&"\u00a0"!==f){c=!1;break}}else{c=!1;break}}return c}return!0},_isInlineFormat:function(a){switch(a){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});x.subscribe(E._scopeName+".Editor.getPlugin",
null,function(a){a.plugin||"blockquote"!==a.args.name.toLowerCase()||(a.plugin=new w({}))});return w})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(x,E,K,J){x.experimental("dojox.editor.plugins.UploadImage");var w=x.declare("dojox.editor.plugins.UploadImage",J,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,
label:"Upload",setToolbar:function(a){this.button.destroy();this.createFileInput();a.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var a=x.create("span",{innerHTML:"."},document.body);x.style(a,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=
new K.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},a);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(a,c,d){a=a[0];c=x.byId(this.currentImageId,this.editor.document);d=this.downloadPath?this.downloadPath+a.name:a.file;
c.src=d;x.attr(c,"_djrealurl",d);a.width&&(c.width=a.width,c.height=a.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "uploadImage":a.plugin=new w({url:a.args.url})}});return w})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H,m,g,A,D,N,O,L){x.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return E("dojox.form.FileUploader",[g,A,D],{swfPath:b.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(N.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();if("flash"==this.uploaderType)var z="createFlashUploader";else this.uploaderType="html",z="createHtmlUploader";this[z]();this.fileListId&&this.connect(f.byId(this.fileListId),"click",function(C){C=C.target.parentNode.parentNode.parentNode;C.id&&-1<C.id.indexOf("file_")&&
this.removeFile(C.id.split("file_")[1])});m.addOnUnload(this,this.destroy)},getHiddenNode:function(z){if(!z)return null;var C=null;for(z=z.parentNode;z&&"body"!=z.tagName.toLowerCase();){if("none"==l.get(z,"display")){C=z;break}z=z.parentNode}return C},getButtonStyle:function(){var z=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(z))&&l.set(this._hiddenNode,"display","block");if(!z&&this.button&&this.button.domNode){var C=!0;z=this.button.domNode.className+" dijitButtonNode";var Q=this.getText(d(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=z=B.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+z+'"\x3e'+Q+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(z=this.button);n.get(z,"class")&&(this.baseClass+=" "+n.get(z,"class"));n.set(z,"class",this.baseClass);this.norm=this.getStyle(z);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(z,this.baseClass+" "+this.hoverClass,C),this.down=this.getTempNodeStyle(z,this.baseClass+" "+this.activeClass,C),this.dsbl=this.getTempNodeStyle(z,this.baseClass+" "+this.disabledClass,C),this.fhtml={cn:this.getText(z),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(z),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){l.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&l.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
l.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),l.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):B.destroy(this.progNode);
l.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});u.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&u.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(C){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);a.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var z=w.connect(this,"onReady",this,function(){w.disconnect(z);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&l.set(this._hiddenNode,"display","none")},onChange:function(z){},onProgress:function(z){},onComplete:function(z){},onCancel:function(){},onError:function(z){},onReady:function(z){},onLoad:function(z){},submit:function(z){z=z?F.toObject(z):null;this.upload(z);return!1},upload:function(z){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var C=k.byId(this.progressWidgetId).domNode;"none"==l.get(C,"display")&&(this.restoreProgDisplay="none",l.set(C,"display","block"));"hidden"==l.get(C,"visibility")&&(this.restoreProgDisplay="hidden",l.set(C,"visibility","visible"))}z&&!z.target&&(this.postData=z);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(z=0;z<this.fileList.length;z++)C=
this.fileList[z],C.bytesLoaded=0,C.bytesTotal=C.size||1E5,C.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(z,C){var Q;for(Q=0;Q<this.fileList.length;Q++)if(this.fileList[Q].name==z){C||this.fileList.splice(Q,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(z):C||(B.destroy(this.fileInputs[Q]),this.fileInputs.splice(Q,1),this._renumberInputs());this.fileListId&&B.destroy("file_"+z)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(J.forEach(this._subs,w.unsubscribe,dojo),J.forEach(this._cons,w.disconnect,dojo),this.scrollConnect&&w.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(B.destroy(this._fileInput),B.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(w.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(z){!0===z?("flash"==this.uploaderType?l.set(this.insideNode,"top","-2500px"):l.set(this.insideNode,"display",
"none"),l.set(this.progNode,"display","")):!1===z?(l.set(this.insideNode,{display:"",top:"0"}),l.set(this.progNode,"display","none")):l.set(this.progNode,"width",z*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var z=!1,C=w.connect(this,"_complete",function(){w.disconnect(C);z=!0}),Q=0,S=setInterval(K.hitch(this,function(){Q+=5;Q>this.fhtml.nr.w&&(Q=0,z=!0);this._displayProgress(Q/this.fhtml.nr.w);z&&(clearInterval(S),setTimeout(K.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(z){"string"==typeof z&&(z=Error(z));this.onError(z)},_addToFileList:function(){if(this.fileListId){var z="";J.forEach(this.fileList,function(C){z+='\x3ctable id\x3d"file_'+C.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+C.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(C.size?Math.ceil(.001*C.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);f.byId(this.fileListId).innerHTML=
z}},_change:function(z){c("ie")&&J.forEach(z,function(C){C.name=C.name.split("\\")[C.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(z):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=z);this._addToFileList();this.onChange(z);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(z){z=
K.isArray(z)?z:[z];J.forEach(z,function(C){C.ERROR&&this._error(C.ERROR)},this);J.forEach(this.fileList,function(C){C.bytesLoaded=1;C.bytesTotal=1;C.percent=100;this._progress(C)},this);J.forEach(this.fileList,function(C){this.removeFile(C.name,!0)},this);this.onComplete(z);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(K.hitch(this,function(){l.set(k.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(z){for(var C=0,Q=0,S=0;S<this.fileList.length;S++){var p=this.fileList[S];p.name==z.name&&(p.bytesLoaded=z.bytesLoaded,p.bytesTotal=z.bytesTotal,p.percent=Math.ceil(p.bytesLoaded/p.bytesTotal*100),this.log(p.name,"percent:",p.percent));Q+=Math.ceil(.001*p.bytesLoaded);C+=Math.ceil(.001*p.bytesTotal)}z=Math.ceil(Q/C*100);this.progressWidgetId&&k.byId(this.progressWidgetId).update({progress:z+"%"});this.showProgress&&this._displayProgress(.01*z);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(z){if(this._disabled!=z){if("flash"==this.uploaderType){if(!this.flashReady){var C=w.connect(this,"onLoad",this,function(){w.disconnect(C);this._setDisabledAttr(z)});return}this._disabled=z;this.flashMovie.doDisable(z)}else this._disabled=z,l.set(this._fileInput,"display",this._disabled?"none":"");u.toggle(this.domNode,this.disabledClass,z)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var z=
d("[tabIndex]"),C=0;C<z.length;C++)if(z[C].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=z[C];break}this.nextFocusObject.focus()},_disconnect:function(){J.forEach(this._cons,w.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&B.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();t.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:K.hitch(this,function(z){this._error("HTML Upload Error:"+z.message)}),load:K.hitch(this,
function(z,C,Q){this._complete(z)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();l.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(w.connect(this._fileInput,"mouseover",this,function(z){u.add(this.domNode,this.hoverClass);this.onMouseOver(z)}));this._cons.push(w.connect(this._fileInput,"mouseout",this,function(z){setTimeout(K.hitch(this,
function(){u.remove(this.domNode,this.activeClass);u.remove(this.domNode,this.hoverClass);this.onMouseOut(z);this._checkHtmlCancel("off")}),0)}));this._cons.push(w.connect(this._fileInput,"mousedown",this,function(z){u.add(this.domNode,this.activeClass);u.remove(this.domNode,this.hoverClass);this.onMouseDown(z)}));this._cons.push(w.connect(this._fileInput,"mouseup",this,function(z){u.remove(this.domNode,this.activeClass);this.onMouseUp(z);this.onClick(z);this._checkHtmlCancel("up")}));this._cons.push(w.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var z=this._fileInput.value;z?this._change([{name:z,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&n.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(z){"change"==z&&(this.dialogIsOpen=!1);"up"==z&&(this.dialogIsOpen=!0);if("off"==z){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var z=this.fhtml.nr;l.set(this.insideNode,{width:z.w+"px",height:"middle"==z.va?z.h+"px":"auto",
textAlign:z.ta,paddingTop:z.p[0]+"px",paddingRight:z.p[1]+"px",paddingBottom:z.p[2]+"px",paddingLeft:z.p[3]+"px"});try{l.set(this.insideNode,"lineHeight","inherit")}catch(C){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],d("*",this._formNode).forEach(function(z){B.destroy(z)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>c("ie")||c("ie")&&c("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=k.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=B.create("form",{enctype:"multipart/form-data",method:"post",id:k.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,l.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var z=
this.htmlFieldName;this.selectMultipleFiles&&(z+=this.fileCount,this.fileCount++);n.set(this._fileInput,{id:this.id,name:z,type:"file"});u.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);z=q.getMarginBox(this._fileInput);l.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-z.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var z;this.fileCount=0;J.forEach(this.fileInputs,function(C){z=this.htmlFieldName+this.fileCount;this.fileCount++;
n.set(C,"name",z)},this)}},_setFormStyle:function(){L.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");l.set(this.domNode,{overflow:"hidden",position:"relative"});l.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var z in this.postData)B.create("input",{type:"hidden",name:z,value:this.postData[z]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var z=w.connect(this,"_complete",this,function(){w.disconnect(z);this._displayProgress(!1)})}var C={},Q;for(Q in this.postData)C[Q]=this.postData[Q];this.flashMovie.doUpload(C)}catch(S){this._error("FileUploader - Sorry, the SWF failed to initialize."+S)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var z=window.location.href.split("/");z.pop();z=z.join("/")+"/";this.uploadUrl=z+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",z," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");z={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:O.serialize("fh",this.fhtml),fileMask:O.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new N(z,this.insideNode);this.flashObject.onError=K.hitch(function(C){this._error("Flash Error: "+C)});this.flashObject.onReady=K.hitch(this,function(){l.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=K.hitch(this,function(C){this.flashMovie=C;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&n.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(z,C){this._subs.push(w.subscribe(this.id+z,this,C))},urlencode:function(z){return z&&"none"!=z?z.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(z){z=z.tagName.toLowerCase();
return"button"==z||"input"==z},getTextStyle:function(z){var C={};C.ff=l.get(z,"fontFamily");if(C.ff){C.ff=C.ff.replace(", ",",");C.ff=C.ff.replace(/"|'/g,"");C.ff="sans-serif"==C.ff?"Arial":C.ff;C.fw=l.get(z,"fontWeight");C.fi=l.get(z,"fontStyle");C.fs=parseInt(l.get(z,"fontSize"),10);if(-1<l.get(z,"fontSize").indexOf("%"))for(var Q=z;Q.tagName;){if(-1==l.get(Q,"fontSize").indexOf("%")){C.fs=parseInt(l.get(Q,"fontSize"),10);break}"body"==Q.tagName.toLowerCase()&&(C.fs=.16*parseInt(l.get(Q,"fontSize"),
10));Q=Q.parentNode}C.fc=(new H(l.get(z,"color"))).toHex();C.fc=parseInt(C.fc.substring(1,Infinity),16)}C.lh=l.get(z,"lineHeight");C.ta=l.get(z,"textAlign");C.ta="start"!=C.ta&&C.ta?C.ta:"left";C.va=this.isButton(z)?"middle":C.lh==C.h?"middle":l.get(z,"verticalAlign");return C},getText:function(z){z=K.trim(z.innerHTML);-1<z.indexOf("\x3c")&&(z=escape(z));return z},getStyle:function(z){var C={},Q=q.getContentBox(z),S=q.getPadExtents(z);C.p=[S.t,S.w-S.l,S.h-S.t,S.l];C.w=Q.w+S.w;C.h=Q.h+S.h;C.d=l.get(z,
"display");Q=new H(l.get(z,"backgroundColor"));C.bc=0==Q.a?"#ffffff":Q.toHex();C.bc=parseInt(C.bc.substring(1,Infinity),16);if(Q=this.urlencode(l.get(z,"backgroundImage")))C.bi={url:Q,rp:l.get(z,"backgroundRepeat"),pos:escape(l.get(z,"backgroundPosition"))},C.bi.pos||(Q=l.get(z,"backgroundPositionX"),S=l.get(z,"backgroundPositionY"),C.bi.pos=escape(("left"==Q?"0%":"right"==Q?"100%":Q)+" "+("top"==S?"0%":"bottom"==S?"100%":S)));return K.mixin(C,this.getTextStyle(z))},getTempNodeStyle:function(z,C,
Q){if(Q){Q=B.place("\x3c"+z.tagName+"\x3e\x3cspan\x3e"+z.innerHTML+"\x3c/span\x3e\x3c/"+z.tagName+"\x3e",z.parentNode);var S=Q.firstChild;u.add(S,z.className);u.add(Q,C);z=this.getStyle(S)}else Q=B.place("\x3c"+z.tagName+"\x3e"+z.innerHTML+"\x3c/"+z.tagName+"\x3e",z.parentNode),u.add(Q,z.className),u.add(Q,C),Q.id=z.id,z=this.getStyle(Q);B.destroy(Q);return z}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u){K.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");a=u._iframeName;a=a.substring(0,a.lastIndexOf("_"));var B=J.delegate(u,{create:function(){return B._frame=u.create.apply(u,arguments)},get:null,post:null,send:function(F){var b=w._ioSetArgs(F,function(A){g&&g.cancel()},function(A){var D=null;A=A.ioArgs;try{var N=A.handleAs;"xml"===N||"html"===N?D=g.response.data:(D=g.response.text,"json"===N?D=E.fromJson(D):"javascript"===N&&(D=K.eval(D)))}catch(O){D=
O}return D},function(A,D){D.ioArgs._hasError=!0;return A}),k=b.ioArgs,t="GET",H=d.byId(F.form);F.method&&"POST"===F.method.toUpperCase()&&H&&(t="POST");F={method:t,handleAs:"json"===F.handleAs||"javascript"===F.handleAs?"text":F.handleAs,form:F.form,query:H?null:F.content,data:H?F.content:null,timeout:F.timeout,ioArgs:k};F.method&&(F.method=F.method.toUpperCase());if(x.ioPublish&&K.publish&&!1!==k.args.ioPublish)var m=n.after(u,"_notifyStart",function(A){A.options.ioArgs===k&&(m.remove(),w._ioNotifyStart(b))},
!0);var g=u(k.url,F,!0);k._callNext=g._callNext;g.then(function(){b.resolve(b)}).otherwise(function(A){b.ioArgs.error=A;b.reject(A)});return b},_iframeOnload:c.global[a+"_onload"]});J.setObject("dojo.io.iframe",B);return B})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(x,E,K,J,w,a,c,d,f){function l(b){b=x.delegate(n,b);if(!("path"in b))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in b||(b.id="dojox-embed-flash-"+q++);return b}var q=0,n={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(w("ie")){var u=function(b){b=l(b);if(!b)return null;var k,t=b.path;if(b.vars){var H=[];for(k in b.vars)H.push(encodeURIComponent(k)+"\x3d"+encodeURIComponent(b.vars[k]));b.params.FlashVars=H.join("\x26");delete b.vars}t='\x3cobject id\x3d"'+f.escape(String(b.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
f.escape(String(b.width))+'" height\x3d"'+f.escape(String(b.height))+'"'+(b.style?' style\x3d"'+f.escape(String(b.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+f.escape(String(t))+'" /\x3e';if(b.params)for(k in b.params)t+='\x3cparam name\x3d"'+f.escape(k)+'" value\x3d"'+f.escape(String(b.params[k]))+'" /\x3e';return{id:b.id,markup:t+"\x3c/object\x3e"}};var B=function(){for(var b=10,k=null;!k&&7<b;)try{k=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+b--)}catch(t){}return k?(b=k.GetVariable("$version").split(" ")[1].split(","),
{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}();E.addOnWindowUnload(function(){console.warn("***************UNLOAD");var b=function(){};J("object").reverse().style("display","none").forEach(function(k){for(var t in k)if("FlashVars"!=t&&"function"==typeof k[t])try{k[t]=b}catch(H){}})})}else u=function(b){b=l(b);if(!b)return null;var k,t=b.path;if(b.vars){var H=[];for(k in b.vars)H.push(encodeURIComponent(k)+"\x3d"+encodeURIComponent(b.vars[k]));
b.params.flashVars=H.join("\x26");delete b.vars}t='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+f.escape(String(t))+'" id\x3d"'+f.escape(String(b.id))+'" width\x3d"'+f.escape(String(b.width))+'" height\x3d"'+f.escape(String(b.height))+'"'+(b.style?' style\x3d"'+f.escape(String(b.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(b.params)for(k in b.params)t+=" "+f.escape(k)+'\x3d"'+f.escape(String(b.params[k]))+'"';return{id:b.id,markup:t+
" /\x3e"}},B=function(){var b=navigator.plugins["Shockwave Flash"];return b&&b.description?(b=b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=b[0]?parseInt(b[0]):0,minor:null!=b[1]?parseInt(b[1]):0,rev:null!=b[2]?parseInt(b[2]):0}):{major:0,minor:0,rev:0}}();var F=function(b,k){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=B.major;this.minimumVersion=b.minimumVersion||9;this.domNode=this.movie=this.id=null;k&&(k=a.byId(k));setTimeout(x.hitch(this,function(){if(b.expressInstall||this.available&&this.available>=this.minimumVersion)if(b&&k)this.init(b,k);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};x.extend(F,{onReady:function(b){},onLoad:function(b){},onError:function(b){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(b,k){this.destroy();k=a.byId(k||this.domNode);if(!k)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var t=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;F.initialized&&(this.id=F.place(b,k),this.domNode=k,setTimeout(x.hitch(this,
function(){this.movie=this.byId(this.id,b.doc);this.onReady(this.movie);this._poller=setInterval(x.hitch(this,function(){try{t=this.movie.PercentLoaded()}catch(H){console.warn("this.movie.PercentLoaded() failed",H,this.movie)}if(100==t)this._onload();else if(0==t&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(b){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var b=
x.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),k;for(k in this)b[k]||delete this[k];this._poller?c(this,"Load",this,"_destroy"):this._destroy()}},byId:function(b,k){k=k||document;return k.embeds[b]?k.embeds[b]:k[b]?k[b]:window[b]?window[b]:document[b]?document[b]:null}});x.mixin(F,{minSupported:8,available:B.major,supported:B.major>=B.required,minimumRequired:B.required,version:B,initialized:!1,onInitialize:function(){F.initialized=!0},__ie_markup__:function(b){return u(b)},proxy:function(b,
k){K.forEach(k instanceof Array?k:[k],function(t){this[t]=x.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+t+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+K.map(arguments,function(H){return __flash__toXML(H)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},b)}});F.place=function(b,k){b=u(b);k=a.byId(k);k||(k=d.doc.createElement("div"),k.id=b.id+"-container",d.body().appendChild(k));return b?(k.innerHTML=b.markup,
b.id):null};F.onInitialize();x.setObject("dojox.embed.Flash",F);return F})},"dojox/embed/flashVars":function(){define(["dojo"],function(x){x.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var E={serialize:function(K,J){var w=function(f){"string"==typeof f&&(f=f.replace(/;/g,"_sc_"),f=f.replace(/\./g,"_pr_"),f=f.replace(/:/g,"_cl_"));return f},a=dojox.embed.flashVars.serialize,c="";if(x.isArray(J)){for(var d=0;d<J.length;d++)c+=a(K+"."+d,w(J[d]))+";";return c.replace(/;{2,}/g,";")}if(x.isObject(J)){for(d in J)c+=
a(K+"."+d,w(J[d]))+";";return c.replace(/;{2,}/g,";")}return K+":"+J}};x.setObject("dojox.embed.flashVars",E);return E})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(x,E,K,J){var w=x.getObject("dojox.html",!0),a={},c={},d=[];w.insertCssRule=function(f,l,q){q=w.getDynamicStyleSheet(q);var n=f+" {"+l+"}";console.log("insertRule:",n);J("ie")?(q.cssText+=n,console.log("ss.cssText:",q.cssText)):q.sheet?q.sheet.insertRule(n,
q._indicies.length):q.appendChild(K.doc.createTextNode(n));q._indicies.push(f+" "+l);return f};w.removeCssRule=function(f,l,q){var n=-1,u,B;for(u in a)if(!q||q===u){var F=a[u];for(B=0;B<F._indicies.length;B++)if(f+" "+l===F._indicies[B]){n=B;break}if(-1<n)break}if(!F)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===n)return console.warn("The css rule was not found and could not be removed."),!1;F._indicies.splice(n,1);J("ie")?F.removeRule(n):F.sheet&&
F.sheet.deleteRule(n);return!0};w.modifyCssRule=function(f,l,q){};w.getStyleSheet=function(f){if(a[f||"default"])return a[f||"default"];if(!f)return!1;var l=w.getStyleSheets();if(l[f])return w.getStyleSheets()[f];for(var q in l)if(l[q].href&&-1<l[q].href.indexOf(f))return l[q];return!1};w.getDynamicStyleSheet=function(f){f||(f="default");a[f]||(K.doc.createStyleSheet?(a[f]=K.doc.createStyleSheet(),9>J("ie")&&(a[f].title=f)):(a[f]=K.doc.createElement("style"),a[f].setAttribute("type","text/css"),K.doc.getElementsByTagName("head")[0].appendChild(a[f]),
console.log(f," ss created: ",a[f].sheet)),a[f]._indicies=[]);return a[f]};w.enableStyleSheet=function(f){if(f=w.getStyleSheet(f))f.sheet?f.sheet.disabled=!1:f.disabled=!1};w.disableStyleSheet=function(f){if(f=w.getStyleSheet(f))f.sheet?f.sheet.disabled=!0:f.disabled=!0};w.activeStyleSheet=function(f){var l=w.getToggledStyleSheets(),q;if(1===arguments.length)E.forEach(l,function(n){n.disabled=n.title===f?!1:!0});else for(q=0;q<l.length;q++)if(!1===l[q].disabled)return l[q];return!0};w.getPreferredStyleSheet=
function(){};w.getToggledStyleSheets=function(){var f;if(!d.length){var l=w.getStyleSheets();for(f in l)l[f].title&&d.push(l[f])}return d};w.getStyleSheets=function(){if(c.collected)return c;E.forEach(K.doc.styleSheets,function(f){var l=f.sheet?f.sheet:f;f=l.title||l.href;if(J("ie"))-1===l.cssText.indexOf("#default#VML")&&(l.href?c[f]=l:l.imports.length?E.forEach(l.imports,function(q){c[q.title||q.href]=q}):c[f]=l);else{c[f]=l;c[f].id=l.ownerNode.id;f=[];try{f=l[l.cssRules?"cssRules":"rules"]}catch(q){console.warn("Reading css rules from stylesheet "+
l.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",l)}E.forEach(f,function(q){q.href&&(c[q.href]=q.styleSheet,c[q.href].id=l.ownerNode.id)})}});c.collected=!0;return c};return w})},"jimu/dijit/EditorChooseImage":function(){define("dojo dijit dijit/_editor/_Plugin jimu/dijit/ImageChooser dojo/_base/html dojo/_base/lang dojo/i18n dojo/_base/connect dojo/_base/declare".split(" "),function(x,E,K,J,w,a,c){x.experimental("dojox.editor.plugins.ChooseImage");
var d=x.declare("dojox.editor.plugins.ChooseImage",K,{iconClassPrefix:"editorIcon",useDefaultCommand:!1,_initButton:function(){this.createFileInput();this.command="chooseImage";var f=c.getLocalization("dijit._editor","commands");this.button=new E.form.Button({label:f.insertImage,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"UploadImage",tabIndex:"-1",onClick:a.hitch(this,this._chooseImage)});this.button.set("readOnly",!1);this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",
arguments);delete this.command},updateState:function(){var f=this.get("disabled");this.button.set("disabled",this.get("disabled"));!0===f?(w.addClass(this.button,"dijitButtonDisabled"),this.imageChooser.disableChooseImage()):(w.removeClass(this.button,"dijitButtonDisabled"),this.imageChooser.enableChooseImage())},createFileInput:function(){var f=x.create("span",{innerHTML:"."},document.body);this.imageChooser=new J({showSelfImg:!1,cropImage:!1,format:[J.GIF,J.JPEG,J.PNG]},f);this.connect(this.imageChooser,
"onImageChange","insertTempImage")},_chooseImage:function(){w.setStyle(this.imageChooser.domNode,"display","none");this.imageChooser.triggerImgUpload()},onComplete:function(f){f=f[0];var l=x.byId(this.currentImageId,this.editor.document);var q=this.downloadPath?this.downloadPath+f.name:f.file;l.src=q;x.attr(l,"_djrealurl",q);f.width&&(l.width=f.width,l.height=f.height)},insertTempImage:function(f,l){l=l&&l.fileName?'alt\x3d"'+l.fileName+'"':"";this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",
'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+f+'" '+l+"/\x3e")},destroy:function(){this.imageChooser&&this.imageChooser.destroy();this.inherited(arguments)}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(f){if(!f.plugin)switch(f.args.name){case "chooseImage":f.plugin=new d({url:f.args.url})}});K.registry.chooseImage=function(f){return new d(f)};return d})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),
function(x,E,K,J,w,a){E.experimental("dijit.editor.plugins.EditorTextColor");var c=J("dijit.editor.plugins.EditorTextColor",w,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var d="",f=!1;this.params.custom&&(this.params.custom.recordUID&&(d=this.params.custom.recordUID),this.params.custom.forceAttr&&(f=this.params.custom.forceAttr));var l=this;this.button.set("iconClass",
this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(q){function n(u){l.button.dropDown=new u({dir:l.editor.dir,ownerDocument:l.editor.ownerDocument,value:l.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:d,onChange:function(B){l.editor.execCommand("useCSS",f);l.editor.execCommand("styleWithCSS",!f);l.editor.execCommand(l.hackCommand,
B)},onClose:function(){l.button.closeDropDown()}});q()}"string"===typeof l.colorPicker?x([l.colorPicker],n):n(l.colorPicker)}},updateState:function(){var d=this.editor,f=this.hackCommand;if(d&&d.isLoaded&&f.length){if(this.button){var l=this.get("disabled");this.button.set("disabled",l);if(l)return;try{var q=d.queryCommandValue(f)||""}catch(n){q=""}}""===q?q="#000000":"transparent"===q&&(q="rgba(0, 0, 0, 0)");this.value=q;(d=this.button.dropDown)&&d.getColor&&q!==d.getColor()&&(d.refreshRecords(),
d.setColor(q))}}});E.subscribe(K._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin)switch(d.args.name){case "editorTextColor":d.plugin=new c}});return c})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(x,E,K,J,w,a){E.experimental("dijit.editor.plugins.EditorBackgroundColor");var c=J("dijit.editor.plugins.EditorBackgroundColor",w,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",
useDefaultCommand:!1,_initButton:function(){this.command="editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);var d="";this.params.custom&&this.params.custom.recordUID&&(d=this.params.custom.recordUID);var f=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(l){function q(n){f.button.dropDown=new n({dir:f.editor.dir,ownerDocument:f.editor.ownerDocument,
value:f.value,appearance:{showTransparent:!0,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:d,onChange:function(u){f.editor.execCommand("useCSS",!1);f.editor.execCommand("styleWithCSS",!0);f.editor.execCommand(f.hackCommand,u)},onExecute:function(){f.editor.execCommand(f.hackCommand,this.get("value"))},onClose:function(){f.button.closeDropDown()}});l()}"string"===typeof f.colorPicker?x([f.colorPicker],q):q(f.colorPicker)}},updateState:function(){var d=
this.editor,f=this.hackCommand;if(d&&d.isLoaded&&f.length){if(this.button){var l=this.get("disabled");this.button.set("disabled",l);if(l)return;try{var q=d.queryCommandValue(f)||""}catch(n){q=""}}""===q?q="#000000":"transparent"===q&&(q="rgba(0, 0, 0, 0)");this.value=q;(d=this.button.dropDown)&&d.getColor&&q!==d.getColor()&&(d.refreshRecords(),d.setColor(q))}}});E.subscribe(K._scopeName+".Editor.getPlugin",null,function(d){if(!d.plugin)switch(d.args.name){case "editorBackgroundColor":d.plugin=new c}});
return c})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t){var H=K([J,w,a,E],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',
_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);u.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new t({hidden:!0});this.shelter.placeAt(this.domNode);
this.shelter.startup();this._createTree();this.basicFilter=n.hitch(this,this.basicFilter);this.filter=H.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(m){var g=new d;this.onlyShowVisible?g.resolve(m.isShowInMap()):g.resolve(!0);return g},filter:function(m){m=new d;m.resolve(!0);return m},getSelectedItems:function(){var m=this.tree.getSelectedItems();return B.map(m,n.hitch(this,function(g){return this.getHandledItem(g)}))},
getAllItems:function(){var m=this.tree.getAllItems(),g=[];B.forEach(m,n.hitch(this,function(A){"root"!==A.id&&(A=this.getHandledItem(A),g.push(A))}));return g},getHandledItem:function(m){return{name:m.name,layerInfo:m.layerInfo}},_isLeafItem:function(m){return m.isLeaf},setCreateMapResponse:function(m){this.createMapResponse=m;k.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(n.hitch(this,function(g){this.layerInfosObj=g;this.own(x(this.layerInfosObj,"layerInfosChanged",
n.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(x(this.layerInfosObj,"layerInfosIsShowInMapChanged",n.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(m,g){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(m){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(m){this._clear();u.setStyle(this.errorTipSection,
"display","block");var g=[];this.onlyShowWebMapLayers?(g=m.getLayerInfoArrayOfWebmap(),g=g.concat(m.getTableInfoArrayOfWebmap())):(g=m.getLayerInfoArray(),g=g.concat(m.getTableInfoArray()));0!==g.length&&(u.setStyle(this.errorTipSection,"display","none"),B.forEach(g,n.hitch(this,function(A){this._addDirectLayerInfo(A)})))},_addDirectLayerInfo:function(m){m&&m.getLayerObject().then(n.hitch(this,function(){this._addItem("root",m)}),n.hitch(this,function(g){console.error(g)}))},_clear:function(){var m=
this._store.query({parent:"root"});B.forEach(m,n.hitch(this,function(g){g&&"root"!==g.id&&this._store.remove(g.id)}))},_addItem:function(m,g){var A=null,D=g.getLayerType(),N=this.filter(g);q({layerType:D,valid:N}).then(n.hitch(this,function(O){if(O.valid){var L=n.hitch(this,function(S,p){this._id++;A={name:g.title||"",parent:m,layerInfo:g,type:O.layerType,layerClass:g.layerObject.declaredClass,id:this._id.toString(),isLeaf:S,hasChildren:p};this._store.add(A)}),z=g.getSubLayers(),C=0===z.length,Q=
!0;this.onlyFilterCurrentLayerWhenAddItem?(C&&(Q=!1),L(C,Q)):C?L(C,!1):(z=B.map(z,n.hitch(this,function(S){return this.filter(S)})),q(z).then(n.hitch(this,function(S){(S=B.some(S,function(p){return p}))&&L(C,S)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var m=this._getRootItem();m=new c({data:[m],getChildren:function(g){return this.query({parent:g.id})}});this._store=new f(m);m=new l({store:this._store,query:{id:"root"},
mayHaveChildren:n.hitch(this,this._mayHaveChildren)});this.tree=new b({multiple:this.multiple,model:m,showRoot:!1,isLeafItem:n.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:n.hitch(this,function(g,A){"root"!==g.id&&this._onTreeOpen(g,A)}),onClick:n.hitch(this,function(g,A,D){this._onTreeClick(g,A,D);this.emit("tree-click",g,A,D)}),getIconStyle:n.hitch(this,function(g,A){var D=null;if(!g||"root"===g.id)return null;var N={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",
backgroundImage:""},O=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(g=this._getIconInfo(g,A).imageName)N.backgroundImage="url("+O+"/css/images/"+g+")",D=N;return D}),getIconClass:n.hitch(this,function(g,A){return this._getIconInfo(g,A).className}),getTooltip:n.hitch(this,function(g){return this.displayTooltipForTreeNode?g.layerInfo.title:""})});u.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(m){return m.hasChildren},
_getIconInfo:function(m,g){var A="",D="";"ArcGISDynamicMapServiceLayer"===m.type||"ArcGISTiledMapServiceLayer"===m.type?g?(A="mapserver_open.png",D="mapservice-layer-icon open"):(A="mapserver_close.png",D="mapservice-layer-icon close"):"GroupLayer"===m.type?g?(A="group_layer2.png",D="group-layer-icon open"):(A="group_layer1.png",D="group-layer-icon close"):"FeatureLayer"===m.type?(m=F.getTypeByGeometryType(m.layerInfo.layerObject.geometryType),"point"===m?(A="point_layer1.png",D="point-layer-icon"):
"polyline"===m?(A="line_layer1.png",D="line-layer-icon"):"polygon"===m&&(A="polygon_layer1.png",D="polygon-layer-icon")):"Table"===m.type?(A="table.png",D="table-icon"):"ArcGISImageServiceLayer"===m.type||"ArcGISImageServiceVectorLayer"===m.type?(A="image_layer.png",D="iamge-layer-icon"):g?(A="mapserver_open.png",D="mapservice-layer-icon open"):(A="mapserver_close.png",D="mapservice-layer-icon close");return{imageName:A,className:D}},_onTreeOpen:function(m,g){if("root"!==m.id){var A=[];g=[];A=m.layerInfo.getSubLayers();
m.checked||(this.shelter.show(),g=B.map(A,n.hitch(this,function(D){return D.getLayerObject()})),q(g).then(n.hitch(this,function(){this.domNode&&(B.forEach(A,n.hitch(this,function(D){this._addItem(m.id,D)})),m.checked=!0,this.shelter.hide())}),n.hitch(this,function(D){console.error(D);this.shelter.hide()})))}},_onTreeClick:function(m,g,A){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});H.createFilterByLayerType=
function(m){n.isArrayLike(m)||(m=[]);return function(g){var A=new d;if(0===m.length)A.resolve(!0);else{var D=[];g.traversal(function(N){D.push(N.getLayerType())});q(D).then(function(N){for(var O=0;O<N.length;O++)for(var L=0;L<m.length;L++)if(N[O]===m[L]){A.resolve(!0);return}A.resolve(!1)},function(N){console.error(N);A.reject(N)})}return A}};H.createFeaturelayerFilter=function(m,g,A,D){var N=["point","polyline","polygon"];m&&0<m.length?(m=B.filter(m,function(O){return 0<=N.indexOf(O)}),0===m.length&&
(m=N)):m=N;return function(O){var L=O.getLayerType();O=O.getLayerObject();return q({layerType:L,layerObject:O}).then(function(z){var C=z.layerType;z=z.layerObject;if("ArcGISDynamicMapServiceLayer"===C||"ArcGISTiledMapServiceLayer"===C||"GroupLayer"===C||"FeatureCollection"===C)return!0;if("FeatureLayer"===C){C=F.getTypeByGeometryType(z.geometryType);C=0<=B.indexOf(m,C);var Q=H._shouldPassStatisticsCheck(D,z);return z.url?(z=F.isFeaturelayerUrlSupportQuery(z.url,z.capabilities),C&&z&&Q):g&&C}return"Table"===
C?(C=F.isFeaturelayerUrlSupportQuery(z.url,z.capabilities),z=H._shouldPassStatisticsCheck(D,z),A&&C&&z):!1})}};H.createImageServiceLayerFilter=function(m,g){return function(A){var D=A.getLayerType();A=A.getLayerObject();return q({layerType:D,layerObject:A}).then(function(N){var O=N.layerType,L=N.layerObject;return"ArcGISImageServiceLayer"===O||"ArcGISImageServiceVectorLayer"===O?m?F.isImageServiceSupportQuery(N.layerObject.capabilities)?g?H._shouldPassStatisticsCheck(g,L):!0:!1:!0:!1})}};H._shouldPassStatisticsCheck=
function(m,g){return m?(m=!1,m=g.advancedQueryCapabilities?!!g.advancedQueryCapabilities.supportsStatistics:!!g.supportsStatistics):!0};H.createQueryableLayerFilter=function(m){var g=H.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,m);m=H.createImageServiceLayerFilter(!0,m);return H.orCombineFilters([g,m])};H.andCombineFilters=function(m){return H._combineFilters(m,!0)};H.orCombineFilters=function(m){return H._combineFilters(m,!1)};H._combineFilters=function(m,g){return function(A){var D=
new d,N=B.map(m,function(O){return O(A)});q(N).then(function(O){var L=!1;L=g?B.every(O,function(z){return z}):B.some(O,function(z){return z});D.resolve(L)},function(O){console.error(O);D.reject(O)});return D}};return H})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n){return x([f,l,a],{templateString:q,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource;this.nls.customSelectLayer=this.label?this.label:this.nls.selectLayer},postCreate:function(){this.inherited(arguments);this.layerInfosObj=
n.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(J(this.layerChooser,"tree-click",E.hitch(this,this._onTreeClick)));this.own(J(this.layerChooser,"update",E.hitch(this,this._onLayerChooserUpdate)));this.own(J(document.body,"click",E.hitch(this,this._onBodyClicked)));this.own(J(document.body,"keydown",E.hitch(this,function(u){u.keyCode===w.ENTER&&this._onBodyClicked(u)})));
this.own(J(this.layerChooser.domNode,"keydown",E.hitch(this,function(u){u.keyCode===w.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(u){var B=new c;if(u){var F=this.layerInfosObj.getLayerOrTableInfoById(u.id);F?this.layerChooser.filter(F).then(E.hitch(this,function(b){b?(this._onSelectNewItem({layerInfo:F,
name:F.title,url:u.url}),B.resolve(!0)):B.resolve(!1)}),E.hitch(this,function(){B.resolve(!1)})):B.resolve(!1)}else this._onSelectNewItem(null),B.resolve(!0);return B},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(u){u=u.target||u.srcElement;u===this.domNode||K.isDescendant(u,this.domNode)||u===this.layerChooser.domNode||K.isDescendant(u,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(u){u.stopPropagation();
u.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(u){u.keyCode===w.ENTER&&this._onDropDownClick(u)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";d.open({parent:this,popup:this.layerChooser,around:this.domNode});var u=this.layerChooser.domNode.parentNode;u&&(K.addClass(u,"jimu-layer-chooser-from-map-withdropbox-popup"),
this.customClass&&K.addClass(u,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){d.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(u){var B=E.getObject("layerInfo.id",
!1,this._selectedItem)||-1,F=E.getObject("layerInfo.id",!1,u)||-1;B=B!==F;this._selectedItem=u;this.hideLayerChooser();u=E.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=u;K.setAttr(this.layerNameNode,"title",u);u=E.getObject("layerInfo.layerObject",!1,this._selectedItem);B&&this.emit("selection-change",[u])},_onTreeClick:function(){var u=this._getSelectedItems();this._onSelectNewItem(0<u.length?u[0]:null)}})})},"widgets/Screening/setting/FieldPicker":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array dojo/_base/lang dojo/_base/html dojo/on jimu/BaseWidget dojo/text!./FieldPicker.html dojo/Evented jimu/dijit/SimpleTable dojo/query dojo/dom-class jimu/utils jimu/dijit/CheckBox jimu/dijit/RadioBtn".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F){return x([f,E,q],{templateString:l,baseClass:"jimu-widget-screening-setting",_fieldsTable:null,_entireFieldsArr:[],_selectedFieldsArr:[],_entireFieldObj:{},_configuredField:null,_configuredLabel:null,selectedSortingField:null,constructor:function(b){this._fieldsTable=null;this._entireFieldsArr=[];this._selectedFieldsArr=[];this._entireFieldObj={};this.selectedSortingField=this._configuredLabel=this._configuredField=null;a.mixin(this,b)},postMixInProperties:function(){this.nls.common=
{};a.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.selectedSortingField=null;this.inherited(arguments);this._init();this.own(d(this.fieldsDropdown,"change",a.hitch(this,function(b){this.selectedSortingField=b;this._setSortFieldDropdownLabel()})))},_init:function(){this._clearData();this._addValidFields();this._createFieldsTable();this._attachEventsToElement();this._displayPreviousConfiguredFields();this._setPreviousGroupByFieldCheckboxStatus();this.currentRow.sortInfo&&
"Desc"===this.currentRow.sortInfo.sortOrder?this.descRadioBtn.set("checked",!0):this.ascRadioBtn.set("checked",!0);this._onFieldsSelectionChange();var b=this.currentRow.sortInfo&&""!==this.currentRow.sortInfo.sortingField?this._getSortFieldValue():this.fieldsDropdown.getOptions(this.fieldsDropdown.options.length-1).value;this.fieldsDropdown.set("value",b);this._setSortFieldDropdownLabel()},_clearData:function(){this._entireFieldsArr=[];this._selectedFieldsArr=[]},_displayPreviousConfiguredFields:function(){var b;
if(this.selectedFields)for(b in this.selectedFields)this._configuredField=b,this._configuredLabel=this.selectedFields[b].label,this.btnAddField.click()},_addValidFields:function(){var b;var k="esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate".split(" ");var t=["string","number","date"];w.forEach(this.featureLayer.fields,a.hitch(this,function(H){this._entireFieldObj[H.name]=H;-1<k.indexOf(H.type)&&(this._entireFieldsArr.push(H.name),
this._entireFieldObj[H.name]=a.clone(H),this.selectedFields&&this.selectedFields[H.name]&&(this._entireFieldObj[H.name].label=this.selectedFields[H.name].label))}));this.layerInfo&&this.layerInfo.originOperLayer&&this.layerInfo.originOperLayer.popupInfo?b=this.layerInfo.originOperLayer.popupInfo:this.layerInfo&&this.layerInfo.getPopupInfo&&this.layerInfo.getPopupInfo()&&(b=this.layerInfo.getPopupInfo());b&&b.expressionInfos&&w.forEach(b.expressionInfos,a.hitch(this,function(H){H=a.clone(H);H.name=
"expression/"+H.name;this._entireFieldObj[H.name]=H;-1<t.indexOf(H.returnType)&&(this._entireFieldsArr.push(H.name),this._entireFieldObj[H.name].alias=H.title+" {"+H.name+"}",this.selectedFields&&this.selectedFields[H.name]&&(this._entireFieldObj[H.name].label=this.selectedFields[H.name].label))}));0===this._entireFieldsArr.length&&this._disableAddFieldButton()},_createFieldsTable:function(){this._fieldsTable=new n({fields:[{name:"layer",title:this.nls.analysisTab.addFieldsNameTitle,"class":"label",
type:"empty",width:"40%"},{name:"field",title:this.nls.common.label,type:"empty",editable:"true",width:"40%"},{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"20%"}]});this._fieldsTable.placeAt(this.fieldTable);c.setStyle(this._fieldsTable.domNode,{height:"100%"});this._fieldsTable.startup()},_attachEventsToElement:function(){this.own(d(this.btnAddField,"click",a.hitch(this,function(){if(!B.contains(this.btnAddField,"esriCTDisabled")){var b=
this._getDistinctFields(this._entireFieldsArr,this._selectedFieldsArr);this._addFieldsRow(b);this._onFieldsSelectionChange()}})));this.own(d(this._fieldsTable,"row-delete",a.hitch(this,function(b){this._deleteFieldRow(b);this._setSortFieldDropdownLabel()})))},_addFieldsRow:function(b){var k=this._fieldsTable.addRow({});if(k.success&&k.tr){k=k.tr;var t=u(".simple-table-cell",k);var H=t[0];t=t[1];this._addFieldDropdown(b,H,k);this._addLabelTextbox(t,k)}},_deleteFieldRow:function(b){B.remove(this.btnAddField,
"esriCTDisabled");var k=this._selectedFieldsArr.indexOf(b.fieldDropdownInstance.value);-1<k&&this._selectedFieldsArr.splice(k,1);this.fieldsDropdown.removeOption(k);this._addSelectedFieldInOtherDropdown(b.fieldDropdownInstance.value,null)},_addFieldDropdown:function(b,k,t){b=this._getDistinctFieldsOptionsObj(b);b=new K({"class":"esriCTFieldChooserDropdown",options:b});b.placeAt(k);b.startup();this._configuredField&&b.set("value",this._configuredField,!1);t.fieldDropdownInstance=b;this.own(d(b,"change",
a.hitch(this,function(H){var m=this._selectedFieldsArr[t.rowIndex];this._selectedFieldsArr[t.rowIndex]=H;this._addSelectedFieldInOtherDropdown(m,H);this._removeSelectedFieldFromOtherDropdown(H);this._setLayerFieldsDropdownLabel();this._onFieldsSelectionChange()})));this._selectedFieldsArr.push(b.value);this._removeSelectedFieldFromOtherDropdown(b.value);this._disableAddFieldButton();this._setLayerFieldsDropdownLabel()},_disableAddFieldButton:function(){this._selectedFieldsArr.length===this._entireFieldsArr.length&&
B.add(this.btnAddField,"esriCTDisabled")},_addLabelTextbox:function(b,k){var t=new J({"class":"esriCTFieldValidationTextBox"});t.placeAt(b);t.startup();this._configuredLabel&&(t.set("value",this._configuredLabel),this._configuredLabel=null);k.fieldLabelInstance=t},_getDistinctFieldsOptionsObj:function(b){var k=[];w.forEach(b,a.hitch(this,function(t){k.push({label:this._entireFieldObj[t].alias||this._entireFieldObj[t].name,value:t})}));return k},_removeSelectedFieldFromOtherDropdown:function(b){var k=
this._fieldsTable.getRows();w.forEach(k,a.hitch(this,function(t){b!==t.fieldDropdownInstance.value&&t.fieldDropdownInstance.removeOption(b)}))},_addSelectedFieldInOtherDropdown:function(b,k){var t=this._fieldsTable.getRows();w.forEach(t,a.hitch(this,function(H){k!==H.fieldDropdownInstance.value&&H.fieldDropdownInstance.addOption({label:this._entireFieldObj[b].alias,value:b})}))},okButtonClicked:function(){var b={};var k={};var t=this._fieldsTable.getRows();0===t.length?this.selectedFields=null:(w.forEach(t,
a.hitch(this,function(H){this._entireFieldObj[H.fieldDropdownInstance.value].label=F.stripHTML(a.trim(H.fieldLabelInstance.value));b[H.fieldDropdownInstance.value]=this._entireFieldObj[H.fieldDropdownInstance.value]})),this.selectedFields=b);k.selectedFields=this.selectedFields;k.groupbyfieldCheckBoxStatus=this.groupByFieldCheckBox.get("checked");k.sortInfo=this._getSortInfo();return k},_getDistinctFields:function(b,k){return b.filter(function(t){return 0>k.indexOf(t)})},_setPreviousGroupByFieldCheckboxStatus:function(){""!==
this.groupbyfieldCheckBoxStatus&&null!==this.groupbyfieldCheckBoxStatus&&void 0!==this.groupbyfieldCheckBoxStatus&&this.groupByFieldCheckBox.setValue(this.groupbyfieldCheckBoxStatus)},_getSortInfo:function(){return{sortOrder:this.ascRadioBtn.checked?"Asc":"Desc",sortingField:this.fieldsDropdown.value}},_onFieldsSelectionChange:function(){this.fieldsDropdown.options=[];w.forEach(this._selectedFieldsArr,a.hitch(this,function(b){this.fieldsDropdown.addOption({label:this._entireFieldObj[b].alias||this._entireFieldObj[b].name,
value:b})}));this._addStatisticsFieldOption();this.fieldsDropdown.set("value",this.selectedSortingField);this._setSortFieldDropdownLabel()},_getFieldText:function(b,k){return b.label?b.label:b.alias?b.alias:k},_addStatisticsFieldOption:function(){"esriGeometryPoint"===this.featureLayer.geometryType&&this.fieldsDropdown.addOption({label:this.nls.analysisTab.statisticsCountLabel,value:"esriCTCountField"});"esriGeometryPolyline"===this.featureLayer.geometryType&&this.fieldsDropdown.addOption({label:this.nls.analysisTab.statisticsTotalLengthLabel,
value:"esriCTTotalLengthField"});"esriGeometryPolygon"===this.featureLayer.geometryType&&this.fieldsDropdown.addOption({label:this.nls.analysisTab.statisticsTotalAreaLabel,value:"esriCTTotalAreaField"})},_getSortFieldValue:function(){var b=this.currentRow.sortInfo.sortingField;if(-1===this.fieldsDropdown.options.map(function(H){return H.value}).indexOf(b))for(var k in this._entireFieldObj){var t=this._entireFieldObj[k];t=this._getFieldText(t,k);t===b&&(b=k)}return b},_setSortFieldDropdownLabel:function(){this.fieldsDropdown.set("title",
this.fieldsDropdown.getOptions(this.fieldsDropdown.value).label)},_setLayerFieldsDropdownLabel:function(){var b;var k=this._fieldsTable.getRows();w.forEach(k,a.hitch(this,function(t){(b=t.fieldDropdownInstance.value)&&t.fieldDropdownInstance.set("title",t.fieldDropdownInstance.getOptions(b).label)}))}})})},"widgets/Screening/setting/SearchSourceSettings":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./SearchSourceSettings.html dojo/_base/html jimu/dijit/SimpleTable ./QuerySourceSetting ./LocatorSourceSetting jimu/LayerInfos/LayerInfos ../searchSourceUtils jimu/utils dojo/when esri/lang dojo/_base/lang dojo/_base/array dojo/query dojo/on dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H,m){return x([E,K,J],{baseClass:"jimu-widget-screening-search-source-settings",templateString:w,startup:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(t(this.menuItemClickNode,"click",F.hitch(this,this._onMenuItemClick)));this._createSourceListTable();this.showInfoWindowOnSelect=new m({checked:!1,label:this.nls.searchSourceSetting.generalSettingCheckboxLabel},this.showInfoWindowOnSelectNode);this.config&&
this.config.sources||(this.config.sources=[]);l.getInstance(this.map,this.map.itemInfo).then(F.hitch(this,function(g){this.layerInfosObj=g;q.setMap(this.map);q.setLayerInfosObj(this.layerInfosObj);q.setAppConfig(this.appConfig);u(q.getConfigInfo(this.config)).then(F.hitch(this,this._loadConfig))}))},_loadConfig:function(g){this.domNode&&this.setConfig(g)},setConfig:function(g){this.config=g;g=g.sources;this.allPlaceholder.set("value",n.stripHTML(this.config.allPlaceholder));this.showInfoWindowOnSelect.setValue(B.isDefined(this.config.showInfoWindowOnSelect)?
!!this.config.showInfoWindowOnSelect:!0);b.forEach(g,F.hitch(this,function(A,D){var N=this.sourceList.addRow({name:A.name||""});N&&N.success?(this._setRelatedConfig(N.tr,A),0===D&&setTimeout(F.hitch(this,function(){this.sourceList.selectRow(N.tr)}),100)):console.error("add row failed ",N)}))},getConfig:function(){if(this._currentSourceSetting)if(this._currentSourceSetting.isValidConfig())this._closeSourceSetting();else return null;var g={allPlaceholder:n.stripHTML(this.allPlaceholder.get("value")),
showInfoWindowOnSelect:this.showInfoWindowOnSelect.checked},A=this.sourceList.getRows(),D=[];b.forEach(A,F.hitch(this,function(N){var O=this._getRelatedConfig(N);delete O._definition;this._removeRelatedConfig(N);D.push(O)}));g.sources=D;return g},destroy:function(){q.setMap(null);q.setLayerInfosObj(null);q.setAppConfig(null);this.inherited(arguments)},_onAllPlaceholderBlur:function(){this.allPlaceholder.set("value",n.stripHTML(this.allPlaceholder.get("value")))},_createSourceListTable:function(){this.sourceList=
new c({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.common.name,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.sourceList);a.setStyle(this.sourceList.domNode,"height","100%");this.sourceList.startup();this.own(t(this.sourceList,"row-select",F.hitch(this,this._onSourceItemSelected)));this.own(t(this.sourceList,"row-delete",F.hitch(this,this._onSourceItemRemoved)))},_onSourceItemRemoved:function(g){this._currentSourceSetting&&
this._currentSourceSetting.getRelatedTr()===g&&(this._currentSourceSetting.destroy(),this._currentSourceSetting=null)},_onSourceItemSelected:function(g){var A=this._getRelatedConfig(g),D=this._currentSourceSetting&&this._currentSourceSetting.tr;A&&g!==D&&(this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?(this._currentSourceSetting.showValidationTip(),this.sourceList.selectRow(D)):(H.remove(this.searchSources,"esriCTSourcesExtraHeight"),"query"===A.type?this._createNewQuerySourceSettingFromSourceList(A,
A._definition||{},g):"locator"===A.type&&this._createNewLocatorSourceSettingFromSourceList(A,A._definition||{},g)))},_setRelatedConfig:function(g,A){k(g).data("config",F.clone(A))},_getRelatedConfig:function(g){return k(g).data("config")[0]},_removeRelatedConfig:function(g){return k(g).removeData("config")},_onMenuItemClick:function(g){g=g&&g.target&&a.getAttr(g.target,"type");this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?this.emit("invalid-source-setting"):(H.remove(this.searchSources,
"esriCTSourcesExtraHeight"),"locator"===g?this._addNewLocator():"query"===g&&this._addNewQuerySource())},_addNewLocator:function(){this._createNewLocatorSourceSettingFromMenuItem({},{})},_addNewQuerySource:function(){this._createNewQuerySourceSettingFromMenuItem({},{})},_createNewLocatorSourceSettingFromMenuItem:function(g,A){var D=new f({nls:F.mixin(this.nls.searchSourceSetting,window.jimuNls.units),map:this.map});D.setDefinition(A);D.setConfig({url:g.url||"",name:g.name||"",singleLineFieldName:g.singleLineFieldName||
"",placeholder:g.placeholder||"",countryCode:g.countryCode||"",maxSuggestions:g.maxSuggestions||6,maxResults:g.maxResults||6,searchInCurrentMapExtent:!!g.searchInCurrentMapExtent,type:"locator"});D._openLocatorChooser();D.own(t(D,"select-locator-url-ok",F.hitch(this,function(N){(N=this.sourceList.addRow({name:N.name||"New Geocoder"},this.sourceList.getRows().length))&&N.success&&(this._currentSourceSetting&&this._closeSourceSetting(),D.setRelatedTr(N.tr),D.placeAt(this.sourceSettingNode),this.sourceList.selectRow(N.tr),
this._currentSourceSetting=D)})));D.own(t(D,"reselect-locator-url-ok",F.hitch(this,function(N){var O=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(O,{name:N.name})})));D.own(t(D,"select-locator-url-cancel",F.hitch(this,function(){this._currentSourceSetting!==D&&(D.destroy(),D=null)})))},_createNewLocatorSourceSettingFromSourceList:function(g,A,D){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new f({nls:F.mixin(this.nls.searchSourceSetting,window.jimuNls.units),
map:this.map});this._currentSourceSetting.own(t(this._currentSourceSetting,"enable-local-search",F.hitch(this,function(){H.add(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.own(t(this._currentSourceSetting,"disable-local-search",F.hitch(this,function(){H.remove(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.setDefinition(A);this._currentSourceSetting.setConfig({url:g.url||"",name:g.name||"",singleLineFieldName:g.singleLineFieldName||"",
placeholder:g.placeholder||"",countryCode:g.countryCode||"",maxSuggestions:g.maxSuggestions||6,maxResults:g.maxResults||6,searchInCurrentMapExtent:!!g.searchInCurrentMapExtent,enableLocalSearch:!!g.enableLocalSearch,localSearchMinScale:g.localSearchMinScale,localSearchDistance:g.localSearchDistance,type:"locator"});this._currentSourceSetting.setRelatedTr(D);this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.own(t(this._currentSourceSetting,"reselect-locator-url-ok",
F.hitch(this,function(N){var O=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(O,{name:N.name})})))},_closeSourceSetting:function(){var g=this._currentSourceSetting.getRelatedTr(),A=this._currentSourceSetting.getConfig();A._definition=this._currentSourceSetting.getDefinition();this._setRelatedConfig(g,A);this.sourceList.editRow(g,{name:A.name});this._currentSourceSetting.destroy()},_createNewQuerySourceSettingFromMenuItem:function(g,A){var D=new d({nls:this.nls.searchSourceSetting,
map:this.map,appConfig:this.appConfig});D.setDefinition(A);D.setConfig({url:g.url,name:g.name||"",layerId:g.layerId,placeholder:g.placeholder||"",searchFields:g.searchFields||[],displayField:g.displayField||A.displayField||"",exactMatch:!!g.exactMatch,maxSuggestions:g.maxSuggestions||6,maxResults:g.maxResults||6,searchInCurrentMapExtent:!!g.searchInCurrentMapExtent,type:"query"});D._openQuerySourceChooser();D.own(t(D,"select-query-source-ok",F.hitch(this,function(N){(N=this.sourceList.addRow({name:N.name},
0))&&N.success&&(this._currentSourceSetting&&this._closeSourceSetting(),D.setRelatedTr(N.tr),D.placeAt(this.sourceSettingNode),this.sourceList.selectRow(N.tr),this._currentSourceSetting=D)})));D.own(t(D,"reselect-query-source-ok",F.hitch(this,function(N){var O=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(O,{name:N.name})})));D.own(t(D,"select-query-source-cancel",F.hitch(this,function(){this._currentSourceSetting!==D&&(D.destroy(),D=null)})))},_createNewQuerySourceSettingFromSourceList:function(g,
A,D){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new d({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.setDefinition(A);this._currentSourceSetting.setConfig({url:g.url,name:g.name||"",layerId:g.layerId,placeholder:g.placeholder||"",searchFields:g.searchFields||[],displayField:g.displayField||A.displayField||"",exactMatch:!!g.exactMatch,maxSuggestions:g.maxSuggestions||
6,maxResults:g.maxResults||6,searchInCurrentMapExtent:!!g.searchInCurrentMapExtent,type:"query"});this._currentSourceSetting.setRelatedTr(D);this._currentSourceSetting.own(t(this._currentSourceSetting,"reselect-query-source",F.hitch(this,function(N){var O=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(O,{name:N.name})})))}})})},"widgets/Screening/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H){return x([K,J,w,n],{baseClass:"jimu-widget-screening-query-source-setting",templateString:a,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,constructor:function(m){this._layerId=this._fieldsCheckBox=this._layerDefinition=null;this._clickSet=this._suggestible=!1;this.fieldsPopup=this.config=this.tr=this.map=this.appConfig=this.nls=null;c.mixin(this,
m)},postMixInProperties:function(){this.nls.common={};this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.own(f(this.setSourceBtnClickNode,"click",c.hitch(this,this._onSetSourceClick)));this.own(f(this.sourceName,"Blur",c.hitch(this,this._onSourceNameBlur)));this.own(f(this.placeholder,"Blur",c.hitch(this,this._onPlaceholderBlur)));this.own(f(this.fieldsSelectorNode,"click",c.hitch(this,this._onFieldsSelectorClick)));this.exactMatch=new H({checked:!1,label:this.nls.exactMatch},
this.exactMatch);this.searchInCurrentMapExtent=new H({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=[];this._setMessageNodeContent("")},setDefinition:function(m){this._layerDefinition=m||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(m){this.tr=m},getRelatedTr:function(){return this.tr},setConfig:function(m){if("[object Object]"===Object.prototype.toString.call(m)){var g=m.url;g&&(this.config=
m,this.shelter.show(),this._layerDefinition.url!==g?this._getDefinitionFromRemote(g).then(c.hitch(this,function(A){g&&A&&"error"!==A.type?(this._layerDefinition=A,this._layerDefinition.url=g,this._setSourceItems(),this._setMessageNodeContent("")):g&&A&&"error"===A.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(b.substitute({URL:A.url},c.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},
isValidConfig:function(){var m=this.getConfig();return m.url&&m.name&&m.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:k.stripHTML(this.sourceName.get("value")),placeholder:k.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),
searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",k.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",
k.stripHTML(this.placeholder.get("value")))},_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",!0);E.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);E.setStyle(this.fieldsSelectorNode,
"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",k.stripHTML(this.config.name||""));this.placeholder.set("value",k.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",this.config.displayField||
"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?this._hideSuggestibleTips():this._showSuggestibleTips();
this._enableSourceItems()},_getDefinitionFromRemote:function(m){var g=new q,A=F({url:m,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(A);A.then(c.hitch(this,function(D){g.resolve(D)}),c.hitch(this,function(D){console.error(D);g.resolve({type:"error",url:this._getRequestUrl(m)})}));return g.promise},_setMessageNodeContent:function(m,g){E.empty(this.messageNode);m.nodeType||(m=E.toDom(m));E.place(m,this.messageNode);g?E.setStyle(this.messageTr,"display",""):E.setStyle(this.messageTr,
"display","none")},_getRequestUrl:function(m){var g=window.location.protocol;return"http:"===g?B.setHttpProtocol(m):"https:"===g?B.setHttpsProtocol(m):m},_setSearchFields2Node:function(){var m=null,g=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(m=[]);if(g){var A=this._layerDefinition.fields;m=d.filter(this.config.searchFields,function(D){return d.some(A,function(N){return N.name===
D})})}else m=this.config.searchFields;this.searchFields.set("_fields",m)},_setDisplayFieldOptions:function(){var m=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?m=d.map(this._layerDefinition.fields,function(g){return{label:g.alias||g.name||"",value:g.name||""}}):this.config&&this.config.displayField&&(m=[{label:this.config.displayField,value:this.config.displayField}]);this.displayField.set("options",m)},_getSearchFieldsAlias:function(){var m=this._getSearchFields();
if(!(m&&0<m.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var g=this._layerDefinition.fields,A=d.map(g,function(z){return z&&z.name}),D=[],N=0,O=m.length;N<O;N++){var L=A.indexOf(m[N]);-1<L&&(g[L].alias?D.push(g[L].alias):D.push(g[L].name))}return D.join(",")}return m.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},_setSearchFields:function(m){this.searchFields.set("_fields",m)},_onSetSourceClick:function(){this._clickSet=
!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var m=new u({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});f.once(m,"ok",c.hitch(this,function(g){m.close();this.setDefinition(g.definition||{});this.setConfig({layerId:g.layerInfo&&g.layerInfo.id||null,url:g.url,name:g.name||"",placeholder:"",
searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,maxSuggestions:6,maxResults:6,type:"query"});m=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",g):this.emit("select-query-source-ok",g)}));f.once(m,"cancel",c.hitch(this,function(){m.close();m=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var m=E.create("div",{style:{maxHeight:"480px"}}),g=this._layerDefinition.fields;this._fieldsCheckBox=
[];d.forEach(g,c.hitch(this,function(A,D){var N=new H({checked:this._isSearchable(A),label:A.alias||A.name});E.addClass(N.domNode,"esriCTSearchSourceFieldCheckbox");E.addClass(N.labelNode,"jimu-ellipsis");E.setAttr(N.domNode,{title:A.alias||A.name});0===D%3&&(window.isRTL?E.setStyle(N.domNode,"marginRight",0):E.setStyle(N.domNode,"marginLeft",0));N.placeAt(m);l(N.domNode).data("fieldName",A.name);this._fieldsCheckBox.push(N)}));this.fieldsPopup=new t({titleLabel:this.nls.setSearchFields,autoHeight:!0,
content:m,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.common.ok,onClick:c.hitch(this,"_onSearchFieldsOk")},{label:this.nls.common.cancel}],onClose:c.hitch(this,function(){this.fieldsPopup=null})});E.addClass(this.fieldsPopup.domNode,this.baseClass)},_onSearchFieldsOk:function(){var m=[];d.forEach(this._fieldsCheckBox,function(g){if(g.getValue()){var A=l(g.domNode).data("fieldName");m.push(A[0]);l(g.domNode).removeData()}});this._setSearchFields(m);this.searchFields.set("value",
this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(m){var g=this._getSearchFields();return d.some(g,c.hitch(this,function(A){return m.name===A}))},_showSuggestibleTips:function(){E.removeClass(this.tipsNode,"esriCTHidden");E.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){E.addClass(this.tipsNode,"esriCTHidden");E.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(m){if(!m.validate()&&m.domNode&&
m.focusNode){var g=m.get("disabled");g&&m.set("disabled",!1);m.focusNode.focus();setTimeout(c.hitch(this,function(){m.focusNode.blur();g&&m.set("disabled",!0);m=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(x,E,K,J,w,a,c,d,f){return x([a,E],{width:830,height:560,titleLabel:"",dijitArgs:null,
postCreate:function(){this.inherited(arguments);w.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new c(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(K(this.fls,"ok",J.hitch(this,function(l){if(0!==l.length){var q=l[0];if(q.definition)try{q.definition.name=q.name,q.definition.url=q.url,this.emit("ok",q)}catch(n){console.error(n)}else this.loading.show(),
f({url:q.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(J.hitch(this,function(n){if(this.domNode){this.loading.hide();q.definition=n;try{q.definition.name=q.name,q.definition.url=q.url,this.emit("ok",q)}catch(u){console.error(u)}}}),J.hitch(this,function(n){console.error(n);this.domNode&&this.loading.hide()}))}})));this.own(K(this.fls,"cancel",J.hitch(this,function(){try{this.emit("cancel")}catch(l){console.error(l)}})))},_initLoading:function(){this.loading=new d({hidden:!0});
this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),function(x,E,K,J,
w,a,c,d,f,l,q,n,u,B){return x([E,K,J,f],{templateString:w,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,layerChooserFromMap:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=B.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var F=[];this.mapRadio.checked?F=this.flcMap.getSelectedItems():this.portalRadio.checked?F=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(F=this.flcUrl.getSelectedItems());return F},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();
this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new q({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0,layerChooserFromMap:this.layerChooserFromMap});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(d(this.flcMap,"ok",a.hitch(this,function(F){F&&0<F.length&&
this.emit("ok",F)})));this.own(d(this.flcMap,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new n({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(d(this.flcPortal,"next",a.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));
this.own(d(this.flcPortal,"back",a.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(d(this.flcPortal,"ok",a.hitch(this,function(F){F&&0<F.length&&this.emit("ok",F)})));this.own(d(this.flcPortal,"cancel",a.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=
new u({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(d(this.flcUrl,"ok",a.hitch(this,function(F){F&&0<F.length&&this.emit("ok",F)})));this.own(d(this.flcUrl,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var F="featureLayerSourceRadios_"+this._getRandomString(),b=a.hitch(this,this._onRadioClicked);this.mapRadio=new l({group:F,onStateChange:b,checked:!0});
this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new l({group:F,onStateChange:b,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new l({group:F,onStateChange:b,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(d(this.mapLabel,"click",a.hitch(this,function(){this.mapRadio.check()})));this.own(d(this.portalLabel,"click",a.hitch(this,function(){this.portalRadio.check()})));this.own(d(this.urlLabel,"click",a.hitch(this,function(){this.urlRadio.check()})))},
_getRandomString:function(){var F=Math.random().toString();return F=F.slice(2,F.length)},_onRadioClicked:function(){c.setStyle(this.flcContainer,"display","none");c.setStyle(this.hflcContainer,"display","none");c.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(c.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(c.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(c.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(x,E,K,J,w,a,c,d,f){return w([a,c,d,E],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
layerChooserFromMap:null,constructor:function(l){this.options=l},postMixInProperties:function(){this.nls=K.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=this.layerChooserFromMap?this.layerChooserFromMap:new f(this.options);this.layerChooser.placeAt(this.chooserContainer);J.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(x(this.layerChooser,"tree-click",K.hitch(this,function(){0<this.getSelectedItems().length?J.removeClass(this.btnOk,
"jimu-state-disabled"):J.addClass(this.btnOk,"jimu-state-disabled")})));this.own(x(this.btnOk,"click",K.hitch(this,function(){var l=this.getSelectedItems();0<l.length&&this.emit("ok",l)})));this.own(x(this.btnCancel,"click",K.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(x,E,K,J,w){return x([w],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=J.hitch(this,
this.basicFilter);this.filter=w.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=w.andCombineFilters([this.filter,J.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);K.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(a){return a.getLayerType().then(function(c){return!("ArcGISDynamicMapServiceLayer"===c||"ArcGISTiledMapServiceLayer"===
c||"GroupLayer"===c)})},basicFilter:function(a){var c=new E;0<=this.ignoredFeaturelayerIds.indexOf(a.id)?c.resolve(!1):this.onlyShowVisible&&"Table"!==a.getLayerType()?c.resolve(a.isShowInMap()):c.resolve(!0);return c},getHandledItem:function(a){var c=this.inherited(arguments),d=a&&a.layerInfo;d=d&&d.layerObject;c.url=d&&d.url||"";return c}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k){return x([E,K,J,n],{templateString:w,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=a.mixin({},window.jimuNls.common);this.nls=a.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=b.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new B({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(f(this.selector,"item-selected",a.hitch(this,this._onItemSelected)));this.own(f(this.selector,"none-item-selected",a.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new F({multiple:this.multiple});this.own(f(this.serviceBrowser,"tree-click",a.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){c.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){c.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();c.setStyle(this.btnOk,"display","none");c.setStyle(this.btnNext,"display","block");c.setStyle(this.btnBack,"display","none");c.addClass(this.btnOk,"jimu-state-disabled");c.setStyle(this.selectorContainer,"display","block");c.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var t=this.getSelectedItems();0<t.length&&this.emit("ok",t)},_onBtnNextClicked:function(){var t=this.selector.getSelectedItem();
t&&(c.setStyle(this.btnNext,"display","none"),c.setStyle(this.btnBack,"display","block"),c.setStyle(this.btnOk,"display","block"),c.addClass(this.btnOk,"jimu-state-disabled"),c.setStyle(this.selectorContainer,"display","none"),c.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(t.url||t.item),this._serviceBrowserDef.then(a.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),a.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):c.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array",
"jimu/serviceBrowserRuleUtils"],function(x,E,K,J,w){return x([E],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=w.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var a=this.inherited(arguments);return a=J.map(a,K.hitch(this,function(c){return{name:c.name,url:c.url,definition:c.definition}}))}})})},
"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(x,E,K){return x([E],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(J){return new K(J)}})})},
"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(x,E,K,J,w){var a=E.NodeList,c={},d=0,f=function(n){var u=w.get(n,"data-dojo-dataid");u||(u="pid"+d++,w.set(n,"data-dojo-dataid",u));return u},l=x._nodeData=function(n,u,B){var F=f(n),b;c[F]||(c[F]={});if(1==arguments.length)return c[F];"string"==typeof u?2<arguments.length?c[F][u]=B:b=c[F][u]:b=K.mixin(c[F],u);return b},q=x._removeNodeData=function(n,u){n=f(n);c[n]&&(u?delete c[n][u]:
delete c[n])};a._gcNodeData=x._gcNodeData=function(){var n=E("[data-dojo-dataid]").map(f),u;for(u in c)0>J.indexOf(n,u)&&delete c[u]};K.extend(a,{data:a._adaptWithCondition(l,function(n){return 0===n.length||1==n.length&&"string"==typeof n[0]}),removeData:a._adaptAsForEach(q)});return a})},"widgets/Screening/setting/LocatorSourceSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/portalUrlUtils jimu/dijit/Message jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter esri/request esri/lang ../searchSourceUtils jimu/utils dojo/text!./LocatorSourceSetting.html jimu/dijit/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox".split(" "),
function(x,E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H,m){return x([c,d,f,w],{baseClass:"jimu-widget-screening-locator-source-setting",templateString:H,_clickSet:!1,_suggestible:!1,_locatorDefinition:null,_esriLocatorRegExp:/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,tr:null,nls:null,config:null,geocoderPopup:null,singleLineFieldName:null,serviceChooserContent:null,constructor:function(g){this._suggestible=this._clickSet=!1;this._locatorDefinition=null;this._esriLocatorRegExp=
/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g;this.serviceChooserContent=this.singleLineFieldName=this.geocoderPopup=this.config=this.nls=this.tr=null;E.mixin(this,g)},postCreate:function(){this.inherited(arguments);this.exampleHint=this.nls.locatorExample+": http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer";this.own(J(this.setButtonNode,"click",E.hitch(this,this._onSetLocatorUrlClick)));this.own(J(this.locatorName,"Blur",E.hitch(this,
this._onLocatorNameBlur)));this.own(J(this.placeholder,"Blur",E.hitch(this,this._onPlaceholderBlur)));this.own(J(this.countryCode,"Blur",E.hitch(this,this._onCountryCodeBlur)));this.searchInCurrentMapExtent=new m({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this.enableLocalSearch=new m({checked:!1,label:this.nls.enableLocalSearch},this.enableLocalSearch);this._processLocalSearchTable(!1);this.own(J(this.enableLocalSearch,"change",E.hitch(this,function(){this._processLocalSearchTable(this.enableLocalSearch.getValue())})));
K.setStyle(this.enableLocalSearch.domNode,"display","none");this._setMessageNodeContent(this.exampleHint);this.config=this.config?this.config:{};this.setConfig(this.config)},setRelatedTr:function(g){this.tr=g},getRelatedTr:function(){return this.tr},setDefinition:function(g){this._locatorDefinition=g||{}},getDefinition:function(){return this._locatorDefinition},setConfig:function(g){if("[object Object]"===Object.prototype.toString.call(g)){var A=g.url;A&&(this.config=g,this.shelter.show(),this._locatorDefinition.url!==
A?this._getDefinitionFromRemote(A).then(E.hitch(this,function(D){A&&D&&"error"!==D.type?(this._locatorDefinition=D,this._locatorDefinition.url=A,this._setSourceItems(),this._setMessageNodeContent(this.exampleHint)):A&&D&&"error"===D.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(b.substitute({URL:D.url},E.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setSourceItems(),this._setMessageNodeContent(this.exampleHint),this.shelter.hide()))}},isValidConfig:function(){var g=
this.getConfig();return g.url&&g.name&&g.singleLineFieldName?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.locatorUrl);this._showValidationErrorTip(this.locatorName)},getConfig:function(){return{url:this.locatorUrl.get("value"),name:t.stripHTML(this.locatorName.get("value")),singleLineFieldName:this.singleLineFieldName,placeholder:t.stripHTML(this.placeholder.get("value")),countryCode:t.stripHTML(this.countryCode.get("value")),maxSuggestions:this.maxSuggestions.get("value")||
6,maxResults:this.maxResults.get("value")||6,searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,enableLocalSearch:this.enableLocalSearch.getValue(),localSearchMinScale:this.localSearchMinScale.get("value"),localSearchDistance:this.localSearchDistance.get("value"),type:"locator"}},_onLocatorNameBlur:function(){this.locatorName.set("value",t.stripHTML(this.locatorName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",t.stripHTML(this.placeholder.get("value")))},
_onCountryCodeBlur:function(){this.countryCode.set("value",t.stripHTML(this.countryCode.get("value")))},_disableSourceItems:function(){this.locatorName.set("disabled",!0);this.placeholder.set("disabled",!0);this.countryCode.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.locatorName.set("disabled",!1);this.placeholder.set("disabled",!1);this.countryCode.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",
!1)},_setSourceItems:function(){var g=this.config;g.url&&(this.locatorUrl.set("value",g.url),this._processCountryCodeRow(g.url));g.name&&this.locatorName.set("value",t.stripHTML(g.name));g.singleLineFieldName&&(this.singleLineFieldName=g.singleLineFieldName);g.placeholder&&this.placeholder.set("value",t.stripHTML(g.placeholder));g.countryCode&&this.countryCode.set("value",t.stripHTML(g.countryCode));"capabilities"in this._locatorDefinition?(K.setStyle(this.enableLocalSearch.domNode,"display",""),
this._processLocalSearchTable(g.enableLocalSearch),this.enableLocalSearch.setValue(g.enableLocalSearch),g.localSearchMinScale&&g.enableLocalSearch&&this.localSearchMinScale.set("value",g.localSearchMinScale),g.localSearchDistance&&g.enableLocalSearch&&this.localSearchDistance.set("value",g.localSearchDistance)):(this.enableLocalSearch.setValue(!1),K.setStyle(this.enableLocalSearch.domNode,"display","none"));(this._suggestible=this._locatorDefinition&&this._locatorDefinition.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?
this._hideSuggestibleTips():this._showSuggestibleTips();this.searchInCurrentMapExtent.setValue(!!g.searchInCurrentMapExtent);this.maxSuggestions.set("value",g.maxSuggestions||6);this.maxResults.set("value",g.maxResults||6);this._enableSourceItems()},_isEsriLocator:function(g){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(g)},_getDefinitionFromRemote:function(g){var A=new a;if(this._isEsriLocator(g))A.resolve({singleLineAddressField:{name:"SingleLine",type:"esriFieldTypeString",
alias:"Single Line Input",required:!1,length:200,localizedNames:{},recognizedNames:{}},capabilities:"Geocode,ReverseGeocode,Suggest"});else{var D=F({url:g,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(D);D.then(E.hitch(this,function(N){A.resolve(N)}),E.hitch(this,function(N){console.error(N);A.resolve({type:"error",url:this._getRequestUrl(g)})}))}return A.promise},_setMessageNodeContent:function(g,A){K.empty(this.messageNode);g.nodeType||(g=K.toDom(g));K.place(g,this.messageNode);
A?K.addClass(this.messageNode,"esriCTErrorMessage"):K.removeClass(this.messageNode,"esriCTErrorMessage")},_getRequestUrl:function(g){var A=window.location.protocol;return"http:"===A?l.setHttpProtocol(g):"https:"===A?l.setHttpsProtocol(g):g},_onSetLocatorUrlClick:function(){this._clickSet=!0;this._openServiceChooser()},_openLocatorChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){this.serviceChooserContent=new n({url:this.locatorUrl.get("value")||""});
this.shelter=new B({hidden:!0});this.geocoderPopup=new u({titleLabel:this.nls.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,container:window.jimuConfig.layoutId,width:640});this.shelter.placeAt(this.geocoderPopup.domNode);K.setStyle(this.serviceChooserContent.domNode,"width","580px");K.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(J(this.serviceChooserContent,"validate-click",E.hitch(this,function(){K.removeClass(this.serviceChooserContent.domNode,
"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(J(this.serviceChooserContent,"ok",E.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(J(this.serviceChooserContent,"cancel",E.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(g){g&&g[0]&&g[0].url&&this.domNode&&(this.shelter.show(),F({url:g[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(E.hitch(this,function(A){this.shelter.hide();A&&A.singleLineAddressField&&
A.singleLineAddressField.name?(this._enableSourceItems(),this.locatorUrl.set("value",g[0].url),this.locatorName.get("value")||this.locatorName.set("value",k.getGeocoderName(g[0].url)),"capabilities"in A?(K.setStyle(this.enableLocalSearch.domNode,"display",""),this._isEsriLocator(g[0].url)?this.enableLocalSearch.setValue(!0):this.enableLocalSearch.setValue(!1)):(this.enableLocalSearch.setValue(!1),K.setStyle(this.enableLocalSearch.domNode,"display","none")),this.singleLineFieldName=A.singleLineAddressField.name,
this._processCountryCodeRow(g[0].url),this._locatorDefinition=A,this._locatorDefinition.url=g[0].url,(this._suggestible=A.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips(),this._clickSet?this.emit("reselect-locator-url-ok",this.getConfig()):this.emit("select-locator-url-ok",this.getConfig()),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),this._setMessageNodeContent(this.exampleHint)):new q({message:this.nls.locatorWarning})}),
E.hitch(this,function(A){console.error(A);this.shelter.hide();new q({message:b.substitute({URL:this._getRequestUrl(g[0].url)},E.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_processLocalSearchTable:function(g){g?(K.removeClass(this.minScaleNode,"esriCTHidden"),K.removeClass(this.radiusNode,"esriCTHidden"),this.emit("enable-local-search")):(K.addClass(this.minScaleNode,
"esriCTHidden"),K.addClass(this.radiusNode,"esriCTHidden"),this.emit("disable-local-search"))},_processCountryCodeRow:function(g){this._isEsriLocator(g)?(this.countryCode.set("value",""),K.removeClass(this.countryCodeRow,"hide-country-code-row")):K.addClass(this.countryCodeRow,"hide-country-code-row")},_showSuggestibleTips:function(){K.removeClass(this.tipsNode,"esriCTHidden");K.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){K.addClass(this.tipsNode,"esriCTHidden");
K.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(g){if(!g.validate()&&g.domNode&&g.focusNode){var A=g.get("disabled");A&&g.set("disabled",!1);g.focusNode.focus();setTimeout(E.hitch(this,function(){g.focusNode.blur();A&&g.set("disabled",!0);g=null}),100)}}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(x,E,K){return x([E],{baseClass:"jimu-geocode-service-chooser-content",
_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(J){return new K(J)}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(x,E,K,J,w){return x([E],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=w.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var a=this.inherited(arguments);return a=J.map(a,K.hitch(this,function(c){return{name:c.name,url:c.url}}))}})})},"widgets/Screening/searchSourceUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils esri/lang esri/request".split(" "),function(x,E,K,J,w,a,c,d){return{map:null,layerInfosObj:null,
appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,setMap:function(f){this.map=f},setLayerInfosObj:function(f){this.layerInfosObj=f},setAppConfig:function(f){this.appConfig=f},getConfigInfo:function(f){if(f&&f.sources&&0<f.sources.length){var l=null;return this.searchLayer(this.map)&&f.upgradeFromGeocoder?(l=this.map.itemInfo.itemData.applicationProperties.viewing.search,l=E.map(l.layers,x.hitch(this,function(q,n){n.hintText=q;return this._getQueryTypeGeocoder(n)},
l.hintText)),w(l).then(x.hitch(this,function(q){f.sources=[].concat(q).concat(f.sources);return f}))):f}return J(this._getSourcesFromPortalAndWebmap()).then(x.hitch(this,function(q){return{allPlaceholder:"",showInfoWindowOnSelect:!0,sources:q}}))},_getSourcesFromPortalAndWebmap:function(){var f=[],l=null;this.searchLayer(this.map)&&(l=this.map.itemInfo.itemData.applicationProperties.viewing.search,E.forEach(l.layers,x.hitch(this,function(q,n){n.hintText=q;f.push(this._getQueryTypeGeocoder(n))},l.hintText)));
return a.getPortalSelfInfo(this.appConfig.portalUrl).then(x.hitch(this,function(q){if((q=q.helperServices&&q.helperServices.geocode)&&0<q.length)for(var n=0,u=q.length;n<u;n++){var B=q[n];B&&f.push(this._processSingleLine(B))}return w(f).then(x.hitch(this,function(F){for(var b=[],k=0;k<F.length;k++){var t=F[k];t&&(t&&"query"===t.type?b.push(t):(t={name:t.name||this._getGeocodeName(t.url),url:t.url,singleLineFieldName:t.singleLineFieldName,placeholder:t.placeholder||t.name||this._getGeocodeName(t.url),
maxResults:6,searchInCurrentMapExtent:!1,type:"locator"},t.enableLocalSearch=this._isEsriLocator(t.url),t.localSearchMinScale=3E5,t.localSearchDistance=5E4,b.push(t)))}return b}))}))},_getQueryTypeGeocoder:function(f){var l=this.map.getLayer(f.id),q=null,n=null,u=null;u=c.isDefined(f.subLayer)?f.id+"_"+f.subLayer:f.id;q=this.layerInfosObj.traversal(function(B){return B.id===u?(n=B,!0):!1});return l&&q&&n?(q=c.isDefined(f.subLayer)?n.url||l.url+"/"+f.subLayer:n.url||l.url,{name:n.title,layerId:u,url:q,
placeholder:f.hintText,searchFields:[f.field.name],displayField:f.field.name,exactMatch:f.field.exactMatch||!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(f){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(f)},_processSingleLine:function(f){if(f.singleLineFieldName)return f;if(this._isEsriLocator(f.url))return f.singleLineFieldName="SingleLine",f;var l=new K;d({url:f.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(x.hitch(this,
function(q){q.singleLineAddressField&&q.singleLineAddressField.name?(f.singleLineFieldName=q.singleLineAddressField.name,l.resolve(f)):(console.warn(f.url+"has no singleLineFieldName"),l.resolve(null))}),x.hitch(this,function(q){console.error(q);l.resolve(null)}));return l.promise},_getGeocodeName:function(f){if("string"!==typeof f)return"geocoder";f=f.split("/");return f[f.length-2]||"geocoder"},getGeocoderName:function(f){return this._getGeocodeName(f)},hasAppSearchInfo:function(f){return f.itemInfo&&
f.itemInfo.itemData&&f.itemInfo.itemData.applicationProperties&&f.itemInfo.itemData.applicationProperties.viewing&&f.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(f){if(!this.hasAppSearchInfo(f))return!1;f=f.itemInfo.itemData.applicationProperties.viewing.search;return f.enabled&&0!==f.layers.length?!0:!1}}})},"widgets/Screening/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},
"url:widgets/Screening/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n    \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n      \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton"\x3e\r\n        ${nls.common.ok}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/DownloadSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Download Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.downloadLegend}\x3c/legend\x3e\r\n    \x3c!--Sync enable download Option--\x3e\r\n    \x3cform data-dojo-attach-point\x3d"downloadOptionForm" class\x3d"esriCTDownloadOptionForm"\x3e\r\n      \x3c!--Sync-enable feature service option--\x3e\r\n      \x3cdiv class\x3d"esriCTSyncEnableOptionDiv"\x3e\r\n        \x3c!--Sync-enable radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"syncEnableOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"syncEnable" data-dojo-attach-point\x3d"syncEnableRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"syncEnableOption"\x3e\r\n          ${nls.downloadTab.syncEnableOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3c!--Sync-enable download option label and hint container--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.syncEnableOptionHint}\r\n            \x3cbr\x3e${nls.downloadTab.syncEnableOptionNote}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Table representation of download file options for each layer--\x3e\r\n      \x3cdiv class\x3d"esriCTLayerDownloadOptionTable" data-dojo-attach-point\x3d"downloadOptionTable"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task geoprocessing service option--\x3e\r\n      \x3cdiv class\x3d"esriCTGPServiceOptionDiv"\x3e\r\n        \x3c!--Extract data task radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"gpServiceOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"extractDataTask" data-dojo-attach-point\x3d"gpServiceRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--Extract data task download option label and hint container--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"gpServiceOption"\x3e\r\n          ${nls.downloadTab.extractDataTaskOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.extractDataTaskOptionHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task INPUT Container--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer esriCTHidden" data-dojo-attach-point\x3d"extractDataTaskInputContainer"\x3e\r\n        \x3c!--Extract data task INPUT TEXTBOX label--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel" title\x3d"${nls.downloadTab.GPTaskLabel}"\x3e\r\n          ${nls.downloadTab.GPTaskLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Extract data task TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"extractDataTaskTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set Button--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"extractDataTaskSetButton"\r\n          title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--User cannot download--\x3e\r\n      \x3cdiv class\x3d"esriCTCannotDownloadOptionDiv"\x3e\r\n        \x3c!--User cannot download radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"cannotDownloadOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"cannotDownload" data-dojo-attach-point\x3d"cannotDownloadRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--User cannot download option label div--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"cannotDownloadOption"\x3e\r\n          ${nls.downloadTab.cannotDownloadOptionLabel}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3c!--Report Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.reportLegend}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTReportSettingsContainer"\x3e\r\n      \x3c!--Print service URL container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer" data-dojo-attach-point\x3d"printGPServiceInputContainer"\x3e\r\n        \x3c!--Print Service url LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.printGPServiceLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Print Service url TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"printGPServiceTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set BUTTON--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"printGPServiceSetButton"\r\n          title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Print service URL container ends--\x3e\r\n      \x3c!-- Print layout container starts --\x3e\r\n      \x3c!-- Defaut layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"defaultLayoutTable" class\x3d"esriCTDefaultLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Default layout ends --\x3e\r\n      \x3c!-- Custom Layout button starts --\x3e\r\n      \x3cdiv class\x3d"esriCTAddCustomLayoutParentContainer esriCTCustomOptionBtnAddSection esriCTCustomOptionButtonDisable"\r\n        data-dojo-attach-point\x3d"addCustomOptionButton"\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddIcon esriCTCustomOptionBtnAddIconDisable" data-dojo-attach-point\x3d"addCustomOptionButtonIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddLabel"\x3e${nls.downloadTab.addCustomLayoutTitle}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTHint esriCTCustomLayoutHintText"\x3e${nls.downloadTab.customLayoutOptionHint}\x3c/div\x3e\r\n      \x3c!-- Custom Layout button ends --\x3e\r\n      \x3c!-- Custom layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"customLayoutTable" class\x3d"esriCTCustomLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Custom layout ends --\x3e\r\n      \x3c!-- Default print layout option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDefaultPrintTemplateContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateText"\x3e${nls.downloadTab.reportDefaultOptionLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateDropdown" data-dojo-attach-point\x3d"defaultPrintTemplateDropdown"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Default print layout option ends --\x3e\r\n      \x3c!-- Print layout container ends --\x3e\r\n      \x3c!--Logo chooser starts--\x3e\r\n      \x3cdiv class\x3d"esriCTLogoChooserMainContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.logoLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLogoChooserDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTImageChooserPreviewContainer"\x3e\r\n            \x3cimg class\x3d"esriCTImageChooserPreview" data-dojo-attach-point\x3d"imageChooserPreview"\x3e\r\n            \x3cdiv class\x3d"esriCTLogoChooser" data-dojo-attach-point\x3d"logoChooserNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.logoChooserHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Logo chooser ends--\x3e\r\n      \x3c!--Report Title container start--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3c!--Report Title  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.reportTitleLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Report Title  TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportTitleTextBox" class\x3d"esriCTDownloadTabReportInputNode" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Report Title container end--\x3e\r\n      \x3c!--No data string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"noDataTextRepresentation"\x3e\r\n        \x3c!--No data String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.noDataTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--No data string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"noDataTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode"\r\n          data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.downloadTab.noDataDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--No data string representation ends--\x3e\r\n      \x3c!--NA string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"naTextRepresentation"\x3e\r\n        \x3c!--NA String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.naTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--NA string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"naTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode"\r\n          data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.downloadTab.notApplicableDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--NA String Representation ends--\x3e\r\n      \x3c!--Column title Color Picker container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.columnTitleColorPickerLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabReportInputNode"\x3e\r\n          \x3cdiv class\x3d"esriCTColorPickerPreviewField" data-dojo-attach-point\x3d"columnTitleColorPickerNode"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Column title Color Picker container ends--\x3e\r\n      \x3c!-- Display summary in report option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"displaySummaryInReportCheckBox" checked\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.displaySummaryLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Display summary in report option ends --\x3e\r\n      \x3c!-- Hide rows having all values zero in report option starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"hideAllZeroRowCheckBox" checked\x3d"false"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.hideZeroValueRowLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Hide rows having all values zero in report option ends--\x3e\r\n      \x3c!-- Hide rows having all values NULL in report option starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"hideNullRowCheckBox" checked\x3d"false"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.hideNullValueRowLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Hide rows having all values NULL in report option ends--\x3e\r\n      \x3c!--Footnote container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTFootnoteContainer"\x3e\r\n        \x3c!--Footnote LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.footnoteLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Footnote TextEditor--\x3e\r\n        \x3cdiv class\x3d"esriCTFootnoteTextArea" data-dojo-attach-point\x3d"footNoteEditor"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Footnote container ends--\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpSource.html":'\x3cdiv\x3e\r\n  \x3cdiv style\x3d"display: flex;"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"margin-left: 20px;"\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"source-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container hflc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container flsc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"layers" data-dojo-attach-point\x3d"browserContainer"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/GpServiceBrowser" data-dojo-attach-point\x3d"gpServiceBrowser"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable role\x3d"listbox" aria-haspopup\x3d"true" data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.customSelectLayer}" aria-label\x3d"${nls.customSelectLayer}"\x3e\r\n    \x3ccaption class\x3d"screen-readers-only-no-position"\x3e${nls.customSelectLayer}\x3c/caption\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Screening/setting/FieldPicker.html":'\x3cdiv style\x3d"padding-right: 20px;"\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.analysisTab.addFieldsPopupTitle}\x3c/legend\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"tableArea" class\x3d"esriCTLayerFieldSelector esriCTReportSettingsContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"btnAddField" class\x3d"esriCTBtnAddSection"\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddLabel" data-dojo-attach-point\x3d"addFieldLabel"\x3e\r\n          ${nls.analysisTab.addFieldsLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTGroupByFieldContainer"\x3e\r\n        \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"groupByFieldCheckBox"\r\n          class\x3d"esriCTGroupByFieldCheckBox" checked\x3d"true"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTGroupByFieldColumnLabel"\x3e\r\n          ${nls.analysisTab.allowGroupingLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.groupingHintDescription}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidFields"\x3e\r\n        ${nls.analysisTab.noValidFieldsForAnalysis}\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"fieldTable"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.analysisTab.sortingSettingsLegend}\x3c/legend\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sortFieldSettingsNode"\x3e\r\n      \x3cdiv class\x3d"esriCTRadioBtnContainer esriCTReportSettingsContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTRadioBtn"\x3e\r\n          \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn"\r\n            data-dojo-attach-point\x3d"ascRadioBtn" aria-label\x3d"${nls.analysisTab.ascendingLabel}"\x3e\r\n          \x3clabel class\x3d"esriCTRadioLabel" for\x3d"ascRadio"\x3e\r\n            ${nls.analysisTab.ascendingLabel}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTRadioBtn"\x3e\r\n          \x3cinput data-dojo-type\x3d"jimu/dijit/RadioBtn" data-dojo-props\x3d"group: \'g1\'" type\x3d"radio" name\x3d"jimuradiobtn"\r\n            data-dojo-attach-point\x3d"descRadioBtn" aria-label\x3d"${nls.analysisTab.descendingLabel}"\x3e\r\n          \x3clabel class\x3d"esriCTRadioLabel" for\x3d"descRadio"\x3e\r\n            ${nls.analysisTab.descendingLabel}\r\n          \x3c/label\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n        \x3cdiv class\x3d"esriCTRadioBtnContainer esriCTReportSettingsContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTSelectLabel esriCTEllipsis" title\x3d"${nls.analysisTab.sortFieldSelectLabel}"\x3e\r\n            ${nls.analysisTab.sortFieldSelectLabel}\r\n          \x3c/div\x3e\r\n          \x3cdiv\x3e\r\n            \x3cselect class\x3d"esriCTDropBox esriCTSortFieldSelectLabelWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"fieldsDropdown"\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/SearchSourceSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Search source setting hint text --\x3e\r\n  \x3cdiv class\x3d"esriCTHint" style\x3d"width: 99%"\x3e ${nls.searchSourceSetting.searchSourceSettingTitleHintText}\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTDropdownButton" role\x3d"button"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan\x3e ${nls.searchSourceSetting.addSearchSourceLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cul class\x3d"esriCTDropdownMenu" role\x3d"menu" data-dojo-attach-point\x3d"menuItemClickNode"\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"query"\x3e${nls.searchSourceSetting.featureLayerLabel}\x3c/li\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"locator"\x3e${nls.searchSourceSetting.geocoderLabel}\x3c/li\x3e\r\n    \x3c/ul\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTSources" data-dojo-attach-point\x3d"searchSources"\x3e\r\n    \x3cdiv class\x3d"esriCTSourceList jimu-float-leading"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"sourceList" style\x3d"100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTSourceSetting jimu-float-trailing" data-dojo-attach-point\x3d"sourceSettingNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3c!--General setting: Label--\x3e\r\n    \x3cdiv class\x3d"esriCTlabel esriCTGeneralSettingLabelStyle"\x3e\r\n      ${nls.searchSourceSetting.generalSettingLabel}\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: All Place Holder Label--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.allPlaceholderLabel}"\x3e\r\n        ${nls.searchSourceSetting.allPlaceholderLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerField esriCTSearchSourceFloatRight" style\x3d"width: 72%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"allPlaceholder" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--General setting: All Place Holder Hint--\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e\r\n          ${nls.searchSourceSetting.allPlaceholderHintText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: Checkbox--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont " data-dojo-attach-point\x3d"showInfoWindowOnSelectNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/QuerySourceSetting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3c!--Select geocoder url --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.layerSource}"\x3e\r\n        ${nls.layerSource}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setSourceBtnClickNode"\r\n          title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint esriCTErrorMessage"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection"\x3e\r\n    \x3c!--Details section: Name --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.common.name}"\x3e\r\n        ${nls.common.name}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: searchFields --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.searchFields}"\x3e\r\n        ${nls.searchFields}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTsearchFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: displayField --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.displayField}"\x3e\r\n        ${nls.displayField}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxSuggestions --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.searchLayerTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxResult --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: exactMatch --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section: loading shelter --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/LocatorSourceSetting.html":'\x3cdiv\x3e\r\n  \x3c!--Select Locator URL --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.locatorUrl}"\x3e\r\n        ${nls.locatorUrl}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv title\x3d"${nls.set}" class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setButtonNode"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Locator Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection" ata-dojo-attach-point\x3d"detailsSection"\x3e\r\n    \x3c!--Details section: locatorName --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.locatorName}"\x3e\r\n        ${nls.locatorName}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"locatorName" placeHolder\x3d"${nls.locatorName}"\r\n          required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeholder" placeHolder\x3d"${nls.placeholder}"\r\n          data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: country --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"countryCodeRow"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.countryCode}"\x3e\r\n          ${nls.countryCode}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n          \x3cdiv type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"countryCode" placeHolder\x3d"${nls.countryCodeEg} USA,CHN"\r\n            data-dojo-props\x3d\'style:{width:"97%"}\'\x3e\x3c/div\x3e\r\n          \x3ca class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"\r\n            style\x3d"line-height:30px;"\x3e${nls.questionMark}\x3c/a\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.countryCodeHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max suggestion --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.locatorTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max result --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"enableLocalSearch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - minimum scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"minScaleNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.minScale}"\x3e\r\n        ${nls.minScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"localSearchMinScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:300000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.minScaleHint}"\x3e${nls.minScaleHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - radius --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"radiusNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.radius}"\x3e\r\n        ${nls.radius}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading" data-dojo-attach-point\x3d"localSearchDistance" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'75%\'},value:50000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint esriCTLocalSearchRadiusUnit"\x3e${nls.meters}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"radiusHintNode" title\x3d"${nls.radiusHint}"\x3e${nls.radiusHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: loading shelter --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:widgets/Screening/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTTabDiv" data-dojo-attach-point\x3d"tabContainer"\x3e\r\n      \x3c!--Analysis tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"analysisTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3c!--Add Layers section --\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"selectAnalysisLayerLabel" class\x3d"esriCTSelectAnalysisLayerLabel"\x3e\r\n              ${nls.analysisTab.selectAnalysisLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"btnAddLayer" class\x3d"esriCTBtnAddSection"\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddLabel"\x3e${nls.analysisTab.addLayerLabel}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidLayers"\x3e\r\n              ${nls.analysisTab.noValidLayersForAnalysis}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint esriCTHintAddLayer"\x3e\r\n            ${nls.analysisTab.addLayersHintText}\x3cbr\x3e${nls.analysisTab.queryCapabilityHintText}\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"addLayerTableNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Add Layers section end--\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--AOI Tools section--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.analysisTab.aoiToolsLegendLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"aoiToolsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTAnalysisAOIToolsDescriptionLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.aoiToolsDescriptionLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Place Name section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"placeNameCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.placenameLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"placeNameTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Place Name section ends--\x3e\r\n                  \x3c!--Draw Tool section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"drawToolCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.drawToolsLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"drawToolTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Draw Tool section ends--\x3e\r\n                  \x3c!--Upload Shapfile section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"uploadShapefileCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.uploadShapeFileLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"uploadShapeFileTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Upload Shapfile section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Co-ordinates section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"coordinatesCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.coordinatesLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"coordinatesTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Co-ordinates section ends--\x3e\r\n                  \x3c!--Traverses Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                        data-dojo-attach-point\x3d"traverseUnitsNode"\x3e\r\n                        \x3coption value\x3d"uSSurveyFeet" selected\x3d"selected"\x3e${nls.units.uSSurveyFeet}\x3c/option\x3e\r\n                        \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverses Units section ends--\x3e\r\n                  \x3c!--Traverse Direction Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits esriCTTraverseDirectionUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                        data-dojo-attach-point\x3d"traverseDirectionUnitsNode"\x3e\r\n                        \x3coption value\x3d"decimalDegree" selected\x3d"selected"\x3e${nls.units.decimalDegree}\x3c/option\x3e\r\n                        \x3coption value\x3d"degreeMinuteSeconds"\x3e${nls.units.degreeMinuteSeconds}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesBearingDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverse Direction Units section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Tools section ends--\x3e\r\n          \x3c!-- Select draw tools starts --\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet esriCTHidden" data-dojo-attach-point\x3d"selectDrawToolFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.analysisTab.drawToolsSettingsFieldsetLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTSelectDrawToolMainContainer"\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolLabel"\x3e\r\n                ${nls.analysisTab.selectDrawToolsText}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolsParentContainer"\x3e\r\n                \x3c!-- Point tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPointToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPointToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"pointSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPointToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPointLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Point tool ends --\x3e\r\n                \x3c!-- Polyline tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPolylineToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPolylineToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"polylineSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolylineToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPolylineLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Polyline tool ends --\x3e\r\n                \x3c!-- Extent tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectExtentToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTExtentToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"extentSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTExtentToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolExtentLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Extent tool ends --\x3e\r\n                \x3c!-- Polygon tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPolygonToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPolygonToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"polygonSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolygonToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPolygonLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Polygon tool ends --\x3e\r\n                \x3c!-- Circle tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectCircleToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTCircleToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"circleSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTCircleToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolCircleLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Circle tool ends --\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTSelectToolLayersParentContainer"\x3e\r\n              \x3cdiv\x3e${nls.analysisTab.drawToolSelectableLayersLabel}\x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.drawToolSelectableLayersHint}\x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolLayerTableNode" data-dojo-attach-point\x3d"drawToolSelectableLayerContainer"\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!-- Select draw tools ends --\x3e\r\n          \x3c!--Allow Uploading shapefiles section starts--\x3e\r\n          \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"uploadShapefileSection"\x3e\r\n              \x3c!--upload shapefile options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                  data-dojo-attach-point\x3d"allowUploadShapefileCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowShapefilesUploadLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowShapefilesUploadLabelHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--upload shapefile options section ends--\x3e\r\n              \x3c!--layer analysis options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                  data-dojo-attach-point\x3d"allowVisibleLayerAnalysisCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowVisibleLayerAnalysisLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowVisibleLayerAnalysisHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--layer analysis options section ends--\x3e\r\n              \x3c!--Area units options section starts--\x3e\r\n              \x3c!-- \x3cdiv class\x3d"esriCTAreaUnitsMainContainer"\x3e --\x3e\r\n              \x3c!-- Area unit --\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsLabel"\x3e\r\n                  ${nls.analysisTab.areaUnitsLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsDropDownContainer"\x3e\r\n                  \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                    data-dojo-attach-point\x3d"areaUnitsDropDown"\x3e\r\n                    \x3coption selected\x3d"selected" value\x3d"SquareFeet"\x3e${nls.units.areaSquareFeetUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Acres"\x3e${nls.units.areaAcresUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"SquareMeters"\x3e${nls.units.areaSquareMetersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"SquareKilometers"\x3e${nls.units.areaSquareKilometersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Hectares"\x3e${nls.units.areaHectaresUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"SquareMiles"\x3e${nls.units.areaSquareMilesUnit}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!-- Line unit --\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsLabel"\x3e\r\n                  ${nls.analysisTab.lengthUnitsLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsDropDownContainer"\x3e\r\n                  \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                    data-dojo-attach-point\x3d"lengthUnitsDropDown"\x3e\r\n                    \x3coption selected\x3d"selected" value\x3d"Feet"\x3e${nls.units.lengthFeetUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Miles"\x3e${nls.units.lengthMilesUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Meters"\x3e${nls.units.lengthMetersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Kilometers"\x3e${nls.units.lengthKilometersUnit}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!-- \x3c/div\x3e --\x3e\r\n              \x3c!--units options section ends--\x3e\r\n              \x3c!--max feature for analysis starts--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel"\x3e\r\n                  ${nls.analysisTab.maxFeatureForAnalysisLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                      data-dojo-attach-point\x3d"maxFeatureCountTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.maxFeatureForAnalysisHintText}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--max feature for analysis ends--\x3e\r\n              \x3c!--search tolerance--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv" data-dojo-attach-point\x3d"toleranceSection"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel" data-dojo-attach-point\x3d"searchToleranceLabel"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                      data-dojo-attach-point\x3d"searchToleranceTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.searchToleranceHint}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--search tolerance ends--\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!--Allow Uploading shapefiles section ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Analysis tab contents end--\x3e\r\n      \x3c!--Download tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"downloadTabNode" class\x3d"esriCTTabNode"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Download tab contents end--\x3e\r\n      \x3c!--General tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"generalTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--Tab Labels Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.tabLabelsLegend}\x3c/legend\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"tabLabelsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--AOI Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.AOITabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"aoiTabTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--AOI Tab label section ends--\x3e\r\n                  \x3c!--Reports Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.ReportTabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"reportsTabTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Reports Tab label section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Tab Labels Fieldset ends--\x3e\r\n          \x3c!--Buffer Settings Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.bufferSettingsLegend}\x3c/legend\x3e\r\n            \x3c!--Buffer Settings Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"bufferSettingsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3c!--Default Buffer Settings section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Default Buffer Distance section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferDistanceLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                        data-dojo-attach-point\x3d"defaultBufferDistanceTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Default Buffer Distance section ends--\x3e\r\n                  \x3c!--Buffer Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferUnitsLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTGeneralDropDownContainer"\x3e\r\n                        \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                          data-dojo-attach-point\x3d"defaultBufferUnitsNode"\x3e\r\n                          \x3coption value\x3d"UNIT_FOOT"\x3e${nls.units.feet}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_STATUTE_MILE"\x3e${nls.units.miles}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_KILOMETER"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_METER"\x3e${nls.units.meters}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Buffer Units section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Default Buffer Settings section ends--\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions esriCTGeneralBufferSymbologyContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                        \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                          ${nls.generalTab.aoiBufferSymbologyLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"aoiSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTGeneraBufferSymbologylHint"\x3e\r\n                          ${nls.generalTab.generalBufferSymbologyHint}\r\n                        \x3c/div\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Buffer Settings Fieldset ends--\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.generalTab.aoiGraphicsSymbologyLegend}\x3c/legend\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                  ${nls.generalTab.aoiGraphicsSymbologyHint}\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTSymbologyLabel esriCTEllipsis" title\x3d"${nls.generalTab.pointSymbologyLabel}"\x3e\r\n                    ${nls.generalTab.pointSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField esriCTPreviewSymbology" data-dojo-attach-point\x3d"pointSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTSymbologyLabel esriCTEllipsis" title\x3d"${nls.generalTab.lineSymbologyLabel}"\x3e\r\n                    ${nls.generalTab.lineSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField esriCTPreviewSymbology" data-dojo-attach-point\x3d"lineSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTSymbologyLabel esriCTEllipsis" title\x3d" ${nls.generalTab.polygonSymbologyLabel}"\x3e\r\n                    ${nls.generalTab.polygonSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolygonPreview esriCTPreviewSymbology" data-dojo-attach-point\x3d"polygonSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section ends--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section ends--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--General tab contents end--\x3e\r\n      \x3c!-- Search Source Settings tab --\x3e\r\n      \x3cdiv class\x3d"esriCTTabNode" data-dojo-attach-point\x3d"searchSourceTabNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/css/style.css":".jimu-widget-screening-setting .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTFieldError {float: right; line-height: 0;}.jimu-widget-screening-setting .jimu-viewstack {height: calc(100% - 45px); overflow: auto;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTTabNode {padding-right: 20px; margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-screening-setting .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .row {clear: both;}.jimu-widget-screening-setting .esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTHint {margin: 5px 5px 10px 0px; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-screening-setting .esriCTHintAddLayer {margin: 5px 5px 10px 0px;}.jimu-widget-screening-setting::-ms-clear {display: none;}.jimu-widget-screening-setting .esriCTFieldSet {height: auto; width: 100%; border: 1px solid #a0acbf; border-radius: 5px; font-size: 14px; color: #596679; margin-bottom: 10px; min-width: 0px;}.jimu-widget-screening-setting .esriCTFieldSetLegend {margin-left: 20px;}.jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {width: 100%; float: left;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {float: right;}.jimu-widget-screening-setting .esriCTTextBox {width: 90%; margin-top: 10px;}.jimu-widget-screening-setting .esriCTFieldsetMainContainer {clear: both; width: 95%; margin: 0 auto; padding-top: 5px;}.jimu-widget-screening-setting .esriCTFieldsetContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTFieldsLabel {float: left; padding-left: 10px; width: 80%;}.jimu-widget-screening-setting .esriCTCheckBox {float: left; margin-right: 0px;}.jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {padding: 10px 0; width: 100%;}.jimu-widget-screening-setting .esriCTAOIToolsOptions {width: 33%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTTraverseUnits {width: 31%; float: left; padding-right: 10px; padding-top: 36px;}.jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 16px;}.jimu-widget-screening-setting .esriCTDropBox {width: 100%;}.jimu-widget-screening-setting .esriCTDropDownContainer {width: 100%; float: left; padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTFieldChooserDropdown, .jimu-widget-screening-setting .esriCTFieldValidationTextBox {height: 26px; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTAddLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTSelectDrawToolLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTBtnAddSection, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-screening-setting .esriCTLayerFieldSelector .jimu-simple-table {max-height: 350px !important;}.jimu-widget-screening-setting .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/custom-button-enable.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIconDisable {background-image: url(images/custom-button-disable.png) !important;}.jimu-widget-screening-setting .esriCTBtnAddLabel, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddLabel {height: 100%; line-height: 20px; margin-left: 7px; text-decoration: none; display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTDisabled {cursor: default; color: #a0acbf; opacity: 0.6;}.jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-left: 0px; float: left; text-align: center; vertical-align: middle; padding-right: 10px;}.jimu-widget-screening-setting .esriCTNoLayersOrFieldsForAnalysisLabel {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-screening-setting .esriCTTRPreviewText {height: 26px;}.jimu-widget-screening-setting .esriCTLayerLabelTextBox {width: 100%; height: 29px; float: left;}.jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 0;}.jimu-widget-screening-setting .esriCTAllowShapeFileOption {padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {width: 60%; float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {width: 100%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureInputParentContainer {clear: both; width: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTMaxFeatureTextBox {width: 200px; float: left; margin: 0px 5px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: right;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureTextBox {float: right; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriCTDownloadRadioButton {float: left;}.jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: left; width: 97%; margin-left: 27px;}.jimu-widget-screening-setting .esriCTDownloadLabel {float: left; margin-left: 10px;}.jimu-widget-screening-setting .esriCTLayerDownloadOptionTable {margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTTableHeader {text-align: center;}.jimu-widget-screening-setting .esriCTAvailableDownloadOption {background: url(../css/images/check.png) center no-repeat;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTDownloadTabInputContainer {width: 100%; float: left; margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabReportTitleContainer {width: 100%; float: left; margin-bottom: 15px; padding-top: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabLabel {width: 35%; line-height: 30px; float: left; clear: left; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}.jimu-widget-screening-setting .esriCTDownloadTabTextbox {width: 55%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabReportInputNode {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabSetButton {width: 8%; float: left; margin-left: 17px; line-height: 28px;}.jimu-widget-screening-setting .esriCTDownloadTabFieldSet {padding: 15px 0px;}.jimu-widget-screening-setting .esriCTDownloadOptionForm, .jimu-widget-screening-setting .esriCTReportSettingsContainer {margin: 0px auto; width: 96%;}.jimu-widget-screening-setting .esriCTFootnoteTextArea {width: 65% !important; padding: 5px !important; float: right; color: #596679;}.jimu-widget-screening-setting .esriCTLogoChooserDiv {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTImageChooserPreviewContainer {position: relative;}.jimu-widget-screening-setting .esriCTImageChooserPreview {position: absolute; top: 0; bottom: 0; margin: auto; max-height: 100%;}.jimu-widget-screening-setting .esriCTImageChooserContent {height: 50px !important; width: 50px !important;}.jimu-widget-screening-setting .esriCTColorChooserNode {text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: left; margin-bottom: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: right; margin-right: 27px; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadLabel {float: right; margin-right: 10px; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadRadioButton {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabSetButton {float: left; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabTextbox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: right;}.jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {width: 45%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralDropDownContainer {width: 90%; float: left; margin-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {max-width: 50%; width: auto; min-width: 15px; float: left; color: rgb(89, 102, 121); font-size: 14px; line-height: 40px;}.jimu-widget-screening-setting .esriCTGeneralBufferSymbologyContainer {width: 100%;}.jimu-widget-screening-setting .esriCTGeneraBufferSymbologylHint {clear: both;}.jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: left; padding-left: 0px; width: 80%;}.jimu-widget-screening-setting .esriCTSymbolChooserNode {cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTSymbolPreviewText {padding-right: 5px; color: #596679; font-size: 14px; max-width: 130px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-screening-setting .esriCTPreviewField {float: left; margin-bottom: 5px; padding: 5px 0px 0px 45px;}.jimu-widget-screening-setting .esriCTSymbolChooserContainer {height: calc(100% - 50px); overflow: auto;}.jimu-widget-screening-setting .esriCTPolygonPreview {float: left; margin-top: 5px; margin-bottom: 5px; padding: 5px 0px 0px 22px;}.claro .dijitTextBox, .claro .dijitSelect {color: #7989a0; background-color: #fafafc; border: 1px solid #d2dae2;}.dj_webkit .claro .dijitTextBox .dijitInputInner {color: #7989a0;}.claro .dijitSelectDisabled, .claro .dijitTextBoxDisabled, .claro .dijitTextBoxDisabled .dijitInputContainer {background-color: #e3ecf2;}.claro .dijitSelect .dijitInputField {background-color: #fafafc !important; color: #7989a0; font-size: 14px;}.claro .dijitTextBox, .claro .dijitSelect {border-color: #d2dae2;}.claro .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-screening-setting .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.jimu-widget-screening-setting .esriCTURLSetButton {height: 30px; line-height: 30px; margin: 0 0 0 10px; float: right; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTlabel {width: 25%; padding: 5px 10px 5px 0px; word-break: break-all; margin-top: 5px; margin-bottom: 5px; float: left; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; min-width: 250px; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .esriCTDropdownButton {margin: 8px 0; display: inline-block; background-repeat: no-repeat; background-position: left; position: relative; padding-left: 16px; color: #518dca; background-image: url(images/add.png); cursor: pointer;}.jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {position: absolute; display: none; list-style-type: none; top: 18px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {right: 0; left: auto;}.jimu-widget-screening-setting .esriCTDropdownButton:hover .esriCTDropdownMenu {display: inline-block;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem {white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem:hover {background: #edf2f5; color: #15a4fa;}.jimu-widget-screening-setting .esriCTSources {height: 366px;}.jimu-widget-screening-setting .esriCTSourcesExtraHeight {height: 516px !important;}.jimu-widget-screening-setting .esriCTSourceList {width: 270px; height: 100%;}.jimu-widget-screening-setting .esriCTSourceSetting {width: 650px; position: relative;}.jimu-widget-screening-setting .source-table, .jimu-widget-screening-setting .general-setting-table {width: 100%;}.jimu-widget-screening-setting .esriCTSearchSourceLayerField {width: 70%;}.jimu-widget-screening-setting .esriCTSearchSourceLabel {width: 25%; min-width: 182px;}.jimu-widget-screening-setting .esriCTLocalSearchLabel {margin-left: 22px; width: 24%; min-width: 146px;}.jimu-widget-screening-setting .esriCTSearchSourceLabelFont {font-size: 14px; color: #596679;}.jimu-widget-screening-setting .esriCTLayerSource {width: 80% !important;}.jimu-widget-screening-setting .esriCTsearchFieldsSelector {display: inline-block; background-repeat: no-repeat; background-position: center; margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background-image: url(images/selector.png);}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTSearchSourceLayer {width: 84% !important;}.jimu-widget-screening-setting .esriCTURLWidthLabel {width: 105px; min-width: 105px;}.jimu-widget-screening-setting .esriCTSearchDetailsSection {width: 175px;}.jimu-widget-screening-setting .esriCTGeneralSettingLabelStyle {font-weight: bold;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox {width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox .label {width: 140px;}.jimu-widget-screening-setting .jimu-simple-table .simple-table-field, .jimu-simple-table .simple-table-cell {cursor: pointer;}.jimu-widget-screening-setting .esriCTLayerContainer {width: 100%; float: left; margin: 0px;}.jimu-widget-screening-setting .esriCTLayerField {float: left;}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {line-height: 30px; float: right;}.jimu-widget-screening-setting .esriCTErrorMessage {color: #e84b4b;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTTabNode {padding-left: 20px; padding-right: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTHint {float: right; margin: 5px 0px 10px 5px;}.esriRtl .jimu-widget-screening-setting .esriCTHintAddLayer {float: right; margin: 5px 5px 10px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetLegend {margin-right: 20px;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsetContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsLabel {padding-left: 0px; padding-right: 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAOIToolsOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBtnAddLabel {margin-right: 7px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-right: 0px; float: right; padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 8px; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: right; padding-left: 0px; width: 80%;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPreviewField {float: right; padding: 5px 45px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonPreview {padding-right: 0px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTlabel {padding: 5px 0px 5px 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton {padding-right: 16px; background-position: right;}.esriRtl .jimu-widget-screening-setting .esriCTSearchSourceURLField {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseUnits {float: right; width: 30%; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 0px; margin-right: 25px;}.esriRtl .jimu-widget-screening-setting .esriCTURLSetButton {float: left; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriRTLTabContainerNode{overflow: overlay;}.jimu-widget-screening-download-settings .esriCTDefaultLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {clear: both; float: left;}.jimu-widget-screening-download-settings .esriCTAddLayoutText {float: left; padding-left: 10px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutHintText {clear: both}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateContainer {clear: both; width: 100%; padding-bottom: 15px; overflow: auto;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: left; width: 35%;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: left; width: 33%;}.jimu-widget-screening-download-settings .esriCTCustomOptionButtonDisable {color: #808080 !important; cursor: default;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: right;}.jimu-widget-screening-setting .esriCTSelectDrawToolsParentContainer {width: 100%; height: 100%; clear: both; overflow: hidden; padding: 10px;}.jimu-widget-screening-setting .esriCTSelectPointToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectPolylineToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectExtentToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectPolygonToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectCircleToolParentContainer {width: 25%; float: left; padding-top: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPointToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPolylineToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectExtentToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPolygonToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectCircleToolParentContainer {float: right;}.jimu-widget-screening-setting .esriCTPointToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPolylineToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTExtentToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPolygonToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTCircleToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPointToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTPolylineToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTExtentToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTPolygonToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTCircleToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPointToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolylineToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTExtentToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTCircleToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPointToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPolylineToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTExtentToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTCircleToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.jimu-widget-screening-setting .esriCTSelectDrawToolMainContainer {padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectDrawToolMainContainer {padding-left: 0px; padding-right: 10px;}.jimu-widget-screening-setting .esriCTSelectToolLayersParentContainer {padding-left: 10px; padding-right: 10px;}.jimu-widget-screening-setting .esriCTGroupByFieldContainer {width: 100%; overflow: hidden; clear: both; padding-top: 5px; padding-bottom: 5px; font-size: 13px;}.jimu-widget-screening-setting .esriCTGroupByFieldCheckBox {float: left;}.jimu-rtl .jimu-widget-screening-setting .esriCTGroupByFieldCheckBox {float: right;}.jimu-widget-screening-setting .esriCTGroupByFieldColumnLabel {float: left; padding-left: 5px;}.jimu-rtl .jimu-widget-screening-setting .esriCTGroupByFieldColumnLabel {float: right; padding-left: 0px; padding-right: 5px;}.jimu-widget-screening-setting .esriCTDisplaySummaryParentContainer {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTDisplaySummaryParentContainer {float: right;}.jimu-widget-screening-setting .esriCTDisplaySummaryLabel {float: left; padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTDisplaySummaryLabel {float: right; padding-left: 0px; padding-right: 10px;}.jimu-widget-screening-setting .esriCTRadioBtnContainer {margin-left: 20px; display: inline-flex}.jimu-rtl .jimu-widget-screening-setting .esriCTRadioBtnContainer {margin-right: 20px;}.jimu-widget-screening-setting .esriCTRadioLabel {vertical-align: top; padding-right: 70px;}.jimu-rtl .jimu-widget-screening-setting .esriCTRadioLabel {padding-right: 0px; padding-left: 70px;}.jimu-widget-screening-setting .esriCTSelectLabel {padding-right: 40px; line-height: 30px; width: 22%;}.jimu-rtl .jimu-widget-screening-setting .esriCTSelectLabel {padding-left: 40px; padding-right: 0px;}.jimu-widget-screening-setting .esriCTReportSettingsContainer .dijitSelectLabel{overflow: hidden; text-overflow: ellipsis; white-space: nowrap; width: 230px; text-align: left; padding-top: 5px;}.jimu-rtl .jimu-widget-screening-setting .esriCTReportSettingsContainer .dijitSelectLabel{text-align: right;}.jimu-widget-screening-setting .esriCTSortFieldSelectLabelWidth .dijitSelectLabel{width: 150px;}.jimu-widget-screening-setting .esriCTSymbologyLabel {float: left; width: 15%;}.jimu-rtl .jimu-widget-screening-setting .esriCTSymbologyLabel {float: right;}.jimu-widget-screening-setting .esriCTPreviewSymbology {float: right; width: 85%;}.jimu-rtl .jimu-widget-screening-setting .esriCTPreviewSymbology {float: left;}.jimu-rtl .jimu-widget-screening-setting .esriCTPolygonPreview {padding: 5px 22px 0px 0px;}",
"*now":function(x){x(['dojo/i18n!*preload*widgets/Screening/setting/nls/Setting*["ar","bg","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/dijit/TabContainer3 jimu/BaseWidgetSetting dojo/_base/lang dojo/on dojo/query dojo/_base/array jimu/utils esri/symbols/jsonUtils dojo/dom-construct jimu/symbolUtils jimu/utils jimu/dijit/LoadingIndicator ./SymbolChooserPopup ./DownloadSettings dojo/query dijit/registry jimu/dijit/Message jimu/dijit/Popup dijit/form/ValidationTextBox jimu/dijit/SimpleTable dojo/dom-class jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox ./FieldPicker ./SearchSourceSettings dojo/string dojo/Deferred dojo/promise/all dojo/dom-style jimu/LayerInfos/LayerInfos esri/request dijit/form/Select".split(" "),function(x,
E,K,J,w,a,c,d,f,l,q,n,u,B,F,b,k,t,H,m,g,A,D,N,O,L,z,C,Q,S,p,e,v){return x([J,E],{baseClass:"jimu-widget-screening-setting",_configurationTabsContainer:null,_symbolParams:{},_addLayerTable:null,_curRow:null,_totalLayers:[],_idsOfSelectedLayers:[],_layerInfosObj:null,_selectLayerTable:null,constructor:function(h){this._configurationTabsContainer=null;this._symbolParams={};this._curRow=this._addLayerTable=null;this._totalLayers=[];this._idsOfSelectedLayers=[];this._selectLayerTable=null;w.mixin(this,
h)},postMixInProperties:function(){this.nls.common={};w.mixin(this.nls.common,window.jimuNls.common);w.mixin(this.nls.units,window.jimuNls.units)},postCreate:function(){e.getInstance(this.map,this.map.itemInfo).then(w.hitch(this,function(h){this._layerInfosObj=h;this._initLoading();this._initConfiguration();this._initLayerSelector();this._initDownloadTab();this._attachComponentEvents()}))},_attachComponentEvents:function(){this.own(a(this.drawToolCheckBox,"change",w.hitch(this,function(h){h?D.remove(this.selectDrawToolFieldSet,
"esriCTHidden"):D.add(this.selectDrawToolFieldSet,"esriCTHidden")})))},getConfig:function(){if(k(".esriCTFieldError",this.addLayerTableNode).length!==k(".esriCTFieldError \x3e .esriCTHidden",this.addLayerTableNode).length)return this._showErrorMsgforInvalidFields(),!1;var h=this._downloadTab.getExtractDataTaskURL();if(this._validateConfigForCheckBoxes()&&this._validateConfigForInputFields(this.aoiToolsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"analysis")&&this._validateConfigForInputFields(this.toleranceSection,
this.nls.errorMsg.invalidSearchToleranceErrorMsg,"analysis")&&this._validateConfigForInputFields(this.tabLabelsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"general")&&this._validateConfigForBufferDistanceFields(this.bufferSettingsSection,this.nls.errorMsg.bufferDistanceFieldsErrorMsg)&&this._validateGPTaskDownloadOption(h)&&this._validateLayers()&&this._validateMaxFeatureCount()&&this._validateCustomOptions()&&this._validateDrawTools()){var r=this._searchSourceSettings.getConfig();if(!r||
0===r.sources.length)return this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle),!1;var I=this.placeNameTextBox.get("value");this.config.placenameButtonText=u.stripHTML(I?I:"");this.config.showPlacenameWidget=this.placeNameCheckBox.checked;this.config.showDrawToolsWidget=this.drawToolCheckBox.checked;this.config.showShapefileWidget=this.uploadShapefileCheckBox.checked;this.config.showCoordinatesWidget=this.coordinatesCheckBox.checked;
this.config.allowShapefilesUpload=this.allowUploadShapefileCheckBox.checked;this.config.allowVisibleLayerAnalysisOnly=this.allowVisibleLayerAnalysisCheckBox.checked;I=this.aoiTabTextBox.get("value");this.config.aoiTabText=u.stripHTML(I?I:"");I=this.reportsTabTextBox.get("value");this.config.reportTabText=u.stripHTML(I?I:"");I=this.drawToolTextBox.get("value");this.config.drawToolsButtonText=u.stripHTML(I?I:"");I=this.uploadShapeFileTextBox.get("value");this.config.shapefileButtonText=u.stripHTML(I?
I:"");I=this.coordinatesTextBox.get("value");this.config.coordinatesButtonText=u.stripHTML(I?I:"");this.config.traverseUnit=this.traverseUnitsNode.get("value");this.config.traverseDirectionUnit=this.traverseDirectionUnitsNode.get("value");this.config.maxFeaturesForAnalysis=this.maxFeatureCountTextBox.get("value");this.config.areaUnits=this.areaUnitsDropDown.get("value");this.config.lengthUnits=this.lengthUnitsDropDown.get("value");this.config.defaultBufferDistance=this.defaultBufferDistanceTextBox.get("value");
this.config.defaultBufferUnit=this.defaultBufferUnitsNode.get("value");this.config.searchTolerance=this.searchToleranceTextBox.get("value");this.config.placenameSymbology=this._symbolParams;this.config.coordinatesSymbology=this._symbolParams;this.config.shapefileSymbology=this._symbolParams;this.config.drawToolSymbology=this._symbolParams;this.config.aoiSymbol=this._symbolParams.aoiSymbol;this.config.layers=this._getSelectedLayers(!1);this.config.searchSourceSettings=r;this.config.downloadSettings=
{type:k("input[type\x3dradio]:checked",this.downloadTabNode)[0].value,layers:this._downloadTab.getLayers(),extractDataTaskURL:h,downloadingFileOptions:this._downloadTab.getDownloadingFileOptions()};this.config.reportSettings={printTaskURL:this._downloadTab.getPrintReportGPServiceURL(),footnote:this._downloadTab.getFootnoteForReport(),logo:this._downloadTab.getLogo(),columnTitleColor:this._downloadTab.getTableHeaderColor(),reportTitle:this._downloadTab.getReportTitle(),noDataConfiguredText:this._downloadTab.getNoDataText(),
naTextConfiguredValue:this._downloadTab.getNaTextValue(),customOptions:this._downloadTab.getCustomOptions(),defaultPrintOption:this._downloadTab.getDefaultPrintOption(),displaySummaryInReport:this._downloadTab.getDisplaySummaryCheckBoxStatus(),hideZeroValueRow:this._downloadTab.getRowshavingAllZeroValueCheckBoxStatus(),hideNullValueRow:this._downloadTab.getRowshavingAllNullValueCheckBoxStatus()};this.config.drawToolSelectableLayers=this._getDrawToolSelectableLayers();this.pointSelectToolCheckBox&&
(this.config.showPointTool=this.pointSelectToolCheckBox.checked);this.polylineSelectToolCheckBox&&(this.config.showPolylineTool=this.polylineSelectToolCheckBox.checked);this.extentSelectToolCheckBox&&(this.config.showExtentTool=this.extentSelectToolCheckBox.checked);this.polygonSelectToolCheckBox&&(this.config.showPolygonTool=this.polygonSelectToolCheckBox.checked);this.circleSelectToolCheckBox&&(this.config.showCircleTool=this.circleSelectToolCheckBox.checked);return this.config}return!1},_getDrawToolSelectableLayers:function(){var h=
[];var r=this._selectLayerTable.getRows();d.forEach(r,w.hitch(this,function(I){I=this._selectLayerTable.getRowData(I);I.selectable&&h.push(I.selectableLayerID)}));return h},_validateLayers:function(){var h=!0;0===this._getSelectedLayers(!1).length&&(h=!1,this._errorMessage(this.nls.errorMsg.noLayerSelected,this.nls.analysisTab.analysisTabLabel));return h},_validateDuplicateLabelsForFields:function(h){var r=!0,I=[],M;for(M in h){I=[];for(var P in h)h[M]===h[P]&&I.push({label:P,item:h[M]});if(1<I.length)break}this._showDuplicateLabelsErrorMessage(I)||
(r=!1);return r},_showDuplicateLabelsErrorMessage:function(h){if(1<h.length){var r="";d.forEach(h,w.hitch(this,function(I,M){r+=I.label;M<h.length-1&&(r+=",")}));this._errorMessage(C.substitute(this.nls.errorMsg.duplicateFieldsLabels,{labelText:h[0].item,itemNames:r}),this.nls.analysisTab.analysisTabLabel);return!1}return!0},_initConfiguration:function(){this._symbolParams={};this.defaultBufferDistanceTextBox.constraints={min:0};this.defaultBufferDistanceTextBox.validator=w.hitch(this,function(){return this._numberValidator(this.defaultBufferDistanceTextBox)});
this.maxFeatureCountTextBox.constraints={min:1,places:0};this.searchToleranceTextBox.constraints={min:0};this.searchToleranceTextBox.intermediateChanges=!0;var h=[{node:this.pointSymbolNode,symbolType:"point",geometryType:"esriGeometryPoint",title:this.nls.generalTab.pointSymbolChooserPopupTitle},{node:this.lineSymbolNode,symbolType:"polyline",geometryType:"esriGeometryLine",title:this.nls.generalTab.lineSymbolChooserPopupTitle},{node:this.polygonSymbolNode,symbolType:"polygon",geometryType:"esriGeometryPolygon",
title:this.nls.generalTab.polygonSymbolChooserPopupTitle},{node:this.aoiSymbolNode,symbolType:"aoiSymbol",geometryType:"esriGeometryPolygon",title:this.nls.generalTab.aoiSymbolChooserPopupTitle}];this._initTabs();this._enableDisableAOIToolsTextBox();d.forEach(h,w.hitch(this,function(r){this._createSymbolPicker(r.node,r.symbolType,r.geometryType,r.title)}));a(this.lengthUnitsDropDown,"change",w.hitch(this,function(r){this._displaySearchTolerance(r)}));this.searchToleranceTextBox.validator=w.hitch(this,
function(){return this._numberValidator(this.searchToleranceTextBox)})},_numberValidator:function(h){h=h.get("value");return isNaN(h)?!1:!0},_initTabs:function(){var h={title:this.nls.analysisTab.analysisTabLabel,content:this.analysisTabNode};var r={title:this.nls.downloadTab.downloadTabLabel,content:this.downloadTabNode};this._configurationTabsContainer=new K({tabs:[h,r,{title:this.nls.generalTab.generalTabLabel,content:this.generalTabNode},{title:this.nls.searchSourceSetting.searchSourceSettingTabTitle,
content:this.searchSourceTabNode}]},this.tabContainer);this.own(a(this._configurationTabsContainer,"tabChanged",w.hitch(this,function(){this._configurationTabsContainer.containerNode.scrollTop=0})));this.own(a(this._configurationTabsContainer.containerNode,"scroll",w.hitch(this,function(){var I=this._addLayerTable.getRows();d.forEach(I,w.hitch(this,function(M){M.layerSelector&&M.layerSelector.hideLayerChooser()}));this._searchSourceSettings&&this._searchSourceSettings._currentSourceSetting&&this._searchSourceSettings._currentSourceSetting.displayField&&
this._searchSourceSettings._currentSourceSetting.displayField.closeDropDown();this.traverseUnitsNode.closeDropDown();this.traverseDirectionUnitsNode.closeDropDown();this.areaUnitsDropDown.closeDropDown();this.lengthUnitsDropDown.closeDropDown();this.defaultBufferUnitsNode.closeDropDown();this._downloadTab.closeDownloadTabDropdowns()})));this._configurationTabsContainer.startup();u.has("chrome")&&D.add(this._configurationTabsContainer.containerNode,"esriRTLTabContainerNode")},_initLoading:function(){this.loading=
new B({hidden:!0});var h=c(".widget-setting-popup")[0];this.loading.placeAt(h);this.loading.startup()},_createSearchSourceSettings:function(){var h={};this.config&&this.config.hasOwnProperty("searchSourceSettings")&&(h=this.config.searchSourceSettings);this._searchSourceSettings=new z({nls:this.nls,map:this.map,appConfig:this.appConfig,shelter:this.loading,config:h},q.create("div",{},this.searchSourceTabNode));this.own(a(this._searchSourceSettings,"invalid-source-setting",w.hitch(this,function(){this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,
this.nls.searchSourceSetting.searchSourceSettingTabTitle)})))},setConfig:function(){if(this.config){this.config.aoiTabText?this.aoiTabTextBox.set("value",this.config.aoiTabText):this.aoiTabTextBox.set("value",this.nls.generalTab.aoiTabText);this.config.reportTabText?this.reportsTabTextBox.set("value",this.config.reportTabText):this.reportsTabTextBox.set("value",this.nls.generalTab.reportTabText);this.config.placenameButtonText?this.placeNameTextBox.set("value",this.config.placenameButtonText):this.placeNameTextBox.set("value",
this.nls.analysisTab.placenameButtonText);this.config.drawToolsButtonText?this.drawToolTextBox.set("value",this.config.drawToolsButtonText):this.drawToolTextBox.set("value",this.nls.analysisTab.drawToolsButtonText);this.config.shapefileButtonText?this.uploadShapeFileTextBox.set("value",this.config.shapefileButtonText):this.uploadShapeFileTextBox.set("value",this.nls.analysisTab.shapefileButtonText);this.config.coordinatesButtonText?this.coordinatesTextBox.set("value",this.config.coordinatesButtonText):
this.coordinatesTextBox.set("value",this.nls.analysisTab.coordinatesButtonText);(this.config.defaultBufferDistance||0===this.config.defaultBufferDistance)&&this.defaultBufferDistanceTextBox.set("value",this.config.defaultBufferDistance);this.config.traverseUnit&&this._setDropDownSavedOptionSelected(this.traverseUnitsNode,this.config.traverseUnit);this.config.traverseDirectionUnit&&this._setDropDownSavedOptionSelected(this.traverseDirectionUnitsNode,this.config.traverseDirectionUnit);this.config.areaUnits&&
("Standard"===this.config.areaUnits||"Metric"===this.config.areaUnits||"Feet"===this.config.areaUnits||"Miles"===this.config.areaUnits||"Meters"===this.config.areaUnits||"Kilometers"===this.config.areaUnits||"Hectares"===this.config.areaUnits?(this._setBackwardCompatibilityAreaUnit(this.areaUnitsDropDown,this.config.areaUnits),this.config.hasOwnProperty("lengthUnits")||this._setBackwardCompatibilityLengthUnit(this.lengthUnitsDropDown,this.config.areaUnits)):this._setDropDownSavedOptionSelected(this.areaUnitsDropDown,
this.config.areaUnits));this.config.lengthUnits&&this._setDropDownSavedOptionSelected(this.lengthUnitsDropDown,this.config.lengthUnits);this.config.maxFeaturesForAnalysis&&this.maxFeatureCountTextBox.set("value",this.config.maxFeaturesForAnalysis);this.config.defaultBufferUnit&&this._setDropDownSavedOptionSelected(this.defaultBufferUnitsNode,this.config.defaultBufferUnit);(this.config.searchTolerance||0===this.config.searchTolerance)&&this.searchToleranceTextBox.set("value",this.config.searchTolerance);
this.config.hasOwnProperty("lengthUnits")?this._displaySearchTolerance(this.lengthUnitsDropDown.get("value")):this._displaySearchTolerance(this.areaUnitsDropDown.get("value"));this.placeNameCheckBox.setValue(this.config.showPlacenameWidget);this.drawToolCheckBox.setValue(this.config.showDrawToolsWidget);this.drawToolCheckBox.checked?D.remove(this.selectDrawToolFieldSet,"esriCTHidden"):D.add(this.selectDrawToolFieldSet,"esriCTHidden");this.uploadShapefileCheckBox.setValue(this.config.showShapefileWidget);
this.coordinatesCheckBox.setValue(this.config.showCoordinatesWidget);this.allowUploadShapefileCheckBox.setValue(this.config.allowShapefilesUpload);this.allowVisibleLayerAnalysisCheckBox.setValue(this.config.allowVisibleLayerAnalysisOnly);if(this._addLayerTable&&this.config.layers){this._addLayerTable.clear();for(var h=0;h<this.config.layers.length;h++)this._populateLayerTableRow(this.config.layers[h],!1)}this._createSearchSourceSettings();this.config.hasOwnProperty("showPointTool")&&this.pointSelectToolCheckBox.setValue(this.config.showPointTool);
this.config.hasOwnProperty("showPolylineTool")&&this.polylineSelectToolCheckBox.setValue(this.config.showPolylineTool);this.config.hasOwnProperty("showExtentTool")&&this.extentSelectToolCheckBox.setValue(this.config.showExtentTool);this.config.hasOwnProperty("showPolygonTool")&&this.polygonSelectToolCheckBox.setValue(this.config.showPolygonTool);this.config.hasOwnProperty("showCircleTool")?this.circleSelectToolCheckBox.setValue(this.config.showCircleTool):this.circleSelectToolCheckBox.setValue("false")}},
_displaySearchTolerance:function(h){this.searchToleranceLabel.innerHTML="Feet"===h||"Miles"===h?this.nls.analysisTab.searchToleranceLabelText+" ("+this.nls.units.feet+")":"Meters"===h||"Kilometers"===h||"Hectares"===h?this.nls.analysisTab.searchToleranceLabelText+" ("+this.nls.units.meters+")":this.nls.analysisTab.searchToleranceLabelText},_onEditLayerClicked:function(h){var r=h.layerInfo;this._curRow=h;h.layerSelector&&h.layerSelector.hideLayerChooser();r||(r={selectedFields:null},h.layerInfo=r);
r.layerLabel=h.labelText.value;h.layerSelector.getSelectedItem()&&(h.layerSelector.getSelectedItem().name&&(r.layerName=h.layerSelector.getSelectedItem().name),h.layerSelector.getSelectedItem().layerInfo&&(r.layer=h.layerSelector.getSelectedItem().layerInfo));r={nls:this.nls,featureLayer:r.layer.layerObject,selectedFields:h.selectedFields,groupbyfieldCheckBoxStatus:h.groupbyfieldCheckBoxStatus,layerGridInfo:r,layerInfo:this._layerInfosObj.getLayerInfoById(r.layer.layerObject.id),currentRow:h};this._createFieldSelectorPopup(r,
h)},_createFieldSelectorPopup:function(h,r){var I=!0;var M=h.layerGridInfo.selectedFields;var P=new L(h);var y=q.create("button",{title:this.nls.common.ok});y.label=this.nls.common.ok;var G=q.create("button",{title:this.nls.common.cancel});G.label=this.nls.common.cancel;var R=new m({titleLabel:this.nls.analysisTab.addFieldsPopupTitle+": "+r.layerSelector.getSelectedItem().name,content:P,width:830,height:500,autoHeight:!0,buttons:[y,G]});y.onClick=w.hitch(this,function(){var T={};I=!0;this._curRow.sortInfo||
(this._curRow.sortInfo={});var U=P.okButtonClicked();this._curRow.selectedFields=U.selectedFields;this._curRow.groupbyfieldCheckBoxStatus=U.groupbyfieldCheckBoxStatus;this._curRow.sortInfo=U.sortInfo;this._validateFields(this._curRow.selectedFields,this._curRow);for(var Y in this._curRow.selectedFields)""!==this._curRow.selectedFields[Y].label.trim()&&(T[this._curRow.selectedFields[Y].alias]=this._curRow.selectedFields[Y].label.trim());(I=this._validateDuplicateLabelsForFields(T))?(this._curRow=null,
P.destroy(),P=null,R.close()):this._curRow.selectedFields=h.layerGridInfo.selectedFields=M});G.onClick=w.hitch(this,function(){this._curRow=null;P.destroy();P=null;R.close()})},_enableDisableAOIToolsTextBox:function(){this.own(a(this.placeNameCheckBox,"change",w.hitch(this,function(h){h?this.placeNameTextBox.set("disabled",!1):this.placeNameTextBox.set("disabled",!0)})));this.own(a(this.drawToolCheckBox,"change",w.hitch(this,function(h){h?this.drawToolTextBox.set("disabled",!1):this.drawToolTextBox.set("disabled",
!0)})));this.own(a(this.uploadShapefileCheckBox,"change",w.hitch(this,function(h){h?this.uploadShapeFileTextBox.set("disabled",!1):this.uploadShapeFileTextBox.set("disabled",!0)})));this.own(a(this.coordinatesCheckBox,"change",w.hitch(this,function(h){h?(this.coordinatesTextBox.set("disabled",!1),this.traverseUnitsNode.set("disabled",!1),this.traverseDirectionUnitsNode.set("disabled",!1)):(this.coordinatesTextBox.set("disabled",!0),this.traverseUnitsNode.set("disabled",!0),this.traverseDirectionUnitsNode.set("disabled",
!0))})))},_setBackwardCompatibilityAreaUnit:function(h,r){switch(r){case "Standard":r="Acres";h.set("value","Acres");break;case "Metric":r="SquareKilometers";h.set("value","SquareKilometers");break;case "Feet":r="SquareFeet";h.set("value","SquareFeet");break;case "Miles":r="Acres";h.set("value","Acres");break;case "Meters":r="SquareMeters";h.set("value","SquareMeters");break;case "Kilometers":r="SquareKilometers";h.set("value","SquareKilometers");break;case "Hectares":r="Hectares",h.set("value","Hectares")}d.forEach(h.options,
w.hitch(this,function(I){I.selected=I.value===r?"selected":!1}))},_setBackwardCompatibilityLengthUnit:function(h,r){switch(r){case "Standard":r="Miles";h.set("value","Miles");break;case "Metric":r="Kilometers";h.set("value","Kilometers");break;case "Feet":r="Feet";h.set("value","Feet");break;case "Miles":r="Miles";h.set("value","Miles");break;case "Meters":r="Meters";h.set("value","Meters");break;case "Kilometers":r="Kilometers";h.set("value","Kilometers");break;case "Hectares":r="Kilometers",h.set("value",
"Kilometers")}d.forEach(h.options,w.hitch(this,function(I){I.selected=I.value===r?"selected":!1}))},_setDropDownSavedOptionSelected:function(h,r){h.setValue(r);d.forEach(h.options,w.hitch(this,function(I){I.selected=I.value===r?"selected":!1}))},_validateConfigForInputFields:function(h,r,I){var M=!0;d.some(k(".esriCTTextBox",h),w.hitch(this,function(P){if(t.byNode(P)&&!t.byNode(P).disabled&&!t.byNode(P).isValid())return"analysis"===I?this._errorMessage(r,this.nls.analysisTab.analysisTabLabel):this._errorMessage(r,
this.nls.generalTab.generalTabLabel),M=!1,!0}));return M},_validateConfigForBufferDistanceFields:function(h,r){var I=!0;d.some(k(".esriCTTextBox",h),w.hitch(this,function(M){if(t.byNode(M)&&(!t.byNode(M).isValid()||isNaN(t.byNode(M).get("value"))))return this._errorMessage(r,this.nls.generalTab.generalTabLabel),I=!1,!0}));return I},_validateConfigForCheckBoxes:function(){var h=!1;d.some(k(".esriCTCheckBox",this.aoiToolsSection),w.hitch(this,function(r){if(t.byNode(r).checked)return h=!0}));h||this._errorMessage(this.nls.errorMsg.atLeastOneCheckboxCheckedErrorMsg,
this.nls.analysisTab.analysisTabLabel);return h},_errorMessage:function(h,r){(new H({message:h,buttons:[{label:this.nls.common.ok}]})).message=h;this._configurationTabsContainer&&r&&this._configurationTabsContainer.getSelectedTitle()!==r&&this._configurationTabsContainer.selectTab(r)},_createSymbolPicker:function(h,r,I,M){var P={};if(I){P.type=f.getSymbolTypeByGeometryType(I);P.symbol=this.config&&this.config.placenameSymbology[r]?l.fromJson(this.config.placenameSymbology[r]):l.fromJson(this.config.aoiSymbol);
var y=this._createPreviewContainer(h,!1);var G={symbolChooserTitle:M,symbolParams:P,symbolType:r,nls:this.nls};this._showSelectedSymbol(y,P.symbol,r);this.own(a(y,"click",w.hitch(this,function(){P.symbol=l.fromJson(this._symbolParams[r]);this._initSymbolChooserPopup(G,y)})))}return y},_createPreviewContainer:function(h,r){r?(h=q.create("table",{cellspacing:"0",cellpadding:"0"},h),h=q.create("tr",{"class":"esriCTTRPreviewText"},h),r=q.create("td",{},h),q.create("div",{innerHTML:this.nls.generalTab.previewLabel,
"class":"esriCTSymbolPreviewText"},r),h=q.create("td",{},h),h=q.create("div",{"class":"esriCTSymbolChooserNode"},h)):h=q.create("div",{"class":"esriCTSymbolChooserNode"},h);return h},_initSymbolChooserPopup:function(h,r){var I=new F(h);I.onOkClick=w.hitch(this,function(){var M;I.symbolChooser.getValidSymbol?(M=I.symbolChooser.getValidSymbol())?(this._showSelectedSymbol(r,M,h.symbolType),I.popup.close()):this._errorMessage(this.nls.generalTab.invalidSymbolValue):(M=I.symbolChooser.getSymbol(),this._showSelectedSymbol(r,
M,h.symbolType),I.popup.close())})},_showSelectedSymbol:function(h,r,I){q.empty(h);if(r){var M=n.createSymbolNode(r);M||(M=q.create("div"));q.place(M,h);this._symbolParams[I]=r.toJson()}},_initDownloadTab:function(){this._downloadTab=new b({map:this.map,downloadOptions:this.config.downloadSettings,reportSettings:this.config.reportSettings,loadingIndicator:this.loading,nls:this.nls,appConfig:this.appConfig,folderUrl:this.folderUrl,layerInfosObj:this._layerInfosObj});this._downloadTab.placeAt(this.downloadTabNode)},
_setDownloadInfo:function(h){var r;if(this._downloadTab&&(r=this._getLayerInfo(h,!0))){var I=v({url:r.url+"?f\x3dpjson"});I.then(w.hitch(this,function(M){r.capabilities=M.capabilities;this._downloadTab.checkLayerForDownloadOptions(r,h.rowIndex)}))}},_removeDownloadInfo:function(h){this._downloadTab&&this._downloadTab.deleteRow(h)},_validateGPTaskDownloadOption:function(h){return"extractDataTask"===k("input[type\x3dradio]:checked",this.downloadTabNode)[0].value&&""===h?(this._errorMessage(this.nls.downloadTab.errorMessages.noExtractDataTaskURL,
this.nls.downloadTab.downloadTabLabel),!1):!0},_getSelectedLayers:function(h){var r,I=[];var M=this._addLayerTable.getRows();d.forEach(M,w.hitch(this,function(P){P.layerSelector&&(r=this._getLayerInfo(P,h),r.selectedFields=P.selectedFields,r.groupbyfieldCheckBoxStatus=P.groupbyfieldCheckBoxStatus,!P.sortInfo&&(P.sortInfo={sortOrder:"Asc",sortingField:""},r||r.geometryType)&&("esriGeometryPoint"===r.geometryType&&(P.sortInfo.sortingField="esriCTCountField"),"esriGeometryPolyline"===r.geometryType&&
(P.sortInfo.sortingField="esriCTTotalLengthField"),"esriGeometryPolygon"===r.geometryType&&(P.sortInfo.sortingField="esriCTTotalAreaField")),r.sortInfo=P.sortInfo,I.push(r))}));return I},_getLayerInfo:function(h,r){var I;if(I=h.layerSelector.getSelectedItem()){var M={url:I.layerInfo.layerObject.url,geometryType:I.layerInfo.layerObject.geometryType,id:I.layerInfo.id,label:u.stripHTML(h.labelText&&h.labelText.value?h.labelText.value.trim():""),layerName:I.layerInfo.title,layerVersion:I.layerInfo.layerObject.version};
r&&(M.capabilities=I.layerInfo.layerObject.capabilities);h.layerInfo&&h.layerInfo.selectedFields&&(M.selectedFields=h.layerInfo.selectedFields);M.layerId=I.layerId?I.layerId:M.url.substr(M.url.lastIndexOf("/")+1,M.url.length);h=M.url.substr(0,M.url.lastIndexOf("/")+1);M.baseURL=h}return M},_createLayerChooserMapArgs:function(){return{multiple:!1,createMapResponse:this.map.webMapResponse,filter:N.createFeaturelayerFilter([],!1,!1)}},_initLayerSelector:function(){this.loading.show();this._idsOfSelectedLayers=
[];this._totalLayers=[];var h=this._createLayerChooserMapArgs();this._layerChooserFromMap=new N(h);this._layerChooserFromMap.startup();h=this._layerChooserFromMap.layerInfosObj.getLayerInfoArray();var r=[];this._getAllFilteredLayers(h,r);S(r).then(w.hitch(this,function(){this.loading.hide();0<this._totalLayers.length?D.remove(this.btnAddLayer,"esriCTDisabled"):(D.add(this.btnAddLayer,"esriCTDisabled"),D.remove(this.lblNoValidLayers,"esriCTHidden"));this._createAddLayerGrid();this._createSelectLayerGrid();
this.setConfig(this.config);this.own(a(this.btnAddLayer,"click",w.hitch(this,this._addLayerButtonClicked)));this._populateSelectableLayer()}))},_getAllFilteredLayers:function(h,r){d.forEach(h,w.hitch(this,function(I){if(I.isLeaf()){var M=new Q;this._layerChooserFromMap.filter(I).then(w.hitch(this,function(P){P&&this._totalLayers.push(I);M.resolve()}));r.push(M)}else this._getAllFilteredLayers(I.newSubLayers,r)}))},_captureAddLayerTableEvents:function(){var h,r,I;this.own(a(this._addLayerTable,"actions-edit",
w.hitch(this,this._onEditLayerClicked)));this.own(a(this._addLayerTable,"row-up",w.hitch(this,function(M){h=this._idsOfSelectedLayers[M.rowIndex];r=this._idsOfSelectedLayers[M.rowIndex+1];this._idsOfSelectedLayers.splice(M.rowIndex,2,r,h);this._downloadTab&&this._downloadTab.rowUp(M.rowIndex)})));this.own(a(this._addLayerTable,"row-down",w.hitch(this,function(M){I=this._idsOfSelectedLayers[M.rowIndex];r=this._idsOfSelectedLayers[M.rowIndex-1];this._idsOfSelectedLayers.splice(M.rowIndex-1,2,I,r);this._downloadTab&&
this._downloadTab.rowDown(M.rowIndex)})));this._addLayerTable.onBeforeRowDelete=w.hitch(this,this._deleteLayer)},_createAddLayerGrid:function(){this._addLayerTable=new A({fields:[{name:"field",title:this.nls.analysisTab.addLayerNameTitle,type:"empty",editable:"true",width:"200px"},{name:"field",title:this.nls.common.label,type:"empty",editable:"true",width:"200px"},{name:"actions",title:this.nls.common.actions,width:"80px",type:"actions",actions:["up","down","edit","delete"]}],selectable:!1});this._addLayerTable.placeAt(this.addLayerTableNode);
this._captureAddLayerTableEvents();this._addLayerTable.startup()},_createSelectLayerGrid:function(){this._selectLayerTable=new A({fields:[{name:"selectable",title:"",type:"checkbox","class":"isSelectable",width:"5%",editable:!0,hidden:!1},{name:"selectableLayerName",title:this.nls.analysisTab.addLayerNameTitle,type:"text",editable:!1,width:"95%",hidden:!1},{name:"selectableLayerID",title:"",type:"text",editable:!1,width:"0%",hidden:!0}],selectable:!1});this._selectLayerTable.placeAt(this.drawToolSelectableLayerContainer);
this._selectLayerTable.startup()},_populateSelectableLayer:function(){d.forEach(this._totalLayers,w.hitch(this,function(h){var r=!0;this.config&&this.config.hasOwnProperty("drawToolSelectableLayers")&&(r=!1,-1<this.config.drawToolSelectableLayers.indexOf(h.id)&&(r=!0));this._selectLayerTable.addRow({selectable:r,selectableLayerName:h.title,selectableLayerID:h.id})}))},_addLayerLabel:function(h,r){var I=k(".simple-table-cell",h)[1];D.add(I,"esriCTLayerInputCell");var M=new g({"class":"esriCTLayerLabelTextBox"});
M.placeAt(I);M.startup();h.labelText=M;r&&h.labelText.set("value",r)},_populateLayerTableRow:function(h,r){var I;var M=this._addLayerTable.addRow({});if(M.success&&M.tr){M=M.tr;var P=h.selectedFields;h.sortInfo&&(M.sortInfo=h.sortInfo);if(!P){P={};if(I=h.getPopupInfo())var y=I.fieldInfos;var G=h.layerObject.fields;d.forEach(y,w.hitch(this,function(R){R.visible&&R.fieldName.toLowerCase()!==h.layerObject.objectIdField.toLowerCase()&&(d.forEach(G,w.hitch(this,function(T){R.fieldName===T.name&&(R=w.clone(R),
R.label=null,P[R.fieldName]=R)})),!P.hasOwnProperty(R.fieldName)&&I&&I.expressionInfos&&d.forEach(I.expressionInfos,w.hitch(this,function(T){T=w.clone(T);T.name="expression/"+T.name;R.fieldName===T.name&&(P[R.fieldName]=T,P[R.fieldName].alias=T.title+" {"+T.name+"}")})))}));0===Object.keys(P).length&&(P=null)}this._validateFields(P,M);M.layerInfo=h;M.selectedFields=P;M.groupbyfieldCheckBoxStatus=h.groupbyfieldCheckBoxStatus;this._addLayerLabel(M,h.label);this._addLayerDropDown(M,h,r)}},_validateFields:function(h,
r){var I;(I=k(".simple-table-cell",r)[2])&&!h?(r.errorDiv||(r.errorDiv=q.create("div",{"class":"esriCTFieldError"},I),r.errorSpan=q.create("span",{"class":"jimu-icon jimu-icon-error",title:this.nls.errorMsg.noFieldSelected},r.errorDiv)),D.remove(r.errorSpan,"esriCTHidden")):this._enableOk(r)},_enableOk:function(h){h&&h.errorSpan&&(D.add(h.errorSpan,"esriCTHidden"),k(".esriCTFieldError",this.addLayerTableNode).length===k(".esriCTFieldError \x3e .esriCTHidden",this.addLayerTableNode).length&&(h=c(".button-container")[0],
p.set(h.children[2],"display","inline-block"),p.set(h.children[3],"display","none")))},_addLayerButtonClicked:function(){if(!D.contains(this.btnAddLayer,"esriCTDisabled")){this.loading.show();var h=this._pickUnusedLayer();this._populateLayerTableRow(h[0],!0)}},_pickUnusedLayer:function(){return this._idsOfSelectedLayers.length<this._totalLayers.length?d.filter(this._totalLayers,w.hitch(this,function(h){return 0>this._idsOfSelectedLayers.indexOf(h.id)})):this._totalLayers},_addLayerDropDown:function(h,
r,I){h.layerSelector&&h.layerSelector.destroy();var M=this._createLayerChooserMapArgs();var P=new N(M);P.startup();var y=k(".simple-table-cell",h)[0];D.add(y,"esriCTLayerInputCell");P=new O({layerChooser:P});P.placeAt(y);P.startup();h.layerSelector=P;if(r&&(P.setSelectedLayer(r),this._addLayer(h,r,I),M.createMapResponse.errors&&M.createMapResponse.errors[0]&&M.createMapResponse.errors[0].name&&"Error"===M.createMapResponse.errors[0].name&&null===P.getSelectedItem())){for(I=0;I<this.config.downloadSettings.layers.length;I++)if(r.url===
this.config.downloadSettings.layers[I].url){this.config.downloadSettings.layers.splice(I,1);break}this._deleteLayer(h);this._addLayerTable.deleteRow(h)}this.own(a(P,"selection-change",w.hitch(this,function(G){G&&0<G.length&&G[0]&&G[0].hasOwnProperty("id")?h.layerInfo&&G[0].id!==h.layerInfo.id&&(this._updateLayer(h,G),h.layerInfo=G[0]):(this._errorMessage(this.nls.errorMsg.errorInSelectingLayer),this._deleteLayer(h),this._addLayerTable.deleteRow(h))})))},_addLayer:function(h,r,I){r&&r.hasOwnProperty("id")&&
(this._idsOfSelectedLayers.push(r.id),I&&this._setDownloadInfo(h))},_updateLayer:function(h,r){this.loading.show();this._idsOfSelectedLayers[h.rowIndex]=r[0].id;this._setDownloadInfo(h);var I=this._layerInfosObj.getLayerInfoById(r[0].id);var M={};if(r=I.getPopupInfo())var P=r.fieldInfos;var y=I.layerObject.fields;d.forEach(P,w.hitch(this,function(G){G.visible&&G.fieldName.toLowerCase()!==I.layerObject.objectIdField.toLowerCase()&&d.forEach(y,w.hitch(this,function(R){G.fieldName===R.name&&(G=w.clone(G),
G.label=null,M[G.fieldName]=G)}))}));0===Object.keys(M).length&&(M=null);h.selectedFields=M;this._validateFields(h.selectedFields,h);this.loading.hide()},_deleteLayer:function(h){this.loading.show();h.layerSelector&&h.layerSelector.destroy();this._removeDownloadInfo(h.rowIndex);this._idsOfSelectedLayers.splice(h.rowIndex,1);D.remove(this.btnAddLayer,"esriCTDisabled");this._enableOk(h);this.loading.hide();return!0},_validateMaxFeatureCount:function(){if(0<this.maxFeatureCountTextBox.get("value")&&
this.maxFeatureCountTextBox.isValid())return!0;this._errorMessage(this.nls.errorMsg.errorInMaxFeatureCount,this.nls.analysisTab.analysisTabLabel);return!1},_showErrorMsgforInvalidFields:function(){var h=this._addLayerTable.getRows();for(var r in h){var I=h[r];var M=c(".esriCTFieldError",I);var P=c(".esriCTFieldError \x3e .esriCTHidden",I);if(M.length!==P.length){this._errorMessage(this.nls.analysisTab.invalidLayerErrorMsg+" "+I.layerSelector.getSelectedItem().name,this.nls.analysisTab.analysisTabLabel);
break}}},_validateCustomOptions:function(){var h=this._downloadTab.validateCustomOptions();return 0<h.length?(this._errorMessage(h[0],this.nls.downloadTab.downloadTabLabel),!1):!0},_validateDrawTools:function(){return!this.drawToolCheckBox.checked||this.pointSelectToolCheckBox.checked||this.polylineSelectToolCheckBox.checked||this.extentSelectToolCheckBox.checked||this.polygonSelectToolCheckBox.checked||this.circleSelectToolCheckBox.checked||0!==this._getDrawToolSelectableLayers().length?!0:(this._errorMessage(this.nls.analysisTab.selectingDrawToolErrorMessage,
this.nls.analysisTab.analysisTabLabel),!1)}})});